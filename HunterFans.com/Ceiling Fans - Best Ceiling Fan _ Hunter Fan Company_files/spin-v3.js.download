(function(){var console={};console.log=function(){};(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');randomSample=Math.floor((Math.random()*10)+1);if(randomSample==5){varUID='UA-70562003-11';varShop=Shopify.shop;ga('create',varUID,'auto',{'name':'SpinSale'});ga('SpinSale.send','event','Script Load Sample 10% mirror1-client1',varShop);}
var loadScript=function(url,callback){var script=document.createElement("script");script.type="text/javascript";if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;callback();}};}else{script.onload=function(){callback();};}
script.src=url;document.getElementsByTagName("head")[0].appendChild(script);};var mainScript=function($){window.ExitPopContent="";window.Show=false;var hash=window.location.hash.substring(1);console.log('Hash: '+hash);if(hash=='previewmode=true'){console.log('Preview mode');window.ExitPopTestMode=true;window.ExitPopCookie=false;}
function appendStylesheet(pathToStylesheet){var head=document.getElementsByTagName("head")[0];var css=document.createElement("link");css.setAttribute("rel","stylesheet")
css.setAttribute("type","text/css")
css.setAttribute("href",pathToStylesheet)
head.appendChild(css);}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
function writeCookie(varFrequency,action){var date=new Date();date.setTime(date.getTime()+(varFrequency*60*60*1000));var expires=date.toGMTString();if(action=='close'){document.cookie="spinasale1=hide;expires="+expires+";path=/;";}
if(action=='played'){document.cookie="spinasale2=hide;expires="+expires+";path=/;";}
console.log("Cookie written for: "+varFrequency+" hours.");}
function mobilecheck(){console.log('Mobile check function accessed.');var check=false;(function(a,b){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;}
varRestrictTag=false;function readTag1(){varTag=$("meta[name='spinasale']").attr('content');if(typeof varTag!=='undefined'){return true;}
else{return false;}}
function readTag2(){varTag=$("meta[name='spinasale-override']").attr('content');if(typeof varTag!=='undefined'){return true;}
else{return false;}}
varRestrictTag1=readTag1();varRestrictTag2=readTag2();console.log('Restrict tag 1: '+varRestrictTag1);console.log('Restrict tag 2: '+varRestrictTag2);varRestrict=false;if(varRestrictTag1==true&&varRestrictTag2!=true){varRestrict=true;console.log('Dont show on this page!');}
if(varRestrictTag1==true&&varRestrictTag2==true){varRestrict=false;console.log('Show on this page!');}
console.log('Restrict result: '+varRestrict);var varCookie1=readCookie('spinasale1');var varCookie2=readCookie('spinasale2');var hash=window.location.hash.substring(1);if(hash=='showspin'){loadEmailWheel(testMode=true);console.log('Show in test mode.');}
if(varCookie2!=="hide"&&hash!=='showspin'&&varRestrictTag!==true){console.log("No existing 'played' cookie found, not on restricted page and not in test mode. Show pop-up.");window.cookie=false;var str=window.location.pathname;console.log('Url:'+str);var onOrderConfirmation=str.indexOf('checkouts')>=0;console.log('On order confirmation. Dont show.');if(onOrderConfirmation===false){console.log('Not on order confirmation, show pop-up.');loadEmailWheel(testMode=false);}}else{console.log("Existing cookie found or on restrict page and not in preview mode. Don't show pop-up.");window.cookie=true;}
$('body').on('click','#launchSpin',function(){console.log("Click triggered on any tab.");triggerEmailWheel(testMode=false,clickTrigger=true);});function loadEmailWheel(testMode,clickTrigger){console.log('Start of loadEmailWheel function');appendStylesheet("//mirror1-client1.spinasale.com/dependencies/fancybox/spin.css");varShop=Shopify.shop;if(varShop!=undefined){if(typeof(Storage)!=="undefined"&&sessionStorage.getItem("spin_modalId")!=null&&testMode!=true){console.log('LOAD from Session');window.modalId=sessionStorage.getItem("spin_modalId");varPlan=sessionStorage.getItem("spin_plan");window.Plan=sessionStorage.getItem("spin_plan");varToggle=sessionStorage.getItem("spin_toggle");var varToggle=(varToggle==="true");console.log('toggle value from session 1: '+sessionStorage.getItem("spin_toggle"));console.log('toggle value from session 2: '+varToggle);varFrequency=sessionStorage.getItem("spin_frequency");window.Frequency=sessionStorage.getItem("spin_frequency");varMobileTrigger=sessionStorage.getItem("spin_mobile_trigger");var varMobileTrigger=(varMobileTrigger==="true");varDesktopTrigger=sessionStorage.getItem("spin_desktop_trigger");var varDesktopTrigger=(varDesktopTrigger==="true");varDelayTrigger=sessionStorage.getItem("spin_delay_trigger");var varDelayTrigger=(varDelayTrigger==="true");varDelay=sessionStorage.getItem("spin_delay");window.Delay=sessionStorage.getItem("spin_delay");varTargetingPatterns=JSON.parse(sessionStorage.getItem("spin_targeting_patterns"));console.log('Targeting patterns from session:'+varTargetingPatterns);varTargetingMethod=sessionStorage.getItem("spin_targeting_method");varTabToggle=sessionStorage.getItem("spin_tab_toggle");var varTabToggle=(varTabToggle==="true");varTabText=sessionStorage.getItem("spin_tab_text");varTabPosition=sessionStorage.getItem("spin_position");varTabTextColor=sessionStorage.getItem("spin_tab_text_color");varTabBackgroundColor=sessionStorage.getItem("spin_tab_background_color");if(varToggle==true||testMode==true){console.log('load iframe');console.log('varToggle is true or testmode. Go to emailWheelLogic function');$('body').append('<div id="spinSaleFrameWrapper" style="background-color: none !important; position: fixed; width: 100%; height: 100%; top: 0; transform: translateX(-100%); -webkit-transform: translateX(-100%);"><iframe name="spinsale" style="width:100%; height:100%; border:0px; display:block;" src="https://mirror1-client1.spinasale.com/modals/frameV4/'+varShop+'"></div>');emailWheelLogic(testMode);}}else{console.log('LOAD from JSON');$.ajax({cache:true,url:'//mirror1-client1.spinasale.com/modals/jsonV4/'+varShop,dataType:"json",success:function(data){window.modalId=data.Modal.id;sessionStorage.setItem('spin_modalId',data.Modal.id);varPlan=data.User.plan;window.Plan=data.User.plan;sessionStorage.setItem('spin_plan',data.User.plan);varToggle=data.Modal.toggle;sessionStorage.setItem('spin_toggle',data.Modal.toggle);varFrequency=data.Modal.frequency;window.Frequency=data.Modal.frequency;sessionStorage.setItem('spin_frequency',data.Modal.frequency);varMobileTrigger=data.Modal.mobile_exit_intent;sessionStorage.setItem('spin_mobile_trigger',data.Modal.mobile_exit_intent);varDesktopTrigger=data.Modal.desktop_exit_intent;sessionStorage.setItem('spin_desktop_trigger',data.Modal.desktop_exit_intent);varDelayTrigger=data.Modal.delay_toggle;sessionStorage.setItem('spin_delay_trigger',data.Modal.delay_toggle);varDelay=data.Modal.delay;window.Delay=data.Modal.delay;sessionStorage.setItem('spin_delay',data.Modal.delay);varTargetingPatterns=data.Targeting.patterns;console.log('targeting patterns from json:'+varTargetingPatterns);sessionStorage.setItem('spin_targeting_patterns',JSON.stringify(data.Targeting.patterns));varTargetingMethod=data.Targeting.method;sessionStorage.setItem('spin_targeting_method',data.Targeting.method);varTabToggle=data.Modal.tab_toggle;sessionStorage.setItem('spin_tab_toggle',data.Modal.tab_toggle);varTabText=data.Modal.tab_text;sessionStorage.setItem('spin_tab_text',data.Modal.tab_text);varTabPosition=data.Modal.tab_position;sessionStorage.setItem('spin_position',data.Modal.tab_position);varTabTextColor=data.Modal.tab_text_color;sessionStorage.setItem('spin_tab_text_color',data.Modal.tab_text_color);varTabBackgroundColor=data.Modal.tab_background_color;sessionStorage.setItem('spin_tab_background_color',data.Modal.tab_background_color);console.log('variables loaded');if(varToggle==true||testMode==true){console.log('load iframe');$('body').append('<div id="spinSaleFrameWrapper" style="background-color: none !important; position: fixed; width: 100%; height: 100%; top: 0; transform: translateX(-100%); -webkit-transform: translateX(-100%);"><iframe name="spinsale" style="width:100%; height:100%; border:0px; display:block;" src="https://mirror1-client1.spinasale.com/modals/frameV4/'+varShop+'"></div>');emailWheelLogic(testMode);}}});}
function emailWheelLogic(testMode){console.log("start of loadEmailWheel2. Variable passing test varPlan:  "+varPlan);if(varTargetingPatterns!=null){console.log('pattern array in emailWheelLogic function: '+varTargetingPatterns);console.log('pattern array length: '+varTargetingPatterns.length);urlOriginal=window.location.pathname+window.location.search;console.log("Page URL: "+urlOriginal);var matchCount=0;var arrayLength=varTargetingPatterns.length;for(var i=0;i<arrayLength;i++){varTargetingPatterns[i]=varTargetingPatterns[i].replace(/[\^\$]/g,"\\$&");if(varTargetingPatterns[i].slice(-1)!="*"){varTargetingPatterns[i]+="$"}else{varTargetingPatterns[i]=varTargetingPatterns[i].slice(0,-1)}
if(varTargetingPatterns[i].substring(0,1)!="*"){varTargetingPatterns[i]="^"+varTargetingPatterns[i];}else{varTargetingPatterns[i]=varTargetingPatterns[i].substr(1);}
varTargetingPatterns[i]=varTargetingPatterns[i].replace(/[\-\[\]\{\}\(\)\*\+\?\.\|]/g,"\\$&");var patt=new RegExp(varTargetingPatterns[i],"i");var res=patt.test(urlOriginal);if(res==true){matchCount++;}}
console.log('match count: '+matchCount);targetingResult="";var targetingMethod=varTargetingMethod;if(targetingMethod=="include"&&matchCount>0&&varPlan>=3){targetingResult="show";}
if(targetingMethod=="include"&&matchCount==0&&varPlan>=3){targetingResult="hide";}
if(targetingMethod=="exclude"&&matchCount>0&&varPlan>=3){targetingResult="hide";}
if(targetingMethod=="exclude"&&matchCount==0&&varPlan>=3){targetingResult="show";}
console.log('Targeting result: '+targetingResult);}
if(targetingResult=="show"||targetingResult==""||testMode==true){console.log('Passed page targeting check.');console.log('varTabToggle value for tab:'+varTabToggle);console.log('testmode value for tab:'+testMode);if(varTabToggle==true){console.log('tab is toggled on. Proceed.');if(varToggle==true||testMode==true){console.log('show tab');appendStylesheet("//mirror1-client1.spinasale.com/css/tab.css");console.log('tab variable passing test. position: '+varTabPosition);if(varTabPosition=="top-left"||varTabPosition=="bottom-left"){$('body').append('<a href="#" class="spinasale-tab-link" id="launchSpin"><div class="spinasale-tab-wheel"></div><div class="spinasale-tab"></div></a>');}
if(varTabPosition=="top-right"||varTabPosition=="bottom-right"){$('body').append('<a href="#" class="spinasale-tab-link" id="launchSpin"><div class="spinasale-tab"></div><div class="spinasale-tab-wheel"></div></a>');}
$('.spinasale-tab').text(varTabText);$(".spinasale-tab-wheel").css("border","3px solid "+"#"+varTabBackgroundColor);$(".spinasale-tab-wheel").css("background-color","#"+varTabBackgroundColor);$(".spinasale-tab").css("background-color","#"+varTabBackgroundColor);function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;}
var red=hexToRgb("#"+varTabBackgroundColor).r;var green=hexToRgb("#"+varTabBackgroundColor).g;var blue=hexToRgb("#"+varTabBackgroundColor).b;if(0.299*red+0.587*green+0.114*blue>170){calcTabTextColor="#000000";}
else{calcTabTextColor="#ffffff";}
$(".spinasale-tab").css("color",calcTabTextColor);$(".spinasale-tab-link").css("z-index",'2147483647');$(".spinasale-tab-wheel").css("box-shadow","0 2px 4px 0 rgba(0,0,0,.2)");$(".spinasale-tab").css("box-shadow","0 2px 4px 0 rgba(0,0,0,.2)");if(varTabPosition=="top-left"||varTabPosition=="bottom-left"){$(".spinasale-tab-link").mouseenter(function(){$(".spinasale-tab-link").animate({'margin-left':(-6)+'px'},80)
$(".spinasale-tab-link").animate({'margin-left':(0)+'px'},80)
$(".spinasale-tab-link").animate({'margin-left':(6)+'px'},80)
$(".spinasale-tab-link").animate({'margin-left':(0)+'px'},80);});}
if(varTabPosition=="top-right"||varTabPosition=="bottom-right"){$(".spinasale-tab-link").mouseenter(function(){$(".spinasale-tab-link").animate({'margin-right':(-6)+'px'},80)
$(".spinasale-tab-link").animate({'margin-right':(0)+'px'},80)
$(".spinasale-tab-link").animate({'margin-right':(6)+'px'},80)
$(".spinasale-tab-link").animate({'margin-right':(0)+'px'},80);});}
if(varTabPosition=="bottom-left"){$(".spinasale-tab-link").css("bottom","5px");$(".spinasale-tab-link").css("left","-150px");$(".spinasale-tab").css("padding","2px 5px 2px 10px");$(".spinasale-tab").css("margin-left","-5px");$('.spinasale-tab-link').animate({'left':'5px'},700);}
if(varTabPosition=="bottom-right"){$(".spinasale-tab-link").css("bottom","5px");$(".spinasale-tab-link").css("right","-150px");$(".spinasale-tab").css("padding","2px 10px 2px 5px");$(".spinasale-tab").css("margin-right","-5px");$('.spinasale-tab-link').animate({'right':'5px'},700);}
if(varTabPosition=="top-left"){$(".spinasale-tab-link").css("top","5px");$(".spinasale-tab-link").css("left","-150px");$(".spinasale-tab").css("padding","2px 5px 2px 10px");$(".spinasale-tab").css("margin-left","-5px");$('.spinasale-tab-link').animate({'left':'5px'},700);}
if(varTabPosition=="top-right"){$(".spinasale-tab-link").css("top","5px");$(".spinasale-tab-link").css("right","-150px");$(".spinasale-tab").css("padding","2px 10px 2px 5px");$(".spinasale-tab").css("margin-right","-5px");$('.spinasale-tab-link').animate({'right':'5px'},700);}}}
if(testMode==true){setTimeout(function(){triggerEmailWheel(testMode=true,clickTrigger=false)},1000)}
console.log('closed cookie value:'+varCookie1);if(varDelayTrigger==true&&varToggle==true&&testMode!=true&&varCookie1!=="hide"){console.log('Initial timer check: '+sessionStorage.getItem('timer'));var updateTimer=function(){timer=sessionStorage.getItem('timer');console.log('Timer count: '+timer);timer--;sessionStorage.setItem('timer',timer);if(timer<=0){console.log('Delay timer fired.');triggerEmailWheel(testMode=false,clickTrigger=false);console.log('Post delay timer fired.');clearInterval(delayTimer);}};varDelay=window.Delay;console.log('Initial delay setting from json: '+varDelay);console.log('Timer check: '+sessionStorage.getItem('timer'));if(sessionStorage.getItem('timer')<=0||sessionStorage.getItem('timer')===null){console.log('Start new timer');sessionStorage.setItem('timer',varDelay);}
var delayTimer=setInterval(updateTimer,1000);}else{console.log("Toggled off. Delay trigger.");}
if(varToggle==true&&testMode!=true&&varCookie1!=="hide"){if(varDesktopTrigger==true&&mobilecheck()==false){var dtExit=new DialogTrigger(triggerEmailWheel,{trigger:'exit_intent'});}
if(varMobileTrigger==true&&mobilecheck()==true){console.log('Trigger scroll event.');var dtPercentDown=new DialogTrigger(function(){var dtPercentUp=new DialogTrigger(triggerEmailWheel,{trigger:'scrollUp',percentUp:1});},{trigger:'scrollDown',percentDown:10});}}else{console.log("Toggled off. Exit intent trigger.");}}else{console.log("Dont show popup because of page targeting");}}}}
function triggerEmailWheel(testMode,clickTrigger){console.log("Start of triggerEmailWheel function.");if(clickTrigger==true){window.Show=true;openSpinSale();}
if(window.Show!=true){window.Show=true;sessionStorage.setItem('timer',0);console.log('Set to shown:'+window.Show);if($("#spinSaleFrameWrapper").length){openSpinSale();}}else{console.log('Popup already shown.');}
function openSpinSale(){$(".spinasale-tab-link").hide();$('#spinSaleFrameWrapper').css({'transition-timing-function':'ease-out','transition':'.7s','transform':'translateX(0%)','-webkit-transform':'translateX(0%)'});$('#spinSaleFrameWrapper').css('z-index','99999999999999999999999999999999999999999999999999999999999999999999999');$("#spinSaleOuterWrapper").fadeIn('fast');$('body').append('<div id="spinSaleOuterWrapper"></div>');$('#spinSaleOuterWrapper').css('width','100%');$('#spinSaleOuterWrapper').css('height','100%');$('#spinSaleOuterWrapper').css('position','fixed');$('#spinSaleOuterWrapper').css('top','0');$('#spinSaleOuterWrapper').css('left','0');$('#spinSaleOuterWrapper').css('z-index','99999999');$('#spinSaleOuterWrapper').css("background-color","rgba(0, 0, 0, .4)");$.ajax({'global':false,url:'//mirror1-client1.spinasale.com/modals/captureView',type:'POST',data:{modalId:window.modalId},dataType:'json',async:true,'success':function(data){json=data;}});console.log("Pop-up window opened successfully.");setTimeout(function(){if(window.Frequency!=undefined&&window.Frequency!=null){writeCookie(window.Frequency,'close');console.log('Cookie written from local script');}},1000);console.log('listening for post message.');var eventMethod=window.addEventListener?"addEventListener":"attachEvent";var eventer=window[eventMethod];var messageEvent=eventMethod==="attachEvent"?"onmessage":"message";eventer(messageEvent,function(e){console.log('Parent received message: ',e.data);if(e.data==='close'){$('#spinSaleFrameWrapper').css({'transition-timing-function':'ease-in','transition':'.4s','transform':'translateX(-100%)','-webkit-transform':'translateX(-100%)'});$("#spinSaleOuterWrapper").fadeOut('fast');$(".spinasale-tab-link").show();console.log("Frequency: "+window.Frequency);if(window.Frequency!=undefined&&window.Frequency!=null){writeCookie(window.Frequency,'close');}}
if(e.data.action==='played'||e.data==='played'){$(".spinasale-tab-link").fadeOut(300,function(){$(this).remove();});if(typeof spinasaleSignupCallback==="function"&&e.data.action==='played'){var callbackEmail=e.data.email;var callbackCoupon=e.data.coupon;var callbackName=e.data.name;spinasaleSignupCallback(callbackEmail,callbackCoupon,callbackName);}
writeCookie(17520,'played');console.log('Cookie written for parent domain',e.data);}},false);}}
function DialogTrigger(callback,options){var defaults={trigger:'timeout',target:'',timeout:0,percentDown:50,percentUp:10,scrollInterval:1000}
this.complete=false;this.callback=callback;this.timer=null;this.interval=null;this.options=jQuery.extend(defaults,options);this.init=function(){if(this.options.trigger=='exit_intent'){var parentThis=this;$(document).on('mouseleave',function(e){if(!parentThis.complete&&e.clientY<0){parentThis.callback();parentThis.complete=true;$(document).off('mouseleave');}});}else if(this.options.trigger=='target'){if(this.options.target!==''){if($(this.options.target).length==0){this.complete=true;}else{var targetScroll=$(this.options.target).offset().top;var parentThis=this;this.interval=setInterval(function(){if($(window).scrollTop()>=targetScroll){clearInterval(parentThis.interval);parentThis.interval=null;if(!parentThis.complete){parentThis.callback();parentThis.complete=true;}}},this.options.scrollInterval);}}}else if(this.options.trigger=='scrollDown'){var scrollStart=$(window).scrollTop();var pageHeight=$(document).height();var parentThis=this;if(pageHeight>0){this.interval=setInterval(function(){var scrollAmount=$(window).scrollTop()-scrollStart;if(scrollAmount<0){scrollAmount=0;scrollStart=$(window).scrollTop();}
var downScrollPercent=parseFloat(scrollAmount)/parseFloat(pageHeight);if(downScrollPercent>parseFloat(parentThis.options.percentDown)/100){clearInterval(parentThis.interval);parentThis.interval=null;if(!parentThis.complete){parentThis.callback();parentThis.complete=true;}}},this.options.scrollInterval);}}else if(this.options.trigger=='scrollUp'){var scrollStart=$(window).scrollTop();var pageHeight=$(document).height();var parentThis=this;if(pageHeight>0){this.interval=setInterval(function(){var scrollAmount=scrollStart-$(window).scrollTop();if(scrollAmount<0){scrollAmount=0;scrollStart=$(window).scrollTop();}
var upScrollPercent=parseFloat(scrollAmount)/parseFloat(pageHeight);if(upScrollPercent>parseFloat(parentThis.options.percentUp)/100){clearInterval(parentThis.interval);parentThis.interval=null;if(!parentThis.complete){parentThis.callback();parentThis.complete=true;}}},this.options.scrollInterval);}}else if(this.options.trigger=='timeout'){this.timer=setTimeout(this.callback,this.options.timeout);}};this.cancel=function(){if(this.timer!==null){clearTimeout(this.timer);this.timer=null;}
if(this.interval!==null){clearInterval(this.interval);this.interval=null;}
this.complete=true;}
this.init();}};if(typeof jQuery==='undefined'){console.log('No jquery found.');loadScript('//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js',function(){console.log('Loaded jquery library.');console.log('jquery version: '+parseFloat(jQuery.fn.jquery));var jQuerySpin=jQuery.noConflict(true);mainScript(jQuerySpin);});}else{console.log('jquery version: '+parseFloat(jQuery.fn.jquery));var arr=$.fn.jquery.split('.');console.log('jquery arr0: '+arr[0]);console.log('jquery arr1: '+arr[1]);if(arr[0]==1&&arr[1]<10)
{console.log('Old jquery found.');}
if((arr[0]==1&&arr[1]<10)||arr[0]==3){loadScript('//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js',function(){console.log('Loaded newer version of jquery.');console.log('jquery version: '+parseFloat(jQuery.fn.jquery));var jQuerySpin=jQuery.noConflict(true);mainScript(jQuerySpin);});}else{console.log('Dont load jquery. Proceed to main script.');mainScript(jQuery);}}})();