var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

// For license information, see `https://assets.adobedtm.com/697d0c070f1e/16ad26f0160a/be94c043efc9/RC8237cd3b28014f85a5fb0513d295fb5c-source.js`.
_satellite.__registerScript('https://web.archive.org/web/20211013043341/https://assets.adobedtm.com/697d0c070f1e/16ad26f0160a/be94c043efc9/RC8237cd3b28014f85a5fb0513d295fb5c-source.min.js', "\n\t<title>Marriott QA</title>\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, minimum-scale=1\">\n\n\n<style type=\"text/css\">\n\t.embedded-service {\n\t\tdisplay: none;\n\t}\n</style>\n\n<!-- <button onclick=\"authMessage('login');\" label=\"Log In\">Log In</button>  Replace button with JS calling authMessage function\n<button onclick=\"authMessage('logout');\" label=\"Log Out\">Log Out</button> Replace button with JS calling authMessage function -->\n\n<div id=\"knowledge-search\" class=\"knowledge-search custom_click_track\" custom_click_track_value=\"Chat|Have a Question|internal|event56\"></div>\n\n<script type=\"text/javascript\" src=\"https://marriottintl.my.salesforce.com/lightning/lightning.out.js\"></script>\n<script type=\"text/javascript\" src=\"https://service.force.com/embeddedservice/5.0/esw.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://service.force.com/embeddedservice/menu/fab.min.js\"></script>\n<script type=\"text/javascript\">\n\n if(!(window.location.href.indexOf('/loyalty.mi') > -1 || window.location.href.indexOf('/sign-in-error.mi') > -1 || window.location.href.indexOf('/loyalty/myAccount/default.mi') > -1)){\n\tdocument.querySelector('#knowledge-search').style.display=\"none\"\n}else{\n  impressionTrack('event60');\n}\n\nwindow.addEventListener(\"preExperienceOverride-message\", receivePreExpOverrideMessage, false);\nwindow.addEventListener(\"bot-authentication-message\", receiveAuthMessage, false);\nwindow.addEventListener(\"bot-send-sms\", receiveBotSendSMSMessage, false);\n\t\n\t/*var now = new Date();\n        var minutes = 30;\n        now.setTime(now.getTime() + (minutes * 60 * 1000));\n\tvar cookieDomain = location.hostname.substring(location.hostname.indexOf(\"marriott\"));\n             var altid =_satellite.getVar('mr_id_alternate');\n\t\t\t var authState = _satellite.getVar('mr_prof_authentication_state'); \n\t\t\t if(typeof(altid) !== 'undefined' && typeof(authState) !== 'undefined' && authState === 'authenticated' && _satellite.getVar('page_pathname') !== \"/logout.mi\"){\n              _satellite.cookie.set(\"ACID\", altid, {\n                  expires: now,\n                  domain: cookieDomain\n              });\n\t\t\t }\n  if(typeof(authState) !== 'undefined' && authState !== 'authenticated'){\n    eraseCookie(\"ACID\");\n  } */\n\n$('#knowledge-search').click(function() {\n\twindow.sessionStorage.setItem('isChatActive', 'true');\n});\n\n var isChatActive = window.sessionStorage.getItem('isChatActive');\n if(isChatActive === 'true'){\n\t var counter = 0;\n var checker = window.setInterval(function() {\n\t\t\t\t\n\t\t\t\tif(counter < 50){\n                  counter++;\n              const classList = document.getElementsByClassName(\"messageArea\");\n              const classLength = classList.length;\n               if (classLength !== 0) {\n                  clearInterval(checker);\n\t\t\t\tvar tempLogin = window.sessionStorage.getItem('tempLogin');\n\t\t\t\tif(tempLogin !== _satellite.getVar('mr_prof_authentication_state')){\n\t\t\t\t  _satellite.logger.log('Login value has changed from previous page hence calling authMessage');\n\t\t\t\t\twindow.sessionStorage.setItem('tempLogin', _satellite.getVar('mr_prof_authentication_state'));\n\t\t\t\t\tif(_satellite.getVar('mr_prof_authentication_state') === 'authenticated'){\t\n                      _satellite.logger.log('New auth state is logged in');\n\t\t\t\t\t  authMessage('login');\n\t\t\t\t\t}else{\n                      _satellite.logger.log('User has logged out');\n\t\t\t\t\t//\teraseCookie(\"ACID\");\n\t\t\t\t\t  authMessage('logout');\n\t\t\t\t\t}\n\t\t\t\t}\n                }\n\t\t\t\t}\n }, 200); \n }\n \n\t\t\t\t\n\tfunction eraseCookie(name) {   \n\t\tdocument.cookie = name+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=.marriott.com;';  \n\t}\n\tfunction authMessage(eventType) {\n\t\tvar altCustId = eventType == 'login' ? '' : ''; // _satellite.getVar(\"mr_id_alternate\") altCustId currently hard-coded - replace with dynamic variable\n\t\tvar event = new CustomEvent(\n\t\t\t\"bot-authentication-message\",\n\t\t\t{detail: \n\t\t\t\t{\n\t\t\t\t\t\"[AUTO]-CHECKLOGIN\": {\n\t\t\t\t\t\t\"AltCustId\": altCustId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\twindow.dispatchEvent(event);\n\t}\n\n    function receivePreExpOverrideMessage(event) {\n        console.log('Event handled from preExperienceOverride');\n        //show the channel selector\n        document.getElementById('embedded-service').style.display = \"block\";\n\n        //hide knowledge search\n        document.getElementById('knowledge-search').style.display = \"none\";\n\n        //click the channel selector\n        document.getElementById('esw-fab').click();\n    }\n\t\n\tfunction receiveAuthMessage(event) {\n\t\tconsole.log('bot-authentication-message received: '+JSON.stringify(event.detail));\n\t\tconst AUTO_MESSAGE_SUCCESS  = \"[AUTO]-CHECKLOGIN\";\n\t\tvar message = {\n\t\t\t\"[SIGNIN-STATUS]\": {\n\t\t\t\t\"AltCustId\": \"\"\n\t\t\t}\n\t\t}\n\t\tif (event.detail[AUTO_MESSAGE_SUCCESS] !== undefined) {\n          console.log('auth message value inside if : '+event.detail[AUTO_MESSAGE_SUCCESS].AltCustId);\n\t\t\tmessage[\"[SIGNIN-STATUS]\"].AltCustId=event.detail[AUTO_MESSAGE_SUCCESS].AltCustId;\n\t\t\t var checker = window.setInterval(function() {\n              const classList = document.getElementsByClassName(\"messageArea\");\n              const classLength = classList.length;\n               if (classLength !== 0) {\n                  clearInterval(checker);\n                  //embedded_svc.postMessage('chasitor.sendMessage', JSON.stringify(message));\n                }}, 200); \n              }\n\t}\n\t\n\tfunction receiveBotSendSMSMessage(event) {\n\t\twindow.open('sms:+18449574543', '_self');\n\t}\n\t\n\tvar initESW = function(gslbBaseURL) {\n\t\t$Lightning.use(\n\t\t\t\"embeddedService:sidebarApp\",\n\t\t\tfunction () {\n\t\t\t\t$Lightning.createComponent(\n\t\t\t\t\t\"c:preExperienceOverrideWrapper\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//Some attributes\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"knowledge-search\",\n\t\t\t\t\t\tfunction (cmp) {\n\t\t\t\t\t\t\tconsole.log(\"callback ltng out\");\n\t\t\t\t\t\t\t//Some response here informs the channel selector to show\n\t\t\t\t\t\t\t//toggle div#embedded-service {display: none/block;}\n\t\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n            \"https://marriottintl.secure.force.com/\" \n\t\t);\n\t\t\n\t\tembedded_svc.menu.init(\n\t\t\t'https://marriottintl.my.salesforce.com',\n\t\t\t'https://d.la1-c2-ia2.salesforceliveagent.com/chat',\n\t\t\tgslbBaseURL,\n\t\t\t'00D37000000JC9y',\n\t\t\t'CEC_Channel_Menu_Deployment',\n\t\t\t{\n\t\t\t\tpageName: \"SnapInCodeSetting\"\n\t\t\t}\n\t\t);\n\t};\n\n\tif (!window.embedded_svc || !window.embedded_svc.menu) {\n\t\tvar s = document.createElement('script');\n\t\ts.setAttribute('src', 'https://web.archive.org/web/20211013043341/https://marriottintl.my.salesforce.com/embeddedservice/menu/fab.min.js');\n\t\ts.onload = function() {\n\t\t\tinitESW(null);\n\t\t};\n\t\tdocument.body.appendChild(s);\n\t} else {\n\t\tinitESW('https://web.archive.org/web/20211013043341/https://service.force.com');\n\t}\n</script>\n");

}
/*
     FILE ARCHIVED ON 04:33:41 Oct 13, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 08:11:31 Apr 30, 2023.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 78.134
  exclusion.robots: 0.109
  exclusion.robots.policy: 0.096
  cdx.remote: 0.086
  esindex: 0.013
  LoadShardBlock: 44.175 (3)
  PetaboxLoader3.datanode: 70.634 (5)
  load_resource: 9783.173 (2)
  PetaboxLoader3.resolve: 72.283 (2)
*/