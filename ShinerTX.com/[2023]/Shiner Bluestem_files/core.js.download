!async function(){var t;function n(){console.log("waitforinit"),setTimeout(async()=>{if("function"==typeof Shopify.formatMoney){console.log("izyunitready"),r(),$(document).on("click submit change",function(t){r()});var o=XMLHttpRequest.prototype.open;function r(){var t=Date.now(),e=setInterval(function(){5e3<Date.now()-t?clearInterval(e):izyunit_cart_ids.forEach(i=>{let n="";var a=i.key.split(":")[0];if("enabled"==i.stock){0==$('a[href*="/cart/change?line=1&quantity=0"]').length&&(n='<span class="izyremove"  style="cursor:pointer;background:transparent;border:none;position:relative;height: 20PX;width: 20PX;"  data-remove data-cart-item-delete data-id="'+i.key+'"><svg style="position: absolute;z-index: 1;pointer-events: none;top: 0px; left: 0px;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16"><path fill="black" d="M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z"></path></svg><button type="button" style="display:none;" data-remove data-cart-item-delete data-id="'+i.key+'"> </button></span>');let t=['input[data-id="'+i.key+'"]','input[data-id*="'+a+'"]','input[data-line-id="'+i.key+'"]','button[data-line-id="'+i.key+'"]',"#updates_"+a,'[id*="'+a+'"]:not(".noizyunit")'],e=(t=t.join(),'<div class="izyunit_qty" style="display: flex;justify-content: flex-end;width: 100%;">'+n+" </div>");setTimeout(function(){$(t).parent().replaceWith(e)},1)}})},100)}XMLHttpRequest.prototype.open=function(t,e,i,n,a){"/cart.js"==e&&(event=this.addEventListener("readystatechange",async function(){4===this.readyState&&""!==this.responseText&&r()},!1)),o.call(this,t,e,i,n,a)};var t=window,e=window.fetch;if("function"==typeof e&&(t.fetch=function(){var t=e.apply(this,arguments);return t.then(t=>{[window.location.origin+"/cart/add.js",window.location.origin+"/cart/update.js",window.location.origin+"/cart/change.js",window.location.origin+"/cart/clear.js"].includes(t.url)&&t.clone().json().then(t=>{r()})}),t}),$(document).on("click",".izyremove",async function(){var t=$(this).closest("tr").find("[data-cart-remove]");$(t).trigger("click");let e=$(this).data("id");setTimeout(async function(){await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.toString(),quantity:0})}),a()},1e3)}),"index"!=izyunit_current_page&&"collection"!=izyunit_current_page||($('a[href="/products/"]'),izyunit_linked.map((t,e)=>{var i;t.url&&(i='<div id="izyunit_'+t.id+'" class="izyunit_collection" style="font-weight: 600;text-align: center;position: absolute;bottom: 0px;z-index: 9999999999999999;width: 100%;background: white;opacity: 0.8;color: black;padding: 5PX;">'+Shopify.formatMoney(100*t.price*Shopify.currency.rate,izyunit_currency_format)+" / "+t.metric+"</div>",$("#izyunit_"+t.id).length||$('a[href*="'+t.url+'"]').parent().find("img").after(i))})),"product"==izyunit_current_page&&"undefined"!=typeof izyunit_metafields){console.log("product page izyunit");let e=izyunit_metafields.replace(/=>/g,":");e=JSON.parse(e),console.log(e),"enabled"==e.stock&&(!function(){console.log("listencart");let e=!1;$(document).on("submit","form[action*='cart/add']",function(t){t.preventDefault(),setTimeout(function(){if(0==e){console.log("add to cart submit / izyunit");var t=$("form[action*='cart/add']").serializeArray();let i;$.each(t,function(t,e){"id"===e.name&&(i=e.value)}),r({id:i}),setTimeout(function(){window.location="https://"+Shopify.shop+"/cart"},1e3)}},1e3)});var o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,e,i,n,a){"/cart/add.js"==e&&(event=this.addEventListener("readystatechange",async function(){4===this.readyState&&""!==this.responseText&&(data=JSON.parse(this.responseText),test=await(test=await r(data)).json(),Object.defineProperty(this,"responseText",{value:JSON.stringify(test),writable:!1}),Object.defineProperty(this,"response",{value:JSON.stringify(test),writable:!1}))},!1)),o.call(this,t,e,i,n,a)};const i=window["fetch"];async function r(i){if(console.log("logicevent"),e=!0,!i.description){{var n=i.product_id;let t=await fetch("/cart.js"),e=(t=await t.json(),{});0<t.items.length&&t.items.map(t=>{t.product_id==n&&(e[t.id]=0)});console.log(e),await fetch("/cart/update.js?izyunit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:e})})}await 0;var t=await fetch("/cart/add.js?izyunit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i.id,quantity:1})});return async function(t){console.log("after add to cart");t=await t.clone().json();izyunit_cart_ids.push({key:t.key,quantity:t.quantity}),a()}(t),t}alert(i.description)}window.fetch=async(...t)=>{var e=await i(...t);return t.includes("/cart/add.js")||t.includes("/cart/add")?r(await e.clone().json()):e}}(),i());t='<div class="izyunit_price"><strong style="font-weight:600;font-size: initial;">'+Shopify.formatMoney(100*e.price*Shopify.currency.rate,izyunit_currency_format)+" / "+e.metric+"</strong></div>";function i(t=!0){$('[class*="quantity" i],[class*="qty" i]').each(function(){0==$(this).parents(".cart-item").length&&0==$(this).has("[type=submit]").length&&0==$(this).has("[name=add]").length&&(t?$(this).hide():$(this).show())})}$(".izyunit_price").length||($(t).insertBefore($("form[action*='cart/add']:first")),$("form[action='/cart/add']").on("click submit change",function(t){setTimeout(function(){var t;t=Shopify.formatMoney(100*e.price*Shopify.currency.rate,izyunit_currency_format)+" / "+e.metric,$(".izyunit strong").html(t)},100)}))}function a(){console.log("reload all cart"),setTimeout(function(){"undefined"!=typeof ajaxCart&&ajaxCart.load(),"undefined"!=typeof izyRefreshCart&&izyRefreshCart.load(),$(".cart-drawer input").trigger("input"),"Blockshop"==Shopify.theme.name&&theme.classes.FrameworkCart.prototype.getOtherCarts().trigger("updateHtml"),document.dispatchEvent(new CustomEvent("cart:build")),i(),$("#izyunit").trigger("refresh")},1)}}else n()},10)}"undefined"==typeof $&&((t=document.createElement("script")).src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(t)),function t(){console.log("waitforjquery");setTimeout(async()=>{("undefined"!=typeof $?("function"!=typeof Shopify.formatMoney&&$('<script src="'+izyunit_shopify_js+'">').appendTo("head"),n):t)()},10)}()}();