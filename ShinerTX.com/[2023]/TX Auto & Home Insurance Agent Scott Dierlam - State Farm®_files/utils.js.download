(()=>{(function(o,h){var l=o.__mirus_utilities={wrapper:function(r,n){var e=this;return e.wrapper_fn=n,e.original_fn=r,function(){return e.args=[].slice.call(arguments,0),e.wrapper_fn.apply(e,e.args)}},waiter:function(r,n){var e=this;return e.test_fn=r,e.callback=n,e.count=0,e.fn=function(){if(e.test_fn())return e.callback();e.count++,e.count<2e3&&setTimeout(e.fn,10)},e.fn},queryString:{encode:function(r){var n=[];for(var e in r){var t=r[e].constructor===Array?r[e].join(","):r[e];n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}return n.join("&")},decode:function(r){var n=function(u){return u=u.replace(/\+/g," "),u=u.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/gi,function(f,s,p,d){var v=parseInt(s,16)-224,g=parseInt(p,16)-128;if(v==0&&g<32)return f;var A=parseInt(d,16)-128,m=(v<<12)+(g<<6)+A;return m>65535?f:String.fromCharCode(m)}),u=u.replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/gi,function(f,s,p){var d=parseInt(s,16)-192;if(d<2)return f;var v=parseInt(p,16)-128;return String.fromCharCode((d<<6)+v)}),u=u.replace(/%([0-7][0-9A-F])/gi,function(f,s){return String.fromCharCode(parseInt(s,16))}),u},e={};r||(r=location.search),r.charAt(0)=="?"&&(r=r.substring(1));for(var t=/([^=&]+)(=([^&]*))?/g,a;a=t.exec(r);){var i=decodeURIComponent(a[1].replace(/\+/g," ")),c=a[3]?n(a[3]):"";e[i]?(e[i].constructor!==Array&&(e[i]=[e[i]]),e[i].push(c)):e[i]=c}return e}},getDataAttr:function(r){var n=h.getElementById(r);if(n){for(var e={},t=0;t<n.attributes.length;t++){var a=n.attributes[t];if(/^data-/.test(a.name)){var i=a.name.substr(5);e[i]=a.value}}return e}},getEmailOrPhone:function(r){var n={email:void 0,phone:void 0};if(!r)return n;var e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(r),t=/^\(?([2-9][0-8][0-9])\)?[-. ]?([2-9][0-9]{2})[-. ]?([0-9]{4})$/.test(r);return n.email=e?r:void 0,n.phone=t?r:void 0,n},get$:function(){var r=typeof o._$mr<"u"?o._$mr:typeof o.$<"u"?o.$:null;if(!r){console.warn("utils -- $ not found");return}return r},setupAjaxCSRF:function(){var r=l.get$();r&&r&&r.ajaxSetup&&r.ajaxSetup({beforeSend:function(n){n.setRequestHeader("x-csrf-token",l.getMetaCSRF())}})},serializeFormObject:function(r){var n=l.get$();if(n){var e={},t=n(r).serializeArray();return n.each(t,function(){e[this.name]!==void 0?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}},getMetaCSRF:function(){var r=l.getDataAttr("__mirus_csrftoken");if(r)return r.value},validPostalCode:function(r){if(!r)return!1;var n=/^\d{5}$/,e=/^([ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ])\ {0,1}(\d[ABCEGHJKLMNPRSTVWXYZ]\d)$/;return r=r.toUpperCase(),RegExp(n.source+"|"+e.source).test(r)},deepGet:function(r,n,e){if(r==null)return e;var t=function(a,i,c){if(a==null)return c;if(i.length===0)return a;var u=a[i[0]],f=i.slice(1);return t(u,f,c)};return n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),t(r,n.split("."),e)}}})(window,document);})();
