/* updated: 07-19-2023 13:15:06 */
/* file: ../assets/js/min/agent.min.js */
!function($){"use strict";$(document).ready(function(){if($("#iq_agent").length>0){switch($(".st-agent-profile-foot a").click(function(event){event.preventDefault()}),$("#iq_agent_propertysearchform-propertytype").iqFieldValue().toLowerCase()){case"residential":$("#iq_agent_form_residential_section").show(),$("#iq_agent_form_multifamily_section").hide(),$("#iq_agent_form_commercial_section").hide(),$("#iq_agent_form_land_section").hide();break;case"multifamily":$("#iq_agent_form_residential_section").hide(),$("#iq_agent_form_multifamily_section").show(),$("#iq_agent_form_commercial_section").hide(),$("#iq_agent_form_land_section").hide();break;case"commercial":$("#iq_agent_form_residential_section").hide(),$("#iq_agent_form_multifamily_section").hide(),$("#iq_agent_form_commercial_section").show(),$("#iq_agent_form_land_section").hide();break;case"land":$("#iq_agent_form_residential_section").hide(),$("#iq_agent_form_multifamily_section").hide(),$("#iq_agent_form_commercial_section").hide(),$("#iq_agent_form_land_section").show()}if(0!==$("#iq_agent").length){$.iqUtils.history.init(function(args){$.iqAgent.controller(args)});var urlparts=window.location.href.split("/");"listings"===urlparts[urlparts.length-1]&&($("#iq-listings_wrapper").css({maxHeight:"none"}),$("#iq-listings_viewmore").hide(),$("#iq-listings_viewless").show(),0!==$("#iq-listings_wrapper").length&&setTimeout(function(){$("html, body").animate({scrollTop:$("#iq-listings_wrapper").offset().top},1e3)},1e3))}1===$("#iq_agent_leadsource").length&&$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields",sourcename:$("#iq_agent_leadsource").data("sourcename"),publicid:$("#iq_agent_leadsource").data("publicid"),agentteamid:$("#iq_agent_leadsource").data("agentteamid"),requiredonly:!0,url:window.location.href},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_agent_leadsource").html(jsonRet.LAYOUT),$("#iq_agent_leadsource").iqForm_Rules(jsonRet.FORMRULES)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})}}),$.iqAgent={controller:function(){var action=$.iqUtils.history.action()},Profile:function(){$.iqUtils.uiProcessing("open"),$(".st-button-agent").each(function(){$(this).removeClass("active")}),$("#iq_agentprofiletext-button").addClass("active"),$.ajax({url:"/components/agent_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"ProfileText",publicid:$("#iq_agent").attr("publicid"),ReturnFormat:"json"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?$("#iq-subcat").html(jsonRet.LAYOUT):$.iqUIMessage("",encodeURI(jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT))}})},VideoProfile:function(){$.iqUtils.uiProcessing("open"),$(".st-button-agent").each(function(){$(this).removeClass("active")}),$("#iq_agentvideoprofile_button").addClass("active"),$.ajax({url:"/components/agent_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"Agent_VideoProfile_Layout",publicid:$("#iq_agent").attr("publicid"),ReturnFormat:"json"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?$("#iq-subcat").html(jsonRet.LAYOUT):$.iqUIMessage("",encodeURI(jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT))}})},ChangePropertyType:function(){switch($("#iq_agent_form_residential_section").hide(),$("#iq_agent_form_multifamily_section").hide(),$("#iq_agent_form_land_section").hide(),$("#iq_agent_form_commercial_section").hide(),$("#iq_agent_propertysearchform-propertytype").iqFieldValue()){case"residential":$("#iq_agent_form_residential_section").show();break;case"multifamily":$("#iq_agent_form_multifamily_section").show();break;case"land":$("#iq_agent_form_land_section").show();break;case"commercial":$("#iq_agent_form_commercial_section").show()}},SubmitPropertySearchForm:function(){var ipricemin=$("#iq_agent_propertysearchform-pricemin").iqFieldValue(),ipricemax=$("#iq_agent_propertysearchform-pricemax").iqFieldValue(),sdomainname=$("#iq_agent_propertysearchform-domainname").iqFieldValue(),aSearchString=[];switch(2===sdomainname.split(".").length?aSearchString.push("http://www."+sdomainname):aSearchString.push("http://"+sdomainname),"for-lease"==$("#iq_agent_propertysearchform-listingtype").iqFieldValue()?aSearchString.push("/rentals"):aSearchString.push("/listings"),aSearchString.push("/propertytype_"+$("#iq_agent_propertysearchform-propertytype").iqFieldValue()),"0"!==ipricemin&&aSearchString.push("/pricemin_"+ipricemin),"0"!==ipricemax&&aSearchString.push("/pricemax_"+ipricemax),$("#iq_agent_propertysearchform-propertytype").iqFieldValue()){case"residential":var ires_beds=$("#iq_agent_propertysearchform-res_beds").iqFieldValue(),ires_baths=$("#iq_agent_propertysearchform-res_baths").iqFieldValue(),ires_acreage=$("#iq_agent_propertysearchform-res_acreage").iqFieldValue();"0"!==ires_acreage&&aSearchString.push("/acreage_"+ires_acreage),"0"!==ires_beds&&aSearchString.push("/beds_"+ires_beds),"0"!==ires_baths&&aSearchString.push("/baths_"+ires_baths);break;case"multifamily":var imul_sq_foot=$("#iq_agent_propertysearchform-mul_sq_foot").iqFieldValue(),imul_units=$("#iq_agent_propertysearchform-mul_units").iqFieldValue();"0"!==imul_sq_foot&&aSearchString.push("/sqfoot_"+imul_sq_foot),"0"!==imul_units&&aSearchString.push("/units_"+imul_units);break;case"land":var ilan_acreage=$("#iq_agent_propertysearchform-lan_acreage").iqFieldValue(),ilan_zoning=$("#iq_agent_propertysearchform-lan_zoning").iqFieldValue();0!==ilan_acreage&&aSearchString.push("/acreage_"+ilan_acreage),0!==ilan_zoning&&""!==ilan_zoning&&aSearchString.push("/zoning_"+ilan_zoning);break;case"commercial":var icom_sq_foot=$("#iq_agent_propertysearchform-com_sq_foot").iqFieldValue(),icom_units=$("#iq_agent_propertysearchform-com_units").iqFieldValue();0!==icom_sq_foot&&aSearchString.push("/sqfoot_"+icom_sq_foot),0!==icom_units&&aSearchString.push("/units_"+icom_units)}self.location=aSearchString.join("")}}}(jQuery);
//# sourceMappingURL=agent.min.js.map
;
/* file: ../assets/js/min/agentportal.min.js */
!function($){"use strict";$(document).ready(function(){"T"===$.iqUtils.cookie("AGENT_ISAUTHENTICATED")&&void 0!==$("#iq_showing_requests").data("mlsid")&&(""===$("#iq_showing_requests").data("mlsid")&&"create"!==$("#iq_showing_requests").data("action")||$.iqAgentPortal.MaintainRequest_Display("Create","")),1===$("#agentportal_maintain_form").length&&$("#agentportal_maintain_form").iqForm_Rules()}),$.iqAgentPortal={Login_Save:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/agentportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"doLogin",UserID:$("#iq_agentportal_login_form-userid").iqFieldValue(),Password:$("#iq_agentportal_login_form-password").iqFieldValue()},success:function(jsonRet){switch(jsonRet.STATUS){case 0:var mlsid=$("#iq_agentportal_login_form-mlsid").iqFieldValue(),propertytype=$("#iq_agentportal_login_form-propertytype").iqFieldValue(),ml_number=$("#iq_agentportal_login_form-ml_number").iqFieldValue();$.iqUtils.cookie("AGENT_ISAUTHENTICATED","T",365),$.iqUtils.cookie("AGENT_FIRSTNAME",jsonRet.FIRSTNAME,365),$.iqUtils.cookie("AGENT_LASTNAME",jsonRet.LASTNAME,365),$.iqUtils.cookie("AGENT_EMAIL",jsonRet.EMAIL,365),$.iqUtils.cookie("AGENT_PUBLICID",jsonRet.PUBLICID,365),"T"===$("#iq_agentportal_login_form-savelogin").iqFieldValue()?($.iqUtils.cookie("AGENT_USERID",jsonRet.USERID,365),$.iqUtils.cookie("AGENT_PASSWORD",jsonRet.PASSWORD,365),$.iqUtils.cookie("AGENT_SAVELOGIN","T",365)):($.iqUtils.cookie("AGENT_USERID",jsonRet.USERID),$.iqUtils.cookie("AGENT_PASSWORD",jsonRet.PASSWORD),$.iqUtils.cookie("AGENT_SAVELOGIN","F",-365)),"T"===$("#iq_agentportal_login_form-autologin").iqFieldValue()?$.iqUtils.cookie("AGENT_AUTOLOGIN","T",365):$.iqUtils.cookie("AGENT_AUTOLOGIN","F",-365),$("#agentportal_login_form_dialog").dialog("close"),$("#agentportal_login_form_dialog").remove(),setTimeout(function(){""!==mlsid&&""!==propertytype&&""!==ml_number?self.location="/agentportal/private/showingrequests/"+mlsid+"/"+propertytype+"/"+ml_number:window.location=window.location},100);break;case 1:case 2:$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},AgentMaintain_Display:function(action,publicid,obj){return $.iqUtils.uiProcessing("open"),$("body").append('<div id="agentportal_maintain_dialog"><div id="agentportal_maintain_message" class="iq-form-message"></div><div id="agentportal_maintain_body"></div></div>'),$("#agentportal_maintain_dialog").dialog({closeOnEscape:!1,title:"Register For Agent Portal",width:500,resizable:!0,autoOpen:!1,bgiframe:!0,modal:!0,beforeClose:function(){$(this).remove()},zIndex:900}),$("#agentportal_maintain_message").hide(),$.ajax({url:"/components/agentportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"AgentPortal_AgentMaintain_Form_Layout",Action:action,PublicID:publicid,mlsid:$(obj).data("mlsid"),propertytype:$(obj).data("propertytype"),ml_number:$(obj).data("ml_number")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#agentportal_maintain_body").html(jsonRet.LAYOUT),$("#agentportal_maintain_form").iqForm_Rules(),$("#agentportal_maintain_dialog").dialog("open")):($("#agentportal_maintain_dialog").dialog("open"),$.iqUIErrorLog("setlog",jsonRet.CONTENT),$("#agentportal_maintain_message").html('<a href="javascript:void(0);" onclick="$(\'#agentportal_maintain_message\').hide();">[Close]</a><a href="javascript:void(0);" onclick="$.iqUIErrorLog(\'open\');">[Error Log]</a><br>Message: '+jsonRet.MESSAGE+"<br>Detail: "+jsonRet.DETAIL),$("#agentportal_maintain_message").show("slow"))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},AgentMaintain_Save:function(){$.iqUtils.uiProcessing("open");var oDataDefaults={ReturnFormat:"json",Method:"ProcessAgent"},oDataFields=$("#agentportal_maintain_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);return $.ajax({url:"/components/agentportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:var action=$("#agentportal_maintain_form-Action").iqFieldValue();if(1===$("#agentportal_maintain_dialog").length&&$("#agentportal_maintain_dialog").remove(),"Create"===action){$("#iq_agentportal_dialog").bsModal({backdrop:!0,title:"Agent Portal",body:'<div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><p>Your account has been created but set to inactive. <br><br>An email has been sent to the email address you provided. Please follow the directions in the email to activate your account.</p></div></div>'}),$("#iq_agentportal_dialog .modal-content").css({"max-width":"600px",margin:"0 auto"}),$("#iq_agentportal_dialog .modal-content").css({"margin-top":"100px"})}else $.iqUtils.uiMessage("",jsonRet.MESSAGE);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE);break;case 2:$.iqUtils.uiMessage("","An account with this email already exists. An email with credentials has been sent to the email address provided.")}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},LogoutAndRedirect:function(sURL){return $.iqUtils.cookie("AGENT_IsAuthenticated","F"),$.iqUtils.cookie("AGENT_AutoLogin","F"),self.location=sURL,!0},MaintainRequest_Display:function(action,showingid,obj){var mlsid="",ml_number="",propertytype="";return void 0!==obj?(mlsid=$(obj).data("mlsid"),ml_number=$(obj).data("ml_number"),propertytype=$(obj).data("propertytype")):(mlsid=$("#iq_showing_requests").data("mlsid"),ml_number=$("#iq_showing_requests").data("ml_number"),propertytype=$("#iq_showing_requests").data("propertytype")),$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/showingrequests_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"AgentPortal_MaintainRequest_Form_Layout",Action:action,ShowingID:showingid,MLSID:mlsid,ML_Number:ml_number,PropertyType:propertytype},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){switch($.iqAgentPortal.Close_Form_Divs(),action){case"Create":$("#iq_create_showing_request_form_container").html(jsonRet.LAYOUT),$("#iq_create_showing_request_form_container").show(),$("#showing_maintain_form-ShowingDate").datepicker(),$("#iq_date_trigger").click(function(){$("#showing_maintain_form-ShowingDate").datepicker("show")});break;case"Update":$("#iq_update_showing_request_form_container_"+showingid).html(jsonRet.LAYOUT),$("#iq_update_showing_request_form_container_"+showingid).show()}$("#showing_maintain_form-ml_or_address").click(function(){$(this).val("")}),$("#showing_maintain_form-ml_or_address").blur(function(){""===$(this).val()&&$(this).val("Type MLS Number or Street Address")}),$("#showing_maintain_form").iqShowingRequests_MLorStreetAutoComplete(),$("#showing_maintain_form").iqForm_Rules()}else $.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},MaintainRequest_Save:function(){var oDataDefaults={ReturnFormat:"json",Method:"ProcessShowingRequest",AppendNotes:"t",Return_Layout:""},oDataFields=$("#showing_maintain_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);return""===oData.propertytype||""===oData.ml_number||""===oData.mlsid?void $.iqUtils.uiMessage("",'<i class="fa fa-fw fa-exclamation-triangle text-red" style="font-size:20px;"></i> Please enter an address.',"","","350"):($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/showingrequests.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:$("#iq_showing_request_form_container").hide(),$.iqUtils.uiMessage("",jsonRet.MESSAGE),setTimeout(function(){self.location="/agentportal/private/showingrequests"},500);break;case 1:case 2:$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1)},GetShowingProperty:function(mlsid,propertytype,ml_number){$.iqUtils.uiProcessing("show"),$.ajax({url:"/components/showingrequests_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"GetShowingRequestProperty",mlsid:mlsid,ml_number:ml_number,propertytype:propertytype},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_showing_request_property").html(jsonRet.LAYOUT)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},GetShowingInstructions:function(mlsid,propertytype,ml_number){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/showingrequests.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"GetShowingInstructions",MLSID:mlsid,ML_Number:ml_number,PropertyType:propertytype},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#showing_maintain_form-Instructions").iqFieldValue(jsonRet.INSTRUCTIONS),$("#showing_maintain_form-Directions").iqFieldValue(jsonRet.DIRECTIONS)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},RescheduleRequest_Display:function(showingid){return $.iqUtils.uiProcessing("open"),$.ajax({url:"/components/showingrequests_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"AgentPortal_RescheduleRequest_Layout",ShowingID:showingid},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqAgentPortal.Close_Form_Divs(),$("#iq_reschedule_showing_request_form_container_"+showingid).html(jsonRet.LAYOUT),$("#iq_reschedule_showing_request_form_container_"+showingid).show(),$("#showing_maintain_form-RescheduleShowingDate").datepicker(),$("#iq_date_trigger").click(function(){$("#showing_maintain_form-RescheduleShowingDate").datepicker("show")}),$("#showing_reschedule_form").iqForm_Rules(),$("#agentportal_reschedulerequest_dialog").dialog("open")):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},RescheduleRequest_Save:function(){$.iqUtils.uiProcessing("open");var oDataDefaults={ReturnFormat:"json",Method:"ProcessShowingRequestReschedule",Return_Layout:""},oDataFields=$("#showing_reschedule_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);return $.ajax({url:"/components/showingrequests.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:$.iqAgentPortal.Close_Form_Divs(),$.iqUtils.uiMessage("",jsonRet.MESSAGE),setTimeout(function(){self.location=self.location},500);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},CancelShowingRequest:function(showingid,canceledby){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/showingrequests.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"CancelShowingRequest",ShowingID:showingid,CanceledBy:canceledby,Return_Layout:""},success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:$.iqUtils.uiMessage("",jsonRet.MESSAGE),setTimeout(function(){self.location=self.location},500);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},DeleteShowingRequests:function(selectedlist){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/showingrequests.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"DeleteShowingRequests",SelectedList:selectedlist,Return_Layout:""},success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:$.iqUtils.uiMessage("",jsonRet.MESSAGE),setTimeout(function(){self.location=self.location},500);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},Close_Form_Divs:function(){$(".iq-update-showing-request-form-container").each(function(){$(this).html(""),$(this).hide()}),$(".iq-reschedule-showing-request-form-container").each(function(){$(this).html(""),$(this).hide()})},PasswordReminder_Display:function(){return $("#agentportal_login_form_dialog").dialog("close"),$("#agentportal_login_form_dialog").remove(),$.iqUtils.uiProcessing("open"),$("body").append('<div id="agentportal_passwordreminder_form_dialog" style="padding:10px;"><div id="agentportal_passwordreminder_form_message" class="iq-form-message"></div><div id="agentportal_passwordreminder_form_body"></div></div>'),$("#agentportal_passwordreminder_form_dialog").dialog({closeOnEscape:!1,title:"Password Reminder",width:500,resizable:!0,autoOpen:!1,bgiframe:!0,modal:!0,beforeClose:function(){$(this).remove()},zIndex:900}),setTimeout(function(){$.ajax({url:"/components/agentportal_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"agentportal_passwordreminder_Form_Layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#agentportal_passwordreminder_form_body").html(jsonRet.LAYOUT),$("#agentportal_passwordreminder_form").iqForm_Rules(),$("#agentportal_passwordreminder_form_dialog").dialog("open")):$.iqUtils.uiMessage("",jsonRet.MESSAGE),$.iqUtils.uiProcessing("close")},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},500),!1},PasswordReminder_Save:function(){return $.iqUtils.uiProcessing("open"),setTimeout(function(){$.ajax({url:"/components/agentportal.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"doPasswordReminder",UserID:$("#agentportal_passwordreminder_form #userid").iqFieldValue()},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#agentportal_passwordreminder_form_dialog").dialog("close"),$("#agentportal_passwordreminder_form_dialog").remove(),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3)):2===jsonRet.STATUS?($("#agentportal_passwordreminder_form_message").html(jsonRet.MESSAGE),$("#agentportal_passwordreminder_form_message").show("slow")):($.iqUIErrorLog("setlog",jsonRet.CONTENT),$("#agentportal_passwordreminder_form_message").html('<a href="javascript:void(0);" onclick="$(\'#agentportal_passwordreminder_form_message\').hide();">[Close]</a><a href="javascript:void(0);" onclick="$.iqUIErrorLog(\'open\');">[Error Log]</a><br>Message: '+jsonRet.MESSAGE+"<br>Detail: "+jsonRet.DETAIL),$("#agentportal_passwordreminder_form_message").show("slow"))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},500),!1}},$.fn.extend({iqShowingRequests_MLorStreetAutoComplete:function(options){var defaults={searchfield:"#showing_maintain_form-ml_or_address",ml_number:"#showing_maintain_form-ml_number",mlsid:"#showing_maintain_form-mlsid",propertytype:"#showing_maintain_form-propertytype"},oSettings=$.extend(defaults,options);this.each(function(){var oForm=$(this),oSearchField=$(oSettings.searchfield,oForm),oML_Number=$(oSettings.ml_number,oForm),oMLSID=$(oSettings.mlsid,oForm),oPropertyType=$(oSettings.propertytype,oForm),sAppendTo="#"+$(oForm).attr("id");$(oSearchField).autocomplete({appendTo:sAppendTo,source:function(request,response){$(".ui-autocomplete",oForm).removeClass("ui-corner-all").addClass("iq-autocomplete"),$(oSearchField).addClass("st-loading"),$.ajax({url:"/components/agentportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"MLorStreetComplete",SearchField:$(oSearchField).iqFieldValue()},success:function(jsonRet){var arrSuggestions=[];if($(oSearchField).removeClass("st-loading"),0===jsonRet.STATUS){var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY);$(oML_Number).iqFieldValue("");var objVals="";if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++)rs[i].fieldmatched.toLowerCase(),rs[i].fieldlabel,objVals={label:rs[i].streetaddress+", MLS#: "+rs[i].ml_number,value:rs[i].streetaddress,ml_number:rs[i].ml_number,propertytype:rs[i].propertytype,mlsid:rs[i].mlsid},arrSuggestions.push(objVals);else objVals={label:"NO RECORDS FOUND",value:"",ml_number:"",propertytype:"",mlsid:""},arrSuggestions[0]=objVals}else $(oML_Number).iqFieldValue(""),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT);response(arrSuggestions)},error:function(httpRet){$(oML_Number).iqFieldValue(""),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE+"<br>"+httpRet.DETAIL):alert(httpRet.responseText)}})},select:function(e,ui){$(oSearchField).iqFieldValue(ui.item.value),$(oML_Number).iqFieldValue(ui.item.ml_number),$(oPropertyType).iqFieldValue(ui.item.propertytype),$(oMLSID).iqFieldValue(ui.item.mlsid),setTimeout(function(){$.iqAgentPortal.GetShowingProperty(ui.item.mlsid,ui.item.propertytype,ui.item.ml_number),$.iqAgentPortal.GetShowingInstructions(ui.item.mlsid,ui.item.propertytype,ui.item.ml_number)},500)}},{autofill:!0})})}})}(jQuery);
//# sourceMappingURL=agentportal.min.js.map
;
/* file: ../assets/js/min/agents.min.js */
!function($){"use strict";$(document).ready(function(){0!==$("#iq_agents_search_form").length&&($("#iq_agents_search_form").iqAgentsPageSearch({fields:"firstname,lastname,fullname,language,officecity,officename,teamname",callback:function(){$.iqAgents.submit_search()}}),$("#agent_multifield_autocomplete").bind("keypress",function(e){13===e.keyCode&&$.iqAgents.submit_search()}),null!==$.iqUtils.localStorage("iq_agents_grid")&&$.iqAgents.render_back(),$("#iq_agents_grid").show(),null!==$.iqUtils.localStorage("iq_agents_show_clear_search")&&$(".iq-agent-clear-search").show(),$.iqAgents.init_paging(),$.iqAgents.init_isvisible(),$.iqAgents.init_agent_details_link(),$("body").append('<div id="iq_agents_totop" style="border:1px solid #999; border-radius:50%; padding:15px; position: fixed; bottom: 25px; right: 40px; cursor: pointer; background-color:rgba(255,255,255,.75); display: none;"><i class="fa fa-arrow-up fa-fw"></i></div>'),$(window).scroll(function(){0!==$(this).scrollTop()?$("#iq_agents_totop").fadeIn():$("#iq_agents_totop").fadeOut()}),$("#iq_agents_totop").click(function(){return $("html, body").animate({scrollTop:0},600),!1}))}),$.iqAgents={init_paging:function(){0!==$("#iq_agents_search_form-pagenumber").length&&$(".pagination a").on("click",function(e){e.preventDefault(),$(".pagination").find(".active").removeClass("active"),$(this).parent().addClass("active"),$("#iq_agents_search_form-pagenumber").iqFieldValue($(this).data("startpage"));var aTag=$("a[name='"+$(this).data("startpage")+"']");$("html,body").animate({scrollTop:aTag.offset().top},"slow")})},init_agent_details_link:function(){$("[data-agentdetailslink]").on("click",function(e){e.preventDefault(),$.iqUtils.localStorage("iq_agents_grid",$("#iq_agents_grid").html()),$.iqUtils.localStorage("iq_agents_grid_scroll_position",$(document).scrollTop()),$.iqUtils.localStorage("iq_agents_totalrowcount",$("#iq_agents_grid").attr("data-totalrowcount")),$.iqUtils.localStorage("iq_agents_lookupname",$("#iq_agents_search_form-lookupname").iqFieldValue()),$.iqUtils.localStorage("iq_agents_lookupvalue",$("#iq_agents_search_form-lookupvalue").iqFieldValue()),$.iqUtils.localStorage("iq_agents_officeid",$("#iq_agents_search_form-officeid").iqFieldValue()),$.iqUtils.localStorage("iq_agents_autocomplete",$("#agent_multifield_autocomplete").iqFieldValue()),$.iqUtils.localStorage("iq_agents_pagenumber",$("#iq_agents_search_form-pagenumber").iqFieldValue()),self.location=$(this).attr("href")})},init_isvisible:function(){$(".iq-agents-card-wrapper").length&&$(".iq-agents-card-wrapper").iqVisibleCallback({threshold:150,callback:function(pElement){$.iqAgents.isvisible(pElement)}}),$(".iq-agents-grid").length&&$(".iq-agents-grid").iqVisibleCallback({threshold:150,callback:function(pElement){$.iqAgents.isvisible(pElement)}}),$(".js-isvisible").length&&$(".js-isvisible").iqVisibleCallback({threshold:150,callback:function(pElement){$.iqAgents.isvisible(pElement)}})},isvisible:function(pElement){var currAgent=1,lastAgent=0,maxrows=parseInt($("#iq_agents_grid").data("maxrows")),totalRowCount=parseInt($("#iq_agents_grid").attr("data-totalrowcount")),num_images=$("[data-publicid]").length;if(num_images!==parseInt(totalRowCount)&&(0!=$(".iq-agents-card-wrapper").length&&(currAgent=$(pElement).data("rownumber"),lastAgent=$(".iq-agents-card-wrapper").last().data("rownumber")),0!=$(".js-isvisible").length&&(currAgent=$(pElement).data("rownumber"),lastAgent=$(".js-isvisible").last().data("rownumber")),0!=$(".iq-agents-grid").length&&(currAgent=$(pElement).data("rownumber"),lastAgent=$(".iq-agents-grid").last().data("rownumber")),num_images<totalRowCount&&totalRowCount>maxrows&&currAgent===lastAgent)){var startPage=parseInt($("#iq_agents_search_form-pagenumber").iqFieldValue())+1;$("#iq_agents_search_form-pagenumber").iqFieldValue(startPage),$.iqAgents.criteriasearch(!0)}},criteriasearch:function(paging){if(paging||!1||0!==$("[data-autocomplete-searchby]").length){var lookupname=$("#iq_agents_search_form-lookupname").iqFieldValue(),lookupvalue=$("#iq_agents_search_form-lookupvalue").iqFieldValue(),officeid=$("#iq_agents_search_form-officeid").iqFieldValue(),agentteamid=$("#iq_agents_search_form-agentteamid").iqFieldValue(),layout=$("#iq_agents_grid").data("searchby"),startpage=$("#iq_agents_search_form-pagenumber").iqFieldValue(),randomorder=$("#iq_agents_grid").attr("data-randomorder"),withimage=$("#iq_agents_grid").attr("data-withimage"),url="/agents/",fullname="",firstname="",lastname="",language="",city="",cols=$("#iq_agents").attr("data-cols");city=""!==$("#iq_agents_search_form-city").iqFieldValue?$("#iq_agents_search_form-city").iqFieldValue():$("#iq_agents_grid").attr("data-city");var state=$("#iq_agents_grid").attr("data-state"),zip=$("#iq_agents_grid").attr("data-zip"),method="docriteriasearch";if(""===layout&&(layout="card"),"1"===startpage&&$("#iq_agents_grid").html(""),""===officeid)if(""!==lookupname)switch(url="teamname"!==lookupname?"/agents/"+lookupname+"_"+lookupvalue+"/":"/agents/agentteamid_"+agentteamid+"/",lookupname){case"firstname":firstname=lookupvalue;break;case"lastname":lastname=lookupvalue;break;case"fullname":fullname=$("#iq_agents_search_form-fullname").iqFieldValue();break;case"language":language=lookupvalue;break;case"teamname":break;default:url="/agents/officeid_"+officeid+"/"}else{var searchstring=$("#agent_multifield_autocomplete").iqFieldValue(),arrstring=searchstring.split(" ");searchstring=searchstring.replace("Last Name: ",""),searchstring=searchstring.replace("First Name: ",""),searchstring=searchstring.replace("Full Name: ",""),searchstring=searchstring.replace("Language: ",""),searchstring=searchstring.replace("Team: ",""),""!==(searchstring=searchstring.replace("City: ",""))&&(1===arrstring.length||"officecity"===$("[data-autocomplete-searchby]").attr("data-autocomplete-searchby")?(firstname=searchstring,lastname=searchstring,language=searchstring,officeid=searchstring,city=searchstring,fullname=searchstring,agentteamid=searchstring,method="doCriteriaSearch_allfields"):(fullname=searchstring,url="/agents/firstname_"+arrstring[0]+"/lastname_"+arrstring[1]+"/",method="doCriteriaSearch"))}else url="/agents/officeid_"+officeid+"/";var arrPublicID=[];"true"===randomorder&&$("[data-publicid]").each(function(){arrPublicID.push($(this).data("publicid"))}),$("#iq_agents_grid").append('<div id="iq_results_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-vs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading More Agents</h1></div>'),$.ajax({url:"/components/agents.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",firstname:firstname,lastname:lastname,fullname:fullname,language:language,officeid:officeid,agentteamid:agentteamid,orderdirection:"asc",viewed_publicid_list:arrPublicID.join(","),randomorder:randomorder,withimage:withimage,maxrows:$("#iq_agents_grid").data("maxrows"),startpage:startpage,layout:layout,Method:method,city:city,state:state,zip:zip,cols:cols},success:function(jsonRet){0===jsonRet.STATUS?($("#ui-id-1").hide(),$("#iq_results_content_loading").remove(),"1"===startpage?($("#iq_agents_grid").attr("data-totalrowcount",jsonRet.TOTALROWCOUNT),$("#iq_agents_grid").html(jsonRet.LAYOUT),$("#iq_agents_search_form-lookupname").iqFieldValue(""),$("#iq_agents_search_form-lookupvalue").iqFieldValue(""),$.iqAgents.paging($("#iq_agents_grid").attr("data-totalrowcount"),url),$.iqAgents.init_isvisible(),$.iqAgents.init_agent_details_link()):($("#iq_agents_grid").append(jsonRet.LAYOUT),$.iqAgents.paging($("#iq_agents_grid").attr("data-totalrowcount"),url),$.iqAgents.init_isvisible(),$.iqAgents.init_agent_details_link())):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})}},render_back:function(){var agents_html=$.iqUtils.localStorage("iq_agents_grid"),agents_autocomplete=$.iqUtils.localStorage("iq_agents_autocomplete"),agents_officeid=$.iqUtils.localStorage("iq_agents_officeid"),agents_lookupname=$.iqUtils.localStorage("iq_agents_lookupname"),agents_lookupvalue=$.iqUtils.localStorage("iq_agents_lookupvalue"),agents_pagenumber=$.iqUtils.localStorage("iq_agents_pagenumber"),url="/agents/";""!==agents_lookupname&&(url=""===agents_officeid?"/agents/"+agents_lookupname+"_"+agents_lookupvalue+"/":"/agents/officeid_"+agents_officeid+"/"),null!==agents_autocomplete&&$("#agent_multifield_autocomplete").iqFieldValue(agents_autocomplete),null!==agents_officeid&&$("#iq_agents_search_form-officeid").iqFieldValue(agents_officeid),null!==agents_lookupname&&$("#iq_agents_search_form-lookupname").iqFieldValue(agents_lookupname),null!==agents_lookupvalue&&$("#iq_agents_search_form-lookupvalue").iqFieldValue(agents_lookupvalue),null!==agents_pagenumber&&$("#iq_agents_search_form-pagenumber").iqFieldValue(agents_pagenumber),$("#iq_agents_grid").attr("data-totalrowcount",$.iqUtils.localStorage("iq_agents_totalrowcount")),$("#iq_agents_grid").html(agents_html),window.scrollTo(0,$.iqUtils.localStorage("iq_agents_grid_scroll_position")),$.iqUtils.localStorage("iq_agents_grid",null),$.iqUtils.localStorage("iq_agents_grid_scroll_position",null),$.iqUtils.localStorage("iq_agents_officeid",null),$.iqUtils.localStorage("iq_agents_lookupname",null),$.iqUtils.localStorage("iq_agents_lookupvalue",null),$.iqUtils.localStorage("iq_agents_pagenumber",null),$.iqUtils.localStorage("iq_agents_totalrowcount",null),$.iqUtils.localStorage("iq_agents_autocomplete",null),$.iqAgents.paging($("#iq_agent_grid").attr("data-totalrowcount"),url)},submit_search:function(){$("#iq_agents_search_form-pagenumber").iqFieldValue("1"),$("#iq_agents_grid").attr("data-randomorder","false"),$(".iq-agent-clear-search").show(),$.iqUtils.localStorage("iq_agents_show_clear_search","true"),$.iqAgents.criteriasearch()},clear_search:function(){$.iqUtils.localStorage("iq_agents_show_clear_search",null),self.location=self.location},getVCard:function(publicid){var oIFrame=$("#vcard_iframe"),sURL="/default.cfm/page/utils/cat/agentvcard/publicid/"+publicid+".htm";0===oIFrame.length&&$("body").append('<iframe title="Agent V-Card" id="vcard_iframe" name="vcard_iframe" style="display:none;" src="javascript:void(0);">'),window.frames.vcard_iframe.location=sURL},paging:function(ptotalrowcount,purl){$.ajax({url:"/components/agents_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",totalrowcount:$("#iq_agents_grid").attr("data-totalrowcount"),pageurl:purl,startpage:$("#iq_agents_search_form-pagenumber").iqFieldValue(),Method:"paging"},success:function(jsonRet){0===jsonRet.STATUS?($(".iq-agents-paging").html(jsonRet.LAYOUT),$.iqAgents.init_paging()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})}},$.fn.extend({iqAgentsPageSearch:function(options){var defaults={callback:null,firstname:"",lastname:"",officeaddress:"",officecity:"",officestate:"",lookupname:"",lookupvalue:"",fields:"firstname,lastname,languages,officeaddress,officecity,officestate,officename,teamname"},oSettings=$.extend(defaults,options);this.each(function(){var oAgentsForm=$(this),oAgentsMultiFieldAutocomplete=$('input[id="agent_multifield_autocomplete"]',oAgentsForm),sInitialValue=$(oAgentsMultiFieldAutocomplete).iqFieldValue(),sFormID=$(this).attr("id");$(oAgentsForm).submit(function(e){e.preventDefault()}),$(oAgentsMultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)}),$("button",oAgentsForm).click(function(e){e.preventDefault()}),$(oAgentsForm).append('<input type="hidden" name="lookupname" id="'+sFormID+'-lookupname" value="'+oSettings.lookupname+'">'),$(oAgentsForm).append('<input type="hidden" name="lookupvalue" id="'+sFormID+'-lookupvalue" value="'+oSettings.lookupvalue+'">'),$(oAgentsForm).append('<input type="hidden" name="fullname" id="'+sFormID+'-fullname" value="">'),$(oAgentsForm).append('<input type="hidden" name="agentteamid" id="'+sFormID+'-agentteamid" value="">'),$(oAgentsForm).append('<input type="hidden" name="city" id="'+sFormID+'-city" value="">');var oLookupName=$('input[id="'+sFormID+'-lookupname"]',oAgentsForm),oLookupValue=$('input[id="'+sFormID+'-lookupvalue"]',oAgentsForm),oOfficeID=$('input[id="'+sFormID+'-officeid"]',oAgentsForm),oFullName=$('input[id="'+sFormID+'-fullname"]',oAgentsForm),oAgentTeamID=$('input[id="'+sFormID+'-agentteamid"]',oAgentsForm),oCity=$('input[id="'+sFormID+'-city"]',oAgentsForm);$(oAgentsMultiFieldAutocomplete).on("click",function(){$(oLookupName).iqFieldValue(""),$(oLookupValue).iqFieldValue(""),$(oOfficeID).iqFieldValue(""),$(oFullName).iqFieldValue(""),$(oAgentTeamID).iqFieldValue(""),$(oCity).iqFieldValue("")}),$(oAgentsMultiFieldAutocomplete).autocomplete({delay:250,minLength:2,appendTo:oAgentsForm,source:function(request,response){$(".ui-autocomplete",oAgentsForm).removeClass("ui-corner-all").addClass("iq-autocomplete"),$(oAgentsMultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/agents.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getLookup_MultiFieldAutocomplete",Fields:oSettings.fields,city:$("#iq_agents_grid").attr("data-city"),Lookup_Value:$(oAgentsMultiFieldAutocomplete).iqFieldValue()},success:function(jsonRet){var arrSuggenstions=[];if($(oAgentsMultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.STATUS){var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY),label=null,objVals=null;if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++){switch(rs[i].lookupname){case"firstname":label="First Name: "+rs[i].lookupvalue;break;case"lastname":label="Last Name: "+rs[i].lookupvalue;break;case"fullname":label="Full Name: "+rs[i].fullname;break;case"officestate":label="Office State: "+rs[i].lookupvalue+": "+rs[i].officename;break;case"officecity":label="City: "+rs[i].lookupvalue;break;case"officezip":label="Office Zip: "+rs[i].lookupvalue+": "+rs[i].officename;break;case"officeaddress":label="Office Street: "+rs[i].lookupvalue+": "+rs[i].officename;break;case"officename":label="Office Name: "+rs[i].lookupvalue;break;case"language":label="Language: "+rs[i].lookupvalue;break;case"teamname":label="Team: "+rs[i].lookupvalue}objVals={label:label,lookupname:rs[i].lookupname,lookupvalue:rs[i].lookupvalue,fullname:rs[i].fullname,officeid:rs[i].officeid,agentteamid:rs[i].agentteamid},arrSuggenstions.push(objVals)}else objVals={label:"NO RECORDS FOUND"},arrSuggenstions[0]=objVals}else $.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE);response(arrSuggenstions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet.responseText)}})},select:function(e,ui){$(oLookupName).iqFieldValue(""),$(oLookupValue).iqFieldValue(""),$(oOfficeID).iqFieldValue(""),$(oFullName).iqFieldValue(""),$(oAgentTeamID).iqFieldValue(""),""!==ui.item.value&&($(oLookupName).iqFieldValue(ui.item.lookupname.toLowerCase()),$(oLookupValue).iqFieldValue(ui.item.lookupvalue.toLowerCase()),$(oOfficeID).iqFieldValue(ui.item.officeid.toLowerCase()),$(oFullName).iqFieldValue(ui.item.officeid.toLowerCase()),"fullname"===ui.item.lookupname.toLowerCase()&&$(oFullName).iqFieldValue(ui.item.fullname.toLowerCase()),"teamname"===ui.item.lookupname.toLowerCase()&&$(oAgentTeamID).iqFieldValue(ui.item.agentteamid.toLowerCase()),"officecity"===ui.item.lookupname.toLowerCase()&&$(oCity).iqFieldValue(ui.item.lookupvalue.toLowerCase()),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[]))}},{autofill:!0}).data("ui-autocomplete")._renderItem=function(ul,item){return $('<li data-autocomplete-searchby="'+item.lookupname+'" data-autocomplete-searchvalue="'+item.label+'"></li>').data("item.autocomplete",item).append($('<span style="font-size:12px;"></span>').html(item.label)).appendTo(ul)}})}})}(jQuery);
//# sourceMappingURL=agents.min.js.map
;
/* file: ../assets/js/min/areas.min.js */
!function($){"use strict";$(document).ready(function(){1===$("[data-carousel=areas_08]").length&&$.iqAreas_08.carousel_load()}),$(document).ajaxComplete(function(event,xhr,settings){"areas"===settings.section&&1===$("[data-carousel=areas_08]").length&&$.iqAreas_08.carousel_load()}),$.iqAreas_08={carousel_load:function(){$("#iq_areas_carousel_08 .item").each(function(index,element){$(element).on("click",function(){$(this).data("image-postion",index)})}),$("#iq_areas_carousel_nav_08 .img-thumbnail a").on("click",function(e){e.preventDefault();var item=$(this).data("slide");return $("#iq_areas_carousel_08").carousel(item-1),$("#iq_areas_carousel_nav_08").data("slide",item-1),!1}),$("#iq_areas_carousel_08").on("slid.bs.carousel",function(){$("#iq_areas_carousel_nav_08 .img-thumbnail a").css({backgroundColor:"rgba(0,0,0, .5)"});var item=$(this).find(".active").index(),nav_item=Math.ceil((item+1)/6);$("#iq_areas_carousel_nav_08").carousel(nav_item-1),$('#iq_areas_carousel_nav_08 .img-thumbnail a[data-slide="'+(item+1)+'"]').css({backgroundColor:"rgba(0,0,0,0)"})}),$("#iq_areas_carousel_08").carousel({interval:5e3})}}}(jQuery);
//# sourceMappingURL=areas.min.js.map
;
/* file: ../assets/js/min/autocomplete.min.js */
!function($){"use strict";$.fn.extend({iqMultiFieldAutocomplete:function(options){var defaults={mlsid:"",ml_number:"",propertytype:"residential,commercial,land,multifamily",propertytype_list:"residential,commercial,land,multifamily",searchby:"city",area:"",city:"",county:"",state:"",zip_code:"",street_address:"",openhouse:"",callback:null,fields:"area,subarea,city,county,state,zip_code,communityname,schooldistrict,highschool,jrhighschool,elementaryschool,buildingname",listingtype:"",async:!0,pricemin:0},oSettings=$.extend(defaults,options);this.each(function(){var oForm=$(this),oMultiFieldAutocomplete=$('input[id="multifield_autocomplete"]',oForm),sInitialValue=$(oMultiFieldAutocomplete).iqFieldValue(),header_value="",header_title="";$(oForm).submit(function(e){e.preventDefault()}),$(oMultiFieldAutocomplete).click(function(){$(this).val(""),$(oForm).data("data-fieldselected",!1)}),$(oMultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)}),$(oForm).data("data-fieldselected",!1),$(oForm).data("data-searchby",""),$(oForm).data("data-searchvalue",""),$(oForm).data("data-streetaddress",""),$(oForm).data("data-state",""),$(oForm).data("data-county",""),$(oForm).data("data-area",""),$(oForm).data("data-subarea",""),$(oForm).data("data-city",""),$(oForm).data("data-zip_code",""),$(oForm).data("data-schooldistrict",""),$(oForm).data("data-highschool",""),$(oForm).data("data-jrhighschool",""),$(oForm).data("data-elementaryschool",""),$(oForm).data("data-communityname",""),$(oForm).data("data-buildingname",""),$("button",oForm).click(function(e){e.preventDefault()});var oAppendTo="body";"body"!==$(oForm).data("autocomplete-appendto")&&(oAppendTo=$(oForm).data("autocomplete-appendto")),$(oMultiFieldAutocomplete).autocomplete({delay:500,minLength:2,appendTo:oAppendTo,source:function(request,response){$(oMultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/autocomplete.cfc",type:"POST",dataType:"json",async:oSettings.async,data:{returnformat:"json",method:"listings",fields:oSettings.fields,mlsid:oSettings.mlsid,propertytype:oSettings.propertytype,propertytype_list:oSettings.propertytype_list,openhouse:oSettings.openhouse,lookupvalue:$(oMultiFieldAutocomplete).iqFieldValue(),listingtype:oSettings.listingtype,pricemin:oSettings.pricemin},success:function(jsonRet){var suggestions=[],suggestion={};$(oMultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.status?(header_value="",header_title="",jsonRet.data.length>0?(header_value=jsonRet.data[0].description,header_title="<h4>"+jsonRet.data[0].header+"</h4>",jsonRet.data.forEach(function(record){suggestion={searchby:record.fieldname,value:record.fieldvalue,title:record.title,url:record.url,html:record.layout},suggestions.push(suggestion)})):(suggestion={searchby:"",value:"No Results Found",url:"",html:"<h4>No Results Found</h4>"},suggestions.push(suggestion))):$.iqUtils.uiMessage("Error: "+jsonRet.message,jsonRet.detail),response(suggestions)},error:function(httpRet){void 0!==httpRet.message&&void 0!==httpRet.detail?$.iqUtils.uiMessage("Error",httpRet.detail):""!==httpRet.responseText&&$.iqUtils.uiMessage("Error",httpRet.responseText)}})},select:function(e,ui){$.removeData(oForm),""!==ui.item.value&&-1===ui.item.value.toLowerCase().indexOf("no results")&&($(oForm).data("data-fieldselected",!0),$(oForm).data("data-searchby",ui.item.searchby.replace("_","")),$(oForm).data("data-searchvalue",ui.item.value.toLowerCase()),$(oForm).data("data-propertytype",ui.item.propertytype),$(oForm).data("data-url",ui.item.url),"streetaddress"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-streetaddress",ui.item.value.toLowerCase()),ui.item.searchby="Street Address"),"area"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-area",ui.item.value.toLowerCase()),ui.item.searchby="Area"),"subarea"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-subarea",ui.item.value.toLowerCase()),ui.item.searchby="Subarea"),"county"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-county",ui.item.value.toLowerCase()),ui.item.searchby="County"),"city"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-city",ui.item.value.toLowerCase()),ui.item.searchby="City"),"state"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-state",ui.item.value.toLowerCase()),ui.item.searchby="State"),"zip_code"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-zip_code",ui.item.value.toLowerCase()),ui.item.searchby="Zip Code"),"schooldistrict"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-schooldistrict",ui.item.value.toLowerCase()),ui.item.searchby="School District"),"elementaryschool"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-elementaryschool",ui.item.value.toLowerCase()),ui.item.searchby="Elementary School"),"jrhighschool"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-jrhighschool",ui.item.value.toLowerCase()),ui.item.searchby="Jr. High School"),"highschool"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-highschool",ui.item.value.toLowerCase()),ui.item.searchby="High School"),"communityname"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-communityname",ui.item.value.toLowerCase()),ui.item.searchby="Community Name"),"buildingname"===ui.item.searchby.toLowerCase()&&($(oForm).data("data-buildingname",ui.item.value.toLowerCase()),ui.item.searchby="Building Name"),"ml_number"===ui.item.searchby.toLowerCase()&&(ui.item.searchby="MLS#"),$(oMultiFieldAutocomplete).iqFieldValue(ui.item.value.toLowerCase()),ui.item.value=ui.item.searchby+": "+ui.item.value,"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[]))}},{autofill:!0}).data("ui-autocomplete")._renderItem=function(ul,item){return item.searchby!==header_value&&void 0!==item.title?(header_value=item.searchby,header_title="<h6>"+item.title+"</h6>"):header_title="",void 0!==$("[data-autocomplete-searchvalue]:first").attr("data-autocomplete-searchvalue")&&$("#multifield_autocomplete").tooltip("hide"),$('<li style="line-height:normal;" class="iq-dropdown-menuitem" data-autocomplete-searchby="'+item.searchby.replace("_","").toLowerCase()+'" data-autocomplete-searchvalue="'+item.value.toLowerCase()+'" data-autocomplete-streetaddress="'+item.streetaddress+'" data-autocomplete-lat="'+item.lat+'" data-autocomplete-lon="'+item.lon+'" data-autocomplete-url="'+item.url+'" style="margin:0"></li>').data("item.autocomplete",item).append($('<div style="font-size:12px;"></div>').html(header_title+" "+item.html)).appendTo(ul)}})},iqAgentsMultiFieldAutocomplete:function(options){var defaults={callback:null,firstname:"",lastname:"",officeaddress:"",officecity:"",officestate:"",lookupname:"",lookupvalue:"",fields:"firstname,lastname,languages,officeaddress,officecity,officestate,officename,teamname"},oSettings=$.extend(defaults,options);this.each(function(){var oAgentsForm=$(this),oAgentsMultiFieldAutocomplete=$('input[id="agent_multifield_autocomplete"]',oAgentsForm),sInitialValue=$(oAgentsMultiFieldAutocomplete).iqFieldValue(),sFormID=$(this).attr("id");$(oAgentsForm).submit(function(e){e.preventDefault()}),$(oAgentsMultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)}),$("button",oAgentsForm).click(function(e){e.preventDefault()}),$(oAgentsForm).append('<input type="hidden" name="lookupname" id="'+sFormID+'-lookupname" value="'+oSettings.lookupname+'">'),$(oAgentsForm).append('<input type="hidden" name="lookupvalue" id="'+sFormID+'-lookupvalue" value="'+oSettings.lookupvalue+'">'),$(oAgentsForm).append('<input type="hidden" name="officeid" id="'+sFormID+'-officeid" value="">'),$(oAgentsForm).append('<input type="hidden" name="fullname" id="'+sFormID+'-fullname" value="">'),$(oAgentsForm).append('<input type="hidden" name="agentteamid" id="'+sFormID+'-agentteamid" value="">'),$(oAgentsForm).append('<input type="hidden" name="city" id="'+sFormID+'-city" value="">'),$(oAgentsForm).append('<input type="hidden" name="publicid" id="'+sFormID+'-publicid" value="">'),$(oAgentsForm).append('<input type="hidden" name="fieldselected" id="'+sFormID+'-fieldselected" value="">');var oLookupName=$('input[id="'+sFormID+'-lookupname"]',oAgentsForm),oLookupValue=$('input[id="'+sFormID+'-lookupvalue"]',oAgentsForm),oOfficeID=$('input[id="'+sFormID+'-officeid"]',oAgentsForm),oFullName=$('input[id="'+sFormID+'-fullname"]',oAgentsForm),oAgentTeamID=$('input[id="'+sFormID+'-agentteamid"]',oAgentsForm),oCity=$('input[id="'+sFormID+'-city"]',oAgentsForm),oPublicID=$('input[id="'+sFormID+'-publicid"]',oAgentsForm),oFieldSelected=$('input[id="'+sFormID+'-fieldselected"]',oAgentsForm);$(oAgentsMultiFieldAutocomplete).on("click",function(){$(oLookupName).iqFieldValue(""),$(oLookupValue).iqFieldValue(""),$(oOfficeID).iqFieldValue(""),$(oFullName).iqFieldValue(""),$(oAgentTeamID).iqFieldValue(""),$(oCity).iqFieldValue(""),$(oPublicID).iqFieldValue(""),$(oFieldSelected).iqFieldValue("")}),$(oAgentsMultiFieldAutocomplete).autocomplete({appendTo:oAgentsForm,source:function(request,response){$(".ui-autocomplete",oAgentsForm).removeClass("ui-corner-all").addClass("iq-autocomplete"),$(oAgentsMultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/agents.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getLookup_MultiFieldAutocomplete",Fields:oSettings.fields,city:$("#iq_agents_grid").attr("data-city"),Lookup_Value:$(oAgentsMultiFieldAutocomplete).iqFieldValue()},success:function(jsonRet){var arrSuggenstions=[];if($(oAgentsMultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.STATUS){var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY),label=null,objVals=null;if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++){switch(rs[i].lookupname){case"firstname":label="First Name: "+rs[i].lookupvalue;break;case"lastname":label="Last Name: "+rs[i].lookupvalue;break;case"fullname":label="Full Name: "+rs[i].fullname;break;case"officestate":label="Office State: "+rs[i].lookupvalue+": "+rs[i].officename;break;case"officecity":label="City: "+rs[i].lookupvalue;break;case"officezip":label="Office Zip: "+rs[i].lookupvalue+": "+rs[i].officename;break;case"officeaddress":label="Office Street: "+rs[i].lookupvalue+": "+rs[i].officename;break;case"officename":label="Office Name: "+rs[i].lookupvalue;break;case"language":label="Language: "+rs[i].lookupvalue;break;case"teamname":label="Team: "+rs[i].lookupvalue}objVals={label:label,lookupname:rs[i].lookupname,lookupvalue:rs[i].lookupvalue,fullname:rs[i].fullname,officeid:rs[i].officeid,agentteamid:rs[i].agentteamid,publicid:rs[i].publicid},arrSuggenstions.push(objVals)}else objVals={label:"NO RECORDS FOUND"},arrSuggenstions[0]=objVals}else $.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE);response(arrSuggenstions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet.responseText)}})},select:function(e,ui){$(oLookupName).iqFieldValue(""),$(oLookupValue).iqFieldValue(""),$(oOfficeID).iqFieldValue(""),$(oFullName).iqFieldValue(""),$(oAgentTeamID).iqFieldValue(""),$(oPublicID).iqFieldValue(""),""!==ui.item.value&&($(oLookupName).iqFieldValue(ui.item.lookupname.toLowerCase()),$(oLookupValue).iqFieldValue(ui.item.lookupvalue.toLowerCase()),$(oOfficeID).iqFieldValue(ui.item.officeid.toLowerCase()),$(oPublicID).iqFieldValue(ui.item.publicid.toLowerCase()),$(oFieldSelected).iqFieldValue("true"),"fullname"===ui.item.lookupname.toLowerCase()&&$(oFullName).iqFieldValue(ui.item.fullname.toLowerCase().replace(/ /g,"-")),"teamname"===ui.item.lookupname.toLowerCase()&&($(oAgentTeamID).iqFieldValue(ui.item.agentteamid.toLowerCase()),$(oLookupValue).iqFieldValue(ui.item.lookupvalue.toLowerCase().replace(/ /g,"-"))),"officecity"===ui.item.lookupname.toLowerCase()&&($(oCity).iqFieldValue(ui.item.lookupvalue.toLowerCase()),$(oLookupValue).iqFieldValue(ui.item.lookupvalue.toLowerCase())),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[]))}},{autofill:!0})})}})}(jQuery);
//# sourceMappingURL=autocomplete.min.js.map
;
/* file: ../assets/js/min/banners.min.js */
!function($){"use strict";$(document).ready(function(){var listing_banners=$("#iq_listing_banners");0!==listing_banners.length&&$(listing_banners).iqBanners({location:"listing"});var footer_banners=$("#iq_footer_banners");0!==footer_banners.length&&$(footer_banners).iqBanners({location:"footer"});var callout_banners=$("#iq_callout_banners");0!==callout_banners.length&&$(callout_banners).iqBanners({location:"callout"});var blog_banners=$("#iq_blog_banners");0!==blog_banners.length&&$(blog_banners).iqBanners({location:"blog"});var showcase_banners=$("#iq_showcase_banners");0!==showcase_banners.length&&($(".agent-info").css("border-bottom","none"),$(showcase_banners).iqBanners({location:"showcase"}));var house_value_banners=$("#iq_house_value_banners");0!==house_value_banners&&$(house_value_banners).iqBanners({location:"house-value"});var mortgage_calculator_top=$("#iq_mortgage_calculator_top");0!==mortgage_calculator_top&&$(mortgage_calculator_top).iqBanners({location:"mortgage-calculator-top"});var mortgage_calculator_bottom=$("#iq_mortgage_calculator_bottom");0!==mortgage_calculator_bottom&&$(mortgage_calculator_bottom).iqBanners({location:"mortgage-calculator-bottom"})}),$.iqBanners={load:function(items,order,location,oDiv){var itemid=0,viewed_items=$.parseJSON($.iqUtils.sessionStorage("iq_banner_"+location))||[],nonviewed_items=[];"object"!=typeof viewed_items&&(viewed_items=[]),viewed_items.length>=items.length&&(viewed_items="random"===order&&1!==items.length?[viewed_items[items.length-1]]:[]);for(var i=0;i<items.length;i++){-1===viewed_items.indexOf(i)&&nonviewed_items.push(i)}itemid="random"===order?nonviewed_items[Math.floor(Math.random()*nonviewed_items.length)]:nonviewed_items[0];var item=items[itemid];viewed_items.push(itemid),$.iqUtils.sessionStorage("iq_banner_"+location,viewed_items);var id="iq_banner_"+itemid;$(oDiv).html('<a class="iq-banner" id="'+id+'" href="'+item.href+'" target="'+item.target+'" title="'+item.name+'"><img src="'+item.url+'" alt="'+item.name+'" style="max-width:100%;" /></a>'),$.iqUtils.analyticsPageView({page_title:item.name,page_location:self.location.origin+location,page_path:location.pathname}),item.displaySeconds>0&&setTimeout(function(){$.iqBanners.load(items,order,location,oDiv)},1e3*item.displaySeconds)}},$.fn.extend({iqBanners:function(options){var settings={location:""};options&&$.extend(settings,options),this.each(function(){var oDiv=$(this),location=settings.location;""===location&&$.iqUtils.uiMessage("","Please specify a location for the banners.",5e3),$.ajax({url:"/components/banners.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"get",location:location},success:function(jsonRet){0===jsonRet.STATUS?$.iqBanners.load(jsonRet.BANNERS.items,jsonRet.BANNERS.order,location,oDiv):2===jsonRet.STATUS||$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})})}})}(jQuery);
//# sourceMappingURL=banners.min.js.map
;
/* file: ../assets/js/min/blog.min.js */
!function($){"use strict";$(document).ready(function(){0!==$("#iq_blog").length&&($.iqBlog.blogid=$("#iq_blog").attr("data-blogid"),$.iqBlog.entryid=$("#iq_blog").attr("data-entryid"),""!==$("#iq_blog").attr("data-entryid")&&$.iqBlog.getComments($.iqBlog.blogid,$.iqBlog.entryid),$("#searchcriteria").bind("keypress",function(e){13===e.keyCode&&$.iqBlog.search()}))}),$.iqBlog={blogid:"",entryid:"",search:function(){var sSearchCriteria=$("#searchcriteria").iqFieldValue();if(""===sSearchCriteria)return!1;var sSearchString="/blog/";return sSearchString+=$.iqBlog.blogid+"/",sSearchString+="searchcriteria_"+sSearchCriteria+"/",self.location=sSearchString,!0},gotopage:function(pageurl){self.location=pageurl+"startpage_"+$("#iq_blog_gotopage").iqFieldValue()+"/"},getComments:function(blogid,entryid){return setTimeout(function(){$.ajax({url:"/components/blog.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"getComments",BlogID:blogid,EntryID:entryid},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_blog_comments").html(jsonRet.LAYOUT):$.iqUtils.uiMessage("Error",jsonRet.MESSAGE+"\r\n"+jsonRet.DETAIL),$("#blog_login_form").iqForm_Rules(),$("#blog_user_form").iqForm_Rules()},error:function(httpRet){void 0!==httpRet.CONTENT?$.iqUtils.uiMessage("Error",httpRet.MESSAGE):$.iqUtils.uiMessage("Error",$.iqUtils.parseError(httpRet.responseText))}})},500),!0},Log_Off:function(){return $.iqUtils.uiProcessing("open"),$.iqUtils.cookie("Blog_isAuthenticated_"+$.iqBlog.blogid,"F",-365),$.iqUtils.cookie("Blog_FirstName_"+$.iqBlog.blogid,"",-365),$.iqUtils.cookie("Blog_LastName_"+$.iqBlog.blogid,"",-365),$.iqUtils.cookie("blog_email_"+$.iqBlog.blogid,"",-365),$.iqUtils.cookie("Blog_Password_"+$.iqBlog.blogid,"",-365),$.iqUtils.cookie("Blog_AutoLogin_"+$.iqBlog.blogid,"F",-365),$.iqBlog.getComments($.iqBlog.blogid,$.iqBlog.entryid),$.iqUtils.uiProcessing("close"),!0},Login_Save:function(){if(!$("#blog_login_form").iqForm_Check())return!1;$.iqUtils.uiProcessing("open");var data=$("#blog_login_form").iqSerializeFormToStruct();return data.ReturnFormat="json",data.Method="Login",setTimeout(function(){$.ajax({url:"/components/blog.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.cookie("Blog_isAuthenticated_"+$.iqBlog.blogid,"T",365),$.iqUtils.cookie("Blog_FirstName_"+$.iqBlog.blogid,jsonRet.FIRSTNAME,365),$.iqUtils.cookie("Blog_LastName_"+$.iqBlog.blogid,jsonRet.LASTNAME,365),$.iqUtils.cookie("blog_email_"+$.iqBlog.blogid,jsonRet.EMAIL,365),"T"===jsonRet.SAVELOGIN?$.iqUtils.cookie("Blog_Password_"+$.iqBlog.blogid,jsonRet.PASSWORD,365):$.iqUtils.cookie("Blog_Password_"+$.iqBlog.blogid,jsonRet.PASSWORD,1),"T"===jsonRet.AUTOLOGIN&&"T"===jsonRet.SAVELOGIN?$.iqUtils.cookie("Blog_AutoLogin_"+$.iqBlog.blogid,"T",365):$.iqUtils.cookie("Blog_AutoLogin_"+$.iqBlog.blogid,"T",-1),$.iqBlog.getComments($.iqBlog.blogid,$.iqBlog.entryid)):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?($.iqUIErrorLog("setlog",httpRet.CONTENT),$("#blog_login_message").html(httpRet.CONTENT)):$("#blog_login_message").html($.iqUtils.parseError(httpRet.responseText))}})},500),!1},Password_Reminder_Display:function(){$("#blog_login_display_form_dialog").dialog("close"),$.iqUtils.uiProcessing("open"),$("body").append('<div id="blog_password_reminder_display_form_dialog"></div>'),$("#blog_password_reminder_display_form_dialog").dialog({closeOnEscape:!1,title:"",width:500,resizable:!1,autoOpen:!1,modal:!0,beforeClose:function(){$(this).remove()},zIndex:900});var data={ReturnFormat:"json",Method:"Password_Reminder_Form"};return setTimeout(function(){$.ajax({url:"/components/blog_layout.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#blog_password_reminder_display_form_dialog").html(jsonRet.LAYOUT),$("#blog_passwordreminder_form").iqForm_Rules(),$("#blog_password_reminder_display_form_dialog").dialog("open")):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?$("#blog_password_reminder_display_form_dialog").html(httpRet.CONTENT):$("#blog_password_reminder_display_form_dialog").html($.iqUtils.parseError(httpRet.responseText)),$("#blog_password_reminder_display_form_dialog").dialog("open")}})},500),!1},Password_Reminder_Save:function(){$.iqUtils.uiProcessing("open");var data={ReturnFormat:"json",Method:"PasswordReminder",email:$("#blog_passwordreminder_form-email").iqFieldValue(),blogid:$.iqBlog.blogid};return setTimeout(function(){$.ajax({url:"/components/blog.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#blog_password_reminder_display_form_dialog").dialog("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3)):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?$("#blog_password_reminder_display_form_dialog").html(httpRet.CONTENT):$("#blog_password_reminder_display_form_dialog").html($.iqUtils.parseError(httpRet.responseText))}})},500),!1},User_Create:function(){if(!$("#blog_user_form").iqForm_Check())return!1;$.iqUtils.uiProcessing("open");var data=$("#blog_user_form").iqSerializeFormToStruct();return data.ReturnFormat="json",data.Method="ProcessUser",setTimeout(function(){$.ajax({url:"/components/blog.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.cookie("Blog_isAuthenticated_"+$.iqBlog.blogid,"T",365),$.iqUtils.cookie("Blog_FirstName_"+$.iqBlog.blogid,jsonRet.FIRSTNAME,365),$.iqUtils.cookie("Blog_LastName_"+$.iqBlog.blogid,jsonRet.LASTNAME,365),$.iqUtils.cookie("blog_email_"+$.iqBlog.blogid,jsonRet.EMAIL,365),$.iqBlog.getComments($.iqBlog.blogid,$.iqBlog.entryid)):2===jsonRet.STATUS?$.iqUtils.uiMessage("Notice",jsonRet.MESSAGE):$("#blog_login_message").html(jsonRet.DETAIL)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?$("#blog_login_message").html(httpRet.CONTENT):$("#blog_login_message").html($.iqUtils.parseError(httpRet.responseText))}})},500),!1},User_Display:function(action){$.iqUtils.uiProcessing("open"),$("body").append('<div id="blog_user_display_form_dialog"></div>'),$("#blog_user_display_form_dialog").dialog({closeOnEscape:!1,title:"Profile",width:500,resizable:!0,autoOpen:!1,bgiframe:!0,modal:!0,beforeClose:function(){$(this).remove()},zIndex:900});var data={ReturnFormat:"json",Method:"User_Form",Email:$.iqUtils.cookie("blog_email_"+$.iqBlog.blogid),BlogID:$.iqBlog.blogid,Action:action};setTimeout(function(){$.ajax({url:"/components/blog_layout.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#blog_user_display_form_dialog").html(jsonRet.LAYOUT),$("#blog_user_form").iqForm_Rules()):$("#blog_user_display_form_dialog").html(jsonRet.CONTENT),$("#blog_user_display_form_dialog").dialog("open")},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?$("#blog_user_display_form_dialog").html(httpRet.CONTENT):$("#blog_user_display_form_dialog").html($.iqUtils.parseError(httpRet.responseText)),$("#blog_user_display_form_dialog").dialog("open")}})},500)},User_Save:function(){if(!$("#blog_user_form").iqForm_Check())return!1;$.iqUtils.uiProcessing("open");var data=$("#blog_user_form").iqSerializeFormToStruct();return data.ReturnFormat="json",data.Method="ProcessUser",setTimeout(function(){$.ajax({url:"/components/blog.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.cookie("Blog_isAuthenticated_"+$.iqBlog.blogid,"T",365),$.iqUtils.cookie("Blog_FirstName_"+$.iqBlog.blogid,jsonRet.FIRSTNAME,365),$.iqUtils.cookie("Blog_LastName_"+$.iqBlog.blogid,jsonRet.LASTNAME,365),$.iqUtils.cookie("blog_email_"+$.iqBlog.blogid,jsonRet.EMAIL,365),$.iqBlog.getComments($.iqBlog.blogid,$.iqBlog.entryid),$("#blog_user_display_form_dialog").dialog("close")):2===jsonRet.STATUS?$.iqUtils.uiMessage("Notice",jsonRet.MESSAGE):$.iqUtils.uiMessage("Error",jsonRet.DETAIL)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?$("#blog_user_display_form_dialog").html(httpRet.CONTENT):$("#blog_user_display_form_dialog").html($.iqUtils.parseError(httpRet.responseText)),$("#blog_user_display_form_dialog").dialog("open")}})},500),!1},Create_Comment:function(){$.iqUtils.uiProcessing("open");var data={ReturnFormat:"json",Method:"CreateComment",BlogID:$.iqBlog.blogid,EntryID:$.iqBlog.entryid,Email:$.iqUtils.cookie("blog_email_"+$.iqBlog.blogid),Comment:$("#blog_comment_form-comment").iqFieldValue()};return setTimeout(function(){$.ajax({url:"/components/blog.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){0===jsonRet.STATUS?$.iqBlog.getComments($.iqBlog.blogid,$.iqBlog.entryid):$.iqUtils.uiMessage("Error",jsonRet.MESSAGE+"\r\n"+jsonRet.DETAIL),$.iqUtils.uiProcessing("close")},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.CONTENT?$.iqUtils.uiMessage("Error",httpRet.MESSAGE):$.iqUtils.uiMessage("Error",$.iqUtils.parseError(httpRet.responseText))}})},500),!1}}}(jQuery);
//# sourceMappingURL=blog.min.js.map
;
/* file: ../assets/js/min/canvasdrawing.min.js */
!function($){"use strict";$(document).ready(function(){}),$.iqCanvasDrawing_init=function(canvas_element,form_element,commands_element){var canvas=$(canvas_element),commands=$(commands_element),pen=canvas[0].getContext("2d"),lastPenPoint=null,ismobile=new RegExp("iPhone|iPad|iPod|android|webOS","i").test(navigator.userAgent),addCommand=function(command){commands.val(commands.val()+";"+command)},getCanvasLocalCoordinates=function(pageX,pageY){var position=canvas.offset();return{x:pageX-position.left,y:pageY-position.top}},getTouchEvent=function(event){return ismobile?window.event.targetTouches[0]:event},onTouchStart=function(event){var touch=getTouchEvent(event),localPosition=getCanvasLocalCoordinates(touch.pageX,touch.pageY);lastPenPoint={x:localPosition.x,y:localPosition.y},pen.beginPath(),pen.moveTo(lastPenPoint.x,lastPenPoint.y),addCommand("start:"+lastPenPoint.x+","+lastPenPoint.y),canvas.bind(ismobile?"touchmove":"mousemove",onTouchMove),canvas.bind(ismobile?"touchend":"mouseup",onTouchEnd)},onTouchMove=function(event){var touch=getTouchEvent(event),localPosition=getCanvasLocalCoordinates(touch.pageX,touch.pageY);lastPenPoint={x:localPosition.x,y:localPosition.y},pen.lineTo(lastPenPoint.x,lastPenPoint.y),pen.stroke(),addCommand("lineTo:"+lastPenPoint.x+","+lastPenPoint.y)},onTouchEnd=function(){canvas.unbind(ismobile?"touchmove":"mousemove"),canvas.unbind(ismobile?"touchend":"mouseup")};canvas.bind(ismobile?"touchstart":"mousedown",function(event){return onTouchStart(event),!1})}}(jQuery);
//# sourceMappingURL=canvasdrawing.min.js.map
;
/* file: ../assets/js/min/classes.min.js */
!function($){"use strict";$(document).ready(function(){var panelbodyheight=0;$(".iq-panel-body").each(function(){$(this).height()>=panelbodyheight&&(panelbodyheight=$(this).height())}),$(".iq-panel-body").css({"min-height":panelbodyheight}),$("#iq_additionaldetails").css({"max-height":panelbodyheight-50,overflow:"auto"}),$("[data-terms]").css({overflow:"auto",height:panelbodyheight-100})}),$.iqClasses={check_form_fields:function(){""===$("#iq_classes_form-iq_classid").iqFieldValue()?$.iqUtils.uiMessage("","Please select a course."):$("#iq_classes_carousel").carousel("next")},toggle_classes:function(){var totalcost=0;$("[data-toggleclass]").each(function(){$(this).prop("checked")?($("."+$(this).attr("data-toggleclass")).show(),totalcost=parseInt(totalcost)+parseInt($(this).attr("data-cost")),$("[data-classtotal=true]").each(function(){$(this).html(totalcost)}),$("#iq_cc_form-order_amount").iqFieldValue(totalcost)):$("."+$(this).attr("data-toggleclass")).hide()})},register:function(){$("#iq_registration_form").iqForm_Check()&&($.iqClasses.copy_fields(),$("#iq_skip_payment-skip").prop("checked")?($("#iq_classes_carousel").carousel(parseInt($("[data-slide=thankyou]").attr("data-slideid"))-1),$.iqClasses.authorize_cc()):$("#iq_classes_carousel").carousel("next"))},copy_fields:function(){$("#iq_billing-sameasregistration").prop("checked")||$("#iq_skip_payment-skip").prop("checked")?($("#iq_cc_form-customername").iqFieldValue($("#iq_registration_form-firstname").iqFieldValue()+" "+$("#iq_registration_form-lastname").iqFieldValue()),$("#iq_cc_form-phone").iqFieldValue($("#iq_registration_form-phone").iqFieldValue()),$("#iq_cc_form-email").iqFieldValue($("#iq_registration_form-email").iqFieldValue()),$("#iq_cc_form-address1").iqFieldValue($("#iq_registration_form-address1").iqFieldValue()),$("#iq_cc_form-address2").iqFieldValue($("#iq_registration_form-address2").iqFieldValue()),$("#iq_cc_form-city").iqFieldValue($("#iq_registration_form-city").iqFieldValue()),$("#iq_cc_form-stateid").iqFieldValue($("#iq_registration_form-state").iqFieldValue()),$("#iq_cc_form-postalcode").iqFieldValue($("#iq_registration_form-zip_code").iqFieldValue())):($("#iq_cc_form-customername").iqFieldValue(""),$("#iq_cc_form-phone").iqFieldValue(""),$("#iq_cc_form-email").iqFieldValue(""),$("#iq_cc_form-address1").iqFieldValue(""),$("#iq_cc_form-address2").iqFieldValue(""),$("#iq_cc_form-city").iqFieldValue(""),$("#iq_cc_form-stateid").iqFieldValue(""),$("#iq_cc_form-postalcode").iqFieldValue(""))},authorize_cc:function(){$.iqClasses.toggle_classes();var customername=$("#iq_cc_form-customername").iqFieldValue(),phone=$("#iq_cc_form-phone").iqFieldValue(),email=$("#iq_cc_form-email").iqFieldValue(),cardcode=$("#iq_cc_form-cardcode").iqFieldValue(),cardno=$("#iq_cc_form-cardno").iqFieldValue(),cardtype=$("#iq_cc_form-cardtype").iqFieldValue(),expirationyear=$("#iq_cc_form-expirationyear").iqFieldValue(),expirationmonth=$("#iq_cc_form-expirationmonth").iqFieldValue(),billing_address1=$("#iq_cc_form-address1").iqFieldValue(),billing_address2=$("#iq_cc_form-address2").iqFieldValue(),billing_city=$("#iq_cc_form-city").iqFieldValue(),billing_stateid=$("#iq_cc_form-stateid").iqFieldValue(),billing_postalcode=$("#iq_cc_form-postalcode").iqFieldValue(),order_amount=$("#iq_cc_form-order_amount").iqFieldValue(),arrclasses=new Array([]);$("[data-classname]").each(function(){$(this).prop("checked")&&arrclasses.push($(this).attr("data-classname"))});var ordername=arrclasses.toString()+"-"+customername+"-"+$("#iq_cc_datetime").iqFieldValue();$.iqUtils.uiProcessing("open","Processing"),$.ajax({url:"/components/paymentgateway.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",customername:customername,phone:phone,email:email,cardcode:cardcode,cardtype:cardtype,cardno:cardno,expirationyear:expirationyear,expirationmonth:expirationmonth,billing_isdefault:"F",billing_fullname:customername,billing_address1:billing_address1,billing_address2:billing_address2,billing_city:billing_city,billing_postalcode:billing_postalcode,billing_stateid:billing_stateid,billing_countryid:"1",ordername:ordername.substring(1),order_amount:order_amount,active:"active",Method:"cc_process_payment"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.order_id=jsonRet.ORDERID,$.billing_id=jsonRet.BILLINGID,$.customer_id=jsonRet.CUSTOMERID,$.iqClasses.process_student()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))}})},process_student:function(){var oDataDefaults={returnformat:"json",method:"process_student"},oDataFields=$("#iq_registration_form").iqSerializeFormToStruct({includeblanks:!1}),oData=$.extend(oDataDefaults,oDataFields);oData.provider_billingprofileid=$.billing_id,$.ajax({url:"/components/classes.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){0===jsonRet.STATUS?($.student_id=jsonRet.STUDENTID,$.iqClasses.invoice()):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)},error:function(jsonRet){$.iqUtils.uiMessage("",jsonRet.MESSAGE)}})},invoice:function(){$.iqUtils.uiProcessing("open");1===$("#iq_registration_form-lastfourssn").length&&$("#iq_registration_form-lastfourssn").iqFieldValue(),1===$("#iq_registration_form-pocketlicensenumber").length&&$("#iq_registration_form-pocketlicensenumber").iqFieldValue(),$.ajax({url:"/components/classes_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",customer_id:$.customer_id,order_id:$.order_id,billing_id:$.billing_id,studentid:$.student_id,classes_ordered:$("#iq_classes_form-iq_classid").iqFieldValue(),cc:$("[data-cc]").attr("data-cc"),Method:"invoice"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.order_id=jsonRet.ORDERID,$.iqClasses.orders_history($.student_id,$("#iq_classes_form-iq_classid").iqFieldValue()),$("#iq_classes_carousel").carousel("next")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))}})},orders_history:function(studentid,classid){$.ajax({url:"/components/classes.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"orders_history",studentid:studentid,classid:classid,invoiceid:$.order_id,skipped_payment:$("#iq_skip_payment-skip").iqFieldValue()},success:function(jsonRet){0!==jsonRet.STATUS&&$.iqUtils.uiMessage("",jsonRet.CONTENT)},error:function(jsonRet){$.iqUtils.uiMessage("",jsonRet.MESSAGE)}})}}}(jQuery);
//# sourceMappingURL=classes.min.js.map
;
/* file: ../assets/js/min/client.min.js */
!function($){"use strict";$(document).ready(function(){$.iqUtils.sessionStorage("client");navigator.geolocation}),$.client={companyid:"",location:{isset:!1,country:"",region:"",city:"",zipcode:"",latitude:0,longitude:0,companyid:""},setLatLong:function(pLocation){$.client.location.latitude=pLocation.coords.latitude,$.client.location.longitude=pLocation.coords.longitude,$.client.checkin()},getGeoLocation:function(pLocation){$.client.location.latitude=pLocation.coords.latitude,$.client.location.longitude=pLocation.coords.longitude,$.getScript("http://dev.virtualearth.net/REST/v1/Locations/"+pLocation.coords.latitude+","+pLocation.coords.longitude+"?output=json&jsonp=$.client.setGeoLocation&key=ApvgVQjtiliKxiCi5UedUwNuNDi7l6-_3mHU64npn5zJLZ0mPQAUl9vF0gsLQipz")},setGeoLocation:function(pLocation){var address=pLocation.resourceSets[0].resources[0].address;$.client.companyid=$_client.companyid,$.client.location.isset=!0,$.client.location.country=address.countryRegion,$.client.location.region=address.adminDistrict,$.client.location.city=address.locality,$.client.location.zipcode=address.postalCode,$.client.checkin()},getIPLocation:function(){$.getScript("http://api.ipinfodb.com/v3/ip-city/?key=d6794b35ce48d845b403f923908daa2e3315087d75b38459cc7334336cae5716&ip="+$_client.addr+"&format=json&callback=$.client.setIPLocation")},setIPLocation:function(pLocation){console.log("setIPLocation"),console.log(pLocation),$.client.companyid=$_client.companyid,$.client.location.isset=!0,$.client.location.country=pLocation.countryName,$.client.location.region=pLocation.regionName,$.client.location.city=pLocation.cityName,$.client.location.zipcode=pLocation.zipCode,$.client.location.latitude=pLocation.latitude,$.client.location.longitude=pLocation.longitude,$.client.checkin()},checkin:function(){$.iqUtils.sessionStorage("client",$.client.location),setTimeout(function(){$.client.checkin()},3e4);var options={async:!0,url:"/php/client/checkin/",data:{country:$.client.location.country,region:$.client.location.region,city:$.client.location.city,zipcode:$.client.location.zipcode,latitude:$.client.location.latitude,longitude:$.client.location.longitude,companyid:$.client.companyid},onSuccess:function(ajaxReturn){$.client.process_checkin(ajaxReturn)}};return $.ajax(options),!1},process_checkin:function(pReturn){0!==pReturn.status&&console.log(pReturn)}}}(jQuery);
//# sourceMappingURL=client.min.js.map
;
/* file: ../assets/js/min/communities.min.js */
!function($){"use strict";$(document).ready(function(){1===$("#iq_new_community_search").length&&($("#iq_new_community_search-bedsmin").iqFieldFormat({min:0,max:99,displayMin:"BR Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"BR Min",format:"any"}),$("#iq_new_community_search-bedsmax").iqFieldFormat({min:0,max:99,displayMin:"BR Max",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"BR Max",format:"any"}),$("#iq_new_community_search-bedsmin").iqTextDropdown(),$("#iq_new_community_search-bedsmax").iqTextDropdown(),$("#iq_new_community_search-bathsmin").iqFieldFormat({min:0,max:99,displayMin:"BA Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"BA Min",format:"any"}),$("#iq_new_community_search-bathsmax").iqFieldFormat({min:0,max:99,displayMin:"BA Max",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"BA Max",format:"any"}),$("#iq_new_community_search-bathsmin").iqTextDropdown(),$("#iq_new_community_search-bathsmax").iqTextDropdown(),$("#iq_new_community_search-sqfootmin").iqFieldFormat({min:0,max:9999,displayMin:"Sq Ft Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"Sq Ft Min",format:"any"}),$("#iq_new_community_search-sqfootmax").iqFieldFormat({min:0,max:9999,displayMin:"Sq Ft Max",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"Sq Ft Max",format:"any"}),$("#iq_new_community_search-sqfootmin").iqTextDropdown(),$("#iq_new_community_search-sqfootmax").iqTextDropdown(),$("#iq_new_community_search").iqMultiFieldAutocomplete({mlsid:$("#multifield_autocomplete").attr("mlsid_list"),area:"",city:"",county:"",state:"",zip_code:"",street_address:"",fields:"companycommunity,city,state,zip_code",callback:$.iqCommunities.update_searchform,propertytype:"residential",async:!0})),$("#multifield_autocomplete").bind("focus",function(){$("#iq_new_community_search-state").iqFieldValue(""),$("#iq_new_community_search-city").iqFieldValue(""),$("#iq_new_community_search-zip_code").iqFieldValue(""),$("#iq_new_community_search-communityname").iqFieldValue("")})}),$.iqCommunities={update_searchform:function(){var oForm=$("#iq_new_community_search");$("#iq_new_community_search-state").iqFieldValue(""),$("#iq_new_community_search-city").iqFieldValue(""),$("#iq_new_community_search-zip_code").iqFieldValue(""),$("#iq_new_community_search-communityname").iqFieldValue(""),$("#iq_new_community_search-state").iqFieldValue($(oForm).data("data-state")),$("#iq_new_community_search-city").iqFieldValue($(oForm).data("data-city")),$("#iq_new_community_search-zip_code").iqFieldValue($(oForm).data("data-zip_code")),$("#iq_new_community_search-communityname").iqFieldValue($(oForm).data("data-communityname"))},submit_search:function(){var pricemin=$("#iq_new_community_search-pricemin").iqFieldValue(),pricemax=$("#iq_new_community_search-pricemax").iqFieldValue(),bedsmin=$("#iq_new_community_search-bedsmin-display").iqFieldValue(),bedsmax=$("#iq_new_community_search-bedsmax-display").iqFieldValue(),bathsmin=$("#iq_new_community_search-bathsmin-display").iqFieldValue(),bathsmax=$("#iq_new_community_search-bathsmax-display").iqFieldValue(),sqfootmin=$("#iq_new_community_search-sqfootmin-display").iqFieldValue(),sqfootmax=$("#iq_new_community_search-sqfootmax-display").iqFieldValue(),state=$("#iq_new_community_search-state").iqFieldValue(),city=$("#iq_new_community_search-city").iqFieldValue(),zip_code=$("#iq_new_community_search-zip_code").iqFieldValue(),communityname=$("#iq_new_community_search-communityname").iqFieldValue(),aSearchString=($("#iq_new_community_search").data("data-fieldselected"),[]);aSearchString.push("/communities/searchresults"),""!==state&&aSearchString.push("/state_"+state),""!==city&&aSearchString.push("/city_"+city),""!==zip_code&&aSearchString.push("/zipcode_"+zip_code),""!==communityname&&aSearchString.push("/communityname_"+communityname),""!==pricemin&&aSearchString.push("/pricemin_"+pricemin),""!==pricemax&&aSearchString.push("/pricemax_"+pricemax),$.isNumeric(bedsmin)&&aSearchString.push("/bedsmin_"+bedsmin),$.isNumeric(bedsmax)&&aSearchString.push("/bedsmax_"+bedsmax),$.isNumeric(bathsmin)&&aSearchString.push("/bathsmin_"+bathsmin),$.isNumeric(bathsmax)&&aSearchString.push("/bathsmax_"+bathsmax),$.isNumeric(sqfootmin)&&aSearchString.push("/sqfootmin_"+sqfootmin),$.isNumeric(sqfootmax)&&aSearchString.push("/sqfootmax_"+sqfootmax),self.location=aSearchString.join("").toLowerCase()}}}(jQuery);
//# sourceMappingURL=communities.min.js.map
;
/* file: ../assets/js/min/community.min.js */
!function($){"use strict";$(document).ready(function(){1===$("#iq_community_map").length&&$.iqCommunity.map(),1===$("#iq_community_leadsource").length&&$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields",sourcename:$("#iq_community_leadsource").data("sourcename"),requiredonly:!0},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_community_leadsource").html(jsonRet.LAYOUT),$("#iq_lead_form").iqForm_Rules(jsonRet.FORMRULES)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})}),$.iqCommunity={map:function(){$("#iq_community_map").iqGoogleMaps({Lat:$("#iq_community_map").data("lat"),Lon:$("#iq_community_map").data("lon"),ZoomLevel:12,mapTypeId:"roadmap"})}}}(jQuery);
//# sourceMappingURL=community.min.js.map
;
/* file: ../assets/js/min/contact.min.js */
!function($){"use strict";$(document).ready(function(){var oLeadForm=$("#iq_contact_form"),oOptions={sourcename:$(oLeadForm).data("sourcename"),publicid:$(oLeadForm).data("publicid#"),propertytype:$(oLeadForm).data("propertytype"),ml_number:$(oLeadForm).data("ml_number"),mlsid:$(oLeadForm).data("mlsid"),agentteamid:$(oLeadForm).data("agentteamid"),requiredonly:$(oLeadForm).data("requiredonly")},ret=$.iqLeads.layout(oOptions),layout="";layout=0===ret.STATUS?ret.LAYOUT:ret.CONTENT,$(oLeadForm).html(layout).iqForm_Rules()}),$.iqContact={}}(jQuery);
//# sourceMappingURL=contact.min.js.map
;
/* file: ../assets/js/min/default.min.js */
!function($){$.default={}}(jQuery);
//# sourceMappingURL=default.min.js.map
;
/* file: ../assets/js/min/editor.min.js */
!function($){"use strict";$(document).ready(function(){$.iqEditor.CheckLoginStatus(),1===$("#iq-custompage").length&&$("#iq-custompage").wrap("<div class='iq-custompage-wrapper'></div>"),$.existing_leadform="",$.kiosk_settings=""}),$(document).on("focusin",function(e){$(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()}),$(window).resize(function(){0===$("#iqwebsite_previewpage_dialog").length&&$("#editing_buttons_cancel").is(":visible")&&($(".edit").remove(),$.iqEditor.FindEditableFields())}),$.iqEditor={LoginDialog:function(){0===$("#iq_editor_login_dialog").length&&$("body").append('<div id="iq_editor_login_dialog"><div id="iq_editor_login_body"></div></div>'),$("#iq_editor_login_dialog").dialog({closeOnEscape:!0,title:"SitesBay Login",width:"auto",height:"auto",resizable:!1,autoOpen:!1,bgiframe:!0,modal:!1,draggable:!0,beforeClose:function(){$(this).remove()},zIndex:100}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"login"},success:function(jsonRet){if(0===jsonRet.STATUS)if($("#iq_editor_login_dialog").html(jsonRet.LAYOUT),$("#iq_editor_login_dialog").dialog("open"),$("#iq_editor_login_dialog").iqRecenterDialog(),$("#login-form_userid").focus(function(){$("#login-form_userid").iqFieldValue("")}),$("#login-form_password").focus(function(){$("#login-form_password").iqFieldValue("")}),"t"===$.iqUtils.cookie("LoginAutoLogin")){var userid=$.iqUtils.cookie("LoginUserID"),password=$.iqUtils.cookie("LoginPassword"),autologin=$.iqUtils.cookie("LoginAutoLogin");$("#login-form_userid").iqFieldValue(userid),$("#login-form_password").iqFieldValue("password"),$("#login-form_passwordhash").iqFieldValue(password),$("#login-form_autologin").attr("checked","checked").iqFieldValue(autologin),$.iqEditor.Login()}else""!==$("#login_error").html()&&($("#login_error").slideToggle(),setTimeout(function(){$("#login-form_password").parent().removeClass("iq-login-field-wrapper-error"),$("#login_error").html("").slideToggle()},5e3));else $.iqUtils.uiProcessing("close"),$.iqUIMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Login:function(){var userid=$("#login-form_userid").iqFieldValue(),password=$("#login-form_password").iqFieldValue(),passwordhash=$("#login-form_passwordhash").iqFieldValue(),autologin=$("#login-form_autologin").iqFieldValue(),showingerror=!1;return"t"!==autologin&&($("#login-form_passwordhash").iqFieldValue(""),passwordhash=""),$("#login-form_userid").parent().removeClass("iq-login-field-wrapper-error"),$("#login-form_password").parent().removeClass("iq-login-field-wrapper-error"),""===userid||"User ID"===userid?($("#login-form_userid").parent().addClass("iq-login-field-wrapper-error"),showingerror||($("#login_error").html("Invalid User ID").slideToggle("fast"),showingerror=!0,setTimeout(function(){$("#login-form_userid").parent().removeClass("iq-login-field-wrapper-error"),$("#login_error").html("").slideToggle("fast"),showingerror=!1},5e3)),!1):""===password||"Password"===password?($("#login-form_password").parent().addClass("iq-login-field-wrapper-error"),showingerror||($("#login_error").html("Invalid Password").slideToggle("fast"),showingerror=!0,setTimeout(function(){$("#login-form_password").parent().removeClass("iq-login-field-wrapper-error"),$("#login_error").html("").slideToggle("fast"),showingerror=!1},5e3)),!1):($("#login_processing").show(),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{method:"doLogin",returnformat:"json",userid:userid,showallagents:"T",password:password,passwordhash:passwordhash},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.cookie("editorIsAuthed",!0),$.iqUtils.cookie("PublicID",jsonRet.PUBLICID,30),$.iqUtils.cookie("ActingAsPublicID",jsonRet.ACTINGASPUBLICID,30),"t"===$("#login-form_autologin").iqFieldValue()?($.iqUtils.cookie("LoginAutoLogin","t",30),$.iqUtils.cookie("LoginUserID",$("#login-form_userid").iqFieldValue(),30),$.iqUtils.cookie("LoginPassword",jsonRet.PASSWORDHASH,30)):($.iqUtils.cookie("LoginAutoLogin","f",-30),$.iqUtils.cookie("LoginUserID","",-30),$.iqUtils.cookie("LoginPassword","",-30)),$.iqUtils.cookie("isediting","true"),""!==jsonRet.DOMAIN?self.location=jsonRet.DOMAIN:self.location=self.location):($("#login_processing").hide(),$("#login-form_userid").removeAttr("readonly"),$("#login-form_password").removeAttr("readonly"),showingerror||($("#login_error").html(jsonRet.MESSAGE+" - "+jsonRet.DETAIL).slideToggle(),showingerror=!0,setTimeout(function(){$("#login_error").html("").slideToggle(),showingerror=!1},5e3)))},error:function(httpRet){$("#login_processing").hide();var errorMessage=httpRet.MESSAGE;errorMessage=void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?httpRet.MESSAGE:httpRet.responseText,$("#login_error").html(errorMessage).slideToggle(),setTimeout(function(){$("#login_error").html("").slideToggle()},5e3)}}),!1)},MaskedAgentDialog:function(){$("#iq_footer_agent_card").dialog({closeOnEscape:!0,title:"Site Provided By",width:"300px",height:"auto",resizable:!1,autoOpen:!1,bgiframe:!0,modal:!1,draggable:!0,beforeClose:function(){$(this).remove()},zIndex:100}),$("#iq_footer_agent_card").dialog("open")},CheckLoginStatus:function(){if($.iqUtils.cookie("editorIsAuthed")){var maskDomain=$.iqUtils.cookie("maskedDomain");if(""!=maskDomain)var tDomain=maskDomain;else var tDomain=window.location.hostname.toLowerCase().replace("www.","");$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"isAuthorized",publicid:$.iqUtils.cookie("publicid"),domainname:tDomain},success:function(jsonRet){0===jsonRet.STATUS?jsonRet.ISAUTHED?$.iqEditor.EditBar():($.iqUtils.uiMessage("","Error 250: You are not authorized to edit this website"),setTimeout(function(){$.iqEditor.LogOut()},3e3)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}},LogOut:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"logout"},success:function(jsonRet){0===jsonRet.STATUS?setTimeout(function(){self.location=self.location},5e3):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},DisplayLoginHelp:function(){$("body").append('<div id="iqeditor-loginhelp-dialog-container"><div id="iqeditor-loginhelp-dialog" style="padding:10px;"></div></div>'),$("#iqeditor-loginhelp-dialog-container").dialog({closeOnEscape:!0,title:"Login Help",width:550,height:"auto",resizable:!1,autoOpen:!1,bgiframe:!0,modal:!0,draggable:!0,beforeClose:function(){$(this).remove()},zIndex:999}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"LoginHelp_Layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iqeditor-loginhelp-dialog-container").parent().find(".ui-dialog-titlebar").hide(),$("#iqeditor-loginhelp-dialog").html(jsonRet.LAYOUT),$("#iqeditor-loginhelp-dialog-container").dialog("open"),$("#iqeditor-loginhelp-dialog-container").iqRecenterDialog(),$("#passwordrequest_cancel").is(":hidden")&&($("#senduserid").html(""),$("#senduserid").html('<img src="/global/images/button/button.send.jpg" onclick="return $.iqValidateLostPasswordForm();">')),$.iqEditor.HideHelpContents("")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},ChangeHelpLinkImage:function(id,collapse,toggle){var collapsed="/assets/img/login/bullet_arrow_right.gif",expanded="/assets/img/login/bullet_arrow_down.gif";toggle?$("#"+id).attr("src")===expanded?$("#"+id).attr("src",collapsed):$("#"+id).attr("src",expanded):collapse?$("#"+id).attr("src",collapsed):$("#"+id).attr("src",expanded)},ShowHelpContents:function(contentDiv){$("#"+contentDiv).toggle("fast"),$.iqEditor.ChangeHelpLinkImage(contentDiv+"_icon",!0,!0),$.iqEditor.HideHelpContents(contentDiv)},HideHelpContents:function(contentDiv){var helpContentDivs=["ie-find-version","ie6","ie7","ie8","ie9","chrome","firefox","firefox8","opera","safari"];$.each(helpContentDivs,function(key,value){""!==contentDiv?value!==contentDiv&&($("#"+value).hide("fast"),$.iqEditor.ChangeHelpLinkImage(value+"_icon",!0)):($("#"+value).hide(),$.iqEditor.ChangeHelpLinkImage(value+"_icon",!0))})},ValidateLostPasswordForm:function(){if($("#iq_login_help_form").iqForm_Check(),!0===$("#iq_login_help_form").iqForm_Check()){var user_id=$("#login_help_form-userid").iqFieldValue(),send_text=$("#login_help_form-textinfo").iqFieldValue()||"F",send_email=$("#login_help_form-emailinfo").iqFieldValue()||"F";return"F"!==send_text&&""!==send_text||"F"!==send_email&&""!==send_email?($.iqUtils.uiProcessing("open"),$.ajax({type:"POST",dataType:"json",url:"/components/editor.cfc",data:{returnformat:"json",method:"dosendpwdreminder",userid:user_id,emailinfo:send_email,textinfo:send_text},success:function(response){switch($.iqUtils.uiProcessing("close"),$("#iq-help-dialog-container").dialog("close"),response.STATUS){case 0:$.iqUtils.uiMessage("Reminder sent","Your password reminder has successfully been sent. You should receive it shortly");break;case 1:$.iqUtils.uiMessage(response.MESSAGE,response.DETAIL);break;case 2:$.iiqUtils.uiMessage(response.MESSAGE,response.DETAIL)}}}),!0):(alert("Please check a method to receive your login information."),!1)}},EditBar:function(){var pageToEdit=$("body").data("page");if(void 0===pageToEdit)var pageToEdit=$("[data-page]").attr("data-page");var bsVersion=$("body").data("bs")||"3.3.7",methodToCall="edit";"4.1.3"!=$.fn.tooltip.Constructor.VERSION&&"4.1.3"!=bsVersion||(methodToCall="edit_menu_bootstrap_4"),"5.0.2"!=$.fn.tooltip.Constructor.VERSION&&"5.0.2"!=bsVersion||(methodToCall="edit_menu_bootstrap_5"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:methodToCall,page:pageToEdit,ReturnFormat:"json"},success:function(jsonRet){0===jsonRet.STATUS?($("body").prepend(jsonRet.LAYOUT),$("body").append('<div id="iq-data-values" data-arguments=""></div>'),$("body").append('<div id="iq-data-values-menu" data-arguments=""></div>'),$("#webeditor").show(),$("#editing_buttons_save").hide(),$("#editing_buttons_saving").hide(),$("body").addClass("editbar"),$("body").css("margin-top","50px"),void 0!==$.iqSite&&$.isFunction($.iqSite.initWindowHeight)&&$.iqSite.initWindowHeight(),void 0!==$.iqListings.resizeLayoutPanes&&$.isFunction($.iqListings.resizeLayoutPanes)&&$.iqListings.resizeLayoutPanes(),"true"===$.iqUtils.cookie("isediting")&&($.iqUtils.cookie("isediting","false"),setTimeout(function(){$.iqEditor.FindEditableFields()},1e3))):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},Clear:function(){$("#edit-menu").attr("callback",""),$("#edit-menu").attr("selectfunction",""),$("#edit-menu").attr("img_url",""),$("#edit-menu").attr("img_name",""),$("#edit-menu").attr("img_height",""),$("#edit-menu").attr("img_width",""),$("#edit-menu").attr("fieldid",""),$("#edit-menu").attr("targetdiv","")},ChangeTemplateDialog:function(){$("#iq_editor_choosetemplate_dialog").bsModal({backdrop:!0,title:"Choose A Template",body:$.iqEditor.BuildLoadingDialogHtml("Loading Templates")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",template_code:$("#edit-menu").attr("template-code"),template_theme:$("#edit-menu").attr("template-theme"),Method:"choosetemplate"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_choosetemplate_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_choosetemplate_dialog .modal-footer").css({display:"none"}),$("#iq_template_carousel_nav .img-thumbnail a").on("click",function(e){e.preventDefault();var item=$(this).data("slide");return $("#iq_template_carousel").carousel(item-1),$("#iq_template_carousel_nav").data("slide",item-1),$("#iq_template_carousel_nav .img-thumbnail").css({opacity:".5"}),$("#iq_template_carousel_nav a").css({opacity:".5"}),$(this).parent().css({opacity:"1"}),!1}),$("#iq_template_carousel").on("slid.bs.carousel",function(){$("#iq_template_carousel_nav .img-thumbnail").css({opacity:".5"});var item=$(this).find(".active").index(),nav_item=Math.ceil((item+1)/6);$("#iq_template_carousel_nav").carousel(nav_item-1),$("#iq_template_carousel_nav .img-thumbnail").css({opacity:".5"}),$('#iq_template_carousel_nav a[data-bs-slide="'+(item+1)+'"]').parent().css({opacity:"1"}),$("[data-template-checked]").hide(),$("[data-template-checked = "+(item+1)+"]").show()})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},ChooseTemplateProcess:function(template_code){$.iqUtils.uiProcessing("open");var template_theme=$("#template_"+template_code+"_theme").iqFieldValue();console.log("template_code: "+template_code),console.log("template_theme: "+template_theme),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"choosetemplate",template_code:template_code,template_theme:template_theme,domainname:$("#edit-menu").attr("domainname"),publicid:$.iqUtils.cookie("publicid")},success:function(jsonRet){0===jsonRet.STATUS?self.location="/":(0===jsonRet.STATUS&&($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))),2===jsonRet.STATUS&&($.iqUtils.uiMessage("","Error 598: You are not authorized to edit this website"),setTimeout(function(){$.iqEditor.LogOut()},3e3)))}})},ChangeDomainName:function(){$("#iq_editor_changedomainname_dialog").bsModal({backdrop:!0,title:"Change Domain Name",body:$.iqEditor.BuildLoadingDialogHtml("Loading Domain Dialog")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),Method:"changedomainname"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_changedomainname_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_changedomainname_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},ChangeDomainName_Process:function(){setTimeout(function(){if(""===$("#iq_newdomainname").iqFieldValue())return $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("","The domain name must not be blank"),void $("#iq_newdomainname").focus();$.iqUtils.uiProcessing("open");var replacedomain=$("#iq_replacedomainname").prop("checked");$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"changedomainname",originaldomainname:$("#edit-menu").attr("domainname"),newdomainname:$("#iq_newdomainname").iqFieldValue(),replacedomain:replacedomain},success:function(jsonRet){$.iqUtils.uiProcessing("hide"),0===jsonRet.STATUS?self.location="http://www."+$("#iq_newdomainname").iqFieldValue():($.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT),$("#iq_newdomainname").focus())}})},10)},EditAgentTemplateDialog:function(){$("#iq_editagenttemplate_dialog").bsModal({backdrop:!0,title:"Edit Agent Template",body:$.iqEditor.BuildLoadingDialogHtml("")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"editagenttemplatedialog",publicid:$.iqUtils.cookie("publicid")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editagenttemplate_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editagenttemplate_dialog .modal-footer").css({display:"none"})):(1===jsonRet.STATUS&&$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT),2===jsonRet.STATUS&&($.iqUtils.uiMessage("","Error 704:You are not authorized to edit this website"),setTimeout(function(){$.iqEditor.LogOut()},3e3)))}})},EditAgentTemplate:function(domainname){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"editagenttemplate",domainname:domainname,publicid:$.iqUtils.cookie("publicid")},success:function(jsonRet){0===jsonRet.STATUS?(location="http://"+domainname,setTimeout(function(){$.iqUtils.uiProcessing("close"),$("#iq_editagenttemplate_content_dialog").modal("hide")},1e4)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)}})},UpdateFromAgentTemplateDialog:function(){$("#iq_updatefromagenttemplate_dialog").bsModal({backdrop:!0,title:"Update Agent Websites",body:'<div class="row"><div id="iq_updatefromagenttemplate_dialog" class="col-lg-6 col-lg-offset-6"  text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> </h1></div></div>'}),$("#iq_updatefromagenttemplate_dialog .modal-footer").css({display:"none"}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"updatefromagenttemplatedialog"},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_updatefromagenttemplate_dialog .modal-body").html(jsonRet.LAYOUT):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT))}})},UpdateFromAgentTemplate:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"updatefromagenttemplate"},success:function(jsonRet){0===jsonRet.STATUS?$.iqUtils.uiProcessing("close"):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT))}})},FindEditableFields:function(){if(1!==$('[data-noedit="true"]').length){$('[data-section="companylogo"]').on("click",function(e){e.preventDefault()});var currentPage=null;if("pages"===(currentPage=void 0!==$("body").data("page")?$("body").data("page"):$("#site-wrapper").data("page"))||"default"===currentPage||"house-value"===$("[data-page]").attr("data-page")||"kiosk"===$("[data-page]").attr("data-page")){var foundEditableFields=!1,editBarCounter=1;$("[data-editable]").each(function(){var obj=this,section=$(obj).data("section"),objSectionIsVisible=$(obj).attr("data-show"),objSectionIsEditable=$(obj).attr("data-editable");foundEditableFields=!0,"undefined"===$(obj).data("relative")&&$(this).css({position:"relative"}),$(obj).find("#iq-editsection_"+editBarCounter).remove(),$(obj).find(".iq-hide-section").remove();var appendCSS="",increment=40;$(obj).outerHeight()<=100&&(appendCSS="-small",increment=15);var dataEditableType=$(this).attr("data-editable-type");switch(dataEditableType){case"image":$.data(obj,"content",$(obj).attr("src"));var iwidth=$(this).outerWidth()+4,iheight=$(this).outerHeight()+4;$(obj).css("position","relative"),$(obj).parent().append('<div id="iq-imagesection_'+editBarCounter+'" class="edit" style="width:'+iwidth+"px; height:"+iheight+'px; position:absolute; top:0; margin:-2px 0 0 -2px; text-align:center; cursor:pointer; z-index:999;"></div>'),obj=$("#iq-imagesection_"+editBarCounter),$(obj).parent().append('<div style="padding:10px; font-weight: bold; font-size: 16px; position: absolute; top:0px; left:15px; color: #000000; background-color:rgba(255,255,255,0.3);">Suggested Image Size '+$(this).data("valid_folders").replace("x"," x ")+"</div>");break;case"menu":$.data(obj,"content",$(obj).attr("menuname"));break;case"html":$.data(obj,"content",$(obj).html());break;case"text":$.data(obj,"content",$(obj).text());break;case"iq_listings":case"iq_listings_centralized":$.data(obj,"content",$(obj).attr("data-listings-criteria"));break;case"iq_show_listings_stats":$.data(obj,"content",$(obj).attr("data-show_listings_stats"));break;case"iq_showcase":$.data(obj,"content",$(obj).attr("data-showcase-criteria"));break;case"iq_areas":$.data(obj,"content",$(obj).attr("data-areas-criteria"));break;case"iq_youtube":$.data(obj,"content",$(obj).attr("data-youtube-videoid"));break;case"iq_rssfeed":$.data(obj,"content",$(obj).attr("data-rssfeed"));break;case"iq_yelp":$.data(obj,"content",$(obj).attr("data-yelp"));break;case"iq_customagents":$.data(obj,"content",$(obj).attr("data-customagents-criteria"));break;case"iq_classes":$.data(obj,"content",$(obj).attr("data-classtypeid"));break;case"iq_custompage_callouts":$.data(obj,"content",$(obj).attr("data-custompage-callouts"));break;case"iq_header":case"premier_header":$.data(obj,"content",$(obj).attr("data-custompage-header"));break;case"premier_links":$.data(obj,"content",$(obj).attr("data-custompage-links"));break;case"homepage_section":$.data(obj,"content",$(obj).text()),$(obj).show();break;default:$.data(obj,"content",$(obj).text())}if("homepage_section"===$(obj).attr("data-editable-type")&&"default"===$("#edit-menu").attr("page"))if("true"===objSectionIsVisible){if("true"===objSectionIsEditable){var arrButtonHtml=[];arrButtonHtml.push('<br /><div id="iq-editsection_'+editBarCounter+'"'),arrButtonHtml.push('\tclass="iq-editsectionbutton iq-editsection-icon'+appendCSS+'">'),arrButtonHtml.push('\t<i class="fa fa-edit"></i>'),arrButtonHtml.push('\t<span class="iq-editsection-icon-text"> Edit</span>'),arrButtonHtml.push("</div>"),$(obj).append(arrButtonHtml.join(""))}var arrHideButtonHtml=[];arrHideButtonHtml.push('<div id="iq-hidesection_'+editBarCounter+'"'),arrHideButtonHtml.push('\tclass="iq-hide-section btn btn-xs btn-default"'),arrHideButtonHtml.push('\tdata-section = "'+$(this).attr("data-section")+'_toggle">'),arrHideButtonHtml.push('\t<i class="fa fa-times"></i>'),arrHideButtonHtml.push("\tHide"),arrHideButtonHtml.push("</div>"),$(obj).append(arrHideButtonHtml.join(""));var oEditSectionHide=$("#iq-hidesection_"+editBarCounter);$(oEditSectionHide).click(function(){$.iqEditor.EditField(section,"hide")})}else void 0!==objSectionIsVisible?($(obj).html('<div class="container-fluid" style="border-top:1px solid #ddd;border-bottom:1px solid #ddd;" ><div class="row"><div class="col-md-12 text-center" style="padding:50px 0;"><h2>The '+$(obj).attr("data-label").toLowerCase()+' section is hidden.</h2><button class="btn btn-info">Click here to show '+$(obj).attr("data-label").toLowerCase()+".</button>"),$(obj).find(".btn-info").click(function(){$(obj).attr("data-show","true"),$.iqEditor.EditField(section,"show")}),$(obj).css({height:"auto"})):"true"===objSectionIsEditable&&$(obj).append('<div style="z-index:12000; cursor:pointer; " id="iq-editsection_'+editBarCounter+'" class="iq-editsectionbutton iq-editsection-icon'+appendCSS+'"><i class="fa fa-edit"></i><span class="iq-editsection-icon-text"> Edit</span></div>');else"true"===$(this).attr("data-editable")&&$(obj).append('<div style="z-index:12000; cursor:pointer; " id="iq-editsection_'+editBarCounter+'" class="iq-editsectionbutton iq-editsection-icon'+appendCSS+'"><i class="fa fa-edit"></i><span class="iq-editsection-icon-text"> Edit</span></div>');var oEditSectionIcon=$("#iq-editsection_"+editBarCounter),mid_height=$(obj).outerHeight()/2,mid_width=$(obj).outerWidth()/2,xpos=mid_width-increment,ypos=mid_height-increment;"iq_customagents"===dataEditableType&&(ypos=100,mid_height=ypos+increment),$(oEditSectionIcon).css({position:"absolute",top:ypos,right:xpos,zIndex:12001}),$(oEditSectionIcon).fadeIn("slow"),$($(oEditSectionIcon)).mouseover(function(){var xpos=mid_width-(increment+10),ypos=mid_height-(increment+10);$(oEditSectionIcon).addClass("iq-editsection-icon-over"+appendCSS),$(oEditSectionIcon).css({position:"absolute",top:ypos,right:xpos}),$(oEditSectionIcon).find(".iq-editsection-icon-text").show()}).mouseout(function(){var xpos=mid_width-increment,ypos=mid_height-increment;$(oEditSectionIcon).css({position:"absolute",top:ypos,right:xpos,zIndex:12001}),$(oEditSectionIcon).removeClass("iq-editsection-icon-over"+appendCSS),$(oEditSectionIcon).find(".iq-editsection-icon-text").hide()}),editBarCounter+=1,$(oEditSectionIcon).unbind("click"),$(oEditSectionIcon).click(function(){$.iqEditor.EditField(section)})}),foundEditableFields?($("#editing_buttons_edit").hide(),$("#editing_buttons_cancel").show()):$.iqUtils.uiMessage("","this page has no editable content")}}},ClearEditableFields:function(){$(".iq-editsectionbutton").remove(),$(".iq-hide-section").remove(),$(".edit").remove(),$("#field-edit").removeClass("hidden").addClass("show"),$("#field-save").removeClass("show").addClass("hidden")},CancelEditing:function(){if(confirm("This will restore the page back to its last save.  Any changes that you have made since your last save will be lost!")){var template_theme=$("[data-templateid]*").data("templateid");if("default"!==$("#edit-menu").attr("page")){var sid=$("[data-templateid]*").attr("id");$.iqUtils.uiProcessing("open"),"house-value"!==$("#edit-menu").attr("page")&&"home-report"!==$("#edit-menu").attr("page")&&"kiosk"!==$("#edit-menu").attr("page")&&template_theme?($.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{method:"cancel_editing",domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page"),template_theme:template_theme},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#"+sid).html(jsonRet.LAYOUT),0!==$("[data-editable-type=iq_listings]").length&&$.iqEditor.GetIQ_Listings(),0!==$("[data-editable-type=iq_areas]").length&&$.iqEditor.GetIQ_Areas(),0!==$("[data-editable-type=iq_rssfeed]").length&&$.iqPages.GetIQ_RssFeed(),0!==$("[data-editable-type=iq_yelp]").length&&$.iqPages.GetBusinesses()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}),$("#editing_buttons_edit").show(),$("#editing_buttons_save").hide(),$("#editing_buttons_cancel").hide(),$.iqEditor.ClearEditableFields()):self.location=self.location}else $.iqUtils.uiProcessing("open"),setTimeout(function(){$("[data-editable]").each(function(){$(this).unbind("click");var obj=this;"menu"!==$(obj).attr("data-section")&&$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",section:$(this).data("section"),async:!1,data:{ReturnFormat:"json",method:"editor_displaysection",domainname:$("#edit-menu").attr("domainname"),height:$(obj).height(),data:"",section:$(this).data("section")},success:function(jsonRet){0===jsonRet.STATUS?($(obj).html(jsonRet.LAYOUT),$("#iq-data-values").data("data",jsonRet.DATA),"false"===jsonRet.SHOW?($(obj).attr("data-show","false"),$(obj).html("")):$(obj).attr("data-show","true")):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}).promise().done(function(){$.iqUtils.uiProcessing("close"),$("#editing_buttons_edit").show(),$("#editing_buttons_save").hide(),$("#editing_buttons_cancel").hide(),$.iqEditor.ClearEditableFields()})},500)}},EditField:function(psection,ptoggle){$.iqEditor.Clear();var toggle="";void 0!==ptoggle&&(toggle=ptoggle);var obj=$("[data-section='"+psection+"']"),stype=$(obj).data("editable-type"),oEditMenu=$("#edit-menu"),simgsrc=$(obj).attr("src"),simg_width=$(obj).attr("data-editable-img_width"),simg_height=$(obj).attr("data-editable-img_height"),section=$(obj).data("section").toLowerCase(),dialog_width=1178;void 0===simg_width&&(simg_width=$(obj).width(),simg_height=$(obj).height());var divcontent=$(obj)[0],scontent=$.data(divcontent,"content");switch(stype){case"html":dialog_width=$(obj).outerWidth()+80,simg_height="",simg_width="";break;case"image":$(oEditMenu).attr("img_width",simg_width).attr("img_height",simg_height).attr("fieldid",section).attr("targetdiv",section),"y"===$(obj).attr("data-crop")?$(oEditMenu).attr("selectfunction","$.iqEditor.CropImage_Dialog()").attr("callback","$.iqEditor.SelectImage()").attr("afterupload","$.iqEditor.CropImage_Dialog()"):$(oEditMenu).attr("selectfunction","$.iqEditor.SelectImage()").attr("afterupload","$.iqEditor.SelectImage()");break;case"sitemenu":simg_height="",simg_width="";break;case"homepage_section":if(""==toggle){var sdata=$("#iq-data-values").data("data"),section=$(obj).data("section");if("featuredhomes"===section.toLowerCase())return void $.iqEditor.Listings_Criteria_Centralized("featuredhomes");if("justlistedhomes"===section.toLowerCase())return void $.iqEditor.Listings_Criteria_Centralized("justlistedhomes");if("reducedhomes"===section.toLowerCase())return void $.iqEditor.Listings_Criteria_Centralized("reducedhomes");if("openhouses"===section.toLowerCase())return void $.iqEditor.Listings_Criteria_Centralized("openhouses");dialog_width=1178,"phone_number"===section&&(dialog_width=400),"companylogo"===section&&(dialog_width=600)}break;case"leadform":$.iqEditor.LeadSource_Dialog($(obj).attr("id"));break;case"iq_listings":$.iqEditor.Listings_Criteria(stype);break;case"iq_listings_centralized":$.iqEditor.Listings_Criteria_Centralized(stype);break;case"iq_showcase":$.iqEditor.Showcase_criteria(psection);break;case"iq_areas":$.iqEditor.Areas_Criteria(psection);break;case"iq_show_listings_stats":$.iqEditor.Show_Listings_Stats(psection);break;case"iq_youtube":$.iqEditor.Youtube_VideoID(psection);break;case"iq_rssfeed":$.iqEditor.RSS_Feed(psection);break;case"iq_yelp":$.iqEditor.Yelp(psection);break;case"iq_house_value":$.iqEditor.House_Value();break;case"iq_customagents":$.iqEditor.CustomAgentsCriteria(psection);break;case"iq_classes":$.iqEditor.Classes(psection);break;case"iq_custompage_callouts":$.iqEditor.Custompage_Callouts(psection);break;case"iq_header":$.iqEditor.Custompage_Header(psection);break;case"listings_kiosk":$.iqEditor.listings_kiosk(psection);break;case"iq_map":$.iqEditor.iq_map(psection);break;case"premier_header":$.iqEditor.getPremierHeaderForm();break;case"premier_links":$.iqEditor.getPremierLinksForm(psection);break;case"premier_carousel":$.iqEditor.getPremierCarouselForm(psection);break;default:simg_height="",simg_width=""}"iq_listings"!==stype&&"iq_listings_centralized"!==stype&&"leadform"!==stype&&"iq_areas"!==stype&&"iq_youtube"!==stype&&"iq_rssfeed"!==stype&&"iq_yelp"!==stype&&"iq_custompage_callouts"!==stype&&"iq_header"!==stype&&"iq_customagents"!==stype&&"iq_classes"!==stype&&"iq_house_value"!==stype&&"iq_showcase"!==stype&&"iq_show_listings_stats"!==stype&&"iq_map"!==stype&&"listings_kiosk"!==stype&&"premier_header"!==stype&&"premier_links"!==stype&&"premier_carousel"!==stype&&($("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Edit "+$(obj).data("label")+" on "+$("#edit-menu").attr("template-code"),maxwidth:dialog_width,body:$.iqEditor.BuildLoadingDialogHtml("Loading")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",section:$(obj).data("section"),label:$(obj).data("label"),type:stype,img_src:simgsrc,img_height:simg_height,img_width:simg_width,div_width:$(obj).width(),div_height:$(obj).height(),content:scontent,header_type:$("[data-header-type]").attr("data-header-type"),valid_folders:$("#"+psection).data("valid_folders"),data:sdata,selectfunction:$("#edit-menu").attr("selectfunction"),toggle:toggle,callback:$("#edit-menu").attr("callback"),domainname:$("#edit-menu").attr("domainname"),Method:"editfield"},success:function(jsonRet){if(0===jsonRet.STATUS){var i,t=tinyMCE.editors;for(i in t)t.hasOwnProperty(i)&&t[i].remove();$(document).on("focusin",function(e){$(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()}),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"});var slookupvalue="",imaxitems="";switch(stype){case"text":$("#content_form").iqForm_Rules();break;case"html":$.iqEditor.InitTinyMCE();break;case"image":$.iqEditor.InitUpload(),$.iqEditor.Accordion();break;case"menu":case"sitemenu":$.iqEditor.RefreshMenu(),$("#iq_menuchoices-iqlink").iqForm_Rules(),$("#iq_menuchoices-lead").iqForm_Rules(),$("#iq_menuchoices-custom").iqForm_Rules(),$("#iq_menuchoices-outsidelink").iqForm_Rules(),
$("#iq_menuchoices-visualelements").iqForm_Rules();break;case"homepage_section":if(1===$("[data-header-video-opacity]").length&&$("[data-header-video-opacity]").slider({min:10,max:90,step:1,value:Math.abs(100*$("#preferences_form-header_video_opacity").iqFieldValue()-100),slide:function(event,ui){$("#preferences_form-header_video_opacity").iqFieldValue("."+Math.abs(ui.value-100)),$("#iq_video_opacity").css({background:"rgba(0, 0, 0,"+$("#preferences_form-header_video_opacity").iqFieldValue()+")"})}}),"header_carousel"===section)switch($("#edit-menu").attr("templatename")){case"03":case"04":for(i=1;i<7;i++)slookupvalue=$("#preferences_form-header_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-header_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:"6",label:slookupvalue,lookup:slookupvalue});break;case"05":case"06":for(i=1;i<5;i++)slookupvalue=$("#preferences_form-header_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-header_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:"6",label:slookupvalue,lookup:slookupvalue});break;case"island":1===$("#preferences_form-searchform_arealist").length&&(slookupvalue=$("#preferences_form-searchform_areafield").iqFieldValue(),$("#preferences_form-searchform_arealist").iqAreaLookupAutoComplete({maxitems:24,label:slookupvalue,lookup:slookupvalue}))}if("footer"===section)switch($("#edit-menu").attr("templatename")){case"14":case"19":case"seeingre":for(i=1;i<5;i++)1===$("#preferences_form-footer_column_0"+i+"_areafield").length&&(slookupvalue=$("#preferences_form-footer_column_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-footer_column_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:5,label:slookupvalue,lookup:slookupvalue}));break;case"21":for(i=1;i<6;i++)1===$("#preferences_form-footer_column_0"+i+"_areafield").length&&(slookupvalue=$("#preferences_form-footer_column_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-footer_column_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:5,label:slookupvalue,lookup:slookupvalue}))}if("areas"===section)switch($("#edit-menu").attr("templatename")){case"01":case"02":case"07":case"16":case"26":slookupvalue=$("#preferences_form-areas_areafield").iqFieldValue(),$("#preferences_form-areas_arealist").iqAreaLookupAutoComplete({maxitems:6,label:slookupvalue,lookup:slookupvalue});break;case"03":case"04":for(slookupvalue=$("#preferences_form-areas_areafield").iqFieldValue(),$("#preferences_form-areas_arealist").iqAreaLookupAutoComplete({maxitems:6,label:slookupvalue,lookup:slookupvalue}),i=1;i<6;i++)slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),1===$("#preferences_form-areas_0"+i+"_arealist").length&&$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:"6",label:slookupvalue,lookup:slookupvalue});break;case"05":case"06":for(i=0;i<5;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:6,label:slookupvalue,lookup:slookupvalue}));break;case"09":case"29":case"32":for(i=1;i<=3;i++)$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:6,label:slookupvalue,lookup:slookupvalue}));$("#preferences_form-areas_arealist").length&&(slookupvalue=$("#preferences_form-areas_areafield").iqFieldValue(),$("#preferences_form-areas_arealist").iqAreaLookupAutoComplete({maxitems:24,label:slookupvalue,lookup:slookupvalue}));break;case"17":case"18":for(slookupvalue=$("#preferences_form-areas_areafield").iqFieldValue(),$("#preferences_form-areas_arealist").iqAreaLookupAutoComplete({maxitems:36,label:slookupvalue,lookup:slookupvalue}),i=1;i<4;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:1,label:slookupvalue,lookup:slookupvalue}));break;case"11":for(i=1;i<6;i++)slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),imaxitems=i<4?1:20,1===$("#preferences_form-areas_0"+i+"_arealist").length&&$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:imaxitems,label:slookupvalue,lookup:slookupvalue});break;case"12":for(slookupvalue=$("#preferences_form-areas_areafield").iqFieldValue(),$("#preferences_form-areas_arealist").iqAreaLookupAutoComplete({maxitems:72,label:slookupvalue,lookup:slookupvalue}),i=1;i<5;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:1,label:slookupvalue,lookup:slookupvalue}));break;case"13":for(i=1;i<7;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:4,label:slookupvalue,lookup:slookupvalue}));break;case"haus":for(i=0;i<11;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:6,label:slookupvalue,lookup:slookupvalue}));break;case"places":case"island":for(i=0;i<5;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:6,label:slookupvalue,lookup:slookupvalue}));break;case"seacoast":for(i=1;i<=6;i++)1===$("#preferences_form-areas_0"+i+"_arealist").length&&(slookupvalue=$("#preferences_form-areas_0"+i+"_areafield").iqFieldValue(),$("#preferences_form-areas_0"+i+"_arealist").iqAreaLookupAutoComplete({maxitems:5,label:slookupvalue,lookup:slookupvalue}))}$("#iq-icons").is(":visible")&&($.iqEditor.Accordion(),$("#iq_menuchoices-iqlink").iqForm_Rules(),$("#iq_menuchoices-lead").iqForm_Rules(),$("#iq_menuchoices-custom").iqForm_Rules(),$("#iq_menuchoices-outsidelink").iqForm_Rules()),$("#preferences_form").iqForm_Rules()}}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}}))},Check_ListingType:function(){"listings"===$("#preferences_form-searchform_listingtype").iqFieldValue()?$("#preferences_form-searchform_propertytype option[value=multifamily]").prop("disabled",!1):$("#preferences_form-searchform_propertytype option[value=multifamily]").prop("disabled",!0)},Listings_Criteria:function(type){var obj=$("[data-listings-criteria]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Criteria Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,listings_criteria:$(obj).attr("data-listings-criteria"),method:"editor_listingcriteria_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#iq_listings_criteria").iqEditor_Autocomplete({propertytype:$("#iq_listings_criteria-propertytype").iqFieldValue(),mlsid:$("#iq_listings-location").data("mlsid_list"),state:"",county:"",city:"",area:"",zip_code:"",street_address:"",ml_number:"",communityname:"",fields:"state,county,city,area,zip_code,communityname,elementaryschool,jrhighschool,highschool,schooldistrict",callback:"",async:!0})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Listings_Criteria_Centralized:function(type){var homepage_data="";$("#iq-data-values").length&&void 0!==$("#iq-data-values").data("data")&&(homepage_data=$("#iq-data-values").data("data"));var obj=$("[data-listings-criteria]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Criteria Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,listings_criteria:$(obj).attr("data-listings-criteria"),homepage_data:homepage_data,templatename:$("#edit-menu").attr("templatename"),method:"listingsCriteriaCentralized"},success:function(jsonRet){if(0===jsonRet.status){if($("#iq_editor_editfield_dialog .modal-content").addClass("iq-modal-content-background-color"),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#iq_editor_editfield_dialog .modal-header").css({display:"none"}),$("#iq_editor_editfield_dialog").css({"z-index":"99999"}),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.layout),"island"===$("#edit-menu").attr("templatename")&&$("#iq_editor_editfield_dialog .modal-content").css({"background-color":"#999999"}),$("#iq_listings_criteria_form-featuredhomes_banner").length){var i,t=tinyMCE.editors;for(i in t)t.hasOwnProperty(i)&&t[i].remove();$.iqEditor.InitTinyMCE()}$("#iq_listings_criteria_form").iqEditor_Autocomplete({propertytype:$("#iq_listings_criteria_form-propertytype").iqFieldValue(),mlsid:$("#iq_listings_criteria_form-autocomplete").data("mlsid_list"),state:"",county:"",city:"",area:"",zip_code:"",subarea:"",street_address:"",ml_number:"",fields:"state,county,city,area,zip_code,subarea,communityname",callback:function(){$.iqEditor.UpdateListingsDisplayList()},async:!0})}else $.iqUtils.uiMessage("",jsonRet.message+"<br>"+jsonRet.detail+"<br>"+encodeURI(jsonRet.content))},error:function(httpRet){void 0!==httpRet.message&&void 0!==httpRet.detail?$.iqUtils.uiMessage("",httpRet.detail):$.iqUtils.uiMessage("",httpRet.responseText)}})},Areas_Criteria:function(type){var obj=$("[data-areas-criteria]"),show_maxrows="f";$("#iq_areas_template_2").length&&(show_maxrows="t"),$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Criteria",body:$.iqEditor.BuildLoadingDialogHtml("Loading Criteria Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,show_maxrows:show_maxrows,areas_criteria:$(obj).attr("data-areas-criteria"),method:"editor_areascriteria_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#iq_areas_criteria").iqEditor_Autocomplete({propertytype:"residential",mlsid:$("#iq_areas-areas_list_autocomplete").data("mlsid_list"),state:"",county:"",city:"",area:"",zip_code:"",street_address:"",ml_number:"",fields:"state,county,city,area,zip_code,communityname",callback:function(){$.iqEditor.UpdateAreasDisplayList()},async:!0}),$(".badge").on("click",function(){$(this).parent().remove()})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},SelectOneButton:function(obj){var oForm=$(obj).closest("form"),fieldName=$(obj).data("fieldname"),fieldValue=$(obj).data("fieldvalue");$(oForm).find("input[name="+fieldName+"]").iqFieldValue(fieldValue),$(oForm).find("[data-fieldname="+fieldName+"].active").each(function(){$(this).removeClass("active"),$(this).css({"background-color":"#ffffff"})}),$(obj).addClass("active"),$(obj).css({"background-color":"#F3F3F4"})},SelectMultipleButtons:function(obj){var oForm=$(obj).closest("form"),fieldName=$(obj).data("fieldname"),arrFieldValues=new Array(1);$(obj).hasClass("active")?($(obj).removeClass("active"),$(obj).css({"background-color":"#ffffff"})):($(obj).addClass("active"),$(obj).css({"background-color":"#F3F3F4"})),$(oForm).find("[data-fieldname="+fieldName+"].active").each(function(){arrFieldValues.push($(this).data("fieldvalue"))}),$(oForm).find("input[name="+fieldName+"]").iqFieldValue(arrFieldValues.join(",").replace(/^,/,""))},ShowPropertyTypeFields:function(obj){var oForm=$(obj).closest("form"),propertyType=$(obj).data("propertytype");$(oForm).find("div[data-propertytype]").each(function(){$(this).data("propertytype").indexOf(propertyType)>-1?$(this).show():$(this).hide()})},Youtube_VideoID:function(type){var obj=$("[data-youtube-videoid]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Youtube Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,youtube_videoid:$(obj).attr("data-youtube-videoid"),method:"editor_youtubevideoid_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#iq_youtube_videoid").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},RSS_Feed:function(type){var obj=$("#iq_rssfeed");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading RSS Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,rssfeed:$(obj).attr("data-rssfeed"),method:"editor_rssfeed_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#iq_rssfeed_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Yelp:function(type){var obj=$("#iq_yelp");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Yelp Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,yelpdata:$(obj).attr("data-yelp"),method:"editor_yelp_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),setTimeout(function(){$("#iq_editor_yelp_map").iqGoogleMaps({Lat:$("#iq_editor_yelp_map").data("lat"),Lon:$("#iq_editor_yelp_map").data("lon"),ZoomLevel:12,mapTypeId:"roadmap"})},1e3)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Custompage_Callouts:function(type){var obj=$("[data-custompage-callouts]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Callouts Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,callouts:$(obj).attr("data-custompage-callouts"),method:"editor_custompage_callouts_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#custom_page_callouts_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},CustomAgentsCriteria:function(type){var obj=$("[data-customagents-criteria]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Edit Agents Criteria",body:$.iqEditor.BuildLoadingDialogHtml("Loading Criteria Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,customagents_criteria:$(obj).attr("data-customagents-criteria"),method:"customagentscriteria"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)),$("input[type=radio][name=agentslayoutdefault]").change(function(){$("#iq_template_carousel").carousel($("#"+this.id).data("slide-to"))})}})},Classes:function(type){var obj=$("[data-classtypeid]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Criteria Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{section:type,classtypeid:$(obj).attr("data-classtypeid"),method:"classes"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Custompage_Header:function(type){var obj=$("[data-custompage-header]");$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Page Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,header:$(obj).attr("data-custompage-header"),method:"editor_custompage_header_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#custom_page_header_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},getPremierHeaderForm:function(){var obj=$('[data-section="premier_header"]');$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Hero Editor - Title and Image",body:$.iqEditor.BuildLoadingDialogHtml("Loading")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{header:$(obj).attr("data-custompage-header"),title:$(obj).attr("data-page-title"),method:"editor_premier_header_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#custom_page_premier_header_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},getPremierLinksForm:function(pType){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Links",body:$.iqEditor.BuildLoadingDialogHtml("Loading")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:pType,links:$('[data-section="premier_links"]').attr("data-custompage-links"),method:"editor_premier_links_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#custom_page_premier_links_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},getPremierCarouselForm:function(pType){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Carousel",body:$.iqEditor.BuildLoadingDialogHtml("Loading")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:pType,slides:$('[data-section="premier_carousel"]').attr("data-custompage-slides"),method:"editor_premier_carousel_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#custom_page_premier_carousel_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},UpdateAreasDisplayList:function(){var obj=$("#iq_areas-areas_list_autocomplete"),lookup=$(obj).data("lookup"),lookupvalue=$(obj).data("lookupvalue");0===$("#iq_areas_list_ul").length&&$(obj).after('<ul id="iq_areas_list_ul" style="margin-top:10px; padding:0px;">'),$("#iq_areas_list_ul").append('<li style="list-style-type:none; float:left; text-transform:uppercase;margin-right:10px;" data-lookup="'+lookup.toUpperCase()+'" data-lookupvalue="'+lookupvalue+'"><span class="badge"style="cursor:pointer;"> <i class="fa fa-remove"> </i> '+lookup+" : "+lookupvalue+"</span></li>"),$(".badge").on("click",function(){$(this).parent().remove()})},UpdateListingsDisplayList:function(){var obj=$("#iq_listings_criteria_form-autocomplete"),lookUp=$(obj).data("lookup"),lookUpValue=$(obj).data("lookupvalue"),lookUpLength=0,lookUpValueLength=0;if($("#iq_listingsareas_list_ul").length&&(lookUpLength=$("#iq_listingsareas_list_ul").find('[data-lookup="'+$(obj).data("lookup").toUpperCase()+'"]').length,lookUpValueLength=$("#iq_listingsareas_list_ul").find('[data-lookupvalue="'+$(obj).data("lookupvalue")+'"]').length,lookUpLength>=1&&lookUpValueLength>=1))return void setTimeout(function(){$("#iq_listings_criteria_form-autocomplete").iqFieldValue("")},100);var arrCity=$("#iq_listings_criteria_form-city").iqFieldValue().split(","),arrState=$("#iq_listings_criteria_form-state").iqFieldValue().split(","),arrZip_Code=$("#iq_listings_criteria_form-zip_code").iqFieldValue().split(","),arrCounty=$("#iq_listings_criteria_form-county").iqFieldValue().split(","),arrArea=$("#iq_listings_criteria_form-area").iqFieldValue().split(","),arrSubarea=$("#iq_listings_criteria_form-subarea").iqFieldValue().split(","),arrCommunityName=$("#iq_listings_criteria_form-communityname").iqFieldValue().split(",");switch(0===$("#iq_listingsareas_list_ul").length&&$(obj).after('<ul id="iq_listingsareas_list_ul" style="margin-top:10px; padding:0px;">'),$("#iq_listingsareas_list_ul").append('<li style="list-style-type:none; float:left; text-transform:uppercase;margin-right:10px;" data-lookup="'+lookUp.toUpperCase()+'" data-lookupvalue="'+lookUpValue+'"><span class="badge" style="cursor:pointer; background-color:#D8D8D8; color:#767676;"> '+lookUp+" : "+lookUpValue+' <i class="fa fa-remove"> </i></span></li>'),lookUp.toLowerCase()){case"city":arrCity.push(lookUpValue);break;case"state":arrState.push(lookUpValue);break;case"zip_code":arrZip_Code.push(lookUpValue);break;case"county":arrCounty.push(lookUpValue);break;case"area":arrArea.push(lookUpValue);break;case"subarea":arrSubarea.push(lookUpValue);break;case"communityname":arrCommunityName.push(lookUpValue)}$("#iq_listings_criteria_form-city").iqFieldValue(arrCity.join(",").replace(/^,/,"")),$("#iq_listings_criteria_form-state").iqFieldValue(arrState.join(",").replace(/^,/,"")),$("#iq_listings_criteria_form-zip_code").iqFieldValue(arrZip_Code.join(",").replace(/^,/,"")),$("#iq_listings_criteria_form-county").iqFieldValue(arrCounty.join(",").replace(/^,/,"")),$("#iq_listings_criteria_form-area").iqFieldValue(arrArea.join(",").replace(/^,/,"")),$("#iq_listings_criteria_form-subarea").iqFieldValue(arrSubarea.join(",").replace(/^,/,"")),$("#iq_listings_criteria_form-communityname").iqFieldValue(arrCommunityName.join(",").replace(/^,/,"")),setTimeout(function(){$("#iq_listings_criteria_form-autocomplete").iqFieldValue("")},100),$(".badge").on("click",function(){$.iqEditor.removeItemFromList(this)})},removeItemFromList:function(obj){var index,lookUp=$(obj).parent().attr("data-lookup").toLowerCase(),lookUpValue=$(obj).parent().attr("data-lookupvalue"),arrCity=$("#iq_listings_criteria_form-city").iqFieldValue().split(","),arrState=$("#iq_listings_criteria_form-state").iqFieldValue().split(","),arrZip_Code=$("#iq_listings_criteria_form-zip_code").iqFieldValue().split(","),arrCounty=$("#iq_listings_criteria_form-county").iqFieldValue().split(","),arrArea=$("#iq_listings_criteria_form-area").iqFieldValue().split(","),arrSubarea=$("#iq_listings_criteria_form-subarea").iqFieldValue().split(","),arrCommunityName=$("#iq_listings_criteria_form-communityname").iqFieldValue().split(",");switch(lookUp){case"city":index=arrCity.indexOf(lookUpValue),index>-1&&arrCity.splice(index,1),$("#iq_listings_criteria_form-city").iqFieldValue(arrCity.join(",").replace(/^,/,""));break;case"state":index=arrState.indexOf(lookUpValue),index>-1&&arrState.splice(index,1),$("#iq_listings_criteria_form-state").iqFieldValue(arrState.join(",").replace(/^,/,""));break;case"zip_code":index=arrZip_Code.indexOf(lookUpValue),index>-1&&arrZip_Code.splice(index,1),$("#iq_listings_criteria_form-zip_code").iqFieldValue(arrZip_Code.join(",").replace(/^,/,""));break;case"county":index=arrCounty.indexOf(lookUpValue),index>-1&&arrCounty.splice(index,1),$("#iq_listings_criteria_form-county").iqFieldValue(arrCounty.join(",").replace(/^,/,""));break;case"area":index=arrArea.indexOf(lookUpValue),index>-1&&arrArea.splice(index,1),$("#iq_listings_criteria_form-area").iqFieldValue(arrArea.join(",").replace(/^,/,""));break;case"subarea":index=arrSubarea.indexOf(lookUpValue),index>-1&&arrSubarea.splice(index,1),$("#iq_listings_criteria_form-subarea").iqFieldValue(arrSubarea.join(",").replace(/^,/,""));break;case"communityname":index=arrCommunityName.indexOf(lookUpValue),index>-1&&arrCommunityName.splice(index,1),$("#iq_listings_criteria_form-communityname").iqFieldValue(arrCommunityName.join(",").replace(/^,/,""))}$(obj).parent().remove()},UpdateFeaturedPropertiesForm:function(){var listingtype=$("#preferences_form-featuredhomes_listingtype").iqFieldValue();switch($("#preferences_form-featuredhomes_propertytype").iqFieldValue()){case"residential":$("#preferences_form-featuredhomes_openhouse").closest(".form-group").show(),$("#preferences_form-featuredhomes_previews").closest(".form-group").show(),$("#preferences_form-featuredhomes_acreage").closest(".form-group").show();break;case"multifamily":$("#preferences_form-featuredhomes_openhouse").closest(".form-group").hide(),$("#preferences_form-featuredhomes_previews").closest(".form-group").hide(),$("#preferences_form-featuredhomes_acreage").closest(".form-group").hide(),$("#preferences_form-featuredhomes_openhouse").iqFieldValue(""),$("#preferences_form-featuredhomes_previews").iqFieldValue(""),$("#preferences_form-featuredhomes_acreage").iqFieldValue("");break;case"commercial":case"land":$("#preferences_form-featuredhomes_openhouse").closest(".form-group").hide(),$("#preferences_form-featuredhomes_previews").closest(".form-group").hide(),$("#preferences_form-featuredhomes_acreage").closest(".form-group").show(),$("#preferences_form-featuredhomes_openhouse").iqFieldValue(""),$("#preferences_form-featuredhomes_previews").iqFieldValue("")}"rentals"===listingtype?($("#preferences_form-featuredhomes_reduceddays").closest(".form-group").hide(),$("#preferences_form-featuredhomes_featured").closest(".form-group").hide(),$("#preferences_form-featuredhomes_openhouse").closest(".form-group").hide(),$("#preferences_form-featuredhomes_previews").closest(".form-group").hide(),$("#preferences_form-featuredhomes_reduceddays").iqFieldValue(""),$("#preferences_form-featuredhomes_featured").iqFieldValue(""),$("#preferences_form-featuredhomes_openhouse").iqFieldValue(""),$("#preferences_form-featuredhomes_previews").iqFieldValue(""),$("#preferences_form-featuredhomes_pricemin > option").each(function(){""!==$(this).val()&&($(this).val()>2e4?$(this).hide():$(this).show())}),$("#preferences_form-featuredhomes_pricemax > option").each(function(){""!==$(this).val()&&($(this).val(),$(this).show())})):($("#preferences_form-featuredhomes_reduceddays").closest(".form-group").show(),$("#preferences_form-featuredhomes_featured").closest(".form-group").show(),$("#preferences_form").find(":radio[value=multifamily]").closest("div").show(),$("#preferences_form-featuredhomes_pricemin > option").each(function(){""!==$(this).val()&&($(this).val()>2e4?$(this).show():$(this).hide())}),$("#preferences_form-featuredhomes_pricemax > option").each(function(){""!==$(this).val()&&($(this).val()>2e4?$(this).show():$(this).hide())}))},UpdateJustListedPropertiesForm:function(){var listingtype=$("#preferences_form-justlistedhomes_listingtype").iqFieldValue();"residential"===$("#preferences_form-justlistedhomes_propertytype").iqFieldValue()?($("#preferences_form-justlistedhomes_openhouse").closest(".form-group").show(),$("#preferences_form-justlistedhomes_previews").closest(".form-group").show()):($("#preferences_form-justlistedhomes_openhouse").closest(".form-group").hide(),$("#preferences_form-justlistedhomes_previews").closest(".form-group").hide(),$("#preferences_form-justlistedhomes_openhouse").iqFieldValue(""),$("#preferences_form-justlistedhomes_previews").iqFieldValue("")),"rentals"===listingtype?($("#preferences_form-justlistedhomes_reduceddays").closest(".form-group").hide(),$("#preferences_form-justlistedhomes_featured").closest(".form-group").hide(),$("#preferences_form-justlistedhomes_openhouse").closest(".form-group").hide(),$("#preferences_form-justlistedhomes_previews").closest(".form-group").hide(),$("#preferences_form-justlistedhomes_reduceddays").iqFieldValue(""),$("#preferences_form-justlistedhomes_featured").iqFieldValue(""),$("#preferences_form-justlistedhomes_openhouse").iqFieldValue(""),$("#preferences_form-justlistedhomes_previews").iqFieldValue(""),$("#preferences_form-justlistedhomes_pricemin > option").each(function(){""!==$(this).val()&&($(this).val()>2e4?$(this).hide():$(this).show())}),$("#preferences_form-justlistedhomes_pricemax > option").each(function(){""!==$(this).val()&&($(this).val(),$(this).show())})):($("#preferences_form-justlistedhomes_reduceddays").closest(".form-group").show(),$("#preferences_form-justlistedhomes_featured").closest(".form-group").show(),$("#preferences_form").find(":radio[value=multifamily]").closest("div").show(),$("#preferences_form-justlistedhomes_pricemin > option").each(function(){""!==$(this).val()&&($(this).val()>2e4?$(this).show():$(this).hide())}),$("#preferences_form-justlistedhomes_pricemax > option").each(function(){""!==$(this).val()&&($(this).val()>2e4?$(this).show():$(this).hide())}))},Change_AreaField_HeaderSlides:function(pgrid){var slookupvalue=$("#preferences_form-header_"+pgrid+"_areafield").iqFieldValue();$("#iq_ul_preferences_form-header_"+pgrid+"_arealist").remove(),$("#preferences_form-header_"+pgrid+"_arealist").show(),$("#preferences_form-header_"+pgrid+"_arealist_wrapper").remove(),$("#preferences_form-header_"+pgrid+"_display").remove(),$("#preferences_form-header_"+pgrid+"_arealist").iqFieldValue(""),$("#preferences_form-header_"+pgrid+"_arealist").iqAreaLookupAutoComplete({maxitems:"6",label:slookupvalue,lookup:slookupvalue})},Change_AreaField_SearchForm:function(){var slookupvalue=$("#preferences_form-searchform_areafield").iqFieldValue();$("#iq_ul_preferences_form-searchform_arealist").remove(),$("#preferences_form-searchform_arealist").show(),$("#preferences_form-searchform_arealist_wrapper").remove(),$("#preferences_form-searchform_display").remove(),$("#preferences_form-searchform_arealist").iqFieldValue(""),$("#preferences_form-searchform_arealist").iqAreaLookupAutoComplete({maxitems:"26",label:slookupvalue,lookup:slookupvalue})},Change_AreaField_Footer:function(pgrid){var slookupvalue=$("#preferences_form-footer_column_"+pgrid+"_areafield").iqFieldValue();$("#iq_ul_preferences_form-footer_column_"+pgrid+"_arealist").remove(),$("#preferences_form-footer_column_"+pgrid+"_arealist").show(),$("#preferences_form-footer_column_"+pgrid+"_arealist_wrapper").remove(),$("#preferences_form-footer_column_"+pgrid+"_display").remove(),$("#preferences_form-footer_column_"+pgrid+"_arealist").iqFieldValue(""),$("#preferences_form-footer_column_"+pgrid+"_arealist").iqAreaLookupAutoComplete({maxitems:5,label:slookupvalue,lookup:slookupvalue})},Change_AreaField:function(pgrid){var slookupvalue="",imaxitems="";if(void 0===pgrid){slookupvalue=$("#preferences_form-areas_areafield").iqFieldValue(),imaxitems=$("#preferences_form-areas_arealist_display").attr("maxitems");var viewmore_string="";if($("#iq_ul_preferences_form-areas_arealist").remove(),$("#preferences_form-areas_arealist").show(),$("#preferences_form-areas_arealist_wrapper").remove(),$("#preferences_form-areas_arealist_display").remove(),$("#preferences_form-areas_arealist").iqFieldValue(""),$("#preferences_form-areas_arealist").iqAreaLookupAutoComplete({maxitems:imaxitems,label:slookupvalue,lookup:slookupvalue}),
1===$("#preferences_form-areas_viewmore").length){switch(slookupvalue){case"city":viewmore_string="Cities";break;case"area":viewmore_string="Areas";break;case"zip_code":viewmore_string="Zip Codes";break;case"county":viewmore_string="Counties";break;case"communityname":viewmore_string="Communities"}$("#preferences_form-areas_viewmore").iqFieldValue("View More "+viewmore_string)}}else slookupvalue=$("#preferences_form-areas_"+pgrid+"_areafield").iqFieldValue(),imaxitems=$("#preferences_form-areas_"+pgrid+"_arealist_display").attr("maxitems"),$("#iq_ul_preferences_form-areas_"+pgrid+"_arealist").remove(),$("#preferences_form-areas_"+pgrid+"_arealist").show(),$("#preferences_form-areas_"+pgrid+"_arealist_wrapper").remove(),$("#preferences_form-areas_"+pgrid+"_arealist_display").remove(),$("#preferences_form-areas_"+pgrid+"_arealist").iqFieldValue(""),$("#preferences_form-areas_"+pgrid+"_arealist").iqAreaLookupAutoComplete({maxitems:imaxitems,label:slookupvalue,lookup:slookupvalue})},GetMap:function(){$.iqUtils.uiProcessing("open"),setTimeout(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{Method:"getmap",width:$("#iq-interactivemap-image").width(),height:$("#iq-interactivemap-image").height(),streetaddress:$("#preferences_form-interactivemap_streetaddress").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq-interactivemap-container-image").attr("src",jsonRet.MAPURL),$("#preferences_form-interactivemap_image").iqFieldValue(jsonRet.MAPURL)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("","Location not Found"))}})},1e3)},TempPreferences_Save:function(psection){$.iqUtils.uiProcessing("open");var oDataFields={},oFormFields=$("#preferences_form").iqSerializeFormToStruct(),oData=$.extend(oDataFields,oFormFields);if(1===$("#iq_listings_criteria_form").length){var oListingCriteria=$("#iq_listings_criteria_form").iqSerializeFormToStruct(),bedsMin=oListingCriteria.bedsmin,bedsMax=oListingCriteria.bedsmax,bathsMin=oListingCriteria.bathsmin,bathsMax=oListingCriteria.bathsmax,garageMin=oListingCriteria.garagemin,garageMax=oListingCriteria.garagemax,acreageMin=oListingCriteria.acreagemin,acreageMax=oListingCriteria.acreagemax,unitsMin=oListingCriteria.unitsmin,unitsMax=oListingCriteria.unitsmax,buildingsMin=oListingCriteria.buildingsmin,buildingsMax=oListingCriteria.buildingsmax,sqFootMin=oListingCriteria.sqfootmin,sqFootMax=oListingCriteria.sqfootmax,sqFootOfficeMin=oListingCriteria.sqfootofficemin,sqFootOfficeMax=oListingCriteria.sqfootofficemax;switch(oListingCriteria.beds=bedsMin+"-"+bedsMax,oListingCriteria.baths=bathsMin+"-"+bathsMax,oListingCriteria.garage=garageMin+"-"+garageMax,oListingCriteria.sq_foot=sqFootMin+"-"+sqFootMax,oListingCriteria.sq_foot_office=sqFootOfficeMin+"-"+sqFootOfficeMax,oListingCriteria.units=unitsMin+"-"+unitsMax,oListingCriteria.buildings=buildingsMin+"-"+buildingsMax,oListingCriteria.acreage=acreageMin+"-"+acreageMax,oListingCriteria.propertytype){case"residential":oListingCriteria.subtype=oListingCriteria.res_subtype;break;case"multifamily":oListingCriteria.subtype=oListingCriteria.mul_subtype;break;case"commercial":oListingCriteria.subtype=oListingCriteria.com_subtype;break;case"land":oListingCriteria.subtype=oListingCriteria.lan_subtype}switch(psection){case"featuredhomes":$("#preferences_form-featuredhomes_criteria").iqFieldValue($.toJSON(oListingCriteria)),oData.featuredhomes_criteria=$("#preferences_form-featuredhomes_criteria").iqFieldValue(),1===$("#preferences_form-featuredhomes_display").length&&(oData.featuredhomes_display=oListingCriteria.featuredhomes_display),1===$("#preferences_form-featuredhomes_title").length&&(oData.featuredhomes_title=oListingCriteria.featuredhomes_title),1===$("#preferences_form-featuredhomes_description").length&&(oData.featuredhomes_description=oListingCriteria.featuredhomes_description),1===$("#preferences_form-featuredhomes_banner").length&&(oData.featuredhomes_banner=oListingCriteria.featuredhomes_banner),1===$("#preferences_form-featuredhomes_morefeaturedlistingstitle").length&&(oData.featuredhomes_morefeaturedlistingstitle=oListingCriteria.featuredhomes_morefeaturedlistingstitle),1===$("#preferences_form-featuredhomes_morefeaturedlistingslink").length&&(oData.featuredhomes_morefeaturedlistingslink=oListingCriteria.featuredhomes_morefeaturedlistingslinks);break;case"justlistedhomes":$("#preferences_form-justlistedhomes_criteria").iqFieldValue($.toJSON(oListingCriteria)),oData.justlistedhomes_criteria=$("#preferences_form-justlistedhomes_criteria").iqFieldValue(),1===$("#preferences_form-justlistedhomes_title").length&&(oData.justlistedhomes_title=oListingCriteria.justlistedhomes_title);break;case"reducedhomes":$("#preferences_form-reducedhomes_criteria").iqFieldValue($.toJSON(oListingCriteria)),oData.reducedhomes_criteria=$("#preferences_form-reducedhomes_criteria").iqFieldValue(),1===$("#preferences_form-reducedhomes_title").length&&(oData.reducedhomes_title=oListingCriteria.reducedhomes_title);break;case"openhouses":$("#preferences_form-openhouses_criteria").iqFieldValue($.toJSON(oListingCriteria)),oData.openhouses_criteria=$("#preferences_form-openhouses_criteria").iqFieldValue(),oData.openhouses_openhousedays=$("#iq_listings_criteria_form_openhousedays").iqFieldValue(),1===$("#preferences_form-openhouses_title").length&&(oData.openhouses_title=oListingCriteria.openhouses_title)}}if(1===$("#preferences_form-blog_categorylist").length&&(oData.blog_categorylist=$("#preferences_form-blog_categorylist").iqFieldValue()),1===$("#preferences_form-autocomplete_fields").length&&(oData.autocomplete_fields=$("#preferences_form-autocomplete_fields").iqFieldValue()),1===$("#preferences_form-searchform_listingtype").length&&(oData.searchform_listingtype=$("#preferences_form-searchform_listingtype").iqFieldValue()),1===$("#preferences_form-searchform_propertytype").length&&(oData.searchform_propertytype=$("#preferences_form-searchform_propertytype").iqFieldValue()),1===$("#preferences_form-featuredhomes_listingtype").length&&(oData.featuredhomes_listingtype=$("#preferences_form-featuredhomes_listingtype").iqFieldValue()),1===$("#preferences_form-featuredhomes_propertytype").length&&(oData.featuredhomes_propertytype=$("#preferences_form-featuredhomes_propertytype").iqFieldValue()),1===$("#preferences_form-justlistedhomes_listingtype").length&&(oData.justlistedhomes_listingtype=$("#preferences_form-justlistedhomes_listingtype").iqFieldValue()),1===$("#preferences_form-justlistedhomes_propertytype").length&&(oData.justlistedhomes_propertytype=$("#preferences_form-justlistedhomes_propertytype").iqFieldValue()),1===$("#preferences_form-footer_column_01_type").length&&(oData.footer_column_01_type=$("#preferences_form-footer_column_01_type").iqFieldValue()),1===$("#preferences_form-footer_column_02_type").length&&(oData.footer_column_02_type=$("#preferences_form-footer_column_02_type").iqFieldValue()),1===$("#preferences_form-footer_column_03_type").length&&(oData.footer_column_03_type=$("#preferences_form-footer_column_03_type").iqFieldValue()),1===$("#preferences_form-footer_column_04_type").length&&(oData.footer_column_04_type=$("#preferences_form-footer_column_04_type").iqFieldValue()),1===$("#preferences_form-custom_html").length&&(oData.custom_html=$("#preferences_form-custom_html_content").iqFieldValue()),oDataFields.ReturnFormat="json",oDataFields.Method="SaveTempPreferences",oDataFields.domainname=$("#edit-menu").attr("domainname"),0!==$("[data-areas-pagename]").length){var arr_areaspages=[],name="",title="",description="",page_link="",background="",selected="";$("[data-areas-pagename]").each(function(){name=$(this).attr("data-areas-pagename"),title=$("[data-areas-pagetitle-"+$(this).attr("data-area")).iqFieldValue(),description=$("[data-areas-pagedescription-"+$(this).attr("data-area")).iqFieldValue(),page_link=$("[data-areas-page-link-"+$(this).attr("data-area")).iqFieldValue(),background=$("[data-areas-background-"+$(this).attr("data-area")).iqFieldValue(),selected=!1,$(this).prop("checked")&&(selected=!0),arr_areaspages.push({name:name,title:title,description:description,selected:selected,page_link:page_link,background:background})}),oDataFields.areas_pages=$.toJSON(arr_areaspages)}$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),$("#iq-data-values").data("data",jsonRet.DATA),""!==psection&&"companylogo"!=psection&&$.iqEditor.DisplaySection(psection)},error:function(httpRet){$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",httpRet)}})},PlayVideo:function(pvideoid){$.iqUtils.uiProcessing("open"),0===$("#st_playvideo_dialog").length&&$("body").append('<div id="st_playvideo_dialog"><div id="st_playvideo_dialog_body"></div></div>'),$("#st_playvideo_dialog").dialog({closeOnEscape:!0,title:"Video Tour",width:"auto",height:"auto",resizable:!1,autoOpen:!1,bgiframe:!0,modal:!0,draggable:!0,beforeClose:function(){$(this).remove()},zIndex:999}),$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",videoid:pvideoid,method:"editor_playvideo_layout"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#st_playvideo_dialog").parent().find(".ui-dialog-titlebar").hide(),$("#st_playvideo_dialog").html(jsonRet.LAYOUT),$("#st_playvideo_dialog").dialog("open"),$("#st_playvideo_dialog").iqRecenterDialog()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},YoutubeHelp:function(){$("#iq_youtubehelp_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Youtube Help")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",method:"editor_youtubehelp_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_youtubehelp_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_youtubehelp_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},VideoLibrary:function(object){$("#iq_editor_headervideo_dialog").bsModal({backdrop:!0,title:"Video Library",body:'<div class="row"><div id="iq_headervideo_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading Video library</h1></div></div>'}),$.targetfield=$(object).attr("data-targetfield"),$.targetdiv=$(object).attr("data-targetdiv"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"video_library",video_path:$(object).attr("data-video-path"),selectfunction:$(object).attr("data-selectfunction")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_headervideo_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_headervideo_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},ChangeVideoPath:function(object){$("#iq_videos_container").css({height:$("#iq_videos_container").height()});var height=$("#iq_videos_containe").height();$("#iq_videos_container").html('<table width="100%" height="'+height+'"cellpadding="0" cellspacing="0"><tr><td align="center"><i class="fa fa-fw fa-refresh fa-spin" style="font-size:100px"></i></td></tr></table>'),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"video_library",video_path:$(object).attr("data-video-path"),selectfunction:$(object).attr("data-selectfunction")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_headervideo_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_videos_container").height()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},SelectVideo:function(object){$("#"+$.targetfield).iqFieldValue($(object).attr("data-video-selected")),$("[data-targetfield="+$.targetfield+"]").attr("data-video-path",$(object).attr("data-video-path")),$("#iq_editor_headervideo_dialog").modal("hide"),$("#"+$.targetdiv).find("#iq_video_mov").attr("src",$(object).attr("data-video-selected")+".mov"),$("#"+$.targetdiv).find("#iq_video_mp4").attr("src",$(object).attr("data-video-selected")+".mp4"),$("#"+$.targetdiv).find("#iq_video_ogv").attr("src",$(object).attr("data-video-selected")+".ogv"),$("#"+$.targetdiv).load()},MaintainImages:function(pselect,pcallback){void 0!==pselect&&void 0!==pcallback&&($("#edit-menu").attr("callback",pcallback),$("#edit-menu").attr("selectfunction",pselect)),$("#edit-menu").attr("afterupload","$.iqEditor.ChangeImageFolder()"),$("#iq_editor_maintainimages_dialog").bsModal({backdrop:!0,title:"Image Library",body:$.iqEditor.BuildLoadingDialogHtml("Loading Image Library")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"editor_imagelibrary_dialog_layout",selectfunction:$("#edit-menu").attr("selectfunction"),callback:pcallback,id:$("#iq-images").attr("fieldid")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_maintainimages_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_maintainimages_dialog .modal-footer").css({display:"none"}),$.iqEditor.InitUpload(),$.iqEditor.Accordion()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},ChangeImageFolder:function(pObj){var obj=pObj,filter="";1===$("#iq_filter_select").length&&(filter=$("#iq_filter_select").iqFieldValue()),$("#iq-customimagesgrid").html('<div class="text-center" style="vertical-align:center; line-height:600px; width:1140px; overflow:hidden;"><i style="font-size:100px; color:#000000; " class="fa fa-refresh fa-spin"></i></div>'),$("#siteheaders").hide(),$("#interiorimages").hide(),$("#companyimages").hide(),$("#iq-siteheaderstab").removeClass("active"),$("#iq-interiorimagestab").removeClass("active"),$("#iq-customimagestab").removeClass("active"),$("#iq-companyimagestab").removeClass("active");var sActiveTab=$(obj).data("activetab"),sFolder=$(obj).data("folder");switch(sActiveTab){case"siteheader":$("#siteheaders").show(),$("#iq-siteheaderstab").addClass("active"),$("#fileupload").css("visibility","hidden");break;case"interiorimages":$("#interiorimages").show(),$("#interiorimages_accordion").accordion({active:!1}),$("#iq-interiorimagestab").addClass("active"),$("#fileupload").css("visibility","hidden");break;case"customimages":$("#iq-customimagestab").addClass("active"),$("#fileupload").css("visibility","visible");break;case"companyimages":$("#companyimages").show(),$("#iq-companyimagestab").addClass("active"),$("#fileupload").css("visibility","hidden");var action=$(obj).attr("data-action"),topfolder=$(obj).attr("data-topfolder"),subfolder=$(obj).attr("data-subfolder");void 0===subfolder&&(subfolder=0,$("[data-topfolder]").each(function(){$(this).removeClass("fa-caret-down"),$(this).addClass("fa-caret-right"),$(this).attr("data-action","open")}),$("[data-subfolder]").each(function(){$(this).parent().hide()}),"open"===action?($("[data-topfolder="+topfolder+"]").first().removeClass("fa-caret-right").addClass("fa-caret-down"),$("[data-topfolder="+topfolder+"]").first().attr("data-action","close")):($("[data-topfolder="+topfolder+"]").first().removeClass("fa-caret-down").addClass("fa-caret-right"),$("[data-topfolder="+topfolder+"]").first().attr("data-action","open"))),$("[data-topfolder="+topfolder+"]").each(function(){"open"===action?(parseInt($(this).attr("data-topfolder"))===parseInt(topfolder)&&($(this).attr("data-action","close"),$(this).parent().show()),parseInt($(this).attr("data-subfolder"))===parseInt(subfolder)&&($(this).attr("data-action","close"),$(this).parent().show()),parseInt($(this).attr("data-subfolder"))===parseInt(subfolder)+1&&$(this).parent().show()):$(this).attr("data-topfolder")>=parseInt(topfolder)&&($(this).attr("data-action","open"),parseInt($(this).attr("data-topfolder"))>parseInt(topfolder)&&$(this).parent().hide())})}setTimeout(function(){$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",method:"editor_imagelibrarygrid_layout",folder:sFolder,activetab:sActiveTab,fieldid:$("#edit-menu").attr("fieldid"),selectfunction:$("#edit-menu").attr("selectfunction"),filter:filter,callback:$("#edit-menu").attr("callback")},success:function(jsonRet){0===jsonRet.STATUS?$("#iq-customimagesgrid").html(jsonRet.LAYOUT):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},500)},CropImage_Dialog:function(button){$.iqUtils.uiProcessing("open");var img_selected_exists=!1,img_selected_width="",img_selected_height="",img_selected_aspect_ratio="",check_image_exists=setInterval(function(){if($.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",img_src:$("#edit-menu").attr("img_url"),img_path:$("#edit-menu").attr("img_path"),method:"imageexists"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?(img_selected_exists=!0,img_selected_width=jsonRet.IMG_WIDTH,img_selected_height=jsonRet.IMG_HEIGHT,img_selected_aspect_ratio=(img_selected_height/img_selected_width).toFixed(2)):(clearInterval(check_image_exists),$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}),img_selected_exists){if(clearInterval(check_image_exists),""!==img_width){var img_width=$("#edit-menu").attr("img_width"),img_height=$("#edit-menu").attr("img_height"),img_aspect_ratio=(img_height/img_width).toFixed(2);if(img_selected_aspect_ratio===img_aspect_ratio)return $.iqUtils.uiProcessing("close"),void $.iqEditor.CallBack()}$("#iq_editor_imagecropper_dialog").bsModal({backdrop:!0,title:"Crop Image",body:$.iqEditor.BuildLoadingDialogHtml("Loading Image Cropper")});var obj=button;void 0!==button&&($("#edit-menu").attr("img_url",$(obj).attr("img_url")),$("#edit-menu").attr("img_name",$(obj).attr("img_name"))),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",img_src:$("#edit-menu").attr("img_url"),img_path:$("#edit-menu").attr("img_path"),img_height:img_height,img_width:img_width,img_name:$("#edit-menu").attr("img_name"),callback:$("#edit-menu").attr("callback"),method:"editor_croppableimage_layout"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_imagecropper_dialog .modal-body").html(jsonRet.LAYOUT),$.iqEditor.ImageCropper($("#customimages").attr("fieldid"))):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})}},1e3)},ImageExists:function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",img_src:$("#edit-menu").attr("img_url"),img_path:$("#edit-menu").attr("img_path"),method:"imageexists"},success:function(jsonRet){if(0===jsonRet.STATUS){var img_selected_width=jsonRet.IMG_WIDTH,img_selected_height=jsonRet.IMG_HEIGHT;(img_selected_height/img_selected_width).toFixed(2)}else clearInterval(check_image_exists),$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},ImageCropper:function(){var x1=0,x2=$("#edit-menu").attr("img_width"),y1=0,y2=$("#edit-menu").attr("img_height");if(""!==$("#edit-menu").attr("img_width")&&""!==$("#edit-menu").attr("img_height"))x1=0,x2=$("#edit-menu").attr("img_width"),y1=0,y2=$("#edit-menu").attr("img_height"),$("#croppableimage").Jcrop({aspectRatio:$("#edit-menu").attr("img_width")/$("#edit-menu").attr("img_height"),setSelect:[x1,y1,x2,y2],onChange:function(croppableimage){$("#croppableimage").attr("cropx",croppableimage.x),$("#croppableimage").attr("cropy",croppableimage.y),$("#croppableimage").attr("cropwidth",croppableimage.w),$("#croppableimage").attr("cropheight",croppableimage.h)}});else var image_in_cropper=setInterval(function(){1===$("#croppableimage").length&&(x1=.25*$("#croppableimage").width(),x2=$("#croppableimage").width()-x1,y1=.25*$("#croppableimage").height(),y2=$("#croppableimage").height()-y1,$("#croppableimage").Jcrop({setSelect:[x1,y1,x2,y2],onChange:function(croppableimage){$("#croppableimage").attr("cropx",croppableimage.x),$("#croppableimage").attr("cropwidth",croppableimage.w),$("#croppableimage").attr("cropy",croppableimage.y),$("#croppableimage").attr("cropheight",croppableimage.h)}}),clearInterval(image_in_cropper))},500)},SectionImage:function(button){var obj=button;$("#edit-menu").attr("img_width",$(obj).attr("data-editable-img_width")),$("#edit-menu").attr("img_height",$(obj).attr("data-editable-img_height")),$("#edit-menu").attr("fieldid",$(obj).attr("fieldid")),$("#edit-menu").attr("targetdiv",$(obj).attr("targetdiv")),$("#edit-menu").attr("callback",$(obj).attr("callback")),$("#edit-menu").attr("selectfunction",$(obj).attr("selectfunction")),$("#edit-menu").attr("afterupload",$(obj).attr("afterupload"));$("#iq_editor_maintainimages_dialog").bsModal({backdrop:!0,title:"Image Library",body:'<div class="row"><div id="iq_editor_maintainimages_dialog" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading Image Library</h1></div></div>'}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"editor_imagelibrary_dialog_layout",id:$("#edit-menu").attr("fieldid"),valid_folders:$(obj).data("valid_folders"),callback:$("#edit-menu").attr("callback"),selectfunction:$("#edit-menu").attr("selectfunction")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_maintainimages_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_maintainimages_dialog .modal-footer").css({display:"none"}),$.iqEditor.Accordion(),$.iqEditor.InitUpload()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},UpdateSectionImage:function(){var sfieldid=$("#edit-menu").attr("fieldid"),stargetdiv=$("#edit-menu").attr("targetdiv"),stargetclass=$("#"+stargetdiv).attr("class"),simg_src=$("#edit-menu").attr("img_url"),obj="#"+stargetdiv;$("#"+sfieldid).iqFieldValue(simg_src),"headerimagewrapper"!==stargetclass&&"panelimagewrapper"!==stargetclass&&"rounded-circle"!==stargetclass?$("#"+stargetdiv).attr("src",simg_src.replace(/ /g,"%20")):$("#"+stargetdiv).css({"background-image":"url("+simg_src.replace(/ /g,"%20")+")"});var divcontent=$(obj)[0];$.data(divcontent,"content",simg_src),1===$("#iq_editor_maintainimages_dialog").length&&$("#iq_editor_maintainimages_dialog").modal("hide"),$(obj).parent().find('[data-button="iq-remove-image-button"]').css({visibility:"visible"})},DefaultImage:function(pButton){var obj=$(pButton),sFieldValueID=$(obj).data("fieldvalueid"),sDisplayTarget=$(obj).data("displaytarget"),sImgSrc=$(obj).data("defaultimg");$("#"+sFieldValueID).iqFieldValue(sImgSrc),$("#"+sDisplayTarget).css({"background-image":"url("+sImgSrc.replace(/ /g,"%20")+")"})},UpdateFooterOption:function(pSelect){var obj=$(pSelect),iTargetID=$(obj).data("target_id");"true"==$("#preferences_form-footer_column_0"+iTargetID+"_show").val()?$("#footer_column_0"+iTargetID+"_options").css("display","block"):$("#footer_column_0"+iTargetID+"_options").css("display","none")},ProcessImage:function(){$.iqUtils.uiProcessing("open"),setTimeout(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",width:$("#croppableimage").attr("width"),cropx:$("#croppableimage").attr("cropx"),cropwidth:$("#croppableimage").attr("cropwidth"),cropy:$("#croppableimage").attr("cropy"),cropheight:$("#croppableimage").attr("cropheight"),croppable:$("#customimages").attr("img_croppable"),img_name:$("#edit-menu").attr("img_name"),img_path:$("#edit-menu").attr("img_path"),img_width:$("#croppableimage").data("img-width"),img_height:$("#croppableimage").data("img-height"),scaled_img_width:$(".jcrop-holder").width(),scaled_img_height:$(".jcrop-holder").height(),domainname:$("#edit-menu").attr("domainname"),page:$("#edit-menu").attr("page"),Method:"processimage"},success:function(jsonRet){0===jsonRet.STATUS?($("#edit-menu").attr("img_name",jsonRet.IMG_NAME),$("#edit-menu").attr("img_url",jsonRet.IMG_SRC),setTimeout(function(){$.iqUtils.uiProcessing("close"),$("#iq_editor_imagecropper_dialog").modal("hide"),$.iqEditor.CallBack()},3e3)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},500)},ScrollTo:function(pid){$("#iq-images").animate({scrollTop:$("#"+pid).attr("scrollpos")},1e3)},ScrollPositions:function(){$(".imagecategory").each(function(){var ioffset=$("#iq-images").offset(),ipos=$(this).offset();$(this).attr("scrollpos",ipos.top-ioffset.top)})},TinyMCEImage_Dialog:function(){$("#iq_editor_maintainimages_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Image Library")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"editor_imagelibrary_dialog_layout",selectfunction:"$.iqEditor.InsertImageTinyMCE()"},success:function(jsonRet){0===jsonRet.STATUS?($("#edit-menu").attr("selectfunction","$.iqEditor.InsertImageTinyMCE()"),$("#edit-menu").attr("afterupload","$.iqEditor.MaintainImages()"),$("#iq_editor_maintainimages_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_maintainimages_dialog .modal-footer").css({display:"none"}),$.iqEditor.InitUpload()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},InsertImageTinyMCE:function(){$("#iq_editor_maintainimages_dialog").modal("hide"),setTimeout(function(){tinyMCE.execCommand("mceInsertRawHTML",!1,'<img src="'+$("#edit-menu").attr("img_url")+'" alt="" />')},200)},SelectImage:function(){var sid=$("#edit-menu").attr("fieldid"),surl=$("#edit-menu").attr("img_url");$("#"+sid).attr("src",surl),$("#iq_editor_editfield_dialog").modal("hide"),$(".modal-backdrop").remove(),$("#editing_buttons_save").show(),1!==$("[data-templateid]").length&&2!==$("[data-templateid]").length||($(".edit").remove(),$.iqEditor.FindEditableFields())},SaveField:function(psection,pmenu,ptype){var obj=$("[data-section='"+psection+"']"),divcontent=$(obj)[0],stype=$(obj).attr("data-editable-type"),listingtype="",propertytype="",oFormFields="";switch(stype){case"image":$.iqEditor.ProcessImage();break;case"menu":"global"===ptype&&(pmenu+=" global"),$(obj).attr("menuname",pmenu),$.data(divcontent,"content",pmenu),$.iqEditor.DisplayMenu(psection,pmenu);break;case"html":$.data(divcontent,"content",$("#content_form-content").iqFieldValue()),$(obj).html($("#content_form-content").iqFieldValue());var leadsource_counter=0;$("[data-leadsource-sourcename]").each(function(){leadsource_counter+=1,$(this).attr("id","leadsource_"+leadsource_counter)});break;case"iq_listings":oFormFields=$("#iq_listings_criteria_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-listings-criteria",$.toJSON(oFormFields)),$("#iq_results_content").html(""),$("#iq_results_content").append('<div id="iq_processing" class="text-center" style="width:100%; padding:10px; position:absolute; top:0px; left:0px; background-color:#ffffff;"><i class="fa fa-fw fa-refresh fa-spin" style="font-size:24px;"></i><div>Processing</div></div>'),$.iqEditor.GetIQ_Listings();break;case"iq_listings_centralized":$("#iq_listings").length&&($("#iq_listings").attr("data-startpage",1),$("#iq_listings #iq_listings_wrapper").html("")),$.iqEditor.GetIQ_Listings_Centralized();break;case"iq_show_listings_stats":oFormFields=$("#iq_showlistingsstats_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-show_listings_stats",$.toJSON(oFormFields)),"true"===$("#iq_showlistingsstats_form-showlistingsstats").iqFieldValue()?($.iqEditor.GetIQ_Listings_Stats(),$("[data-section=iq_listings_stats]").show(),$("[data-listings-stats-placeholder]").remove()):($("[data-section=iq_listings_stats]").hide(),$("[data-section=iq_listings_stats]").after('<div data-listings-stats-placeholder class="well text-center" style="font-size:18px"><i class="fa fa-building"></i><br>Listings Stats</div>'));break;case"iq_showcase":oFormFields=$("#iq_listings_criteria").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-showcase-criteria",$.toJSON(oFormFields)),$.iqEditor.GetIQ_Showcase();break;case"iq_areas":$("#iq_areas-areas_list_autocomplete").remove(),$("#iq_areas_list_ul li").each(function(){var lookup=$(this).attr("data-lookup").toLowerCase(),lookupvalue=$(this).attr("data-lookupvalue").toLowerCase();"zipcode"===lookup&&(lookup="zip_code"),$("#iq_areas_criteria").append('<input type="hidden" id="iq_areas-'+lookup+'" name="'+lookup+'" value="'+lookupvalue+'">')}),oFormFields=$("#iq_areas_criteria").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-areas-criteria",$.toJSON(oFormFields)),$("#iq_areas_wrapper").attr("data-startpage","2"),$("#iq_areas_wrapper").attr("data-num-listings","0"),$("#iq_areas_wrapper").attr("data-totalrowcount","24"),$("#iq_areas_wrapper").html("").css({"min-height":"100px"}),$("#iq_areas_wrapper").append('<div id="iq_processing" class="text-center" style="width:100%; height:100px; padding:10px; position:absolute; top:0px; left:0px; background-color:#ffffff;"><i class="fa fa-fw fa-refresh fa-spin" style="font-size:24px;"></i><div>Processing</div></div>'),$.iqEditor.GetIQ_Areas();break;case"iq_youtube":if($("#iq_youtube").iqForm_Check(),!0!==$("#iq_youtube_videoid").iqForm_Check())return;oFormFields=$("#iq_youtube_videoid").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-youtube-videoid",$.toJSON(oFormFields)),$.iqEditor.GetIQ_YoutubeVideo();break;case"iq_rssfeed":if($("#iq_rssfeed_form").iqForm_Check(),!0!==$("#iq_rssfeed_form").iqForm_Check())return;oFormFields=$("#iq_rssfeed_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-rssfeed",$.toJSON(oFormFields)),$.iqEditor.GetIQ_RssFeed();break;case"iq_yelp":if($("#iq_yelp_form-terms:checked").length>8)return void $.iqUtils.uiMessage("","Only a max of 6 Yelp categories may be selected");if(0===$("#iq_yelp_form-terms:checked").length)return void $.iqUtils.uiMessage("","Please select at least 1 Yelp category");$("#iq_yelp_form-lat").iqFieldValue($("#iq_editor_yelp_map").attr("data-lat")),$("#iq_yelp_form-lon").iqFieldValue($("#iq_editor_yelp_map").attr("data-lon")),oFormFields=$("#iq_yelp_form").iqSerializeFormToStruct(),$(obj).attr("data-yelp",$.toJSON(oFormFields)),$.iqPages.GetBusinesses();break;case"iq_custompage_callouts":if($("#custom_page_callouts_form").iqForm_Check(),!0!==$("#custom_page_callouts_form").iqForm_Check())return;oFormFields=$("#custom_page_callouts_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-custompage-callouts",$.toJSON(oFormFields)),$.iqEditor.GetIQ_Callouts();break;case"iq_customagents":$("#agents_criteria-selected_tags option").prop("selected",!0),$("#agents_criteria-available_tags option").prop("selected",!0),$("#agents_criteria-selected_offices option").prop("selected",!0),$("#agents_criteria-available_offices option").prop("selected",!0),oFormFields=$("#agents_criteria").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-customagents-criteria",$.toJSON(oFormFields)),$.iqEditor.GetIQ_CustomAgents();break
;case"iq_classes":$(obj).attr("data-classtypeid",$("#classtypes_form-classtype").iqFieldValue()),$.iqEditor.GetClasses($("#classtypes_form-classtype").iqFieldValue());break;case"iq_header":if($("#custom_page_header_form").iqForm_Check(),!0!==$("#custom_page_header_form").iqForm_Check())return;oFormFields=$("#custom_page_header_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-custompage-header",$.toJSON(oFormFields)),$.iqEditor.GetIQ_Header();break;case"homepage_section":if(!0!==$("#preferences_form").iqForm_Check())return obj=$(".text-danger"),console.log($(".text-danger").html()),void console.log($(obj).attr("id"));if(void 0!==$(obj).attr("data-show")&&($(obj).attr("data-show",$("#preferences_form-"+psection+"_show").iqFieldValue()),""==$("#preferences_form-"+psection+"_show").iqFieldValue()&&console.log("DEV NOTE: #preferences_form-"+psection+"_show does not exists.")),1===$("#preferences_form-autocomplete_fields").length&&""===$("#preferences_form-autocomplete_fields").iqFieldValue()&&$("#preferences_form-autocomplete_fields_message").show(),1===$("#preferences_form-blog_categorylist").length&&$("#preferences_form-blog_categorylist:checked").length>32)return void $.iqUtils.uiMessage("","Only a max of 32 blog categories can be selected");if(1===$("#preferences_form-searchform_listingtype").length&&(listingtype=$("#preferences_form-searchform_listingtype").iqFieldValue(),propertytype=$("#preferences_form-searchform_propertytype").iqFieldValue(),"rentals"===listingtype&&"multifamily"===propertytype))return void $.iqUtils.uiMessage("",'Multifamily is not a valid property type for leased properties. Valid property types are "Residential", "Commercial" and "Land"');if(1===$("#preferences_form-featuredhomes_propertytype").length&&(listingtype=$("#preferences_form-featuredhomes_listingtype").iqFieldValue(),propertytype=$("#preferences_form-featuredhomes_propertytype").iqFieldValue(),"rentals"===listingtype&&"multifamily"===propertytype))return void $.iqUtils.uiMessage("",'Multifamily is not a valid property type for leased properties. Valid property types are "Residential", "Commercial" and "Land"');if(1===$("#preferences_form-justlistedhomes_propertytype").length&&(listingtype=$("#preferences_form-justlistedhomes_listingtype").iqFieldValue(),propertytype=$("#preferences_form-justlistedhomes_propertytype").iqFieldValue(),"rentals"===listingtype&&"multifamily"===propertytype))return void $.iqUtils.uiMessage("",'Multifamily is not a valid property type for leased properties. Valid property types are "Residential", "Commercial" and "Land"');"panels_group1"===psection&&($("#preferences_form-panels_group1_right_agent_selected_tags option").prop("selected",!0),$("#preferences_form-panels_group1_left_agent_selected_tags option").prop("selected",!0),$("#preferences_form-panels_group1_right_agent_selected_offices option").prop("selected",!0),$("#preferences_form-panels_group1_left_agent_selected_offices option").prop("selected",!0)),"panels_group2"===psection&&($("#preferences_form-panels_group2_right_agent_selected_tags option").prop("selected",!0),$("#preferences_form-panels_group2_left_agent_selected_tags option").prop("selected",!0),$("#preferences_form-panels_group2_right_agent_selected_offices option").prop("selected",!0),$("#preferences_form-panels_group2_left_agent_selected_offices option").prop("selected",!0));var company_logo_url=$("#preferences_form-logo").iqFieldValue();$('[data-section="companylogo"]').find("img").attr("src",company_logo_url),$.iqEditor.TempPreferences_Save(psection);break;case"iq_house_value":var house_value_banner=$("#house_value_fields-banner").iqFieldValue(),house_value_subbanner=$("#house_value_fields-subbanner").iqFieldValue(),house_value_background=$("#house_value_fields-background").iqFieldValue(),home_report_banner=$("#home_report_fields-banner").iqFieldValue(),home_report_subbanner=$("#home_report_fields-subbanner").iqFieldValue(),home_report_background=$("#home_report_fields-background").iqFieldValue(),path_info=$("#house_value_fields-pathinfo").iqFieldValue();oFormFields=$("#house_value_fields").iqSerializeFormToStruct(),$('[data-section="house_value"]').attr("data-house-value-fields",$.toJSON(oFormFields)),"/house-value"===path_info||"/"===path_info?($('[data-section="house_value_banner"]').text(house_value_banner),$('[data-section="house_value_subbanner"]').text(house_value_subbanner),$('[data-section="house_value"]').css({"background-image":"url('"+encodeURI(house_value_background)+"')"}),$('[data-section="house_value"]').css({"background-size":"cover"})):($('[data-section="house_value_banner"]').text(home_report_banner),$('[data-section="house_value_subbanner"]').text(home_report_subbanner),$('[data-section="house_value"]').css({"background-image":"url("+home_report_background+")"}),$('[data-section="house_value"]').css({"background-size":"cover"}));break;case"listings_kiosk":var arrsearch={};arrsearch.backgroundimage=$("#listings_kiosk_background").iqFieldValue(),arrsearch.layout=$("#kiosk_layout").find("input[name=layout]").iqFieldValue(),arrsearch.hrdtext=$("#kiosk_layout").find("input[name=hrdtext]").iqFieldValue(),arrsearch.searches={};var counter=0;$("form[name=search-criteria]").each(function(){var arrsearchcriteria={},searchby=$(this).data("data-searchby"),searchvalue=$(this).data("data-searchvalue"),searchmethod=$(this).find("input[name=searchmethod]:checked").val(),areafield=$(this).find("select[name=areafield]").iqFieldValue(),arealist=$(this).find("input[name=arealist]").iqFieldValue();""===searchby&&(searchby=$(this).find("input[name=searchby]").iqFieldValue()),""===searchvalue&&(searchvalue=$(this).find("input[name=searchvalue]").iqFieldValue()),"2"==searchmethod&&(searchby=areafield,searchvalue=arealist),arrsearchcriteria.searchmethod=searchmethod,arrsearchcriteria.searchby=searchby,arrsearchcriteria.searchvalue=searchvalue,arrsearchcriteria.areafield=areafield,arrsearchcriteria.arealist=arealist,arrsearchcriteria.searchname=$(this).find("input[name=searchname]").iqFieldValue(),arrsearchcriteria.searchtitle=$(this).find("input[name=searchtitle]").iqFieldValue(),arrsearchcriteria.display="f",$(this).find("input[name=display]").prop("checked")&&(arrsearchcriteria.display="t"),arrsearchcriteria.pricemin=$(this).find("select[name=pricemin]").iqFieldValue(),arrsearchcriteria.pricemax=$(this).find("select[name=pricemax]").iqFieldValue(),arrsearchcriteria.sqfootmin=$(this).find("select[name=sqfootmin]").iqFieldValue(),arrsearchcriteria.sqfootmax=$(this).find("select[name=sqfootmax]").iqFieldValue(),arrsearchcriteria.beds=$(this).find("input[name=beds]:checked").val(),arrsearchcriteria.baths=$(this).find("input[name=baths]:checked").val(),arrsearchcriteria.openhouse=$(this).find("select[name=openhouse]").val(),arrsearchcriteria.listingslayout=$(this).find("select[name=listingslayout]").val(),arrsearchcriteria.showallproperties=$(this).find("select[name=showallproperties]").val(),arrsearchcriteria.waterfront=$(this).find("select[name=waterfront]").val(),arrsearchcriteria.propertyview=$(this).find("select[name=propertyview]").val(),arrsearchcriteria.golfcourse=$(this).find("select[name=golfcourse]").val(),arrsearchcriteria.listingsbanner=$(this).find("input[name=listingsbanner]").val(),arrsearchcriteria.propertytype=$(this).find("input[name=propertytype]:checked").val(),counter=++counter,arrsearch.searches["search_"+counter]=arrsearchcriteria,$.kiosk_settings=JSON.stringify(arrsearch),"t"===arrsearchcriteria.display?$("#iq_kiosk_searchbutton_wrapper_"+counter).show():$("#iq_kiosk_searchbutton_wrapper_"+counter).hide(),$("#iq_kiosk_searchbutton_"+counter).find(".iq-kiosk-searchtitle").text(arrsearchcriteria.searchtitle),$("#iq_kiosk_searchbutton_"+counter).find(".iq-kiosk-searchname").text(arrsearchcriteria.searchname),$("#iq_kiosk_searchbutton_"+counter).attr("data-searchcriteria",JSON.stringify(arrsearchcriteria))}),$("#editing_buttons_save").trigger("click"),setTimeout(function(){self.location=self.location},2e3);break;case"iq_map":var newShowmap=$("#iq_area_map_form-showmap").val(),newLat=$("#iq_editor_area_map").attr("data-lat"),newLon=$("#iq_editor_area_map").attr("data-lon"),newZoom=$("#iq_editor_area_map").attr("data-zoomlevel"),arr_iq_map={};if(arr_iq_map.showmap=newShowmap,arr_iq_map.lat=newLat,arr_iq_map.lon=newLon,arr_iq_map.zoomlevel=newZoom,$("#iq_area_map").attr("data-iq-area-map-details",JSON.stringify(arr_iq_map)),"y"===newShowmap&&($("#iq_area_googlemap").length?$("#iq_area_googlemap").html(""):($("#iq_area_map").html(""),$("#iq_area_map").append('<div id="iq_area_googlemap" style="margin:15px 0 30px 0; height:300px;"></div>')),$.iqPages.AreaMap()),"n"===newShowmap){$("#iq_area_googlemap").html('\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center" style="margin:15px 0 30px 0; padding:10px; background-color:##e6e7e8;">\t\t\t\t\t\t\t\t<i style="font-size:25px;" class="fa fa-globe"></i>\t\t\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\t\tThe map is currently hidden.\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>')}break;case"premier_header":if($("#custom_page_premier_header_form").iqForm_Check(),!0!==$("#custom_page_premier_header_form").iqForm_Check())return;oFormFields=$("#custom_page_premier_header_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-custompage-header",$.toJSON(oFormFields)),$.iqEditor.getPremierHeader();break;case"premier_links":if($("#custom_page_premier_links_form").iqForm_Check(),!0!==$("#custom_page_premier_links_form").iqForm_Check())return;oFormFields=$("#custom_page_premier_links_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-custompage-links",$.toJSON(oFormFields)),$.iqEditor.getPremierLinks();break;case"premier_carousel":if($("#custom_page_premier_carousel_form").iqForm_Check(),!0!==$("#custom_page_premier_carousel_form").iqForm_Check())return;oFormFields=$("#custom_page_premier_carousel_form").iqSerializeFormToStruct(),$.data(divcontent,"content",$.toJSON(oFormFields)),$(obj).attr("data-custompage-slides",$.toJSON(oFormFields)),$.iqEditor.getPremierCarousel();break;default:if(console.log("woof"),!0!==$("#content_form").iqForm_Check())return;$.data(divcontent,"content",$("#content_form-content").iqFieldValue()),$(obj).text($("#content_form-content").iqFieldValue())}"iq_rssfeed"!=psection&&$("#iq_editor_editfield_dialog").modal("hide"),$("#iq_youtubehelp_dialog").modal("hide"),$("#editing_buttons_save").show(),$(".modal-backdrop").remove(),$(".edit").remove(),$("#iq_loading_dialog").remove(),setTimeout(function(){$.iqEditor.FindEditableFields()},500)},DisplaySection:function(psection){var obj=$("[data-section='"+psection+"']"),height=$(obj).height(),domain_name=$("#edit-menu").attr("domainname"),data=$("#iq-data-values").data("data");$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",section:psection,async:!0,data:{ReturnFormat:"json",method:"editor_displaysection",domainname:domain_name,height:height,data:data,section:psection},success:function(jsonRet){0===jsonRet.STATUS?($(obj).html(jsonRet.LAYOUT),"header_carousel"===psection?$(obj).hasClass("flexslider")&&$(obj).height(height):$(obj).css({height:"auto"}),$(obj).find(".owl-carousel").length&&$.iqSite.OwlCarouselInit(),$.iqEditor.ClearEditableFields(),$.iqEditor.FindEditableFields()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}}),$("#iqwebsite_editfield_dialog").modal("hide")},DisplaySiteMenu:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",method:"website_displaymenu_layout",name:"sitemenu",domainname:$("#edit-menu").attr("domainname")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#iq_bootstrap_site_menu").html(jsonRet.LAYOUT),$.iqEditor.ClearEditableFields(),$.iqEditor.FindEditableFields()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}}),$("#iqwebsite_editfield_dialog").modal("hide")},UpdateMetaTags_Dialog:function(){$("#iq_editor_metatags_dialog").bsModal({backdrop:!0,title:"Update Page Meta Tags",body:$.iqEditor.BuildLoadingDialogHtml("Loading Meta Tags Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page"),globalpage:$.iqUtils.cookie("global_page"),method:"editor_updatemetatags_layout"},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){$("#iq_editor_metatags_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_metatags_dialog .modal-footer").css({display:"none"}),$("#iq_registrationdetails").iqForm_Rules();var counter=1;$(".iq-metatag-form").each(function(){$(this).iqForm_Rules(),counter=++counter})}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},CreatePageDialog:function(){$("#iq_editor_page_dialog").bsModal({backdrop:!0,title:"Add a New Page",body:$.iqEditor.BuildLoadingDialogHtml("Loading Create Page Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),method:"editor_createpage_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_page_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_page_dialog .modal-footer").css({display:"none"}),$("#iq-breadcrumb-1").addClass("inactive"),$("#iq_pagedetails").iqForm_Rules(),$("#iq_registrationdetails").iqForm_Rules(),$("#"+jsonRet.METATAGFORMID).iqForm_Rules()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},CreatePage:function(){var bpass="t",saddmetatags=$("#iq_pagetemplate-addmetatags").iqFieldValue(),sregistration=$("#iq_registrationdetails-on").iqFieldValue(),saddtomenu="",sglobalpage="",sname="",stitle="",stemplateid="",sdescription="",sregistration_type="",sregistration_leadsource="",sregistration_interval="",arrmenus="",arrmetatags="",arrregistration="";"t"===sregistration&&!1===$("#iq_registrationdetails").iqForm_Check()&&(bpass="f"),!1===$("#iq_pagedetails").iqForm_Check()&&(bpass="f"),"t"===saddmetatags&&$(".iq-metatag-form").each(function(){!1===$(this).iqForm_Check()&&(bpass="f")}),"t"===bpass&&($.iqUtils.uiProcessing("open"),saddtomenu=$("#iq_pagetemplate-addmenus").iqFieldValue(),sglobalpage=$("#iq_global_page-globalpage").iqFieldValue(),sname=$("#iq_pagedetails-name").iqFieldValue(),stitle=$("#iq_pagedetails-title").iqFieldValue(),stemplateid=$("#iq_pagetemplate-templateid").iqFieldValue(),sdescription=$("#iq_pagedetails-description").iqFieldValue(),sregistration=$("#iq_registrationdetails-on").iqFieldValue(),arrmenus=[],arrmetatags=[],arrregistration=[],"t"===saddtomenu&&$(".iq-addtomenu-row").each(function(){var sid=$(this).attr("id"),stopmenu=$("#iq-topmenu-"+sid).iqFieldValue(),ssubmenuof=$("#iq-submenu-"+sid).iqFieldValue();""===ssubmenuof&&(ssubmenuof="topmenu"),arrmenus.push({name:stopmenu,submenuof:ssubmenuof})}),"t"===saddmetatags&&$(".iq-metatag-form").each(function(){var sid=$(this).attr("key"),smetatagname=$("#iq-metatagname-"+sid).iqFieldValue(),smetatagvalue=$("#iq-metatagvalue-"+sid).iqFieldValue();arrmetatags.push({name:smetatagname,value:smetatagvalue})}),"t"===sregistration?(sregistration_type=$("#iq_registrationdetails-type").iqFieldValue(),sregistration_leadsource=$("#iq_registrationdetails-leadsource").iqFieldValue(),sregistration_interval=$("#iq_registrationdetails-interval").iqFieldValue(),arrregistration.push({type:sregistration_type,leadsource:sregistration_leadsource,interval:sregistration_interval}),sregistration=$.toJSON(arrregistration)):sregistration="",$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),menus:$.toJSON(arrmenus),addtomenu:saddtomenu,addmetatags:saddmetatags,globalpage:sglobalpage,name:sname,title:stitle,description:sdescription,templateid:stemplateid,metatags:$.toJSON(arrmetatags),registration:sregistration,Method:"createpage"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),self.location="/"+jsonRet.CMSPAGENAME):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))}}))},CreatePageChangeMenu:function(pid){var smenuname=$("#iq-topmenu-"+pid).iqFieldValue();$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:smenuname,id:pid,method:"editor_displaytopmenuitems_layout"},success:function(jsonRet){if(0===jsonRet.STATUS){var obj=$("#iq-topmenuitems-"+pid);$(obj).html(jsonRet.LAYOUT)}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},PagePreferences_Dialog:function(page){var pageTitle=$.iqUtils.fCase(page);$("#iq_editor_page_dialog").bsModal({backdrop:!0,title:pageTitle+" Page Options",body:$.iqEditor.BuildLoadingDialogHtml("Loading Preferences Form")});var oData={};oData.Method="editor_pagedetails_layout",oData.domainname=$("#edit-menu").attr("domainname"),oData.page=page,oData.ReturnFormat="json","office"==page&&(oData.officeid=$("#office_agents").data("officeid")),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_page_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_page_dialog .modal-footer").css({display:"none"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)),$("input[type=radio][name=agentslayoutdefault]").change(function(){$("#iq_template_carousel").carousel($("#"+this.id).data("slide-to"))}),$("input[type=radio][name=stafflayoutdefault]").change(function(){$("#iq_template_carousel").carousel($("#"+this.id).data("slide-to"))})}})},ProcessPagePreferences:function(page){$.iqUtils.uiProcessing("open"),$("#preferences_form-selected_tags option").prop("selected",!0),$("#preferences_form-available_tags option").prop("selected",!0),$("#preferences_form-selected_offices option").prop("selected",!0),$("#preferences_form-available_offices option").prop("selected",!0);var oFormFields=$("#preferences_form").iqSerializeFormToStruct();$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",name:page,domainname:$("#edit-menu").attr("domainname"),pagepreferences:$.toJSON(oFormFields),method:"processpagepreferences"},success:function(jsonRet){if(0===jsonRet.STATUS)switch($("#iq_editor_page_dialog").modal("hide"),page){case"agents":self.location="/agents";break;case"staff":self.location="/staff";break;case"listings":self.location="/listings";break;case"office":$.iqUtils.uiProcessing("close"),location.reload(!0);break;default:$.iqUtils.uiProcessing("close")}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Testimonials:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",layout:"testimonials",method:"gettestimonials"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq-panel-testimonials").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},MaintainTestimonial:function(action,testimonialid){$("#iq_editor_maintaintestimonial_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",action:action,testimonialid:testimonialid,method:"maintaintestimonial"},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){if($("#iq_editor_maintaintestimonial_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_maintaintestimonial_dialog .modal-footer").css({display:"none"}),$("#testimonials_form").iqForm_Rules(),1===$("[data-star-rating]").length){$("[data-star-rating]").hide();var numstars=$("[data-star-rating] > option").length-1,rating=$("[data-star-rating]").iqFieldValue(),stars=[],i=1;for(i=1;i<=numstars;i++)stars.push('<i data-starselected="" data-starvalue="'+i+'" id="iq_star-rating_'+i+'" class="iq-star-rating fa fa-star"> </i>');$("[data-star-rating]").before(stars),$("[data-starvalue]").each(function(){$(this).data("starvalue")<=rating&&($(this).addClass("iq-star-rating-clicked"),$(this).attr("data-starselected","t")),$(this).mouseover(function(){var mouseoverstar=$(this).data("starvalue");$("[data-starvalue]").each(function(){$(this).data("starvalue")<=mouseoverstar?$(this).addClass("iq-star-rating-over"):($(this).removeClass("iq-star-rating-over"),$(this).removeClass("iq-star-rating-clicked"))})}),$(this).click(function(){var clickedstar=$(this).data("starvalue");$("[data-star-rating]").iqFieldValue(clickedstar),$("[data-starvalue]").each(function(){$(this).data("starvalue")<=clickedstar?($(this).addClass("iq-star-rating-clicked"),$(this).attr("data-starselected","t")):($(this).removeClass("iq-star-rating-clicked"),$(this).data("starselected","f"))})}),$(this).mouseout(function(){$("[data-starvalue]").each(function(){$(this).removeClass("iq-star-rating-over"),"t"===$(this).data("starselected")&&$(this).addClass("iq-star-rating-clicked")})})})}}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},ProcessTestimonial:function(action,testimonialid){var clientname="",testimonial="",rating="";if("delete"!==action){if($("#testimonials_form").iqForm_Check(),!1===$("#testimonials_form").iqForm_Check())return;clientname=$("#testimonials_form-clientname").iqFieldValue(),testimonial=$("#testimonials_form-testimonial").iqFieldValue(),$("#testimonials_form-website").iqFieldValue(),testimonialid=$("#testimonials_form-testimonialid").iqFieldValue(),rating=$("#testimonials_form-rating").iqFieldValue()}$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",testimonialid:testimonialid,action:action,clientname:clientname,testimonial:testimonial,rating:rating,method:"processtestimonial"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#iq_editor_maintaintestimonial_dialog").modal("hide"),$.iqEditor.Testimonials()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},AddMetatagRow:function(){var newMetatagID=$.iqUtils.createUUID(),metatagForm='\t\t\t\t<form class="iq-metatag-form" id="iq_metatags-'+newMetatagID+'" key="'+newMetatagID+'" role="form" onsubmit="return false">\t\t\t\t\t<div class="form-group row">\t\t\t\t\t\t<div class="col-md-1 text-right">\t\t\t\t\t\t\t<button onclick="$.iqEditor.RemoveMetaTagRow(\''+newMetatagID+'\')" data-tagid="" class="btn btn-danger" style="border-radius:50%"><i class="fa fa-minus"></i></button>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="col-md-3">\t\t\t\t\t\t\t<input type="text" class="form-control" name="metatagname" id="iq-metatagname-'+newMetatagID+'" value="" placeholder="Meta Tag Name" data-required="true" data-datatype="alphanumericspacepunctuation">\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="col-md-8">\t\t\t\t\t\t\t<input type="text" class="form-control" name="metatagvalue" id="iq-metatagvalue-'+newMetatagID+'" value="" placeholder="Meta Tag Value" data-datatype="metatags">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</form>';$("#iq-metatags").append(metatagForm)},RemoveMetaTagRow:function(pid){$("#iq_metatags-"+pid).remove()},AddToMenus:function(pid){var smenuname=$("#iq-topmenu-"+pid).iqFieldValue();""===smenuname&&(smenuname="sitemenu"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:smenuname,id:pid,method:"editor_addtomenu_layout"},success:function(jsonRet){if(0===jsonRet.STATUS){var obj=$("#iq-addtomenus");void 0!==pid?$("#"+pid).html(jsonRet.LAYOUT):$(obj).append(jsonRet.LAYOUT),obj.scrollTop(obj.prop("scrollHeight"))}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},RemoveMenuRow:function(pid){1!==$(".iq-addtomenu-row").length?$("#"+pid).remove():($("#iq_pagetemplate-addtomenu").prop("checked",!0),$.iqEditor.ToggleTransparency("menus"))},ToggleTransparency:function(psection){1===$(".iq-ghostout-"+psection).length?$.iqEditor.RemoveTransparency(psection):$.iqEditor.AddTransparency(psection)},AddTransparency:function(psection){var obj=$(".iq-transparency-"+psection);if(0===$(obj).find(".iq-ghostout-"+psection).length){$(obj).css("position","relative");var iwidth=$(obj).width(),iheight=$(obj).height(),shtml='<div class="iq-ghostout-'+psection+'" style="position:absolute; top:0px; left:0px; width:'+iwidth+"px; height:"+iheight+'px;background-color:white; opacity: 0.6; filter: alpha(opacity=6)"></div>';$(obj).append(shtml)}},RemoveTransparency:function(psection){$(".iq-ghostout-"+psection).remove()},ToggleAddToMenu:function(){$("#iq-addtomenus").is(":visible")?$("#iq-addtomenus").hide():$("#iq-addtomenus").show()},Fade:function(pfadein){var counter=0,visiblepage=0;$(".iq-save").hide(),$(".iq-next").hide(),$(".iq-previous").hide(),$(".iq-fadecontainer").each(function(){var ipage=$(this).attr("data-currentpage");counter=++counter,$("#iq-breadcrumb-"+counter).addClass("active"),$(this).is(":visible")&&(visiblepage=ipage,$(this).fadeOut()),$.isNumeric(pfadein)&&ipage===pfadein&&($(this).fadeIn(),$("#iq-breadcrumb-"+ipage).removeClass("active"))}),"next"===pfadein&&(pfadein=parseInt(visiblepage)+parseInt(1),$("#iq-fade-"+pfadein).fadeIn(),$("#iq-breadcrumb-"+pfadein).removeClass("active")),"previous"===pfadein&&(pfadein=parseInt(visiblepage)-parseInt(1),$("#iq-fade-"+pfadein).fadeIn(),$("#iq-breadcrumb-"+pfadein).removeClass("active")),pfadein<counter&&$(".iq-next").show(),pfadein>1&&$(".iq-previous").show(),pfadein===counter&&$(".iq-save").show()},MaintainMenusDialog:function(){$("#iq_editor_menu_dialog").bsModal({backdrop:!0,title:"Site Menu Editor",body:$.iqEditor.BuildLoadingDialogHtml("Loading Menus")}),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),showselect:"f",method:"getmenus",layout:"menus"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_menu_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_menu_dialog .modal-footer").css({display:"none"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},MaintainMenu:function(plevels,paction,pdomainname,pmenuname,ptype){if("a"===$("#edit-menu").attr("sitetype").toLowerCase()&&"global"===ptype)$("#iq_editor_warning_dialog").bsModal({backdrop:!1,title:"&nbsp",body:'<div class="row"><div id="iq_editfield_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h3>You are editing a global menu.</h3> By editing this menu it will no longer be updated when the company makes modifications.</div><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-right" style="margin:10px 0 0 0;"><hr><button class="btn btn-sm btn-success">OK</button> <button class="btn btn-sm btn-danger">Cancel</button></div></div>'}),$("#iq_editor_warning_dialog").css({"margin-top":"100px"}),$("#iq_editor_warning_dialog .modal-content").css({"max-width":"700px",margin:"0 auto"}),$("#iq_editor_warning_dialog .modal-header").css({display:"none"}),$("#iq_editor_warning_dialog .modal-footer").css({display:"none"}),$("#iq_editor_warning_dialog .btn-success").click(function(){$.iqEditor.MaintainMenu(plevels,paction,pdomainname,pmenuname,"")}),$("#iq_editor_warning_dialog").click(function(){$("#iq_editor_warning_dialog").remove()});else{var sdomainname="",saction="",smenuname="";void 0!==pdomainname&&""!==pdomainname?(sdomainname=pdomainname,saction="update",smenuname=pmenuname):(sdomainname=$("#edit-menu").attr("domainname"),saction="create",smenuname=void 0!==pmenuname?pmenuname:""),$("#iq_editor_menu_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",levels:plevels,domainname:sdomainname,name:smenuname,action:saction,method:"editor_maintainmenu_layout"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#iq_editor_menu_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_menu_dialog .modal-footer").css({display:"none"}),$("#iq_menuchoices-iqlink").iqForm_Rules(),$("#iq_menuchoices-lead").iqForm_Rules(),$("#iq_menuchoices-custom").iqForm_Rules(),$("#iq_menuchoices-outsidelink").iqForm_Rules(),$("#iq_menuchoices-visualelements").iqForm_Rules(),"update"===saction?$.iqEditor.RefreshMenu():$("#iq_menuname").iqForm_Rules(),$.iqEditor.Accordion()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}},DisplayMenu:function(psection,pmenu){var obj=$("[data-section='"+psection+"']"),style="vertical";void 0!==$(obj).attr("data-style")&&(style=$(obj).attr("data-style")),$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",name:pmenu,style:style,method:"website_displaymenu_layout",domainname:$("#edit-menu").attr("domainname")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($(obj).html(jsonRet.LAYOUT),$.iqEditor.ClearEditableFields(),$.iqEditor.FindEditableFields()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},Accordion:function(){$("#accordion").accordion({heightStyle:"content",active:!1,collapsible:!0})},CloseAccordion:function(){$("#accordion").accordion({collapsible:!0,autoHeight:!1,active:!1})},RefreshMenu:function(){$(".topmenu_sortable").sortable({revert:!0,cancel:".iq-custommenu-notsortable",placeholder:"sortablehighlight",cursor:"crosshair",distance:"5",start:function(){$.iqEditor.CloseAccordion()},stop:function(){$.iqEditor.RefreshMenu()}}),$(".submenu_sortable").sortable({revert:!0,cancel:".iq-custommenu-notsortable",cursor:"crosshair",distance:"5",connectWith:".submenu_sortable",placeholder:"sortablehighlight",start:function(){$.iqEditor.CloseAccordion()},stop:function(){$.iqEditor.RefreshMenu()},receive:function(){$.iqEditor.RefreshMenu()}});var topmenu_counter=0;$(".iq-custommenu-topmenu").each(function(){topmenu_counter+=parseInt(1);var oLi=this;$(oLi).attr("id","topmenu_"+topmenu_counter),$(oLi).find(".editingicons").remove(),$(oLi).find(".iq-topmenu-text").append('<div class="editingicons pull-right" style="font-size:16px; display:none; cursor:pointer; margin:0 10px 0 0;"><i class="fa fa-trash"></i><span class="spacer"></span><i class="fa fa-pencil"></i></div>'),$(oLi).attr("menuposition",topmenu_counter);var obj=$(this).find(".iq-topmenu-text");$(obj).attr("id","topmenu_"+topmenu_counter+"_text"),$(oLi).find("#topmenu_"+topmenu_counter+"_text").mouseover(function(){$(this).find(".editingicons").show(),$(this).css({"background-color":"#cccccc"})}),$(oLi).find("#topmenu_"+topmenu_counter+"_text").mouseout(function(){$(this).find(".editingicons").hide(),$(this).css({"background-color":"#eeeeee"})}),$(oLi).find(".fa-trash").click(function(){$.iqEditor.DeleteMenuItem($(oLi).attr("id"))
}),$(oLi).find(".fa-pencil").click(function(){$.iqEditor.EditMenuItem($(oLi).attr("id"))});var submenu_counter=0;$(oLi).find("ul").each(function(){$(this).attr("id","submenu_"+topmenu_counter)}),$(oLi).find("ul li.submenu").each(function(){submenu_counter+=parseInt(1);var obj=$(this).find(".iq-submenu-text");$(this).attr("id","submenu_"+topmenu_counter+"_"+submenu_counter),$(obj).find(".editingicons").remove(),$(this).find(".iq-submenu-text").append('<div class="editingicons pull-right" style="display:none; font-size:16px; cursor:pointer;margin:0 10px 0 0;"><i class="fa fa-trash"></i><span class="spacer"></span><i class="fa fa-pencil"></i></div>'),$(obj).attr("id","submenu_"+topmenu_counter+"_"+submenu_counter+"_text");var id="submenu_"+topmenu_counter+"_"+submenu_counter;$(this).mouseover(function(){$(obj).find(".editingicons").show(),$(this).css({"background-color":"#cccccc"})}),$(this).mouseout(function(){$(obj).find(".editingicons").hide(),$(this).css({"background-color":"#ffffff"})}),$(this).find(".fa-trash").click(function(){$.iqEditor.DeleteMenuItem(id)}),$(this).find(".fa-pencil").click(function(){$.iqEditor.EditMenuItem(id)})})}),$.iqEditor.Accordion()},EditMenuItem:function(pid){var oLi=$("#"+pid),position1=$(oLi).attr("position1"),position2=$(oLi).attr("position2"),position3=$(oLi).attr("position3"),position4=$(oLi).attr("position4"),menu_item_name=$("#"+pid+"_text").text(),menu_item_level=$(oLi).attr("data-menu_item_level");$.selected_menu_item=pid,$.selected_menu_item_level=menu_item_level,$.selected_menu_item_name=$("#"+pid+"_text").text();var divtoopen=position2;divtoopen=position2.match("iqlink|custom|lead|nolink|divider")?"nolink"===position2||"divider"===position2?"visualelements":position2:"outsidelink",$("#accordion > h1").each(function(){$(this).next("div").slideUp(),this.id===divtoopen&&($(this).hasClass("ui-state-default")&&$("#accordion").accordion({active:$("#accordion > h1").index($("#"+divtoopen))}),$(this).next("div").slideDown())});var oForm="#iq_menuchoices-"+divtoopen;$(oForm).find(".position1").iqFieldValue(position1),$(oForm).find(".position2").iqFieldValue(position2),$(oForm).find(".position3").iqFieldValue(position3),$(oForm).find(".position4").iqFieldValue(position4),$(oForm).find("#updatemenu").show(),$(oForm).find("#appendmenu").hide(),$(oForm).find("#addsubmenuitem").hide(),$(oForm).find("#topmenuitems").hide(),$(oForm).find("#updatemenu").unbind("click"),"topmenuitem"===menu_item_level&&($.iqEditor.RefreshTopMenuItems(),$(oForm).find("#addsubmenuitem").unbind("click"),$(oForm).find("#addsubmenuitem").show(),$(oForm).find("#addsubmenuitem").html('<i class="fa fa-list-ul"></i> Add to '+menu_item_name),0===$(oForm).find(".submenuof").length&&$(oForm).find("#addsubmenuitem").after('<input type="hidden" id="submenuof" class="submenuof" value="'+pid+'">'),$(oForm).find(".submenuof").iqFieldValue(pid),$(oForm).find("#addsubmenuitem").click(function(){$.iqEditor.AppendMenu("iq_menuchoices-"+divtoopen)})),$(oForm).find("#updatemenu").click(function(){var stype=position2;stype=position2.match("iqlink|custom|lead|nolink|divider")?position2:"outsidelink",$.iqEditor.UpdateMenu(pid,stype)})},ChangeVisualElement:function(){switch($("#visualelements-position2").iqFieldValue()){case"nolink":$("#iq-visualelements").show(),$("#visualelements-position1").iqFieldValue("nolink");break;case"divider":$("#iq-visualelements").hide(),$("#visualelements-position1").iqFieldValue("Divider")}},RestoreDefaultSiteMenu:function(){confirm("This will restore the site menu to its original state, any changes you have made since your last save will be lost.")&&($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),Method:"restoresitemenu"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$.iqEditor.DisplaySiteMenu(),$.iqEditor.MaintainMenu("","",$("#edit-menu").attr("domainname"),"sitemenu")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}))},UpdateMenu:function(pid,ptype){var position1="",position2="",position3="",position4="",oForm="",oLi="";if(oForm=$("nolink"===ptype||"divider"===ptype?"#iq_menuchoices-visualelements":"#iq_menuchoices-"+ptype),!0===$(oForm).iqForm_Check()){if(position1=$(oForm).find(".position1").iqFieldValue(),position2=$(oForm).find(".position2").iqFieldValue(),position3=$(oForm).find(".position3").iqFieldValue(),position4=$(oForm).find(".position4").iqFieldValue(),oLi=$("#"+pid),$(oLi).attr("position1",position1),$(oLi).attr("position2",position2),$(oLi).attr("position3",position3),$(oLi).attr("position4",position4),-1===pid.indexOf("submenu"))$(oLi).find(".iq-topmenu-text").text(position1);else switch(ptype){case"nolink":$(oLi).find(".iq-submenu-text").html(position1);break;case"divider":$(oLi).find(".iq-submenu-text").html('<i style="margin: 0 10px" class="fa fa-level-up fa-rotate-90"></i>_______________________');break;default:$(oLi).find(".iq-submenu-text").html('<i style="margin: 0 10px" class="fa fa-level-up fa-rotate-90"></i> '+position1)}$.iqEditor.Accordion(),$.iqEditor.RefreshMenu()}},AppendMenu:function(pformid){var oForm=$("#"+pformid),position="",position1="",position2="",position3="",position4="",menulength="",submenuof="",shtml="",oLi="",obj="";if(!0===$(oForm).iqForm_Check()){if(position1=oForm.find(".position1").iqFieldValue(),position2=oForm.find(".position2").iqFieldValue(),position3=oForm.find(".position3").iqFieldValue(),position4=oForm.find(".position4").iqFieldValue(),""===(submenuof=oForm.find(".submenuof").iqFieldValue()))menulength=$("ul#sortable li.iq-custommenu-topmenu").size()+parseInt(1),shtml='<li class="iq-custommenu-topmenu" data-menu_item_level="topmenuitem" id="topmenu_'+menulength+'" menuposition="" position1="" position2="" position3="" position4=""><div id="topmenu_'+menulength+'_text" class="iq-topmenu-text">'+position1+'</div><ul id="submenu_'+menulength+'" class="submenu_sortable"><li style="height:2px" class="iq-custommenu-notsortable"> </li></ul></li>',$("#sortable").append(shtml),oLi=$("#topmenu_"+menulength);else{switch(position=$("#"+submenuof).attr("menuposition"),menulength=$("#submenu_"+position+" > li").length,position2){case"nolink":shtml='<li style="font-size:16px; background-color:#ffffff;" class="submenu" data-menu_item_level="submenuitem" id="submenu_'+position+"_"+menulength+'" menuposition="" position1="" position2="" position3="" position4=""><div id="submenu_'+position+"_"+menulength+'_text" class="iq-submenu-text">'+position1+"</div></li>";break;case"divider":shtml='<li  style="background-color:#ffffff;" class="submenu" data-menu_item_level="submenuitem" id="submenu_'+position+"_"+menulength+'" menuposition="" position1="" position2="" position3="" position4=""><div id="submenu_'+position+"_"+menulength+'_text" class="iq-submenu-text">_______________________</div></li>';break;default:shtml='<li style="background-color:#ffffff;" class="submenu"  data-menu_item_level="submenuitem" id="submenu_'+position+"_"+menulength+'" menuposition="" position1="" position2="" position3="" position4=""><div id="submenu_'+position+"_"+menulength+'_text" class="iq-submenu-text"><i style="margin: 0 10px;" class="fa fa-level-up fa-rotate-90"></i> '+position1+"</div></li>"}obj=$("#submenu_"+position),$(obj).remove(".iq-custommenu-notsortable"),$(obj).append(shtml),$(obj).append('<li style="height:2px" class="iq-custommenu-notsortable"> </li>'),oLi=$("#submenu_"+position+"_"+menulength)}$(oLi).attr("position1",position1),$(oLi).attr("position2",position2),$(oLi).attr("position3",position3),$(oLi).attr("position4",position4),$(oLi).attr("menuposition",menulength),$.iqEditor.RefreshMenu()}},DeleteMenuItem:function(pid){if(1===$(".iq-topmenu-text").length)return void alert("The menu must contain at least one item");confirm("Are you sure you want to delete this menu item?")&&$("#"+pid).remove(),$.iqEditor.RefreshMenu()},ResetMenuOptions:function(pformid){var oForm=$("#"+pformid);$(oForm).find("#updatemenu").hide(),$(oForm).find("#appendmenu").show(),"topmenuitem"===$.selected_menu_item_level&&($(oForm).find("#addsubmenuitem").unbind("click"),$(oForm).find("#addsubmenuitem").show(),$(oForm).find("#addsubmenuitem").html('<i class="fa fa-list-ul"></i> Add to '+$.selected_menu_item_name),$(oForm).find("#addsubmenuitem").click(function(){$(oForm).find(".submenuof").iqFieldValue($.selected_menu_item),$.iqEditor.AppendMenu(pformid)})),$.iqEditor.RefreshTopMenuItems(pformid)},RefreshTopMenuItems:function(pformid){var oForm=$("#"+pformid),arrhtml=[];arrhtml.push('<label class="col-md-3" for="submenuof">Submenu Of:</label><div class="col-md-9"><select id="submenuof" class="submenuof form-control" name="submenuof"><option value="">None (top menu item)</option></div>'),$(".iq-custommenu-topmenu").each(function(){arrhtml.push('<option value="'+$(this).attr("id")+'">'+$(this).attr("position1")+"</option>")}),arrhtml.push("</select>"),oForm.find("#topmenuitems").html(arrhtml.toString()),$(oForm).find(".submenuof").iqFieldValue($.selected_menu_item)},ProcessMenu:function(paction){if("create"===paction&&$("#iq_menuname").iqForm_Check(),!0===$("#iq_menuname").iqForm_Check()){if($(".iq-topmenu-text").length<1)return void alert("The menu must contain at least one item");$.iqUtils.uiProcessing("open");var arrmenu=new Array(1),topmenu_counter=0,submenu_counter=0;$(".iq-custommenu-topmenu").each(function(){arrmenu[topmenu_counter]=new Array(1),arrmenu[topmenu_counter][0]=$(this).attr("position1"),arrmenu[topmenu_counter][1]=$(this).attr("position2"),arrmenu[topmenu_counter][2]=$(this).attr("position3"),arrmenu[topmenu_counter][3]=$(this).attr("position4");var oLi="#"+$(this).attr("id"),arrsubmenu=new Array(1);$(oLi).find("ul li.submenu").length>0&&(arrmenu[topmenu_counter][1]="nolink",arrmenu[topmenu_counter][2]="",arrmenu[topmenu_counter][3]=""),$(oLi).find("ul li.submenu").each(function(){arrsubmenu[submenu_counter]=new Array(1),arrsubmenu[submenu_counter][0]=$(this).attr("position1"),arrsubmenu[submenu_counter][1]=$(this).attr("position2"),arrsubmenu[submenu_counter][2]=$(this).attr("position3"),arrsubmenu[submenu_counter][3]=$(this).attr("position4"),submenu_counter+=parseInt(1)}),""!=arrsubmenu&&(arrmenu[topmenu_counter][4]=arrsubmenu),submenu_counter=0,topmenu_counter+=parseInt(1)}),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),publicid:$.iqUtils.cookie("publicid"),action:paction,globalmenu:$("#iq_menuname-globalmenu").iqFieldValue(),name:$("#iq_menuname-menuname").iqFieldValue(),data:$.toJSON(arrmenu),Method:"processmenu"},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){if("sitemenu"===$("#iq_menuname-menuname").iqFieldValue())$.iqEditor.DisplaySiteMenu();else{var pid=$("#iq_menuname-menuname").iqFieldValue();pid=pid.replace(" ","_"),$("#sidebar_menu").find("ul").attr("id",pid),$("#editing_buttons_save").show(),$.iqEditor.DisplayMenu(pid,$("#iq_menuname-menuname").iqFieldValue())}1===$("#iq_editor_editfield_dialog").length&&$("#iq_editor_editfield_dialog").modal("hide"),1===$("#iq_editor_menu_dialog").length&&$("#iq_editor_menu_dialog").modal("hide"),$.iqEditor.ClearEditableFields(),$.iqEditor.FindEditableFields()}else 1===jsonRet.STATUS&&$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)),2===jsonRet.STATUS&&($.iqUtils.uiMessage("","Error 5870: You are not authorized to edit this website"),setTimeout(function(){$.iqEditor.LogOut()},3e3))}})}},DeleteMenu:function(pdomainname,pmenuname){confirm("Are you sure you want to delete this menu?")&&($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:pdomainname,name:pmenuname,Method:"deletemenu"},success:function(jsonRet){0===jsonRet.STATUS?$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:pdomainname,method:"getmenus",showselect:"f",layout:"menus"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_menu_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_menu_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}))},MaintainPagesDialog:function(){$("#iq_editor_maintainpages_dialog").bsModal({backdrop:!0,title:"Page Manager",body:$.iqEditor.BuildLoadingDialogHtml("Loading Pages")}),$.iqUtils.cookie("global_page","",-365),$.iqUtils.cookie("editing_from_pages_menu","",-365),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),layout:"maintainpages",Method:"getpages"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_maintainpages_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_maintainpages_dialog .modal-footer").css({display:"none"}),$('[data-toggle="tooltip"]').tooltip(),$('[data-bs-toggle="tooltip"]').Tooltip()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},RestorePage_Dialog:function(){$("#iq_editor_restorepage_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Previous Versions")}),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page"),layout:"restorepage",Method:"getpreviouspages"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_restorepage_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_restorepage_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},RestorePage:function(pdatetime){confirm("Are you sure you want to restore this page to a previous version")&&($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page"),datetime:pdatetime,Method:"restorepage"},success:function(jsonRet){if(0===jsonRet.STATUS)if("default"!==$("#edit-menu").attr("page")){$.iqUtils.uiProcessing("close");var templateid=$("[data-templateid]*").data("templateid");$("#iq_editor_restorepage_dialog").modal("hide"),$.ajax({url:"/components/page_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"getPage",domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page"),templateid:templateid},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){var sid=$("[data-templateid]*").attr("id");$("#"+sid).html(jsonRet.LAYOUT),1===$("#iq_editor_restorepage_dialog").length&&$("#iq_editor_restorepage_dialog").modal("hide"),1===$("#iq_editor_previewpage_dialog").length&&$("#iq_editor_previewpage_dialog").modal("hide"),self.location=self.location}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}else self.location="/";else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}}))},RestoreMenu:function(pdatetime,pmenu){confirm("Are you sure you want to restore this menu to a previous version")&&($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:pmenu,datetime:pdatetime,Method:"restoremenu"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),"sitemenu"===pmenu&&$.iqEditor.DisplaySiteMenu(),1===$("#iqwebsite_previewmenu_dialog").length&&$("#iqwebsite_previewmenu_dialog").modal("hide"),$.iqEditor.MaintainMenu("","",$("#edit-menu").attr("domainname"),pmenu)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}))},PreviewMenu_Dialog:function(pdatetime,pmenu){$("#iq_editor_previewmenu_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Previous Versions")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:pmenu,datetime:pdatetime,method:"editor_previewmenu_layout"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_previewmenu_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_previewmenu_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},PreviewPage_Dialog:function(pdatetime,ptemplate){$("#iq_editor_previewpage_dialog").bsModal({backdrop:!1,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Preview")});var arrsection=[];"default"===$("#edit-menu").attr("page")&&$("[data-editable=true]").each(function(){var sid=$(this).attr("id");arrsection.push(sid)}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page"),datetime:pdatetime,template:ptemplate,sections:arrsection.toString(),method:"editor_previewpage_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_previewpage_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_previewpage_dialog .modal-footer").css({display:"none"}),$("#iq_editor_previewpage_dialog").css("background-color",$("html").css("background-color"))):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},MaintainPage:function(ppage,ptype){($.iqUtils.uiProcessing("open"),"b"===$("#edit-menu").attr("sitetype").toLowerCase())?$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",globalpage:ptype,method:"setcookies"},success:function(jsonRet){0===jsonRet.STATUS?self.location="/"+ppage.replace(/;/g,"%3b"):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}):"global"===ptype?($("#iq_editor_warning_dialog").bsModal({backdrop:!1,title:"&nbsp",body:'<div class="row"><div id="iq_editfield_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h3>You are editing a global page.</h3> By editing this page it will no longer be updated when the company makes modifications.</div><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-right" style="margin:10px 0 0 0;"><hr><button class="btn btn-sm btn-success">OK</button> <button class="btn btn-sm btn-danger">Cancel</button></div></div>'}),$("#iq_editor_warning_dialog").css({"margin-top":"100px"}),$("#iq_editor_warning_dialog .modal-content").css({"max-width":"700px",margin:"0 auto"}),$("#iq_editor_warning_dialog .modal-header").css({display:"none"}),$("#iq_editor_warning_dialog .modal-footer").css({display:"none"}),$("#iq_editor_warning_dialog").click(function(){$("#iq_editor_warning_dialog").remove()}),$("#iq_editor_warning_dialog .btn-success").click(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",globalpage:ptype,method:"setcookies"},success:function(jsonRet){0===jsonRet.STATUS?self.location="/"+ppage.replace(/;/g,"%3b"):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})})):$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",globalpage:ptype,method:"setcookies"},success:function(jsonRet){0===jsonRet.STATUS?self.location="/"+ppage.replace(/;/g,"%3b"):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},UpdatePage:function(paction){var bpass="t",$pageData="",stitle="",sdescription="",sregistration="",sregistration_type="",sregistration_leadsource="",sregistration_interval="",arrmetatags=[],arrdata=[];switch(paction){case"updatepage":if("default"!==$("#edit-menu").attr("page"))$("[data-editable=true]").each(function(){switch($(this).attr("data-editable-type")){case"menu":arrdata.push("'"+$(this).attr("id")+"':'"+$(this).find("ul").attr("id")+"'");break;case"iq_map":arrdata.push("'"+$(this).attr("id")+"':'"+$(this).attr("data-iq-area-map-details")+"'");break;case"premier_carousel":arrdata.push("'"+$(this).attr("id")+"':'"+$(this).attr("data-custompage-slides")+"'");break;default:arrdata.push("'"+$(this).attr("id")+"':'"+$.data(this,"content").replace(/'/g,"\\'")+"'")}}),$pageData=arrdata.toString(),1===$('[data-section="house_value"]').length&&($pageData=$('[data-section="house_value"]').attr("data-house-value-fields")),1===$("#iq_kiosk").length&&($pageData=$.kiosk_settings);else if(""===($pageData=$("#iq-data-values").data("data")))return;break;case"updatepagedetails":if(sregistration=$("#iq_registrationdetails-on").iqFieldValue(),"t"===sregistration&&!1===$("#iq_registrationdetails").iqForm_Check()&&(bpass="f"),!0===$("#iq_pagedetails").iqForm_Check()){var arrregistration=[];stitle=$("#iq_pagedetails-title").iqFieldValue(),sdescription=$("#iq_pagedetails-description").iqFieldValue(),$("#metatags").iqFieldValue(),sregistration=$("#iq_registrationdetails-on").iqFieldValue(),"t"===sregistration?(sregistration_type=$("#iq_registrationdetails-type").iqFieldValue(),sregistration_leadsource=$("#iq_registrationdetails-leadsource").iqFieldValue(),sregistration_interval=$("#iq_registrationdetails-interval").iqFieldValue(),arrregistration.push({type:sregistration_type,leadsource:sregistration_leadsource,interval:sregistration_interval}),sregistration=$.toJSON(arrregistration)):sregistration=""}else bpass="f";$(".iq-metatag-form").each(function(){var sid=$(this).attr("key");if(!0===$("#iq_metatags-"+sid).iqForm_Check()){var smetatagname=$("#iq-metatagname-"+sid).iqFieldValue(),smetatagvalue=$("#iq-metatagvalue-"+sid).iqFieldValue();arrmetatags.push({name:smetatagname,value:smetatagvalue})}else bpass="f"});break;case"removemetatags":if(!confirm("Are you sure you want to remove all meta tags from this page?"))return;bpass="t"}if("t"===bpass){$("#iq-editing-buttons").hide(),$(".iq-hide-section").hide(),$(".iq-editing-button").hide(),$("#editing_buttons_saving").show(),stitle=$("#iq_pagedetails-title").iqFieldValue(),sdescription=$("#iq_pagedetails-description").iqFieldValue();var $ajaxData={Method:"updatepage",ReturnFormat:"json",action:paction,domainname:$("#edit-menu").attr("domainname"),publicid:$.iqUtils.cookie("publicid"),name:$("#edit-menu").attr("page"),globalpage:$.iqUtils.cookie("global_page"),title:stitle,description:sdescription,metatags:$.toJSON(arrmetatags),registration:sregistration,data:$pageData};setTimeout(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:$ajaxData,success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_metatags_dialog").modal("hide"),$("#editing_buttons_saving span").html('<i class="fa fa-check"></i> Save Complete'),$("#editing_saving_button").html('<i class="fa fa-check"></i> Save Complete'),setTimeout(function(){$("#editing_buttons_saving").fadeOut(2e3,function(){$("#iq-editing-buttons").show(),$(".iq-editing-button").show(),$("#editing_buttons_edit").hide(),$("#editing_buttons_save").hide(),$("#editing_buttons_saving span").html('<i class="fa fa-spinner fa-spin"></i> Saving')})},1e3),$(".iq-hide-section").show(),$(".editbar-pagedetails").show()):(1===jsonRet.STATUS&&($("#editing_buttons_saving").fadeOut(2e3,function(){$("#iq-editing-buttons").show(),$("#editing_buttons_saving span").html('<i class="fa fa-spinner fa-spin"></i> Saving')}),$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE)),2===jsonRet.STATUS&&($.iqUtils.uiMessage("","Error 6479: You are not authorized to edit this website"),setTimeout(function(){$.iqEditor.LogOut()},3e3)))}})},1e3)}},DeletePage:function(ppage,pdomainname){confirm("Are you sure you want to delete this page")&&($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",domainname:pdomainname,name:ppage,Method:"deletepage"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#iqwebsite_metatags_dialog").modal("hide"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",domainname:$("#edit-menu").attr("domainname"),layout:"maintainpages",Method:"getpages"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_maintainpages_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_maintainpages_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}),$.iqEditor.DisplaySiteMenu()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}))},CallBack:function(){switch($("#edit-menu").attr("callback")){case"$.iqEditor.MaintainImages()":$.iqEditor.MaintainImages();break;case"$.iqEditor.UpdateSectionImage()":$.iqEditor.UpdateSectionImage();break;case"$.iqEditor.SelectImage()":$.iqEditor.SelectImage()}},AfterUpload:function(){switch($("#edit-menu").attr("afterupload")){case"$.iqEditor.MaintainImages()":$.iqEditor.MaintainImages();break;case"$.iqEditor.ChangeImageFolder()":$.iqEditor.ChangeImageFolder("customimages");break;case"$.iqEditor.UpdateSectionImage()":$.iqEditor.UpdateSectionImage();break;case"$.iqEditor.SelectImage()":$.iqEditor.SelectImage();break;case"$.iqEditor.CropImage_Dialog()":$.iqEditor.CropImage_Dialog()}},DisplayCustomImages:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"editor_displaycustomimages_layout",callback:$("#iq-images").attr("callback"),id:$("#iq-images").attr("fieldid")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?(1===$("#iqwebsite_editfield_dialog").length&&1===$("#iqwebsite_customimages_dialog").length?$("#iqwebsite_customimages_dialog").html('<div class="container">'+jsonRet.LAYOUT+"</div>"):$("#iqwebsite_editfield_dialog").html('<div class="container">'+jsonRet.LAYOUT+"</div>"),$.iqEditor.InitUpload()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},DeleteImage:function(button){var bconfirm=confirm("Are you sure you want to delete this image"),obj=button;bconfirm&&setTimeout(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{filename:$(obj).attr("imagetodelete"),Method:"deleteimage"},success:function(jsonRet){0===jsonRet.STATUS?$(obj).closest("li").remove():$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},100)},FontAwesomeDialog:function(pnum,pfieldid){$("#iq_editor_fontawesome_dialog").bsModal({backdrop:!0,title:"Select an Icon",body:$.iqEditor.BuildLoadingDialogHtml("Loading Icons")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!1,data:{method:"editor_fontawesome_layout"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_fontawesome_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_fontawesome_dialog .modal-footer").css({display:"none"}),$(".iq-fontawesome > i").click(function(){var selectedIconClass=$(this).attr("class");void 0!==pfieldid&&$("#"+pfieldid).iqFieldValue(selectedIconClass),$("#preferences_form-iconbar_"+pnum+"_image").length&&$("#preferences_form-iconbar_"+pnum+"_image").iqFieldValue(selectedIconClass),$("#iq-icon-"+pnum).length&&$("#iq-icon-"+pnum).attr("class",selectedIconClass),$("#iq-icon-"+pnum+"-1").length&&$("#iq-icon-"+pnum+"-1").attr("class",selectedIconClass),$("#iqlink-icon").length&&$("#iqlink-icon").attr("class",selectedIconClass),$("#lead-icon").length&&$("#lead-icon").attr("class",selectedIconClass),$("#custom-icon").length&&$("#custom-icon").attr("class",selectedIconClass),$("#outsidelink-icon").length&&$("#outsidelink-icon").attr("class",selectedIconClass),$("#iq_editor_fontawesome_dialog").modal("hide")})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},SelectFontAwesome:function(e){var fieldName=$(e).data("fieldname"),hiddenFieldID="preferences_form-"+fieldName;$("#iq_editor_fontawesome_dialog").bsModal({backdrop:!0,title:"Select an Icon",body:$.iqEditor.BuildLoadingDialogHtml("Loading Icons")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!1,data:{method:"editor_fontawesome_layout"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_fontawesome_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_fontawesome_dialog .modal-footer").css({display:"none"}),$(".iq-fontawesome > i").click(function(){var selectedIconClass=$(this).attr("class"),previewIcon=fieldName+"_preview";$("#"+hiddenFieldID).iqFieldValue(selectedIconClass),$("#"+previewIcon).attr("class",selectedIconClass),$("#iq_editor_fontawesome_dialog").modal("hide")})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},RegistrationHelp:function(){var arr_registration_type=$("#iq_registrationdetails-type").iqFieldValue().split("-"),registration_type=arr_registration_type[0];$("#iq_nag_description").hide(),$("#iq_offer_description").hide(),$("#iq_forced_description").hide(),$("#iq_"+registration_type+"_description").show()},ChooseIQLink:function(pdiv){$("#iq_editor_chooseiqlink_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Back At You Links")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"editor_chooseiqlink_layout"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#iq_editor_chooseiqlink_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_chooseiqlink_dialog .modal-footer").css({display:"none"}),$("#accordion").attr("icon",pdiv),$("#iq-links").attr("targetfieldid",pdiv),$.iqEditor.Accordion(),$("#iq_menuchoices-listing").iqListing_MultiFieldAutocomplete({mlsid:$("#iq_listing_multifield_autocomplete").data("mlsid_list")}),$("#iq_menuchoices-rental").iqRental_MultiFieldAutocomplete({mlsid:$("#iq_rental_multifield_autocomplete").data("mlsid_list")})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},UpdateIQLink:function(){var stargetfieldid=$("#iq-links").attr("targetfieldid"),sfieldid=$("#iq-links").attr("fieldid"),svalue="";if("rental"!==sfieldid&&"listing"!==sfieldid)svalue=$("#"+sfieldid).iqFieldValue();else switch(sfieldid){case"listing":svalue=$("#iq_menuchoices-listing").data("data-url");break;case"rental":svalue=$("#iq_menuchoices-rental").data("data-url")}""!==svalue&&$("#"+stargetfieldid).iqFieldValue(svalue),
$("#iq_editor_chooseiqlink_dialog").modal("hide")},ToggleAdditionalFields:function(pnum){$("#iq-displayadditionalfields-"+pnum).toggle()},ChangeIconLink:function(pid){var url=$("#preferences_form-searchbutton_"+pid+"_link").iqFieldValue(),title=$("#preferences_form-searchbutton_"+pid+"_linktitle").iqFieldValue(),sclass=$("#searchbutton_"+pid+"_image").attr("class");$("#searchbutton_"+pid+"_image").attr("class",sclass),$("#iqlink-icon").attr("class",sclass),$("#lead-icon").attr("class",sclass),$("#custom-icon").attr("class",sclass),$("#outsidelink-icon").attr("class",sclass);var divtoopen="outsidelink";$("#accordion").attr("icon",pid),url.toLowerCase().indexOf("/default.cfm")>=0&&(divtoopen="iqlink",$("#iqlink-url").iqFieldValue(url),$("#iqlink-title").iqFieldValue(title),$("#iqlink-icon").attr("class",sclass)),url.toLowerCase().indexOf("/")>=0&&(divtoopen="custom",$("#custom-url").iqFieldValue(url),$("#custom-title").iqFieldValue(title)),url.toLowerCase().indexOf("leadsource~")>=0&&(divtoopen="lead",$("#lead-url").iqFieldValue(url),$("#lead-title").iqFieldValue(title)),"outsidelink"===divtoopen&&($("#outsidelink-url").iqFieldValue(url),$("#outsidelink-title").iqFieldValue(title),$("#outsidelink-icon").attr("class",sclass)),$("#accordion > h1").each(function(){$(this).next("div").slideUp(),this.id===divtoopen&&($(this).hasClass("ui-state-default")&&$("#accordion").accordion({active:$("#accordion > h1").index($("#"+divtoopen))}),$(this).next("div").slideDown())})},UpdateIconLink:function(plinktype){if($("#iq_menuchoices-"+plinktype).iqForm_Check()){var stitle=$("#"+plinktype+"-title").iqFieldValue(),surl=$("#"+plinktype+"-url").iqFieldValue(),sclass=$("#"+plinktype+"-icon").attr("class"),icon=$("#accordion").attr("icon");$("#searchbutton_"+icon+"_linktitle").text(stitle),$("#searchbutton_"+icon+"_image").attr("class",sclass),$("#preferences_form-searchbutton_"+icon+"_link").iqFieldValue(surl),$("#preferences_form-searchbutton_"+icon+"_linktitle").iqFieldValue(stitle),$("#preferences_form-searchbutton_"+icon+"_image").iqFieldValue(sclass),$.iqEditor.CloseAccordion()}},InitUpload:function(){$("#fileupload").fileupload({url:"/components/editor.cfc?method=uploadimages",async:!1,ReturnFormat:"json",dataType:"json",success:function(jsonRet){$("#edit-menu").attr("img_name",jsonRet.IMG_NAME)}}),$("#fileupload").bind("fileuploadstop",function(){var img_url=$("#iq-uploaded-images").attr("img_url")+$("#edit-menu").attr("img_name"),img_path=$("#iq-uploaded-images").attr("img_path");$("#edit-menu").attr("img_url",img_url),$("#edit-menu").attr("img_path",img_path),setTimeout(function(){$.iqUtils.uiProcessing("close"),$.iqEditor.AfterUpload()},5e3)}),$("#fileupload").bind("fileuploadstart",function(){$.iqUtils.uiProcessing("open")})},InitScriptUpload:function(){$("#fileupload").fileupload({url:"/components/editor.cfc?method=upload_scripts",async:!1,ReturnFormat:"json",dataType:"json",success:function(jsonRet){$("#edit-menu").attr("script_name",jsonRet.IMG_NAME)}}),$("#fileupload").bind("fileuploadstop",function(){var script_path=$("#iq-upload-script").attr("script_path"),script_url=$("#iq-upload-script").attr("script_url")+$("#edit-menu").attr("script_name");$("#edit-menu").attr("script_url",script_url),$("#edit-menu").attr("script_path",script_path),setTimeout(function(){$.iqUtils.uiProcessing("close"),$.iqEditor.AfterUpload()},5e3)}),$("#fileupload").bind("fileuploadstart",function(){$.iqUtils.uiProcessing("open")})},ShowPanel:function(ppanel,effect){if(void 0===effect)$(".iq-editing-panel:visible").hide(),$(".nav-tabs > li.active").removeClass("active"),$("#iq-tab-"+ppanel).addClass("active"),$("#iq-panel-"+ppanel).show();else switch(effect.toLowerCase()){case"slide":$(".iq-editing-panel:visible").slideUp(250,function(){$("#iq-panel-"+ppanel).slideDown(250)}),$(".nav-tabs > li.active").removeClass("active"),$("#iq-tab-"+ppanel).addClass("active")}},ShowFlexPanel:function(ppanel){$(".iq-editing-panel:visible").hide(),$(".nav-tabs > li.active").removeClass("active"),$("#iq-tab-"+ppanel).addClass("active"),$("#iq-panel-"+ppanel).css("display","flex")},ShowPanelGroup:function(ppanel){$(".iq-editing-panel-groups:visible").hide(),$("#iq-editing-panel-group-tabs > li.active").removeClass("active"),$("#iq-panel-group-tab-"+ppanel).addClass("active"),$("#iq-panel-group-"+ppanel).show()},SelectPanelGroupTabs:function(group,show){switch($("[data-website-panel]").hide(),group){case 1:4==show&&$("[data-website-panel]:lt(4)").show(),8==show&&$("[data-website-panel]:lt(8)").show(),$.iqEditor.ShowPanelGroup("1");break;case 2:4==show&&($("[data-website-panel]:gt(7)").show(),$("[data-website-panel]:gt(11)").hide()),8==show&&$("[data-website-panel]:gt(7)").show(),$.iqEditor.ShowPanelGroup("9")}},LeadSource_Dialog:function(obj){$("#iq_editor_leadsource_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Lead Forms")});var leadsource="",layout="",publicid="",agentteamid="",showonlyrequired="";void 0!==obj?($.existing_leadform=obj,obj=$("#"+$.existing_leadform),leadsource=$(obj).attr("data-leadsource-sourcename"),layout=$(obj).attr("data-leadsource-layout"),publicid=$(obj).attr("data-leadsource-publicid"),agentteamid=$(obj).attr("data-leadsource-agentteamid"),showonlyrequired=$(obj).attr("data-leadsource-showonlyrequired")):($.existing_leadform="",leadsource="",layout="leadform_fields_condensed",publicid="",agentteamid="",showonlyrequired="true"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{sourcename:leadsource,layout:layout,publicid:publicid,agentteamid:agentteamid,showonlyrequired:showonlyrequired,method:"editor_leadsource_layout"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_leadsource_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_leadsource_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},LeadSource:function(){var leadsource=$("#iq_leadsource-leadsource").iqFieldValue(),publicid=$("#iq_leadsource-publicid").iqFieldValue(),agentteamid=$("#iq_leadsource-agentteamid").iqFieldValue(),layout=$("#iq_leadsource-layout").iqFieldValue(),showallfields=$("#iq_leadsource-showallfields").iqFieldValue(),obj="",html="";""===$.existing_leadform?(html='<div data-editable="true" data-editable-type="leadform" data-section="leadform" class="col-md-12 well" id="" data-leadsource-sourcename="'+leadsource+'" data-leadsource-layout="'+layout+'" data-leadsource-publicid="'+publicid+'" data-leadsource-agentteamid="'+agentteamid+'" data-leadsource-showonlyrequired="'+showallfields+'"><div style="z-index:-1;" class="text-center" bgcolor="#cccccc"><strong>'+leadsource+"</strong></div></div>",tinyMCE.execCommand("mceInsertRawHTML",!1,html)):(obj=$("#"+$.existing_leadform),html='<div class="text-center" bgcolor="#cccccc"><strong>'+leadsource+"</strong></div>",$(obj).attr("data-leadsource-sourcename",leadsource),$(obj).attr("data-leadsource-layout",layout),$(obj).attr("data-leadsource-publicid",publicid),$(obj).attr("data-leadsource-showonlyrequired",showallfields),$("#"+$.existing_leadform).html(html),$.iqEditor.FindEditableFields(),$("#editing_buttons_save").show()),$("#iq_editor_leadsource_dialog").modal("hide")},GetIQ_YoutubeVideo:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_video_layout",videoid:$('[data-section="iq_youtube"]').attr("data-youtube-videoid")},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_youtube_layout").html(jsonRet.LAYOUT):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},Add_Youtube_Video:function(){if(""!==$("#iq_youtube_urls .form-control").last().iqFieldValue()){var obj=$("#iq_youtube_urls .form-control").last().parent().parent().clone();$("#iq_youtube_urls").append(obj),$("#iq_youtube_urls .form-control").last().iqFieldValue("");var num_videos=$("#iq_youtube_urls .form-control").length;$("#iq_youtube_urls .iq-youtube-url-number").last().html(num_videos),$("#preferences_form").iqForm_Rules()}},Remove_Youtube_Video:function(obj){var counter=0;$(obj).parent().parent().remove(),$("#iq_youtube_urls .iq-youtube-url-number").each(function(){counter+=1,$(this).html(counter)})},Change_Youtube_Video_Src:function(youtube_url){$("#iq_youtube_video_iframe").remove();var youtube_id,arr_youtube_id=youtube_url.split("/");youtube_id=arr_youtube_id[arr_youtube_id.length-1],$("#iq_youtube_video_container").append('<iframe width="100%" height="315" id="iq_youtube_video_iframe" src="https://www.youtube.com/embed/'+youtube_id+'" frameborder="0" allowfullscreen></iframe>')},GetIQ_RssFeed:function(){return $.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!1,data:{Method:"website_page_template_rssfeed_layout",rssfeed:$('[data-section="iq_rssfeed"]').attr("data-rssfeed")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog").modal("hide"),$("#iq_rssfeed_layout").html(jsonRet.LAYOUT)):2===jsonRet.STATUS?($("#iq_rssfeed_form-rssfeed_message").show(),$("#iq_rssfeed_form-rssfeed_message").html(jsonRet.MESSAGE),$('[data-section="iq_rssfeed"]').attr("data-rssfeed","")):($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog").modal("hide"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}}).STATUS},GetIQ_Callouts:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_callouts",callouts:$('[data-section="iq_custompage_callouts"]').attr("data-custompage-callouts")},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_custompage_callouts_layout").html(jsonRet.LAYOUT):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},GetIQ_Header:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_header",header:$('[data-section="iq_header"]').attr("data-custompage-header"),domainname:$("#edit-menu").attr("domainname"),name:$("#edit-menu").attr("page")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_header_layout").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},getPremierHeader:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_premier_header",domainname:$("#edit-menu").attr("domainname"),pagename:$("#edit-menu").attr("page"),header:$('[data-section="premier_header"]').attr("data-custompage-header")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#premier_header").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},getPremierLinks:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_premier_links",domainname:$("#edit-menu").attr("domainname"),pagename:$("#edit-menu").attr("page"),links:$('[data-section="premier_links"]').attr("data-custompage-links")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#premier_links").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},getPremierCarousel:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_premier_carousel",domainname:$("#edit-menu").attr("domainname"),pagename:$("#edit-menu").attr("page"),slides:$('[data-section="premier_carousel"]').attr("data-custompage-slides")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#premier_carousel").html(jsonRet.LAYOUT),$.iqPage.OwlCarouselInit()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},Update_PriceDropDown:function(propertytype,pricemin,pricemax){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"iq_listings_price_dropdown",pricemin:pricemin,pricemax:pricemax,propertytype:propertytype},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_listings_"+propertytype+"_price_dropdown").html(jsonRet.LAYOUT):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},GetIQ_Listings:function(){var listings_criteria="";switch(""!==$('[data-section="iq_listings"]').attr("data-listings-criteria")&&(listings_criteria=$.parseJSON($('[data-section="iq_listings"]').attr("data-listings-criteria"))),$("#iq_res_criteria_form").hide(),$("#iq_com_criteria_form").hide(),$("#iq_mul_criteria_form").hide(),$("#iq_lan_criteria_form").hide(),listings_criteria.propertytype){case"residential":$.iqEditor.Update_PriceDropDown("residential",listings_criteria.pricemin,listings_criteria.pricemax);break;case"multifamily":$.iqEditor.Update_PriceDropDown("multifamily",listings_criteria.pricemin,listings_criteria.pricemax);break;case"land":$.iqEditor.Update_PriceDropDown("land",listings_criteria.pricemin,listings_criteria.pricemax);break;case"commercial":$.iqEditor.Update_PriceDropDown("commercial",listings_criteria.pricemin,listings_criteria.pricemax)}switch(listings_criteria.propertytype){case"residential":$("#iq_res_criteria_form").show(),$.iqListings.searchform="#iq_res_criteria_form",$("#iq_res_criteria_form-startpage").iqFieldValue("1"),$("#iq_res_criteria_form-pricemin").iqFieldValue(listings_criteria.pricemin),$("#iq_res_criteria_form-pricemax").iqFieldValue(listings_criteria.pricemax),$("#iq_res_criteria_form-newdays").iqFieldValue(listings_criteria.newdays),$("#iq_res_criteria_form-reduceddays").iqFieldValue(listings_criteria.reduceddays),$("#iq_res_criteria_form-virtualtourid").iqFieldValue(listings_criteria.virtualtourid),$("#iq_res_criteria_form-videotour").iqFieldValue(listings_criteria.videotour),$("#iq_res_criteria_form-openhouse").iqFieldValue(listings_criteria.openhouse),$("#iq_res_criteria_form-previews").iqFieldValue(listings_criteria.previews),$("#iq_res_criteria_form-featured").iqFieldValue(listings_criteria.featured),$("#iq_res_criteria_form-images").iqFieldValue(listings_criteria.images),$("#iq_res_criteria_form-publicid").iqFieldValue(listings_criteria.publicid),$("#iq_res_criteria_form-state").iqFieldValue(listings_criteria.state),$("#iq_res_criteria_form-county").iqFieldValue(listings_criteria.county),$("#iq_res_criteria_form-city").iqFieldValue(listings_criteria.city),$("#iq_res_criteria_form-zipcode").iqFieldValue(listings_criteria.zipcode),$("#iq_res_criteria_form-area").iqFieldValue(listings_criteria.area),$("#iq_res_criteria_form-communityname").iqFieldValue(listings_criteria.communityname),$("#iq_res_criteria_form-golfcourse").iqFieldValue(listings_criteria.golfcourse),$("#iq_res_criteria_form-waterfront").iqFieldValue(listings_criteria.waterfront),$("#iq_res_criteria_form-propertyview").iqFieldValue(listings_criteria.propertyview),$("#iq_res_criteria_form-elementaryschool").iqFieldValue(listings_criteria.elementaryschool),$("#iq_res_criteria_form-jrhighschool").iqFieldValue(listings_criteria.jrhighschool),$("#iq_res_criteria_form-highschool").iqFieldValue(listings_criteria.highschool),$("#iq_res_criteria_form-schooldistrict").iqFieldValue(listings_criteria.schooldistrict),$("#iq_res_criteria_form-resstyle").iqFieldValue(listings_criteria.resstyle),$("#iq_res_criteria_form-resale").iqFieldValue(listings_criteria.resale),$("#iq_res_criteria_form-reo").iqFieldValue(listings_criteria.reo),$("#iq_res_criteria_form-shortsale").iqFieldValue(listings_criteria.shortsale),$("#iq_res_criteria_form-bedsmin").iqFieldValue(listings_criteria.bedsmin),$("#iq_res_criteria_form-bedsmax").iqFieldValue(listings_criteria.bedsmax),$("#iq_res_criteria_form-bathsmin").iqFieldValue(listings_criteria.bathsmin),$("#iq_res_criteria_form-bathsmax").iqFieldValue(listings_criteria.bathsmax),$("#iq_res_criteria_form-sqfootmin").iqFieldValue(listings_criteria.res_sqfootmin),$("#iq_res_criteria_form-sqfootmax").iqFieldValue(listings_criteria.res_sqfootmax),$("#iq_res_criteria_form-acreagemin").iqFieldValue(listings_criteria.res_acreagemin),$("#iq_res_criteria_form-acreagemax").iqFieldValue(listings_criteria.res_acreagemax),$("#iq_res_criteria_form-garage").iqFieldValue(listings_criteria.res_garage),$("#iq_res_criteria_form-garagemin").iqFieldValue(listings_criteria.res_garage),$("#iq_res_criteria_form-garagemax").iqFieldValue("99"),$("#iq_res_criteria_form-story").iqFieldValue(listings_criteria.res_story),$("#iq_res_criteria_form-basement").iqFieldValue(listings_criteria.res_basement),$("#iq_res_criteria_form-yearbuiltmin").iqFieldValue(listings_criteria.res_yearbuilt),$("#iq_res_criteria_form-subtype").iqFieldValue(listings_criteria.res_subtype),$("#iq_res_criteria_form-statuscode").iqFieldValue(listings_criteria.statuscode),$("[data-res-statuscode]").each(function(){listings_criteria.statuscode.indexOf($(this).attr("value"))>-1?$(this).prop("checked",!0):$(this).prop("checked",!1)}),"T"===listings_criteria.videotour?($("#iq_res_criteria_form-videotour").prop("checked",!0),$("label[for=iq_res_criteria_form-videotour]").addClass("active")):($("#iq_res_criteria_form-videotour").prop("checked",!1),$("label[for=iq_res_criteria_form-videotour]").removeClass("active")),"T"===listings_criteria.virtualtourid?($("#iq_res_criteria_form-virtualtourid").prop("checked",!0),$("label[for=iq_res_criteria_form-virtualtourid]").addClass("active"),$("#iq_res_criteria_form-matterport").prop("checked",!1),$("label[for=iq_res_criteria_form-matterport]").removeClass("active")):($("#iq_res_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_res_criteria_form-virtualtourid]").removeClass("active")),"matterport"===listings_criteria.virtualtourid?($("#iq_res_criteria_form-matterport").prop("checked",!0),$("label[for=iq_res_criteria_form-matterport]").addClass("active"),$("#iq_res_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_res_criteria_form-virtualtourid]").removeClass("active")):($("#iq_res_criteria_form-matterport").prop("checked",!1),$("label[for=iq_res_criteria_form-matterport]").removeClass("active")),"0"!==listings_criteria.images?($("#iq_res_criteria_form-images").prop("checked",!0),$("label[for=iq_res_criteria_form-images]").addClass("active")):($("#iq_res_criteria_form-images").prop("checked",!1),$("label[for=iq_res_criteria_form-images]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_res_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_res_criteria_form-showallproperties]").addClass("active")):($("#iq_res_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_res_criteria_form-showallproperties]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_res_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_res_criteria_form-showallproperties]").addClass("active")):($("#iq_res_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_res_criteria_form-showallproperties]").removeClass("active")),"T"===listings_criteria.previews?($("#iq_res_criteria_form-previews").prop("checked",!0),$("label[for=iq_res_criteria_form-previews]").addClass("active")):($("#iq_res_criteria_form-previews").prop("checked",!1),$("label[for=iq_res_criteria_form-previews]").removeClass("active")),"T"===listings_criteria.resale?($("#iq_res_criteria_form-resale").prop("checked",!0),$("label[for=iq_res_criteria_form-resale]").addClass("active")):($("#iq_res_criteria_form-resale").prop("checked",!1),$("label[for=iq_res_criteria_form-resale]").removeClass("active")),"T"===listings_criteria.shortsale?($("#iq_res_criteria_form-shortsale").prop("checked",!0),$("label[for=iq_res_criteria_form-shortsale]").addClass("active")):($("#iq_res_criteria_form-shortsale").prop("checked",!1),$("label[for=iq_res_criteria_form-shortsale]").removeClass("active")),"T"===listings_criteria.reo?($("#iq_res_criteria_form-reo").prop("checked",!0),$("label[for=iq_res_criteria_form-reo]").addClass("active")):($("#iq_res_criteria_form-reo").prop("checked",!1),$("label[for=iq_res_criteria_form-resale]").removeClass("active"));break;case"multifamily":$("#iq_mul_criteria_form").show(),$.iqListings.searchform="#iq_mul_criteria_form",$("#iq_mul_criteria_form-startpage").iqFieldValue("1"),$("#iq_mul_criteria_form-pricemin").iqFieldValue(listings_criteria.pricemin),$("#iq_mul_criteria_form-pricemax").iqFieldValue(listings_criteria.pricemax),$("#iq_mul_criteria_form-newdays").iqFieldValue(listings_criteria.newdays),$("#iq_mul_criteria_form-reduceddays").iqFieldValue(listings_criteria.reduceddays),$("#iq_mul_criteria_form-virtualtourid").iqFieldValue(listings_criteria.virtualtourid),$("#iq_mul_criteria_form-videotour").iqFieldValue(listings_criteria.videotour),$("#iq_mul_criteria_form-featured").iqFieldValue(listings_criteria.featured),$("#iq_mul_criteria_form-images").iqFieldValue(listings_criteria.images),$("#iq_mul_criteria_form-publicid").iqFieldValue(listings_criteria.publicid),$("#iq_mul_criteria_form-showallproperties").iqFieldValue(listings_criteria.showallproperties),$("#iq_mul_criteria_form-state").iqFieldValue(listings_criteria.state),$("#iq_mul_criteria_form-county").iqFieldValue(listings_criteria.county),$("#iq_mul_criteria_form-city").iqFieldValue(listings_criteria.city),$("#iq_mul_criteria_form-zipcode").iqFieldValue(listings_criteria.zipcode),$("#iq_mul_criteria_form-area").iqFieldValue(listings_criteria.area),$("#iq_mul_criteria_form-communityname").iqFieldValue(listings_criteria.communityname),$("#iq_mul_criteria_form-golfcourse").iqFieldValue(listings_criteria.golfcourse),$("#iq_mul_criteria_form-waterfront").iqFieldValue(listings_criteria.waterfront),$("#iq_mul_criteria_form-propertyview").iqFieldValue(listings_criteria.propertyview),$("#iq_mul_criteria_form-elementaryschool").iqFieldValue(listings_criteria.elementaryschool),$("#iq_mul_criteria_form-jrhighschool").iqFieldValue(listings_criteria.jrhighschool),$("#iq_mul_criteria_form-highschool").iqFieldValue(listings_criteria.highschool),$("#iq_mul_criteria_form-schooldistrict").iqFieldValue(listings_criteria.schooldistrict),$("#iq_mul_criteria_form-resale").iqFieldValue(listings_criteria.resale),$("#iq_mul_criteria_form-reo").iqFieldValue(listings_criteria.reo),$("#iq_mul_criteria_form-shorsale").iqFieldValue(listings_criteria.shortsale),$("#iq_mul_criteria_form-resstyle").iqFieldValue(""),$("#iq_mul_criteria_form-bedsmin").iqFieldValue(""),$("#iq_mul_criteria_form-bedsmax").iqFieldValue(""),$("#iq_mul_criteria_form-bathsmin").iqFieldValue(""),$("#iq_mul_criteria_form-bathsmax").iqFieldValue(""),$("#iq_mul_criteria_form-sqfootmin").iqFieldValue(listings_criteria.mul_sqfootmin),$("#iq_mul_criteria_form-sqfootmax").iqFieldValue(listings_criteria.mul_sqfootmax),$("#iq_mul_criteria_form-buildingsmin").iqFieldValue(listings_criteria.mul_buildingsmin),$("#iq_mul_criteria_form-buildingsmax").iqFieldValue(listings_criteria.mul_buildingsmax),$("#iq_mul_criteria_form-unitsmin").iqFieldValue(listings_criteria.mul_unitsmin),$("#iq_mul_criteria_form-unitsmax").iqFieldValue(listings_criteria.mul_unitsmax),$("#iq_mul_criteria_form-yearbuiltmin").iqFieldValue(listings_criteria.mul_yearbuilt),$("#iq_mul_criteria_form-subtype").iqFieldValue(listings_criteria.mul_subtype),$("#iq_mul_criteria_form-zoning").iqFieldValue(listings_criteria.mul_zoning),$("#iq_mul_criteria_form-statuscode").iqFieldValue(listings_criteria.statuscode),$("[data-mul-statuscode]").each(function(){listings_criteria.statuscode.indexOf($(this).attr("value"))>-1?$(this).prop("checked",!0):$(this).prop("checked",!1)}),"F"===listings_criteria.showallproperties?($("#iq_mul_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_mul_criteria_form-showallproperties]").addClass("active")):($("#iq_mul_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_mul_criteria_form-showallproperties]").removeClass("active")),"T"===listings_criteria.videotour?($("#iq_mul_criteria_form-videotour").prop("checked",!0),$("label[for=iq_mul_criteria_form-videotour]").addClass("active")):($("#iq_mul_criteria_form-videotour").prop("checked",!1),$("label[for=iq_mul_criteria_form-videotour]").removeClass("active")),"T"===listings_criteria.virtualtourid?($("#iq_mul_criteria_form-virtualtourid").prop("checked",!0),$("label[for=iq_mul_criteria_form-virtualtourid]").addClass("active"),$("#iq_mul_criteria_form-matterport").prop("checked",!1),$("label[for=iq_mul_criteria_form-matterport]").removeClass("active")):($("#iq_mul_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_mul_criteria_form-virtualtourid]").removeClass("active")),"matterport"===listings_criteria.virtualtourid?($("#iq_mul_criteria_form-matterport").prop("checked",!0),$("label[for=iq_mul_criteria_form-matterport]").addClass("active"),$("#iq_mul_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_mul_criteria_form-virtualtourid]").removeClass("active")):($("#iq_mul_criteria_form-matterport").prop("checked",!1),$("label[for=iq_mul_criteria_form-matterport]").removeClass("active")),"0"!==listings_criteria.images?($("#iq_mul_criteria_form-images").prop("checked",!0),$("label[for=iq_mul_criteria_form-images]").addClass("active")):($("#iq_mul_criteria_form-images").prop("checked",!1),$("label[for=iq_mul_criteria_form-images]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_mul_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_mul_criteria_form-showallproperties]").addClass("active")):($("#iq_mul_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_mul_criteria_form-showallproperties]").removeClass("active")),"T"===listings_criteria.resale?($("#iq_mul_criteria_form-resale").prop("checked",!0),$("label[for=iq_mul_criteria_form-resale]").addClass("active")):($("#iq_mul_criteria_form-resale").prop("checked",!1),$("label[for=iq_mul_criteria_form-resale]").removeClass("active")),"T"===listings_criteria.shortsale?($("#iq_mul_criteria_form-shortsale").prop("checked",!0),$("label[for=iq_mul_criteria_form-shortsale]").addClass("active")):($("#iq_mul_criteria_form-shortsale").prop("checked",!1),$("label[for=iq_mul_criteria_form-shortsale]").removeClass("active")),"T"===listings_criteria.reo?($("#iq_res_criteria_form-reo").prop("checked",!0),$("label[for=iq_res_criteria_form-reo]").addClass("active")):($("#iq_res_criteria_form-reo").prop("checked",!1),$("label[for=iq_res_criteria_form-resale]").removeClass("active"));break;case"commercial":$("#iq_com_criteria_form").show(),$.iqListings.searchform="#iq_com_criteria_form",$("#iq_com_criteria_form-startpage").iqFieldValue("1"),$("#iq_com_criteria_form-pricemin").iqFieldValue(listings_criteria.pricemin),$("#iq_com_criteria_form-pricemax").iqFieldValue(listings_criteria.pricemax),$("#iq_com_criteria_form-newdays").iqFieldValue(listings_criteria.newdays),$("#iq_com_criteria_form-reduceddays").iqFieldValue(listings_criteria.reduceddays),$("#iq_com_criteria_form-virtualtourid").iqFieldValue(listings_criteria.virtualtourid),$("#iq_com_criteria_form-videotour").iqFieldValue(listings_criteria.videotour),$("#iq_com_criteria_form-featured").iqFieldValue(listings_criteria.featured),$("#iq_com_criteria_form-images").iqFieldValue(listings_criteria.images),$("#iq_com_criteria_form-publicid").iqFieldValue(listings_criteria.publicid),$("#iq_com_criteria_form-showallproperties").iqFieldValue(listings_criteria.showallproperties),$("#iq_com_criteria_form-county").iqFieldValue(listings_criteria.county),$("#iq_com_criteria_form-city").iqFieldValue(listings_criteria.city),$("#iq_com_criteria_form-zipcode").iqFieldValue(listings_criteria.zipcode),$("#iq_com_criteria_form-area").iqFieldValue(listings_criteria.area),$("#iq_com_criteria_form-communityname").iqFieldValue(listings_criteria.communityname),$("#iq_com_criteria_form-elementaryschool").iqFieldValue(listings_criteria.elementaryschool),$("#iq_com_criteria_form-jrhighschool").iqFieldValue(listings_criteria.jrhighschool),$("#iq_com_criteria_form-highschool").iqFieldValue(listings_criteria.highschool),$("#iq_com_criteria_form-schooldistrict").iqFieldValue(listings_criteria.schooldistrict),$("#iq_com_criteria_form-resale").iqFieldValue(listings_criteria.resale),$("#iq_com_criteria_form-reo").iqFieldValue(listings_criteria.reo),$("#iq_com_criteria_form-resstyle").iqFieldValue(""),$("#iq_com_criteria_form-shorsale").iqFieldValue(listings_criteria.shortsale),$("#iq_com_criteria_form-bedsmin").iqFieldValue(""),$("#iq_com_criteria_form-bedsmax").iqFieldValue(""),$("#iq_com_criteria_form-bathsmin").iqFieldValue(""),$("#iq_com_criteria_form-bathsmax").iqFieldValue(""),$("#iq_com_criteria_form-sqfootmin").iqFieldValue(listings_criteria.com_sqfootmin),$("#iq_com_criteria_form-sqfootmax").iqFieldValue(listings_criteria.com_sqfootmax),$("#iq_com_criteria_form-sqfootofficemin").iqFieldValue(listings_criteria.com_sqfootofficemin),$("#iq_com_criteria_form-sqfootofficemax").iqFieldValue(listings_criteria.com_sqfootofficemax),$("#iq_com_criteria_form-unitsmin").iqFieldValue(listings_criteria.com_unitsmin),$("#iq_com_criteria_form-unitsmax").iqFieldValue(listings_criteria.com_unitsmax),$("#iq_com_criteria_form-yearbuiltmin").iqFieldValue(listings_criteria.com_yearbuilt),$("#iq_com_criteria_form-subtype").iqFieldValue(listings_criteria.com_subtype),$("#iq_com_criteria_form-zoning").iqFieldValue(listings_criteria.com_zoning),$("#iq_com_criteria_form-statuscode").iqFieldValue(listings_criteria.statuscode),$("[data-com-statuscode]").each(function(){listings_criteria.statuscode.indexOf($(this).attr("value"))>-1?$(this).prop("checked",!0):$(this).prop("checked",!1)}),"T"===listings_criteria.videotour?($("#iq_com_criteria_form-videotour").prop("checked",!0),$("label[for=iq_com_criteria_form-videotour]").addClass("active")):($("#iq_com_criteria_form-videotour").prop("checked",!1),$("label[for=iq_com_criteria_form-videotour]").removeClass("active")),"T"===listings_criteria.virtualtourid?($("#iq_com_criteria_form-virtualtourid").prop("checked",!0),$("label[for=iq_com_criteria_form-virtualtourid]").addClass("active"),$("#iq_com_criteria_form-matterport").prop("checked",!1),$("label[for=iq_com_criteria_form-matterport]").removeClass("active")):($("#iq_com_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_com_criteria_form-virtualtourid]").removeClass("active")),"matterport"===listings_criteria.virtualtourid?($("#iq_com_criteria_form-matterport").prop("checked",!0),$("label[for=iq_com_criteria_form-matterport]").addClass("active"),$("#iq_com_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_com_criteria_form-virtualtourid]").removeClass("active")):($("#iq_com_criteria_form-matterport").prop("checked",!1),$("label[for=iq_com_criteria_form-matterport]").removeClass("active")),"0"!==listings_criteria.images?($("#iq_com_criteria_form-images").prop("checked",!0),$("label[for=iq_com_criteria_form-images]").addClass("active")):($("#iq_com_criteria_form-images").prop("checked",!1),$("label[for=iq_com_criteria_form-images]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_com_criteria_form-showallproperties").prop("checked",!0),
$("label[for=iq_com_criteria_form-showallproperties]").addClass("active")):($("#iq_com_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_com_criteria_form-showallproperties]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_com_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_com_criteria_form-showallproperties]").addClass("active")):($("#iq_com_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_com_criteria_form-showallproperties]").removeClass("active")),"T"===listings_criteria.resale?($("#iq_com_criteria_form-resale").prop("checked",!0),$("label[for=iq_com_criteria_form-resale]").addClass("active")):($("#iq_com_criteria_form-resale").prop("checked",!1),$("label[for=iq_com_criteria_form-resale]").removeClass("active")),"T"===listings_criteria.shortsale?($("#iq_com_criteria_form-shortsale").prop("checked",!0),$("label[for=iq_com_criteria_form-shortsale]").addClass("active")):($("#iq_com_criteria_form-shortsale").prop("checked",!1),$("label[for=iq_com_criteria_form-shortsale]").removeClass("active")),"T"===listings_criteria.reo?($("#iq_com_criteria_form-reo").prop("checked",!0),$("label[for=iq_com_criteria_form-reo]").addClass("active")):($("#iq_com_criteria_form-reo").prop("checked",!1),$("label[for=iq_com_criteria_form-resale]").removeClass("active"));break;case"land":$("#iq_lan_criteria_form").show(),$.iqListings.searchform="#iq_lan_criteria_form",$("#iq_lan_criteria_form-startpage").iqFieldValue("1"),$("#iq_lan_criteria_form-pricemin").iqFieldValue(listings_criteria.pricemin),$("#iq_lan_criteria_form-pricemax").iqFieldValue(listings_criteria.pricemax),$("#iq_lan_criteria_form-newdays").iqFieldValue(listings_criteria.newdays),$("#iq_lan_criteria_form-reduceddays").iqFieldValue(listings_criteria.reduceddays),$("#iq_lan_criteria_form-virtualtourid").iqFieldValue(listings_criteria.virtualtourid),$("#iq_lan_criteria_form-videotour").iqFieldValue(listings_criteria.videotour),$("#iq_lan_criteria_form-featured").iqFieldValue(listings_criteria.featured),$("#iq_lan_criteria_form-images").iqFieldValue(listings_criteria.images),$("#iq_lan_criteria_form-publicid").iqFieldValue(listings_criteria.publicid),$("#iq_lan_criteria_form-showallproperties").iqFieldValue(listings_criteria.showallproperties),$("#iq_lan_criteria_form-county").iqFieldValue(listings_criteria.county),$("#iq_lan_criteria_form-city").iqFieldValue(listings_criteria.city),$("#iq_lan_criteria_form-zipcode").iqFieldValue(listings_criteria.zipcode),$("#iq_lan_criteria_form-area").iqFieldValue(listings_criteria.area),$("#iq_lan_criteria_form-communityname").iqFieldValue(listings_criteria.communityname),$("#iq_lan_criteria_form-golfcourse").iqFieldValue(listings_criteria.golfcourse),$("#iq_lan_criteria_form-waterfront").iqFieldValue(listings_criteria.waterfront),$("#iq_lan_criteria_form-propertyview").iqFieldValue(listings_criteria.propertyview),$("#iq_lan_criteria_form-elementaryschool").iqFieldValue(listings_criteria.elementaryschool),$("#iq_lan_criteria_form-jrhighschool").iqFieldValue(listings_criteria.jrhighschool),$("#iq_lan_criteria_form-highschool").iqFieldValue(listings_criteria.highschool),$("#iq_lan_criteria_form-schooldistrict").iqFieldValue(listings_criteria.schooldistrict),$("#iq_lan_criteria_form-resale").iqFieldValue(listings_criteria.resale),$("#iq_lan_criteria_form-reo").iqFieldValue(listings_criteria.reo),$("#iq_lan_criteria_form-shorsale").iqFieldValue(listings_criteria.shortsale),$("#iq_lan_criteria_form-resstyle").iqFieldValue(""),$("#iq_lan_criteria_form-bedsmin").iqFieldValue(""),$("#iq_lan_criteria_form-bedsmax").iqFieldValue(""),$("#iq_lan_criteria_form-bathsmin").iqFieldValue(""),$("#iq_lan_criteria_form-bathsmax").iqFieldValue(""),$("#iq_lan_criteria_form-acreagemin").iqFieldValue(listings_criteria.lan_acreagemin),$("#iq_lan_criteria_form-acreagemax").iqFieldValue(listings_criteria.lan_acreagemax),$("#iq_lan_criteria_form-subtype").iqFieldValue(listings_criteria.lan_subtype),$("#iq_lan_criteria_form-zoning").iqFieldValue(listings_criteria.lan_zoning),$("#iq_lan_criteria_form-statuscode").iqFieldValue(listings_criteria.statuscode),$("[data-lan-statuscode]").each(function(){listings_criteria.statuscode.indexOf($(this).attr("value"))>-1?$(this).prop("checked",!0):$(this).prop("checked",!1)}),"T"===listings_criteria.videotour?($("#iq_lan_criteria_form-videotour").prop("checked",!0),$("label[for=iq_lan_criteria_form-videotour]").addClass("active")):($("#iq_lan_criteria_form-videotour").prop("checked",!1),$("label[for=iq_lan_criteria_form-videotour]").removeClass("active")),"T"===listings_criteria.virtualtourid?($("#iq_lan_criteria_form-virtualtourid").prop("checked",!0),$("label[for=iq_lan_criteria_form-virtualtourid]").addClass("active"),$("#iq_lan_criteria_form-matterport").prop("checked",!1),$("label[for=iq_lan_criteria_form-matterport]").removeClass("active")):($("#iq_lan_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_lan_criteria_form-virtualtourid]").removeClass("active")),"matterport"===listings_criteria.virtualtourid?($("#iq_lan_criteria_form-matterport").prop("checked",!0),$("label[for=iq_lan_criteria_form-matterport]").addClass("active"),$("#iq_lan_criteria_form-virtualtourid").prop("checked",!1),$("label[for=iq_lan_criteria_form-virtualtourid]").removeClass("active")):($("#iq_lan_criteria_form-matterport").prop("checked",!1),$("label[for=iq_lan_criteria_form-matterport]").removeClass("active")),"0"!==listings_criteria.images?($("#iq_lan_criteria_form-images").prop("checked",!0),$("label[for=iq_lan_criteria_form-images]").addClass("active")):($("#iq_lan_criteria_form-images").prop("checked",!1),$("label[for=iq_lan_criteria_form-images]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_lan_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_lan_criteria_form-showallproperties]").addClass("active")):($("#iq_lan_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_lan_criteria_form-showallproperties]").removeClass("active")),"F"===listings_criteria.showallproperties?($("#iq_lan_criteria_form-showallproperties").prop("checked",!0),$("label[for=iq_lan_criteria_form-showallproperties]").addClass("active")):($("#iq_lan_criteria_form-showallproperties").prop("checked",!1),$("label[for=iq_lan_criteria_form-showallproperties]").removeClass("active")),"T"===listings_criteria.resale?($("#iq_lan_criteria_form-resale").prop("checked",!0),$("label[for=iq_lan_criteria_form-resale]").addClass("active")):($("#iq_lan_criteria_form-resale").prop("checked",!1),$("label[for=iq_lan_criteria_form-resale]").removeClass("active")),"T"===listings_criteria.shortsale?($("#iq_lan_criteria_form-shortsale").prop("checked",!0),$("label[for=iq_lan_criteria_form-shortsale]").addClass("active")):($("#iq_lan_criteria_form-shortsale").prop("checked",!1),$("label[for=iq_lan_criteria_form-shortsale]").removeClass("active")),"T"===listings_criteria.reo?($("#iq_lan_criteria_form-reo").prop("checked",!0),$("label[for=iq_lan_criteria_form-reo]").addClass("active")):($("#iq_lan_criteria_form-reo").prop("checked",!1),$("label[for=iq_lan_criteria_form-resale]").removeClass("active"))}$.iqListings.initSearchForm(),$.iqListings.criteriasearch(),$("[data-show_listings_stats]").attr("data-show_listings_stats").indexOf("true")>-1&&$.iqEditor.GetIQ_Listings_Stats()},GetIQ_Listings_Centralized:function(){var obj=$("[data-section=iq_listings_centralized]"),acreage=0,beds=0,baths=0,units=0,buildings=0,garage=0,sqFoot=0,sqFootOffice=0,style="",basement="",carport="",openHouse="",golfcourse="",waterfront="",propertyView="",subtype="",bedsMin=$("#iq_listings_criteria_form-bedsmin").iqFieldValue(),bedsMax=$("#iq_listings_criteria_form-bedsmax").iqFieldValue(),bathsMin=$("#iq_listings_criteria_form-bathsmin").iqFieldValue(),bathsMax=$("#iq_listings_criteria_form-bathsmax").iqFieldValue(),garageMin=$("#iq_listings_criteria_form-garagemin").iqFieldValue(),garageMax=$("#iq_listings_criteria_form-garagemax").iqFieldValue(),acreageMin=$("#iq_listings_criteria_form-acreagemin").iqFieldValue(),acreageMax=$("#iq_listings_criteria_form-acreagemax").iqFieldValue(),unitsMin=$("#iq_listings_criteria_form-unitsmin").iqFieldValue(),unitsMax=$("#iq_listings_criteria_form-unitsmax").iqFieldValue(),buildingsMin=$("#iq_listings_criteria_form-buildingsmin").iqFieldValue(),buildingsMax=$("#iq_listings_criteria_form-buildingsmax").iqFieldValue(),sqFootMin=$("#iq_listings_criteria_form-sqfootmin").iqFieldValue(),sqFootMax=$("#iq_listings_criteria_form-sqfootmax").iqFieldValue(),sqFootOfficeMin=$("#iq_listings_criteria_form-sqfootofficemin").iqFieldValue(),sqFootOfficeMax=$("#iq_listings_criteria_form-sqfootofficemax").iqFieldValue(),tBeds=bedsMin+"-"+bedsMax,tBaths=bathsMin+"-"+bathsMax,tGarage=garageMin+"-"+garageMax,tSqFoot=sqFootMin+"-"+sqFootMax,tSqFootOffice=sqFootOfficeMin+"-"+sqFootOfficeMax,tUnits=unitsMin+"-"+unitsMax,tBuildings=buildingsMin+"-"+buildingsMax,tAcreage=acreageMin+"-"+acreageMax;switch($("#iq_listings_criteria_form-propertytype").iqFieldValue()){case"residential":"0-99"!==tBeds&&(beds=tBeds),"0-99"!==tBaths&&(baths=tBaths),"0-99"!==tGarage&&(garage=tGarage),"0-99999"!==tSqFoot&&(sqFoot=tSqFoot),"0-99999"!=tAcreage&&(acreage=tAcreage),golfcourse=$("#iq_listings_criteria_form-golfcourse").iqFieldValue(),waterfront=$("#iq_listings_criteria_form-waterfront").iqFieldValue(),propertyView=$("#iq_listings_criteria_form-propertyview").iqFieldValue(),openHouse=$("#iq_listings_criteria_form-openhouse").iqFieldValue(),carport=$("#iq_listings_criteria_form-carport").iqFieldValue(),style=$("#iq_listings_criteria_form-style").iqFieldValue(),basement=$("#iq_listings_criteria_form-basement").iqFieldValue(),subtype=$("#iq_listings_criteria_form_ressubtype").iqFieldValue();break;case"multifamily":"0-99999"!==tSqFoot&&(sqFoot=tSqFoot),"0-99999"!==tBuildings&&(buildings=tBuildings),"0-99999"!==tUnits&&(units=tUnits),golfcourse=$("#iq_listings_criteria_form-golfcourse").iqFieldValue(),waterfront=$("#iq_listings_criteria_form-waterfront").iqFieldValue(),propertyView=$("#iq_listings_criteria_form-propertyview").iqFieldValue(),subtype=$("#iq_listings_criteria_form_mulsubtype").iqFieldValue();break;case"commercial":"0-99999"!==tSqFoot&&(sqFoot=tSqFoot),"0-99999"!==tSqFootOffice&&(sqFootOffice=tSqFootOffice),"0-99999"!==tBuildings&&(buildings=tBuildings),"0-99999"!==tUnits&&(units=tUnits),"0-99999"!=tAcreage&&(acreage=tAcreage),subtype=$("#iq_listings_criteria_form_comsubtype").iqFieldValue();break;case"land":"0-99999"!=tAcreage&&(acreage=tAcreage),golfcourse=$("#iq_listings_criteria_form-golfcourse").iqFieldValue(),waterfront=$("#iq_listings_criteria_form-waterfront").iqFieldValue(),propertyView=$("#iq_listings_criteria_form-propertyview").iqFieldValue(),subtype=$("#iq_listings_criteria_form_lansubtype").iqFieldValue()}$("#iq_listings_criteria_form-beds").iqFieldValue(beds),$("#iq_listings_criteria_form-baths").iqFieldValue(baths),$("#iq_listings_criteria_form-garage").iqFieldValue(garage),$("#iq_listings_criteria_form-carport").iqFieldValue(carport),$("#iq_listings_criteria_form-sq_foot").iqFieldValue(sqFoot),$("#iq_listings_criteria_form-sq_foot_office").iqFieldValue(sqFootOffice),$("#iq_listings_criteria_form-buildings").iqFieldValue(buildings),$("#iq_listings_criteria_form-units").iqFieldValue(units),$("#iq_listings_criteria_form-acreage").iqFieldValue(acreage),$("#iq_listings_criteria_form-units").iqFieldValue(units),$("#iq_listings_criteria_form-buildings").iqFieldValue(buildings),$("#iq_listings_criteria_form-golfcourse").iqFieldValue(golfcourse),$("#iq_listings_criteria_form-waterfront").iqFieldValue(waterfront),$("#iq_listings_criteria_form-propertyview").iqFieldValue(propertyView),$("#iq_listings_criteria_form-openhouse").iqFieldValue(openHouse),$("#iq_listings_criteria_form-pool").iqFieldValue(void 0),$("#iq_listings_criteria_form-style").iqFieldValue(style),$("#iq_listings_criteria_form-basement").iqFieldValue(basement),$("#iq_listings_criteria_form-subtype").iqFieldValue(subtype),""===$("#iq_listings_criteria_form-resale").iqFieldValue()&&$("#iq_listings_criteria_form-resale").iqFieldValue("f"),""===$("#iq_listings_criteria_form-reo").iqFieldValue()&&$("#iq_listings_criteria_form-reo").iqFieldValue("f"),""===$("#iq_listings_criteria_form-shortsale").iqFieldValue()&&$("#iq_listings_criteria_form-shortsale").iqFieldValue("f");var oFormFields=$("#iq_listings_criteria_form").iqSerializeFormToStruct();$(obj).attr("data-listings-criteria",$.toJSON(oFormFields)),$.iqPages.get_listings_centralized("1")},GetIQ_Showcase:function(){$("#iq_showcase_template_1").html('<table style="height:100vh; width:100%;"><tr><td align="center"><h1><i class="fa fa-fw fa-refresh fa-spin"></i></h1>Processing</td></tr></table>');var listings_criteria=$.parseJSON($('[data-section="iq_showcase"]').attr("data-showcase-criteria")),resstyle="",beds=0,baths=0,sqfoot=0,acreage=0,garage=0,story="",basement="",yearbuilt="",subtype="",openhouse="",buildings=0,units=0,zoning="";switch(listings_criteria.propertytype){case"residential":resstyle=listings_criteria.resstyle,beds=listings_criteria.bedsmin+"-"+listings_criteria.bedsmax,baths=listings_criteria.bathsmin+"-"+listings_criteria.bathsmax,sqfoot=listings_criteria.res_sqfootmin+"-"+listings_criteria.res_sqfootmax,acreage=listings_criteria.res_acreagemin+"-"+listings_criteria.res_acreagemax,garage=listings_criteria.res_garage,story=listings_criteria.res_story,basement=listings_criteria.res_basement,yearbuilt=listings_criteria.res_yearbuilt,subtype=listings_criteria.res_subtype,openhouse=listings_criteria.openhouse,listings_criteria.previews;break;case"multifamily":sqfoot=listings_criteria.mul_sqfootmin+"-"+listings_criteria.mul_sqfootmax,buildings=listings_criteria.mul_buildingsmin+"-"+listings_criteria.mul_buildingsmax,units=listings_criteria.mul_unitsmin+"-"+listings_criteria.mul_unitsmax,yearbuilt=listings_criteria.mul_yearbuilt,subtype=listings_criteria.mul_subtype,zoning=listings_criteria.mul_zoning;break;case"commercial":sqfoot=listings_criteria.com_sqfootmin+"-"+listings_criteria.com_sqfootmax,listings_criteria.com_sqfootofficemin+"-"+listings_criteria.com_sqfootofficemax,units=listings_criteria.com_unitsmin+"-"+listings_criteria.com_unitsmax,yearbuilt=listings_criteria.com_yearbuilt,subtype=listings_criteria.com_subtype,zoning=listings_criteria.com_zoning;break;case"land":acreage=listings_criteria.lan_acreagemin+"-"+listings_criteria.lan_acreagemax,subtype=listings_criteria.lan_subtype,zoning=listings_criteria.lan_zoning}$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"docriteriasearch",publicid:listings_criteria.publicid,state:listings_criteria.state,county:listings_criteria.county,city:listings_criteria.city,zipcode:listings_criteria.zipcode,area:listings_criteria.area,communityname:listings_criteria.communityname,elementaryschool:listings_criteria.elementaryschool,jrhighschool:listings_criteria.jrhighschool,highschool:listings_criteria.highschool,schooldisctrict:listings_criteria.schooldistrict,pricemin:listings_criteria.pricemin,pricemax:listings_criteria.pricemax,propertytype:listings_criteria.propertytype,resale:listings_criteria.resale,shortsale:listings_criteria.shortsale,reo:listings_criteria.reo,resstyle:resstyle,beds:beds,baths:baths,sqfoot:sqfoot,acreage:acreage,garage:garage,story:story,basement:basement,yearbuilt:yearbuilt,subtype:subtype,buildings:buildings,units:units,zoning:zoning,openhouse:openhouse,newdays:listings_criteria.newdays,reduceddays:listings_criteria.reduceddays,virtualtourid:listings_criteria.virtualtourid,videotour:listings_criteria.videotour,previews:listings_criteria.previews,featured:listings_criteria.featured,golfcourse:listings_criteria.golfcourse,waterfront:listings_criteria.waterfront,propertyview:listings_criteria.propertyview,showallproperties:listings_criteria.showallproperties,images:1,statuscode:listings_criteria.statuscode,layout:$('[data-section="iq_showcase"]').attr("data-layout"),maxrows:"24"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($(".iq-fullscreen-layout[data-layout]").html(jsonRet.LAYOUT),$.iqPages.init_showcase_carousel(),1===$("#iq_listings_carousel").length&&$.iqPages.init_listings_carousel(),1===$("#iq_showcase_logo").length&&("t"===listings_criteria.showcase_hide_logo.toLowerCase()&&$("#iq_showcase_logo").hide(),$("#iq_showcase_logo").attr("src",listings_criteria.showcase_logo)),1===$("#iq_showcase_link_title").length&&$("#iq_showcase_link_title").text(listings_criteria.showcase_link_title),1===$("#iq_showcase_link_url").length&&$("#iq_showcase_link_url").attr("href",listings_criteria.showcase_link_url),$.iqEditor.GetIQ_HiddenSearchForm(),$.iqEditor.FindEditableFields()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},GetIQ_Areas:function(){$.iqUtils.uiProcessing("open");var areas_criteria=$.parseJSON($('[data-section="iq_areas"]').attr("data-areas-criteria").toLowerCase()),publicid=areas_criteria.publicid,state=areas_criteria.state,county=areas_criteria.county,city=areas_criteria.city,zip_code=areas_criteria.zip_code,area=areas_criteria.area,communityname=areas_criteria.communityname,pricemin=areas_criteria.pricemin,pricemax=areas_criteria.pricemax,newdays=areas_criteria.newdays,reduceddays=areas_criteria.reduceddays,virtualtourid=areas_criteria.virtualtourid,videotour=areas_criteria.videotour,openhouse=areas_criteria.openhouse,previews=areas_criteria.previews,featured=areas_criteria.featured,images=areas_criteria.images,golfcourse=areas_criteria.golfcourse,waterfront=areas_criteria.waterfront,propertyview=areas_criteria.propertyview,propertytype=areas_criteria.propertytype,arrorderby=areas_criteria.listings_orderby.split("|"),orderby=arrorderby[0],orderdirection=arrorderby[1],officelistingsfirst=areas_criteria.listings_officelistingsfirst,layout="list_small_areas_template",maxrows="24";$("#iq_areas_template_2").length&&(layout=areas_criteria.layout,maxrows=areas_criteria.maxrows),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"docriteriasearch_multifield",layout:layout,maxrows:maxrows,publicid:publicid,state:state,county:county,city:city,zipcode:zip_code,area:area,communityname:communityname,pricemin:pricemin,pricemax:pricemax,reduceddays:reduceddays,newdays:newdays,virtualtourid:virtualtourid,videotour:videotour,openhouse:openhouse,previews:previews,featured:featured,images:images,golfcourse:golfcourse,waterfront:waterfront,propertyview:propertyview,propertytype:propertytype,orderby:orderby,orderdirection:orderdirection,officelistingsfirst:officelistingsfirst},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_areas_wrapper").html(jsonRet.LAYOUT),$("#iq_areas_template_2").length?($.iqListings.init_isvisible(),$(".iq-listings-list-compare-input").hide(),$.iqUtils.history.init(function(args){$.iqListings.controller(args)}),$("#iq_listings_sort-orderby").attr("disabled",!1),$.iqEditor.paging(maxrows,jsonRet.TOTALROWCOUNT)):$.iqEditor.GetIQ_Listings_Stats()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},paging:function(maxrows,totalrowcount){$.ajax({url:"/components/listings_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"paging",startpage:1,rowsperpage:maxrows,totalrowcount:totalrowcount},success:function(jsonRet){0===jsonRet.STATUS?($(".iq-listings-paging").each(function(){$(this).html(jsonRet.LAYOUT)}),$.iqPages.init_paging()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},paging_centralized:function(maxRows,totalRowCount){$.ajax({url:"/components/listings_centralized_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"paging",startpage:1,maxrows:maxRows,totalrowcount:totalRowCount},success:function(jsonRet){0===jsonRet.status?($(".pagination").attr("data-maxrows",maxRows),$(".iq-listings-paging").each(function(){$(this).html(jsonRet.layout)}),$.iqPages.init_paging()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.message+"<br>"+jsonRet.detail+"<br>"+encodeURI(jsonRet.content)))}})},GetIQ_HiddenSearchForm:function(){var obj=$("[data-showcase-criteria]");$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_build_hidden_form_layout",listings_criteria:$(obj).attr("data-showcase-criteria")},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_hidden_form").html(jsonRet.LAYOUT):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},GetIQ_Listings_Stats:function(){var fields="";1===$("[data-section=iq_areas]").length&&(fields=$('[data-section="iq_areas"]').attr("data-areas-criteria")),1===$("[data-section=iq_listings]").length&&(fields=$('[data-section="iq_listings"]').attr("data-listings-criteria")),$("#iq_listings_stats_layout").html(""),$("#iq_listings_stats_layout").append('<div id="iq_processing" class="text-center" style="width:100%; padding:50px; position:absolute; top:0px; left:0px;"><i class="fa fa-fw fa-refresh fa-spin" style="font-size:24px;"></i><div>Processing</div></div>'),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"listings_stats_multifield",fields:fields,layout:"listings_stats_multifield",custompage:$("#edit-menu").attr("page")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_listings_stats_layout").html(jsonRet.LAYOUT),$("#iq_processing").remove()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},GetIQ_CustomAgents:function(){$.iqUtils.uiProcessing("open");var customagents_criteria=$.parseJSON($('[data-section="iq_customagents"]').attr("data-customagents-criteria").toLowerCase()),firstname=customagents_criteria.firstname,lastname=customagents_criteria.lastname,language=customagents_criteria.language,certifications=customagents_criteria.certifications,officeid=customagents_criteria.officeid,city=customagents_criteria.city,state=customagents_criteria.state,zip=customagents_criteria.zip,displayrandomorder=customagents_criteria.displayrandomorder,withimages=customagents_criteria.withimages,cols=customagents_criteria.cols,agentslayoutdefault=customagents_criteria.agentslayoutdefault,selected_tags=customagents_criteria.selected_tags,selected_offices=customagents_criteria.selected_offices,postData={Method:"doCriteriaSearch",layout:agentslayoutdefault,firstname:firstname,lastname:lastname,language:language,certifications:certifications,officeid:officeid,city:city,state:state,zip:zip,randomorder:displayrandomorder,withimage:withimages,cols:cols,selected_tags:selected_tags,selected_offices:selected_offices};displayrandomorder&&(postData.orderby="LastName",postData.orderdirection="ASC"),$.ajax({url:"/components/agents.cfc",type:"POST",dataType:"json",async:!0,data:postData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_agents_grid").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},House_Value:function(){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"house_value",div_height:$("#iq_housevalue_carousel").height(),div_width:$("#iq_housevalue_carousel").width(),section:"house_value",fields:$("[data-house-value-fields]").attr("data-house-value-fields")},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},GetClasses:function(classtypeid){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{classtypeid:classtypeid,method:"website_classes_layout"},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_classes").html(jsonRet.LAYOUT):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},EditArea:function(area){if("false"===$("[data-areas-editing]").attr("data-areas-editing")){var area_selected=$(area).attr("data-arearow");$("[data-areacheckbox="+area_selected+"]").prop("checked")&&($("[data-arearow]").each(function(){$(this).removeClass("success"),$("[data-areacheckbox="+$(this).attr("data-arearow")+"]").attr("disabled","")}),$(this).css({cursor:"pointer"}),$("[data-arearow="+area_selected+"]").addClass("success"),$("[data-areas-pages-grid]").removeClass("col-md-12"),$("[data-areas-pages-grid]").addClass("col-md-8"),$("[data-areas-pages-edit]").show(),$("[data-areas-edit]").each(function(){$(this).hide()}),$("[data-areas-edit="+area_selected+"]").show(),$("[data-areas-editing]").attr("data-areas-editing",!0),$("[data-button=editing]").attr("disabled",""),$("[data-button=cancelediting]").attr("disabled",""))}},SaveArea:function(area){var area_saved=$(area).attr("data-area");$("[data-areatitle="+area_saved+"]").html($("#areas_page_title_"+area_saved).iqFieldValue()),$("[data-areadescription="+area_saved+"]").html($("#areas_page_description_"+area_saved).iqFieldValue()),$("[data-areas-pages-grid]").removeClass("col-md-8"),$("[data-areas-pages-grid]").addClass("col-md-12"),$("[data-areas-editing]").attr("data-areas-editing",!1),$("[data-areas-editing]").hide(),$("[data-areas-pagetitle-orig-"+area_saved+"]").attr("data-areas-pagetitle-orig-"+area_saved,$("[data-areas-pagetitle-"+area_saved+"]").iqFieldValue()),$("[data-areas-pagedescription-orig-"+area_saved+"]").attr("data-areas-pagedescription-orig-"+area_saved,$("[data-areas-pagedescription-"+area_saved+"]").iqFieldValue()),$("[data-arearow]").each(function(){$(this).removeClass("success"),$("[data-areacheckbox="+$(this).attr("data-arearow")+"]").removeAttr("disabled","")}),$("[data-button=editing]").removeAttr("disabled"),$("[data-button=cancelediting]").removeAttr("disabled")},CancelAreaEditing:function(area){var area_canceled=$(area).attr("data-area"),area_title_orig=$("[data-areas-pagetitle-orig-"+area_canceled+"]").attr("data-areas-pagetitle-orig-"+area_canceled),area_description_orig=$("[data-areas-pagedescription-orig-"+area_canceled+"]").attr("data-areas-pagedescription-orig-"+area_canceled);$("[data-areas-pages-grid]").removeClass("col-md-8"),$("[data-areas-pages-grid]").addClass("col-md-12"),$("[data-areas-editing]").attr("data-areas-editing",!1),$("[data-areas-editing]").hide(),$("[data-areas-pagetitle-"+area_canceled+"]").iqFieldValue(area_title_orig),$("[data-areas-pagedescription-"+area_canceled+"]").iqFieldValue(area_description_orig),$("[data-arearow]").each(function(){$(this).removeClass("success"),$("[data-areacheckbox="+$(this).attr("data-arearow")+"]").removeAttr("disabled","")}),$("[data-button=editing]").removeAttr("disabled"),$("[data-button=cancelediting]").removeAttr("disabled")},Showcase_criteria:function(type){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")});var obj=$("[data-showcase-criteria]"),layout=$(obj).attr("data-layout");$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,listings_criteria:$(obj).attr("data-showcase-criteria"),method:"editor_listingcriteria_layout",layout:layout},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("#iq_listings_criteria").iqEditor_Autocomplete({propertytype:$("#iq_listings_criteria-propertytype").iqFieldValue(),mlsid:$("#iq_listings-location").data("mlsid_list"),state:"",county:"",city:"",area:"",zip_code:"",street_address:"",ml_number:"",communityname:"",fields:"state,county,city,area,zip_code,communityname,elementaryschool,jrhighschool,highschool,schooldistrict",callback:"",async:!0})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},Show_Listings_Stats:function(type){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",maxwidth:400,body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{type:type,show_listings_stats:$("[data-section=show_listing_stats]").attr("data-show_listings_stats"),method:"editor_showlistingstats_layout"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},InitTinyMCE:function(){var scss=$(".mceEditorFull").attr("css"),sbodycss=$(".mceEditorFull").attr("bodycss");scss=void 0!==scss?$(".mceEditorFull").attr("css"):"",sbodycss=void 0!==sbodycss?$(".mceEditorFull").attr("bodycss"):"",tinymce.init({selector:".mceEditorFull",mode:"specific_textareas",valid_elements:"*[*]",extended_valid_elements:"script[type|src]",forced_root_block:"",menubar:!1,theme:"modern",noneditable_leave_contenteditable:!0,relative_urls:!1,convert_urls:!1,entity_encoding:"named",valid_children:"+body[style]",setup:function(){$("#"+this.id).attr("tinymce",!0)},style_formats:[{title:"Headers",items:[{title:"Heading 1",inline:"h1"},{title:"Heading 2",inline:"h2"},{title:"Heading 3",inline:"h3"},{title:"Heading 4",inline:"h4"},{title:"Heading 5",inline:"h5"},{title:"Heading 6",inline:"h6"}]},{title:"Fonts",items:[{title:"Open Sans",inline:"span",styles:{"font-family":"Open Sans"}},{title:"Arial",inline:"span",styles:{"font-family":"arial"}},{title:"Book Antiqua",inline:"span",styles:{"font-family":"book antiqua"}},{title:"Comic Sans MS",inline:"span",styles:{"font-family":"comic sans ms,sans-serif"}},{title:"Courier New",inline:"span",styles:{"font-family":"courier new,courier"}},{title:"Georgia",inline:"span",styles:{"font-family":"georgia,palatino"}},{title:"Helvetica",inline:"span",styles:{"font-family":"helvetica"}},{title:"Impact",inline:"span",styles:{"font-family":"impact,chicago"}},{title:"Symbol",inline:"span",styles:{"font-family":"symbol"}},{title:"Tahoma",inline:"span",styles:{"font-family":"tahoma"}},{title:"Terminal",inline:"span",styles:{"font-family":"terminal,monaco"}},{title:"Times New Roman",inline:"span",styles:{"font-family":"times new roman,times"}},{title:"Verdana",inline:"span",styles:{"font-family":"Verdana"}}]},{title:"Font Sizes",items:[{title:"10px",inline:"span",styles:{fontSize:"10px"}},{title:"12px",inline:"span",styles:{fontSize:"12px"}},{title:"14px",inline:"span",styles:{fontSize:"14px"}},{title:"16px",inline:"span",styles:{fontSize:"16px"}},{title:"18px",inline:"span",styles:{fontSize:"18px"}},{title:"20px",inline:"span",styles:{fontSize:"20px"}},{title:"22px",inline:"span",styles:{fontSize:"22px"}},{title:"24px",inline:"span",styles:{fontSize:"24px"}},{title:"26px",inline:"span",styles:{fontSize:"26px"}},{title:"28px",inline:"span",styles:{fontSize:"28px"}},{title:"30px",inline:"span",styles:{fontSize:"30px"}}]}],toolbar:"code | undo redo | styleselect | forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent  | link images outsideimages iq_leadsource | bootstrap",
plugins:["advlist autolink lists link image textcolor print preview anchor images outsideimages iq_leadsource","searchreplace visualblocks code fullscreen,noneditable","insertdatetime media table contextmenu,bootstrap"]}),tinymce.init({selector:".mceEditorSmall",mode:"specific_textareas",valid_elements:"*[*]",extended_valid_elements:"script[type|src]",forced_root_block:"",menubar:!1,theme:"modern",noneditable_leave_contenteditable:!0,relative_urls:!1,convert_urls:!1,entity_encoding:"named",valid_children:"+body[style]",setup:function(){$("#"+this.id).attr("tinymce",!0)},toolbar:"bold italic | alignleft aligncenter alignright alignjustify | outdent indent  | removeformat ",plugins:["autolink"]})},CssScriptDialog:function(){$("#iq_customcss_dialog").bsModal({backdrop:!0,title:"Advanced &raquo; Edit Site-Wide Stylesheet (CSS)",body:'<div class="row"><div id="iq_customcss_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"></div></div>'}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"CssScriptDialog"},success:function(jsonRet){if(0===jsonRet.STATUS){$("#iq_customcss_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_customcss_dialog .modal-footer").css({display:"none"});var codeeditor=CodeMirror.fromTextArea(document.getElementById("iq_customcss_form-scriptcode"),{lineNumbers:!0,theme:"blackboard",styleActiveLine:!0,matchBrackets:!0,indentWithTabs:!0});setTimeout(function(){codeeditor.refresh(),codeeditor.setValue($("#iq_customcss_form-scriptcode").iqFieldValue()),codeeditor.on("blur",function(){$("#iq_customcss_form-scriptcode").iqFieldValue(codeeditor.getValue())})},100)}else $.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},CssScriptSave:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{method:"save_css_changes",scriptcode:$("#iq_customcss_form-scriptcode").iqFieldValue(),subdomains:$("#iq_customcss_form-subdomainsStatusOn").is(":checked")?1:0},success:function(jsonRet){0===jsonRet.STATUS?self.location=self.location:($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},SelectCustomFields:function(propertytype,listingtype){var arr_residential_selectedfields=new Array(1),arr_multifamily_selectedfields=new Array(1),arr_commercial_selectedfields=new Array(1),arr_land_selectedfields=new Array(1),arr_residential_rentals_selectedfields=new Array(1),arr_commercial_rentals_selectedfields=new Array(1),arr_land_rentals_selectedfields=new Array(1);$("[data-customfield-propertytype=residential").each(function(){arr_residential_selectedfields.push($(this).iqFieldValue())}),$("[data-customfield-propertytype=multifamily").each(function(){arr_multifamily_selectedfields.push($(this).iqFieldValue())}),$("[data-customfield-propertytype=commercial").each(function(){arr_commercial_selectedfields.push($(this).iqFieldValue())}),$("[data-customfield-propertytype=land").each(function(){arr_land_selectedfields.push($(this).iqFieldValue())}),$("[data-customfield-rentals-propertytype=residential").each(function(){arr_residential_rentals_selectedfields.push($(this).iqFieldValue())}),$("[data-customfield-rentals-propertytype=commercial").each(function(){arr_commercial_rentals_selectedfields.push($(this).iqFieldValue())}),$("[data-customfield-rentals-propertytype=land").each(function(){arr_land_rentals_selectedfields.push($(this).iqFieldValue())}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"selectcustomfields",propertytype:propertytype,listingtype:listingtype,maxfields:$("[data-customfields-maxfields]").attr("data-customfields-maxfields"),residential_fields:$("[data-residential-fields]").attr("data-residential-fields"),residential_selected_fields:arr_residential_selectedfields.toString().replace(/^,/,""),multifamily_fields:$("[data-multifamily-fields]").attr("data-multifamily-fields"),multifamily_selected_fields:arr_multifamily_selectedfields.toString().replace(/^,/,""),commercial_fields:$("[data-commercial-fields]").attr("data-commercial-fields"),commercial_selected_fields:arr_commercial_selectedfields.toString().replace(/^,/,""),land_fields:$("[data-land-fields]").attr("data-land-fields"),land_selected_fields:arr_land_selectedfields.toString().replace(/^,/,""),residential_rentals_fields:$("[data-residential-rentals-fields]").attr("data-residential-rentals-fields"),residential_selected_rentals_fields:arr_residential_rentals_selectedfields.toString().replace(/^,/,""),commercial_rentals_fields:$("[data-commercial-rentals-fields]").attr("data-commercial-rentals-fields"),commercial_selected_rentals_fields:arr_commercial_rentals_selectedfields.toString().replace(/^,/,""),land_rentals_fields:$("[data-land-rentals-fields]").attr("data-land-rentals-fields"),land_selected_rentals_fields:arr_land_rentals_selectedfields.toString().replace(/^,/,"")},success:function(jsonRet){0===jsonRet.STATUS?$("#iq-panel-customfields").html(jsonRet.LAYOUT):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},listings_kiosk:function(){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"listings_kiosk",div_height:$("#iq_kiosk").height(),div_width:$("#iq_kiosk").width(),section:"listings_kiosk",settings:$.kiosk_settings,page:$("#edit-menu").attr("page")},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){$.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),$("form[name=search-criteria]").each(function(){$(this).iqMultiFieldAutocomplete({mlsid:$(this).find("input[name=mlsid]").iqFieldValue(),propertytype:"residential",state:"",county:"",city:"",area:"",zip_code:"",street_address:"",ml_number:"",appendto:"body",fields:"state,county,city,zip_code,area,schooldistrict,communityname",async:!0})});for(var i=1;i<=10;i++){var sLookupValue=$("#areafield_"+i).iqFieldValue();$("#arealist_"+i).iqKioskAreaLookupAutoComplete({maxitems:24,label:sLookupValue,lookup:sLookupValue})}}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},SelectKioskSearchMethod:function(obj){var button_id=$(obj).data("kiosk_button"),method_id=$(obj).val();$("#searchMethodKeyword_"+button_id).hide(),$("#searchMethodAreaField_"+button_id).hide(),$("#searchMethodAreaList_"+button_id).hide(),1==method_id&&$("#searchMethodKeyword_"+button_id).show(),2==method_id&&($("#searchMethodAreaField_"+button_id).show(),$("#searchMethodAreaList_"+button_id).show())},SelectKioskPropertyType:function(button){var propType=$("#search_criteria_"+button).find("input[name=propertytype]:checked").val();$("#search_criteria_"+button).find("[data-propertytype]").each(function(){-1===$(this).attr("data-propertytype").indexOf(propType)?$(this).hide():$(this).show()})},SelectKioskAreaField:function(button){var sLookupValue=$("#areafield_"+button).iqFieldValue(),iMaxItems=$("#arealist_"+button+"_display").attr("maxitems");$("#iq_ul_arealist_"+button).remove(),$("#arealist_"+button).show(),$("#arealist_"+button).iqFieldValue(""),$("#arealist_"+button+"_wrapper").remove(),$("#arealist_"+button+"_display").remove(),$("#arealist_"+button).iqKioskAreaLookupAutoComplete({maxitems:iMaxItems,label:sLookupValue,lookup:sLookupValue})},UpdateListingPageOptionsDialog:function(){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Listing Page Options",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"listing_page_options_dialog"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},processListingPageOptions:function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"processListingPageOptions",listings_pending_show:$("#iq_options_form").find("input[name=listings_pending_show]").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_editor_editfield_dialog").modal("hide"):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},EditGoogleAnalyticsDialog:function(){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Advanced &raquo; Google Analytics",body:'<div class="row"><div id="iq_editor_editfield_dialog" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading editing form</h1></div></div>'}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"EditGoogleAnalyticsDialog"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},EditGoogleAnalyticsProcess:function(){$.iqUtils.uiProcessing("open"),$("#iq_options_form").iqForm_Rules(),!0===$("#iq_options_form").iqForm_Check()?$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"updatesite_ga",TrackingID:$("#clientGATrackingId").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS?setTimeout(function(){$.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog").modal("hide")},1e4):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)}}):$.iqUtils.uiProcessing("close")},EditFacebookPixelDialog:function(){$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Advanced &raquo; Facebook Pixel",body:'<div class="row"><div id="iq_editor_editfield_dialog" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading editing form</h1></div></div>'}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"EditFacebookPixelDialog"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},EditFacebookPixelProcess:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"updatesite_fbpixel",FBPixelId:$("#FacebookPixelId").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS?setTimeout(function(){$.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog").modal("hide")},1e4):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)}})},ManageScriptsDialog:function(){$("#iq_manage_scripts_dialog").bsModal({backdrop:!0,title:"Advanced &raquo; Script Manager",body:'<div class="row"><div id="iq_manage_scripts_dialog_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h2 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading Scripts</h2></div></div>'}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"ManageScriptsDialog"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_manage_scripts_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_manage_scripts_dialog .modal-footer").css({display:"none"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},ManageScriptsEditDialog:function(script_id,filename){var title="Edit Script";if(void 0===script_id||null===script_id)var script_id=-1,title="Register New Script";if(void 0===filename||null===filename)var filename="";$("#iq_manage_scripts_dialog").bsModal({backdrop:!0,title:"Advanced &raquo; Script Manager &raquo; "+title,body:'<div class="row"><div id="iq_manage_scripts_dialog_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading editing form</h1></div></div>'}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"ManageScriptsEditDialog",ScriptID:script_id,Filename:filename},success:function(jsonRet){if(0===jsonRet.STATUS){$("#iq_manage_scripts_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_manage_scripts_dialog .modal-footer").css({display:"none"});var codeeditor=CodeMirror.fromTextArea(document.getElementById("script_code"),{lineNumbers:!0,theme:"blackboard",styleActiveLine:!0,matchBrackets:!0,indentWithTabs:!0,mode:"javascript"});setTimeout(function(){codeeditor.refresh(),codeeditor.setValue($("#script_code").iqFieldValue()),codeeditor.on("blur",function(){$("#script_code").iqFieldValue(codeeditor.getValue())})},100)}else $.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},select_script_placement:function(el,placement){$("#script_placement").val(placement),$("#dropdownPlacement").css("color","unset"),$("#dropdownPlacement").html($(el).html()+' <span class="caret" style="float:right; margin-top:8px;color:##333;"></span>')},ManageScriptsSaveEdits:function(){var formIsValid=!0,script_code=$("#script_code").val(),script_name=$("#script_name").val(),placement=$("#script_placement").val(),run_state=$("input[name=run_status]:checked").val();if(0===$("#script_code").val().length)formIsValid=!1,$("#script_code").parent().parent().addClass("has-error"),$("#script_code_error").html("<p>Javascript code is required.</p>"),$("#script_code_error").css("visibility","visible");else{var m1=$("#script_code").val().search("<script"),m2=$("#script_code").val().search("<\/script>");-1!=m1||-1!=m2?(formIsValid=!1,$("#script_code").parent().parent().addClass("has-error"),$("#script_code_error").html('<p><span style="color:red;">Please Note:</span> Do not include the start and end <em>&lt;script&gt;</em> tags. Only paste javascript code.</p>'),$("#script_code_error").css("visibility","visible")):($("#script_code").parent().parent().removeClass("has-error"),$("#script_code_error").css("visibility","hidden"))}0===$("#script_name").val().length?(formIsValid=!1,$("#script_name").parent().parent().addClass("has-error"),$("#script_name_required").css("visibility","visible")):($("#script_name").parent().parent().removeClass("has-error"),$("#script_name_required").css("visibility","hidden")),0===$("#script_placement").val().length?(formIsValid=!1,$("#dropdownPlacement").parent().parent().addClass("has-error"),$("#placement_required").css("visibility","visible")):($("#dropdownPlacement").parent().parent().removeClass("has-error"),$("#placement_required").css("visibility","hidden")),formIsValid&&$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"save_script_changes",ScriptID:$("#script_id").val(),Filename:$("#script_filename").val(),ScriptCode:script_code,ScriptName:script_name,RunState:run_state,Placement:placement,subdomains:$("#subdomainsStatusOn").is(":checked")?1:0},success:function(jsonRet){0===jsonRet.STATUS?$.iqEditor.ManageScriptsDialog():$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},ManageScriptsDelete:function(script_id,filename){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"delete_custom_script",ScriptID:script_id,Filename:filename},success:function(jsonRet){0===jsonRet.STATUS?$.iqEditor.ManageScriptsDialog():$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},iq_map:function(){var postData={method:"editor_area_map_layout",type:"iq_area_map"},mapDetails=$("#iq_area_map").attr("data-iq-area-map-details");$.isJSON(mapDetails)&&(mapDetails=JSON.parse(mapDetails),mapDetails.hasOwnProperty("showmap")&&(postData.showmap=mapDetails.showmap),mapDetails.hasOwnProperty("lat")&&(postData.lat=mapDetails.lat),mapDetails.hasOwnProperty("lon")&&(postData.lon=mapDetails.lon),mapDetails.hasOwnProperty("zoomlevel")&&(postData.zoomlevel=mapDetails.zoomlevel)),$("#iq_editor_editfield_dialog").bsModal({backdrop:!0,title:"Edit Area Map",body:$.iqEditor.BuildLoadingDialogHtml("Loading Editing Form")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:postData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_editfield_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_editfield_dialog .modal-footer").css({display:"none"}),setTimeout(function(){$("#iq_editor_area_map").iqGoogleMaps({Lat:parseFloat($("#iq_area_map_form-lat").val()),Lon:parseFloat($("#iq_area_map_form-lon").val()),ZoomLevel:parseInt($("#iq_area_map_form-zoomlevel").val()),mapTypeId:"roadmap",draggable:!0})},1e3)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},get_iq_map:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_area_map_layout"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_area_map").html(jsonRet.LAYOUT),setTimeout(function(){$("#iq_editor_area_map").iqGoogleMaps({Lat:parseFloat($("#iq_editor_area_map").attr("data-lat")),Lon:parseFloat($("#iq_editor_area_map").attr("data-lon")),ZoomLevel:12,mapTypeId:"roadmap"})},1e3)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},BuildLoadingDialogHtml:function(title){void 0!==title&&""!==title||(title="Loading");var results='<div class="row">';return results+='    <div id="iq_editfield_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">',results+='        <h1 class="text-center">',results+='            <i class="fa fa-fw fa-refresh fa-spin"></i> '+title,results+="        </h1>",results+="    </div>",results+="</div>"},InitFaviconUpload:function(){$("#fileupload").fileupload({url:"/components/editor.cfc?method=uploadfavicon",async:!1,ReturnFormat:"json",dataType:"json",success:function(jsonRet){$("#edit-menu").attr("img_name",jsonRet.IMG_NAME)}}),$("#fileupload").bind("fileuploadstop",function(){var img_url=$("#iq-uploaded-images").attr("img_url")+$("#edit-menu").attr("img_name"),img_path=$("#iq-uploaded-images").attr("img_path");$("#edit-menu").attr("img_url",img_url),$("#edit-menu").attr("img_path",img_path),setTimeout(function(){$.iqUtils.uiProcessing("close"),$.iqEditor.AfterUpload()},5e3)}),$("#fileupload").bind("fileuploadstart",function(){$.iqUtils.uiProcessing("open")})},UploadFavicon:function(pselect,pcallback){void 0!==pselect&&void 0!==pcallback&&($("#edit-menu").attr("callback",pcallback),$("#edit-menu").attr("selectfunction",pselect)),$("#edit-menu").attr("afterupload","$.iqEditor.UploadFavicon_Dialog()"),$("#iq_editor_uploadfavicon_dialog").bsModal({backdrop:!0,title:"Upload Favicon",body:$.iqEditor.BuildLoadingDialogHtml("Loading Favicons")}),$.ajax({url:"/components/editor_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"editor_uploadfavicon_dialog_layout",callback:pcallback},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_editor_uploadfavicon_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_editor_uploadfavicon_dialog .modal-footer").css({display:"none"}),$.iqEditor.InitFaviconUpload()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},DeleteFavicon:function(button){var bconfirm=confirm("Are you sure you want to delete this favicon?");bconfirm&&($.iqUtils.uiProcessing("open"),setTimeout(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!1,data:{Method:"deletefavicon"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_editor_uploadfavicon_dialog").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},100))},ToggleGlobalPage:function(obj){var checkbox_id=$(obj).attr("id"),chk_array=checkbox_id.split("_"),rownum=chk_array[1];setTimeout(function(){$.ajax({url:"/components/editor.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"toggleGlobalPage",ReturnFormat:"json",domainname:$(obj).data("domainname"),pagename:$(obj).data("pagename")},success:function(jsonRet){0==jsonRet.ERROR?($("#chkGlobalPage_"+rownum).data("domainname",jsonRet.NEWDOMAIN),1==document.getElementById(checkbox_id).checked?($("#lblGlobalPage_OFF_"+rownum).css("color","white"),$("#lblGlobalPage_ON_"+rownum).css("color","#e043b1")):($("#lblGlobalPage_OFF_"+rownum).css("color","#e043b1"),$("#lblGlobalPage_ON_"+rownum).css("color","white"))):($.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3),1==document.getElementById(checkbox_id).checked?document.getElementById(checkbox_id).checked=!1:document.getElementById(checkbox_id).checked=!0)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet.responseText),1==document.getElementById(checkbox_id).checked?document.getElementById(checkbox_id).checked=!1:document.getElementById(checkbox_id).checked=!0}})},500)}},$.fn.extend({iqInputSelect:function(){this.each(function(){$(this).css({color:"#ccc"}),""!==$(this).iqFieldValue()&&$(this).removeClass("iq-login-"+$(this).attr("name")).css("color","#000"),$(this).focus(function(){$(this).parent().addClass("iq-login-field-glow").removeClass("iq-login-field-wrapper-error"),$(this).removeClass("iq-login-"+$(this).attr("name")).css("color","#000")}),$(this).blur(function(){""===$(this).iqFieldValue()?($(this).parent().removeClass("iq-login-field-glow"),$(this).css("color","#ccc").addClass("iq-login-"+$(this).attr("name"))):$(this).parent().removeClass("iq-login-field-glow")})})},iqAreaLookupAutoComplete:function(options){var defaults={label:"",maxitems:6,onchange:"",lookup:""};this.each(function(){var oSettings=$.extend(defaults,options),sFieldID=$(this).attr("id"),sFieldName=$(this).attr("name"),sMLSID=$(this).attr("mlsid"),sWrapperID=sFieldID+"_wrapper",sDisplayID=sFieldID+"_display",sButtonID=sFieldID+"_button",sButtonName=sFieldName+"_button",sEntryID=sFieldID+"_entry",sEntryName=sFieldName+"_entry",sFieldSelector="#"+sFieldID,sWrapperSelector="#"+sWrapperID,sDisplaySelector="#"+sDisplayID,sButtonSelector="#"+sButtonID,sEntrySelector="#"+sEntryID,oUL="#iq_ul_"+sFieldID,iheight="";iheight="1"===oSettings.maxitems?40:100;var sWrapperHTML='<div id="'+sWrapperID+'" class="input-group iq-autocomplete-list-wrapper iq-autocomplete"></div>',sButtonHTML='<span class="input-group-btn"><button type="button" class="btn btn-info" id="'+sButtonID+'" name="'+sButtonName+'" class="btn btn-info" onclick="return false;"><i class="fa fa-bars"></i></button></span>',sDisplayHTML='<div id="iq_ul_'+sFieldID+'"style="height:'+iheight+'px;width:220px; overflow:auto"><ul maxitems="'+oSettings.maxitems+'" id="'+sDisplayID+'" class="iq-autocomplete-list-display" style="display:none;"></ul></div>',sEntryHTML=$(sFieldSelector).clone(!0).attr("id",sEntryID).attr("name",sEntryName).addClass("iq-autocomplete-list-entry"),objVals="",m_firstvalue="";$(sFieldSelector).before(sWrapperHTML),$(sWrapperSelector).append(sEntryHTML).append(sButtonHTML),$(sWrapperSelector).after(sDisplayHTML),$(sFieldSelector).css({display:"none"}),""===oSettings.lookup&&(oSettings.lookup=sFieldName);var _LookupAutoComplete={init:function(){var sFieldValue=$(sFieldSelector).iqFieldValue();if(""!==sFieldValue)for(var aFieldItems=sFieldValue.split(","),i=0;i<aFieldItems.length;i++)_LookupAutoComplete.adddisplayitem(aFieldItems[i]);$(sButtonSelector).bind("click",function(){$(sEntrySelector).iqFieldValue(""),_LookupAutoComplete.dialog()}),$(sEntrySelector).autocomplete({source:function(request,response){$(sEntrySelector).addClass("iq-loading"),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"fieldlookupautocomplete",cachedata:!0,lookup:oSettings.lookup,mlsid:sMLSID,propertytype:"residential",lookup_value:$(sEntrySelector).iqFieldValue(),lookup_ignore:$(sFieldSelector).iqFieldValue()},success:function(jsonRet){if(0===jsonRet.STATUS){var aSuggestions=[],rs=[],iRow=0;for(iRow=0;iRow<jsonRet.QUERY.DATA.length;iRow++){for(var oRow={},iCol=0;iCol<jsonRet.QUERY.COLUMNS.length;iCol++)oRow[jsonRet.QUERY.COLUMNS[iCol].toLowerCase()]=jsonRet.QUERY.DATA[iRow][iCol];rs.push(oRow)}if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++)objVals={label:rs[i].description},m_firstvalue=rs[0].description,aSuggestions.push(objVals);else objVals={label:"NO RECORDS FOUND",description:""},aSuggestions[0]=objVals}else $.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}}),$(sEntrySelector).removeClass("iq-loading"),response("")},select:function(e,ui){return _LookupAutoComplete.populate(ui.item.label),"function"==typeof oSettings.onchange&&oSettings.onchange.call(this),!1},minLength:3},{autofill:!0}),$(sEntrySelector).iqFieldValue("")},populate:function(sItems){var aItems=sItems.split(","),counter=0,aFieldValue="";$(oUL).find("li").each(function(){counter+=parseInt(1)});var items_available=oSettings.maxitems-counter,totalselected=counter+parseInt(aItems.length);if(!(""!==sItems&&totalselected<=oSettings.maxitems)){1===$(obj).length&&$(obj).remove(),""!==sItems?$.iqUtils.uiMessage("","You may only select up to "+items_available+" items"):$.iqUtils.uiMessage("","Please make a selection up to "+items_available+" items");var obj=$('[aria-describedby="iq_message_dialog"]');return $(obj).css({"z-index":"100001"}),!1}for(var i=0;i<aItems.length;i++){var sItem=aItems[i],sFieldValue=$(sFieldSelector).iqFieldValue();""===sFieldValue?$(sFieldSelector).iqFieldValue(sItem):$(sFieldSelector).iqFieldValue(sFieldValue+","+sItem),_LookupAutoComplete.adddisplayitem(aItems[i])}aFieldValue=[],$(oUL).find("li").each(function(){aFieldValue.push($(this).text())}),$("#lookups_dialog").modal("hide"),$(sEntrySelector).iqFieldValue("")},adddisplayitem:function(sItem){var sItemID=sDisplayID+"-"+sItem;$(sDisplaySelector).append('<li style="list-style-type:none;" [id="'+sItemID+']" itemvalue="'+sItem+'">'+sItem+'<span class="iq-autocomplete-list-close"></span></li>'),$(sDisplaySelector).find("li").length>0&&$(sDisplaySelector).css({display:"table"}),$(sDisplaySelector+" li:last span").unbind("click").bind("click",function(){for(var aNewValues=[],sValueToReplace=$(this).parent().attr("itemvalue"),aValues=$(sFieldSelector).iqFieldValue().split(","),oLI=$(this).parent(),oUL=$(oLI).parent(),i=0;i<aValues.length;i++)aValues[i]!==sValueToReplace&&aNewValues.push(aValues[i]);var sNewValue=aNewValues.join(",");$(sFieldSelector).iqFieldValue(sNewValue),""===sNewValue&&$(oUL).hide(),$(oLI).remove(),$(sDisplaySelector).find("li").length<oSettings.maxitems&&$(sDisplaySelector).css({height:"",overflow:""}),"function"==typeof oSettings.onchange&&oSettings.onchange.call(this)}).bind("mouseover",function(){$(this).addClass("iq-autocomplete-list-close-over")}).bind("mouseleave",function(){$(this).removeClass("iq-autocomplete-list-close-over")})},dialog:function(){$.iqUtils.uiProcessing("open");var counter=0;if($(oUL).find("li").each(function(){counter+=parseInt(1)}),counter>=oSettings.maxitems)return $.iqUtils.uiProcessing("close"),void $.iqUtils.uiMessage("","You may only select a total of "+oSettings.maxitems+" items for this section. Please remove an item below to make a new selection.");var lookuptitle="";switch(oSettings.lookup){case"city":lookuptitle="Select a city or cities";break;case"area":lookuptitle="Select an area or areas";break;case"zip_code":lookuptitle="Select a zip code or zip codes";break;case"county":lookuptitle="Select a county or counties";break;case"communityname":lookuptitle="Select a community or communities"}$("#lookups_dialog").bsModal({backdrop:!0,title:lookuptitle,body:'<div class="row"><div id="lookups_dialog" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading </h1></div></div>'}),$("#lookups_dialog .modal-footer").css({display:"none"}),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"fieldlookup",cachedata:!0,lookup:oSettings.lookup,propertytype:"residential",mlsid:sMLSID,lookup_ignore:$(sFieldSelector).iqFieldValue(),layout:"FieldLookup"},success:function(jsonRet){0===jsonRet.STATUS?($("#lookups_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_lookup_select").on("click",function(){$.iqUtils.uiProcessing("close"),_LookupAutoComplete.populate($("#lookups_dialog_form-"+oSettings.lookup.toLowerCase()).iqFieldValue())})):$.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}}),$.iqUtils.uiProcessing("close")}};_LookupAutoComplete.init()})},iqKioskAreaLookupAutoComplete:function(options){var defaults={label:"",maxitems:6,onchange:"",lookup:""};this.each(function(){var oSettings=$.extend(defaults,options),sFieldID=$(this).attr("id"),sFieldName=$(this).attr("name"),sMLSID=$(this).attr("mlsid"),sWrapperID=sFieldID+"_wrapper",sDisplayID=sFieldID+"_display",sButtonID=sFieldID+"_button",sButtonName=sFieldName+"_button",sEntryID=sFieldID+"_entry",sEntryName=sFieldName+"_entry",sFieldSelector="#"+sFieldID,sWrapperSelector="#"+sWrapperID,sDisplaySelector="#"+sDisplayID,sButtonSelector="#"+sButtonID,sEntrySelector="#"+sEntryID,oUL="#iq_ul_"+sFieldID,sWrapperHTML='<div id="'+sWrapperID+'" class="input-group iq-autocomplete-list-wrapper iq-autocomplete"></div>',sButtonHTML='<span class="input-group-btn"><button type="button" class="btn btn-info" id="'+sButtonID+'" name="'+sButtonName+'" class="btn btn-info" onclick="return false;"><i class="fa fa-bars"></i></button></span>',sDisplayHTML='<div class="iq-area-list" id="iq_ul_'+sFieldID+'"><ul maxitems="'+oSettings.maxitems+'" id="'+sDisplayID+'" class="iq-tag-input"></ul></div>',sEntryHTML=$(sFieldSelector).clone(!0).attr("id",sEntryID).attr("name",sEntryName).addClass("iq-autocomplete-list-entry"),objVals="",m_firstvalue="";$(sFieldSelector).before(sWrapperHTML),$(sWrapperSelector).append(sEntryHTML).append(sButtonHTML),$(sWrapperSelector).after(sDisplayHTML),$(sFieldSelector).css({display:"none"}),""===oSettings.lookup&&(oSettings.lookup=sFieldName);var _LookupAutoComplete={init:function(){
var sFieldValue=$(sFieldSelector).iqFieldValue();if(""!==sFieldValue)for(var aFieldItems=sFieldValue.split(","),i=0;i<aFieldItems.length;i++)_LookupAutoComplete.adddisplayitem(aFieldItems[i]);$(sButtonSelector).bind("click",function(){$(sEntrySelector).iqFieldValue(""),_LookupAutoComplete.dialog()}),$(sEntrySelector).autocomplete({source:function(request,response){$(sEntrySelector).addClass("iq-loading"),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"fieldlookupautocomplete",cachedata:!0,lookup:oSettings.lookup,mlsid:sMLSID,propertytype:"residential",lookup_value:$(sEntrySelector).iqFieldValue(),lookup_ignore:$(sFieldSelector).iqFieldValue()},success:function(jsonRet){if(0===jsonRet.STATUS){var aSuggestions=[],rs=[],iRow=0;for(iRow=0;iRow<jsonRet.QUERY.DATA.length;iRow++){for(var oRow={},iCol=0;iCol<jsonRet.QUERY.COLUMNS.length;iCol++)oRow[jsonRet.QUERY.COLUMNS[iCol].toLowerCase()]=jsonRet.QUERY.DATA[iRow][iCol];rs.push(oRow)}if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++)objVals={label:rs[i].description},m_firstvalue=rs[0].description,aSuggestions.push(objVals);else objVals={label:"NO RECORDS FOUND",description:""},aSuggestions[0]=objVals}else $.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}}),$(sEntrySelector).removeClass("iq-loading"),response("")},select:function(e,ui){return _LookupAutoComplete.populate(ui.item.label),"function"==typeof oSettings.onchange&&oSettings.onchange.call(this),!1},minLength:3},{autofill:!0}),$(sEntrySelector).iqFieldValue("")},populate:function(sItems){var aItems=sItems.split(","),counter=0,aFieldValue="";$(oUL).find("li").each(function(){counter+=parseInt(1)});var items_available=oSettings.maxitems-counter,totalselected=counter+parseInt(aItems.length);if(!(""!==sItems&&totalselected<=oSettings.maxitems)){1===$(obj).length&&$(obj).remove(),""!==sItems?$.iqUtils.uiMessage("","You may only select up to "+items_available+" items"):$.iqUtils.uiMessage("","Please make a selection up to "+items_available+" items");var obj=$('[aria-describedby="iq_message_dialog"]');return $(obj).css({"z-index":"100001"}),!1}for(var i=0;i<aItems.length;i++){var sItem=aItems[i],sFieldValue=$(sFieldSelector).iqFieldValue();""===sFieldValue?$(sFieldSelector).iqFieldValue(sItem):$(sFieldSelector).iqFieldValue(sFieldValue+","+sItem),_LookupAutoComplete.adddisplayitem(aItems[i])}aFieldValue=[],$(oUL).find("li").each(function(){aFieldValue.push($(this).text())}),$("#lookups_dialog").modal("hide"),$(sEntrySelector).iqFieldValue("")},adddisplayitem:function(sItem){var sItemID=sDisplayID+"-"+sItem;$(sDisplaySelector).append('<li class="label" id="'+sItemID+'" itemvalue="'+sItem+'">'+sItem+'<span class="iq-tag-input-close"></span></li>');$(sDisplaySelector).find("li").length;$(sDisplaySelector+" li:last span").unbind("click").bind("click",function(){for(var aNewValues=[],sValueToReplace=$(this).parent().attr("itemvalue"),aValues=$(sFieldSelector).iqFieldValue().split(","),oLI=$(this).parent(),oUL=$(oLI).parent(),i=0;i<aValues.length;i++)aValues[i]!==sValueToReplace&&aNewValues.push(aValues[i]);var sNewValue=aNewValues.join(",");$(sFieldSelector).iqFieldValue(sNewValue),""===sNewValue&&$(oUL).hide(),$(oLI).remove(),$(sDisplaySelector).find("li").length,oSettings.maxitems,"function"==typeof oSettings.onchange&&oSettings.onchange.call(this)}).bind("mouseover",function(){$(this).addClass("iq-autocomplete-list-close-over")}).bind("mouseleave",function(){$(this).removeClass("iq-autocomplete-list-close-over")})},dialog:function(){$.iqUtils.uiProcessing("open");var counter=0;if($(oUL).find("li").each(function(){counter+=parseInt(1)}),counter>=oSettings.maxitems)return $.iqUtils.uiProcessing("close"),void $.iqUtils.uiMessage("","You may only select a total of "+oSettings.maxitems+" items for this section. Please remove an item below to make a new selection.");var lookuptitle="";switch(oSettings.lookup){case"city":lookuptitle="Select a city or cities";break;case"area":lookuptitle="Select an area or areas";break;case"zip_code":lookuptitle="Select a zip code or zip codes";break;case"county":lookuptitle="Select a county or counties";break;case"communityname":lookuptitle="Select a community or communities"}$("#lookups_dialog").bsModal({backdrop:!0,title:lookuptitle,body:'<div class="row"><div id="lookups_dialog" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading </h1></div></div>'}),$("#lookups_dialog .modal-footer").css({display:"none"}),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"fieldlookup",cachedata:!0,lookup:oSettings.lookup,propertytype:"residential",mlsid:sMLSID,lookup_ignore:$(sFieldSelector).iqFieldValue(),layout:"FieldLookup"},success:function(jsonRet){0===jsonRet.STATUS?($("#lookups_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_lookup_select").on("click",function(){$.iqUtils.uiProcessing("close"),_LookupAutoComplete.populate($("#lookups_dialog_form-"+oSettings.lookup.toLowerCase()).iqFieldValue())})):$.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}}),$.iqUtils.uiProcessing("close")}};_LookupAutoComplete.init()})},iqListing_MultiFieldAutocomplete:function(options){var defaults={mlsid:"",ml_number:"",propertytype:$("#iq_listing_multifield_autocomplete").attr("data-propertytype"),searchby:"",area:"",city:"",county:"",state:"",zip_code:"",street_address:"",openhouse:"",callback:"",fields:"streetaddress,ml_number"},oSettings=$.extend(defaults,options);this.each(function(){var oListingForm=$(this),oListing_MultiFieldAutocomplete=$('input[id="iq_listing_multifield_autocomplete"]',oListingForm),sInitialValue=$(oListing_MultiFieldAutocomplete).iqFieldValue();$(oListingForm).submit(function(e){e.preventDefault()}),$(oListing_MultiFieldAutocomplete).click(function(){$(this).val("")}),$(oListing_MultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)}),$("button",oListingForm).click(function(e){e.preventDefault()}),$(oListing_MultiFieldAutocomplete).autocomplete({delay:500,appendTo:oListingForm,source:function(request,response){$(oListing_MultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getLookup_MultiField",Fields:oSettings.fields,mlsid:oSettings.mlsid,propertytype:oSettings.propertytype,listingtype:"for-sale",LookupValue:$(oListing_MultiFieldAutocomplete).iqFieldValue()},success:function(jsonRet){var arrsuggestions=[],slabel="",objVals="";if($(oListing_MultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.STATUS){$(".ui-autocomplete").css({"max-height":"180px",overflow:"auto","overflow-x":"hidden"}),$(".ui-autocomplete").css({"border-style":"solid","border-color":"#eeeeee","border-width":"1px"});var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY);if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++){var description=$.iqUtils.fCase(rs[i].description);switch(rs[i].lookupname.toLowerCase()){case"streetaddress":slabel="Street Address";break;case"ml_number":slabel="MLS#";break;default:slabel=rs[i].lookupname}objVals={searchby:rs[i].lookupname,label:slabel+": "+description,value:rs[i].description,url:rs[i].url},arrsuggestions.push(objVals)}else objVals={searchby:"",label:"NO RECORDS FOUND",value:"",url:""},arrsuggestions[0]=objVals}else $.iqUtils.uiMessage("Error",jsonRet.MESSAGE);response(arrsuggestions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("Error",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("Error",httpRet.responseText)}})},select:function(e,ui){$.removeData(oListingForm),$(oListingForm).data("data-fieldselected",!0),$(oListingForm).data("data-propertytype",ui.item.propertytype),$(oListingForm).data("data-url",ui.item.url),$(oListing_MultiFieldAutocomplete).iqFieldValue(ui.item.value.toLowerCase()),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[])}},{autofill:!0})})},iqRental_MultiFieldAutocomplete:function(options){var defaults={mlsid:"",ml_number:"",propertytype:$("#iq_rental_multifield_autocomplete").attr("data-propertytype"),searchby:"",area:"",city:"",county:"",state:"",zip_code:"",street_address:"",openhouse:"",callback:"",fields:"streetaddress,ml_number"},oSettings=$.extend(defaults,options);this.each(function(){var oRentalForm=$(this),oRental_MultiFieldAutocomplete=$('input[id="iq_rental_multifield_autocomplete"]',oRentalForm),sInitialValue=$(oRental_MultiFieldAutocomplete).iqFieldValue();$(oRentalForm).submit(function(e){e.preventDefault()}),$(oRental_MultiFieldAutocomplete).click(function(){$(this).val("")}),$(oRental_MultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)}),$("button",oRentalForm).click(function(e){e.preventDefault()}),$(oRental_MultiFieldAutocomplete).autocomplete({delay:500,appendTo:oRentalForm,source:function(request,response){$(oRental_MultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getLookup_MultiField",Fields:oSettings.fields,mlsid:oSettings.mlsid,propertytype:oSettings.propertytype,listingtype:"for-lease",LookupValue:$(oRental_MultiFieldAutocomplete).iqFieldValue()},success:function(jsonRet){var arrsuggestions=[],slabel="",objVals="";if($(oRental_MultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.STATUS){$(".ui-autocomplete").css({"max-height":"180px",overflow:"auto","overflow-x":"hidden"}),$(".ui-autocomplete").css({"border-style":"solid","border-color":"#eeeeee","border-width":"1px"});var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY);if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++){var description=$.iqUtils.fCase(rs[i].description);switch(rs[i].lookupname.toLowerCase()){case"streetaddress":slabel="Street Address";break;case"ml_number":slabel="MLS#";break;default:slabel=rs[i].lookupname}objVals={searchby:rs[i].lookupname,label:slabel+": "+description,value:rs[i].description,url:rs[i].url},arrsuggestions.push(objVals)}else objVals={searchby:"",label:"NO RECORDS FOUND",value:"",url:""},arrsuggestions[0]=objVals}else $.iqUtils.uiMessage("Error",jsonRet.MESSAGE);response(arrsuggestions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("Error",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("Error",httpRet.responseText)}})},select:function(e,ui){$.removeData(oRentalForm),$(oRentalForm).data("data-fieldselected",!0),$(oRentalForm).data("data-propertytype",ui.item.propertytype),$(oRentalForm).data("data-url",ui.item.url),$(oRental_MultiFieldAutocomplete).iqFieldValue(ui.item.value.toLowerCase()),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[])}},{autofill:!0})})},iqEditor_Autocomplete:function(options){var defaults={mlsid:"",ml_number:"",propertytype:"residential",state:"",county:"",area:"",city:"",zipcode:"",streetaddress:"",callback:"",fields:"area,city,county,state,zip_code,ml_number,streetaddress,elementaryschool,jrhighschool,highschool,schooldistrict,communityname"},oSettings=$.extend(defaults,options);this.each(function(){var oForm=$(this),header_value="",header_title="",oMultiFieldAutocomplete=$('input[class="form-control autocomplete"]',oForm),sInitialValue=$(oMultiFieldAutocomplete).iqFieldValue(),sFormID=$(oForm).attr("id");$(oForm).submit(function(e){e.preventDefault()}),$(oMultiFieldAutocomplete).click(function(){$(this).val("")}),$(oMultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)});var oState=$('input[id="'+sFormID+'-state"]',oForm),oCounty=$('input[id="'+sFormID+'-county"]',oForm),oArea=$('input[id="'+sFormID+'-area"]',oForm),oCity=$('input[id="'+sFormID+'-city"]',oForm),oZipCode=$('input[id="'+sFormID+'-zipcode"]',oForm),oCommunityName=$('input[id="'+sFormID+'-communityname"]',oForm),oElementarySchool=$('input[id="'+sFormID+'-elementaryschool"]',oForm),oJrHighSchool=$('input[id="'+sFormID+'-jrhighschool"]',oForm),oHighSchool=$('input[id="'+sFormID+'-highschool"]',oForm),oSchoolDistrict=$('input[id="'+sFormID+'-schooldistrict"]',oForm);$("button",oForm).click(function(e){e.preventDefault()});var propertyType=oSettings.propertytype;$("#iq_type_form-propertytype").length&&(propertyType=$("#iq_type_form-propertytype").iqFieldValue()),$(oMultiFieldAutocomplete).autocomplete({delay:500,minLength:2,appendTo:oForm,source:function(request,response){$(oMultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/autocomplete.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"listings",Fields:oSettings.fields,mlsid:oSettings.mlsid,propertytype:propertyType,LookupValue:$(oMultiFieldAutocomplete).iqFieldValue()},success:function(jsonRet){var suggestions=[],suggestion={};$(oMultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.status?(header_value="",header_title="",jsonRet.data.length>0?(header_value=jsonRet.data[0].description,header_title="<h4>"+jsonRet.data[0].header+"</h4>",jsonRet.data.forEach(function(record){suggestion={searchby:record.fieldname,value:record.fieldvalue,title:record.title,url:record.url,html:record.layout},suggestions.push(suggestion)})):(suggestion={searchby:"",value:"No Results Found",url:"",html:"<h4>No Results Found</h4>"},suggestions.push(suggestion))):$.iqUtils.uiMessage("Error: "+jsonRet.message,jsonRet.detail),response(suggestions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet.responseText)}})},select:function(e,ui){1===$("#iq_listings_criteria").length&&($(oState).iqFieldValue(""),$(oCounty).iqFieldValue(""),$(oCity).iqFieldValue(""),$(oArea).iqFieldValue(""),$(oZipCode).iqFieldValue(""),$(oCommunityName).iqFieldValue(""),$(oElementarySchool).iqFieldValue(""),$(oJrHighSchool).iqFieldValue(""),$(oHighSchool).iqFieldValue(""),$(oSchoolDistrict).iqFieldValue(""),void 0!==$.iqListings&&($($.iqListings.searchform+"-state").iqFieldValue(""),$($.iqListings.searchform+"-county").iqFieldValue(""),$($.iqListings.searchform+"-city").iqFieldValue(""),$($.iqListings.searchform+"-zipcode").iqFieldValue(""),$($.iqListings.searchform+"-area").iqFieldValue(""),$($.iqListings.searchform+"-communityname").iqFieldValue(""),$($.iqListings.searchform+"-elementaryschool").iqFieldValue(""),$($.iqListings.searchform+"-jrhighschool").iqFieldValue(""),$($.iqListings.searchform+"-highschool").iqFieldValue(""),$($.iqListings.searchform+"-schooldistrict").iqFieldValue(""))),""!==ui.item.value&&(1===$("#iq_listings_criteria").length&&("state"===ui.item.searchby.toLowerCase()&&$(oState).iqFieldValue(ui.item.value.toLowerCase()),"county"===ui.item.searchby.toLowerCase()&&$(oCounty).iqFieldValue(ui.item.value.toLowerCase()),"city"===ui.item.searchby.toLowerCase()&&$(oCity).iqFieldValue(ui.item.value.toLowerCase()),"area"===ui.item.searchby.toLowerCase()&&$(oArea).iqFieldValue(ui.item.value.toLowerCase()),"zip_code"===ui.item.searchby.toLowerCase()&&$(oZipCode).iqFieldValue(ui.item.value.toLowerCase()),"zip_code"===ui.item.searchby.toLowerCase()&&(ui.item.searchby="Zip Code"),"communityname"===ui.item.searchby.toLowerCase()&&$(oCommunityName).iqFieldValue(ui.item.value.toLowerCase()),"elementaryschool"===ui.item.searchby.toLowerCase()&&$(oElementarySchool).iqFieldValue(ui.item.value.toLowerCase()),"jrhighschool"===ui.item.searchby.toLowerCase()&&$(oJrHighSchool).iqFieldValue(ui.item.value.toLowerCase()),"highschool"===ui.item.searchby.toLowerCase()&&$(oHighSchool).iqFieldValue(ui.item.value.toLowerCase()),"schooldistrict"===ui.item.searchby.toLowerCase()&&$(oSchoolDistrict).iqFieldValue(ui.item.value.toLowerCase()),void 0!==$.iqListings&&$($.iqListings.searchform+"-searchnearby").iqFieldValue(""),ui.item.value=ui.item.searchby+": "+ui.item.value),$(oMultiFieldAutocomplete).iqFieldValue(ui.item.value),$(oMultiFieldAutocomplete).data("lookup",ui.item.searchby.toLowerCase()),$(oMultiFieldAutocomplete).data("lookupvalue",ui.item.value),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[]))}},{autofill:!0}).data("ui-autocomplete")._renderItem=function(ul,item){return item.searchby!==header_value&&void 0!==item.title?(header_value=item.searchby,header_title="<h6>"+item.title+"</h6>"):header_title="",void 0!==$("[data-autocomplete-searchvalue]:first").attr("data-autocomplete-searchvalue")&&$("#multifield_autocomplete").tooltip("hide"),$('<li style="line-height:normal;" class="iq-dropdown-menuitem" data-autocomplete-searchby="'+item.searchby.replace("_","").toLowerCase()+'" data-autocomplete-searchvalue="'+item.value.toLowerCase()+'" data-autocomplete-streetaddress="'+item.streetaddress+'" data-autocomplete-lat="'+item.lat+'" data-autocomplete-lon="'+item.lon+'" data-autocomplete-url="'+item.url+'" style="margin:0"></li>').data("item.autocomplete",item).append($('<div style="font-size:12px;"></div>').html(header_title+" "+item.html)).appendTo(ul)}})}})}(jQuery);
//# sourceMappingURL=editor.min.js.map
;
/* file: ../assets/js/min/email.min.js */
!function($){$.iqEmail_Display=function(sTo,sSubject,sPublicID){return $("#email_form_dialog").dialog("close"),$("#email_form_dialog").remove(),$.iqUtils.uiProcessing("open"),$("body").append('<div id="email_form_dialog"><div id="email_form_message" class="iq-form-message"></div><div id="email_form_body"></div></div>'),$("#email_form_dialog").dialog({closeOnEscape:!1,title:"Email",width:500,resizable:!0,autoOpen:!1,bgiframe:!0,modal:!0,beforeClose:function(){$(this).remove()},beforeclose:function(){$(this).remove()},zIndex:900}),$("#email_form_message").hide(),setTimeout(function(){$.ajax({url:"/components/email_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"Email_Form_Layout"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0==jsonRet.STATUS?($("#email_form_body").html(jsonRet.LAYOUT),$("#email_form").iqForm_Rules(jsonRet.FORMRULES),$("#email_form #to").iqFieldValue(sTo),$("#email_form #publicid").iqFieldValue(sPublicID),$("#email_form_dialog").dialog({buttons:{Send:function(){$("#email_form").iqForm_Check()&&$.iqEmail_Save()},Close:function(){$(this).dialog("close")}}}),$("#email_form_dialog").dialog("open")):($("#email_form_dialog").dialog("open"),$.iqUIErrorLog("setlog",jsonRet.CONTENT),$("#email_form_message").html('<a href="javascript:void(0);" onclick="$(\'#email_form_message\').hide();">[Close]</a><a href="javascript:void(0);" onclick="$.iqUIErrorLog(\'open\');">[Error Log]</a><br>Message: '+jsonRet.MESSAGE+"<br>Detail: "+jsonRet.DETAIL),$("#email_form_message").show("slow"))},error:function(httpRet,err){$.iqUtils.uiProcessing("close"),$("#email_form_dialog").dialog("open"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?($.iqUIErrorLog("setlog",httpRet.CONTENT),$("#email_form_message").html('<a href="javascript:void(0);" onclick="$(\'#email_form_message\').hide();">[Close]</a><a href="javascript:void(0);" onclick="$.iqUIErrorLog(\'open\');">[Error Log]</a><br>Message: '+httpRet.MESSAGE+"<br>Detail: "+httpRet.DETAIL)):$("#email_form_message").html('<a href="javascript:void(0);" onclick="$(\'#email_form_message\').hide();">[Close]</a>'+$.iqParseError(httpRet.responseText)),$("#email_form_message").show("slow"),setTimeout("scroll(0,0)",500)}})},500),!1},$.iqEmail_Save=function(){return $.iqUtils.uiProcessing("open"),setTimeout(function(){var oDataDefaults={ReturnFormat:"json",Method:"doSendEmail"},oDataFields=$("#email_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);$.ajax({url:"/components/email.cfc",type:"POST",dataType:"json",async:!1,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0==jsonRet.STATUS?($("#email_form").iqLoadFormToCookies(),$("#email_form_dialog").dialog("close"),$("#email_form_dialog").remove(),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3)):($.iqUIErrorLog("setlog",jsonRet.CONTENT),$("#email_form_message").html('<a href="javascript:void(0);" onclick="$(\'#email_form_message\').hide();">[Close]</a><a href="javascript:void(0);" onclick="$.iqUIErrorLog(\'open\');">[Error Log]</a><br>Message: '+jsonRet.MESSAGE+"<br>Detail: "+jsonRet.DETAIL),$("#email_form_message").show("slow"))},error:function(httpRet,err){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?($.iqUIErrorLog("setlog",httpRet.CONTENT),$("#email_form_message").html('<a href="javascript:void(0);" onclick="$(\'#email_form_message\').hide();">[Close]</a><a href="javascript:void(0);" onclick="$.iqUIErrorLog(\'open\');">[Error Log]</a><br>Message: '+httpRet.MESSAGE+"<br>Detail: "+httpRet.DETAIL)):$("#email_form_message").html('<a href="javascript:void(0);" onclick="$(\'#email_form_message\').hide();">[Close]</a>'+$.iqParseError(httpRet.responseText)),$("#email_form_message").show("slow"),setTimeout("scroll(0,0)",500)}})},500),!1}}(jQuery);
//# sourceMappingURL=email.min.js.map
;
/* file: ../assets/js/min/facebook.min.js */
!function($){"use strict";$(document).ready(function(){var _companyid=$("meta[name=iq_companyid]").attr("content");0!==$("meta[name=iq_companyid]").length&&void 0!==$.iqFaceBook.appids[_companyid]?($.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_US/sdk.js",function(){window.fbAsyncInit=function(){FB.init({appId:$.iqFaceBook.appids[_companyid],cookie:!0,xfbml:!1,version:"v2.7"})}})):$("#iq-facebook-login").hide()}),$.iqFaceBook={appids:{iq_development:"481133828735139",iq_cb_sea_coast:"1792725810947687",iq_cb_apex:"1306645542693505",iq_cb_distinctive:"312431269137309",iq_cb_schmitt:"385674441833705",iq_cb_hearthside:"354842228260189",iq_cb_heritage:"691636421025091"},share:function(href){FB.ui({method:"share",href:href},function(response){console.log(response)})},getDetails:function(callback){var fields=["id","name","first_name","middle_name","last_name","gender","locale","languages","link","timezone","updated_time","verified","age_range","birthday","cover","currency","devices","education","email","hometown","interested_in","location","political","payment_pricepoints","favorite_athletes","favorite_teams","picture","quotes","relationship_status","religion","significant_other","video_upload_limits","website","work"].join(",");FB.api("/me",{fields:fields},function(response){callback.apply(this,[response])})},logout:function(){FB.logout(function(response){console.log(response)})},login:function(pCallBack){FB.login(function(response){response?"connected"===response.status?$.iqFaceBook.getDetails(function(details){var data={id:details.id,firstname:details.first_name,lastname:details.last_name,email:details.email,password:$.iqUtils.md5(details.first_name.toLowerCase()+details.last_name.toLowerCase()+details.id),website:details.link};if(void 0!==pCallBack)return void pCallBack.apply(this,[data]);console.log(data)}):"not_authorized"===response.status?$.iqUtils.uiMessage("Notice","You must authorize access to your facebook profile. Please try again."):console.log("Canceled"):console.log("No Response")},{scope:"public_profile, email"})}}}(jQuery);
//# sourceMappingURL=facebook.min.js.map
;
/* file: ../assets/js/min/flipbook.min.js */
!function($){"use strict";$(document).ready(function(){$.iqFlipbook.calcIframeHeight(),$(window).resize(function(){$.iqFlipbook.calcIframeHeight()})}),$.iqFlipbook={calcIframeHeight:function(){var srcHeight=$(window).height(),iframeHeight=srcHeight-87;$(".issuu-embed-container").css("height",iframeHeight+"px"),$(".issuu-embed-container iframe").css("height",iframeHeight+"px")}}}(jQuery);
//# sourceMappingURL=flipbook.min.js.map
;
/* file: ../assets/js/min/house-value.min.js */
!function($){"use strict";$(document).ready(function(){$("body").attr("class")&&$("body").attr("class").includes("v2")&&$(".container").hasClass("housefile")&&($(".container.housefile nav").addClass("navbar-expand-lg"),$(".container.housefile nav ul").addClass("w-100 bg-light rounded-1"),$(".container.housefile nav").css({position:"relative",top:"72px"}),$(".container.housefile nav.navbar").css({display:"none"}),$(".container.housefile").children().last().addClass("position-relative"),$(".container.housefile").children().last().css({top:"65px","z-index":"1000"}),$(".container.housefile .iq-housevalue-contact").addClass("card card-sm"),$(".iq-housevalue-info").parent().removeClass("row"),$(".container.housefile").children().last().find(".panel.panel-default").addClass("card mt-3"),$(".container.housefile").children().last().find(".panel.panel-default").addClass("card"),$(".container.housefile").children().last().find(".panel-heading").addClass("card-header"),$(".container.housefile").children().last().find(".panel-body").addClass("card-body")),$.iqHouseValue.map(),$("#iq_housevalue_form").length>0&&$("#iq_housevalue_form").iqForm_Rules(),"house-value"===$("#site-wrapper").attr("data-page")&&$("a").iqHiddenEmail(),0!==$("#iq_housevalue_form-autocomplete").length&&$.iqHouseValue.init()}),$.iqHouseValue={autocomplete:null,init:function(){$.iqHouseValue.autocomplete=new google.maps.places.Autocomplete(document.getElementById("iq_housevalue_form-autocomplete"),{types:["geocode"]}),$.iqHouseValue.autocomplete.addListener("place_changed",function(){$.iqHouseValue.fillAddress()}),setTimeout(function(){$("#iq_housevalue_form-autocomplete").attr("autocomplete","new-password")},500)},map:function(){if($("#iq_housevalue_map").length>0){var iLat=$("#iq_housevalue_map").data("lat"),iLon=$("#iq_housevalue_map").data("lon");$("#iq_housevalue_map").iqGoogleMaps({Lat:parseFloat(iLat),Lon:parseFloat(iLon),ZoomLevel:17,mapTypeId:"roadmap"})}},map_comparable:function(oThis){var iLat=$(oThis).parent().parent().data("lat"),iLon=$(oThis).parent().parent().data("lon"),sAddress=$(oThis).parent().parent().data("address");$.iqMap.dialog(iLat,iLon,sAddress,16)},fillAddress:function(){for(var place=$.iqHouseValue.autocomplete.getPlace(),street_address="",city="",state="",zipcode="",i=0;i<place.address_components.length;i++){var addressType=place.address_components[i].types[0];"street_number"===addressType&&(street_address=place.address_components[i].long_name),"route"===addressType&&(street_address+=" "+place.address_components[i].long_name),"sublocality_level_1"===addressType&&(city=place.address_components[i].long_name),"locality"===addressType&&(city=place.address_components[i].long_name),""===city&"neighborhood"===addressType&&(city=place.address_components[i].long_name),""===city&"administrative_area_level_3"===addressType&&(city=place.address_components[i].long_name),"administrative_area_level_1"===addressType&&(state=place.address_components[i].short_name),"postal_code"===addressType&&(zipcode=place.address_components[i].short_name)}$("#iq_housevalue_form-street_address").iqFieldValue(street_address),$("#iq_housevalue_form-city").iqFieldValue(city),$("#iq_housevalue_form-state").iqFieldValue(state),$("#iq_housevalue_form-postal_code").iqFieldValue(zipcode),$.iqHouseValue.step2()},step2:function(getCode){if(void 0===getCode&&0!==$("#iq_housevalue_form-code").length&&(getCode=!0),getCode){if(""===$("#iq_housevalue_form-code").iqFieldValue())return $("#iq_housevalue_form-code").popover({placement:"top",content:'<span class="text-danger">Please enter the code received before clicking the "Get Report" button.</span>',html:!0}).popover("show"),!1;$("#iq_housevalue_form-code").popover("hide");var oData=$("#iq_housevalue_form").iqSerializeFormToStruct();return oData.method="getCode",oData.returnformat="json",oData.firstname="",oData.lastname="",oData.step="address",$("#iq_housevalue_form-next_1").html('<i class="fa fa-fw fa-cog fa-spin"></i> Creating Report').attr("disabled","disabled"),$.ajax({url:"/components/house-value.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){0===jsonRet.STATUS?($("#iq_housevalue_form-publicid").iqFieldValue(jsonRet.PARAMS.publicid),$("#iq_housevalue_form-street_address").iqFieldValue(jsonRet.PARAMS.streetaddress),$("#iq_housevalue_form-city").iqFieldValue(jsonRet.PARAMS.city),$("#iq_housevalue_form-state").iqFieldValue(jsonRet.PARAMS.state),$("#iq_housevalue_form-postal_code").iqFieldValue(jsonRet.PARAMS.zipcode),$("#iq_housevalue_form-fullname").iqFieldValue(jsonRet.PARAMS.fullname),$("#iq_housevalue_form-fullname_wrapper").hide().data("required",!1),$("#iq_housevalue_form-emailaddress").data("required",!1).removeClass("iq-form-field-required"),$("#iq_housevalue_form-phone").data("required",!1).removeClass("iq-form-field-required"),"undefined"!=typeof ga&&ga("send","event",{eventCategory:"House Value - Post Cards",eventAction:"Request",eventLabel:jsonRet.PARAMS.description,eventValue:jsonRet.PARAMS.streetaddress}),$.iqHouseValue.step2(!1)):2===jsonRet.STATUS?($("#iq_housevalue_form-next_1").html("Get Report").attr("disabled",null),$("#iq_housevalue_form-code").popover({placement:"top",content:'<span class="text-danger">'+jsonRet.MESSAGE+"</span>",html:!0}).popover("show")):($("#iq_housevalue_form-next_1").html("Get Report").attr("disabled",null),$("#iq_housevalue_modal").bsModal({title:"Error",body:jsonRet.MESSAGE}))},error:function(httpRet){$("#iq_housevalue_form-next_1").html("Get Report").attr("disabled",null),$("#iq_housevalue_modal").bsModal({title:"Error",body:httpRet.responseText})}}),void 0}if(""===$("#iq_housevalue_form-street_address").iqFieldValue()||""===$("#iq_housevalue_form-city").iqFieldValue()||""===$("#iq_housevalue_form-state").iqFieldValue()||""===$("#iq_housevalue_form-postal_code").iqFieldValue())$("#iq_housevalue_form-autocomplete").popover({placement:"top",content:'<span class="text-danger">Please make a choice from the suggested addresses before clicking the "Get Report" button.</span>',html:!0}).popover("show");else{$("#iq_housevalue_form-autocomplete").popover("hide");var oData=$("#iq_housevalue_form").iqSerializeFormToStruct();oData.method="saveLead",oData.returnformat="json",oData.firstname="",oData.lastname="",oData.step="address",$("#iq_housevalue_form-next_1").html('<i class="fa fa-fw fa-cog fa-spin"></i> Creating Report').attr("disabled","disabled"),$.ajax({url:"/components/house-value.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){$("#iq_housevalue_form-next_1").html("Get Report").attr("disabled",null),"On"==oData.instantvalue?($("#iq_housevalue_title").html("Fill in the contact information below to unlock your automated report."),$("#iq_housevalue_report").addClass("iq-blur").html(jsonRet.LAYOUT).parent().show(),$("#iq_housevalue_report").find("a").removeAttr("href"),$("#iq_housevalue_carousel").carousel("next")):$("#iq_housevalue_carousel").carousel("next"),0===jsonRet.STATUS?(void 0!==jsonRet.LEAD&&($("#iq_housevalue_form-contactid").iqFieldValue(jsonRet.LEAD.CONTACTID),$("#iq_housevalue_form-leadid").iqFieldValue(jsonRet.LEAD.LEADID)),$("#iq_housevalue_report").addClass("iq-blur").html(jsonRet.LAYOUT).parent().show(),$("#iq_housevalue_report").find("a").removeAttr("href"),$("#iq_housevalue_carousel").carousel("next")):100==jsonRet.STATUS?(void 0!==jsonRet.LEAD&&($("#iq_housevalue_form-contactid").iqFieldValue(jsonRet.LEAD.CONTACTID),$("#iq_housevalue_form-leadid").iqFieldValue(jsonRet.LEAD.LEADID)),$("#iq_housevalue_title").html(jsonRet.MESSAGE),$("#iq_housevalue_report").html(jsonRet.CONTENT),$("#iq_housevalue_form-next_2").html("Submit Form"),$("#iq_housevalue_carousel").carousel("next")):$("#iq_housevalue_modal").bsModal({title:"Error",body:jsonRet.CONTENT})},error:function(httpRet){$("#iq_housevalue_form-next_1").html("Get Report").attr("disabled",null),$("#iq_housevalue_modal").bsModal({title:"Error",body:httpRet.responseText})}})}},step3:function(){if($("#iq_housevalue_form-fullname").val($.trim($("#iq_housevalue_form-fullname").val())),$("#iq_housevalue_form-emailaddress").val($.trim($("#iq_housevalue_form-emailaddress").val())),$("#iq_housevalue_form-phone").val($.trim($("#iq_housevalue_form-phone").val())),!$("#iq_housevalue_form").iqForm_Check())return!1;$.iqHouseValue.save()},save:function(){var fullname=$("#iq_housevalue_form-fullname").iqFieldValue(),tFullName=fullname.trim(),aFullName=tFullName.split(" "),oData=$("#iq_housevalue_form").iqSerializeFormToStruct();oData.method="saveLead",oData.returnformat="json",oData.firstname=aFullName[0],oData.lastname="",oData.step="info",oData.instantvalueTriggerMail="true",oData.searchAddress=$("#iq_housevalue_form-autocomplete").val(),oData.phone=$("#iq_housevalue_form-phone").val(),aFullName.length>2?(aFullName=aFullName.slice(1,aFullName.length),oData.lastname=aFullName.join(" ")):aFullName.length>1&&(oData.lastname=aFullName[1]),$("#iq_housevalue_form-next_2").html('<i class="fa fa-fw fa-cog fa-spin"></i> Loading').attr("disabled","disabled"),$.ajax({url:"/components/house-value.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){if($("#iq_housevalue_form-next_2").html("View Report").attr("disabled",null),"Off"==oData.instantvalue)return void $("#iq_housevalue_carousel").carousel("next");var _spaceregex=new RegExp(" ","g"),sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-");try{sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-")+"/"+oData.firstname.toLowerCase().replace(_spaceregex,"_")+"-"+oData.lastname.toLowerCase().replace(_spaceregex,"_")}catch(e){}0===jsonRet.STATUS?($.iqUtils.analyticsPageView({page_title:oData.sourcename,page_location:self.location.origin+"/lead-entry/"+sourcenameurl,page_path:"/lead-entry/"+sourcenameurl}),$.iqUtils.analyticsLeadConvert({lead_source:oData.sourcename}),setTimeout(function(){location.pathname.indexOf("house-value")>-1||location.pathname.indexOf("home-report")>-1?self.location=("/"!==$.iqUtils.right(location.pathname,1)?location.pathname+"/":location.pathname)+jsonRet.HOUSEFILE:self.location="/house-value/"+jsonRet.HOUSEFILE},5e3)):100==jsonRet.STATUS?($("#iq_housevalue_form-autocomplete").val(""),$("#iq_housevalue_carousel").carousel("prev"),$("#iq_housevalue_modal").bsModal({title:"Thank You",body:jsonRet.MESSAGE})):$("#iq_housevalue_modal").bsModal({title:"Error",body:jsonRet.CONTENT})},error:function(httpRet){$("#iq_housevalue_form-prev_2").attr("disabled",null),$("#iq_housevalue_modal").bsModal({title:"Error",body:httpRet.responseText})}})}}}(jQuery);
//# sourceMappingURL=house-value.min.js.map
;
/* file: ../assets/js/min/kiosk.min.js */
if(1===$("#iq_kiosk").length){if(void 0===iqKiosk_activity)var iqKiosk_activity="";if(void 0===iqKiosk_warning)var iqKiosk_warning=""}!function($){"use strict";$(document).ready(function(){1===$("#iq_kiosk").length&&($("[data-section=footer]").hide(),$("#iq_kiosk").on("click",function(){$.iqKiosk.init_timers()}),$("#iq_kiosk").on("scroll",function(){$.iqKiosk.init_timers()}),$.iqKiosk.init_autocomplete(),$.iqKiosk.init_timers(),$("[class^=st-sitemenu-]").each(function(){$(this).hide()}),$.iqUtils.history.init(function(args){$.iqKiosk.controller(args)}),$("body").css({"overflow-y":"hidden"}),$.iqUtils.cookie("editorIsAuthed")&&($(".iq-kiosk-menu").css({top:"50px"}),$("#iq_kiosk").css({top:"50px"})),$(".st-sitemenu-02").css({display:"none"}))}),$.iqKiosk={controller:function(){var action=$.iqUtils.history.action(),path_parts=$.iqUtils.history.hashArray();switch(action){case"listing":var mlsid_listingid=path_parts[1].split("-")||["",""],mlsid=mlsid_listingid[0],listingid=mlsid_listingid[1];""!==mlsid&&""!==listingid&&$.iqKiosk.loadKioskListingDetails(mlsid,listingid);break;case"for-sale":var mlsid_listingid=path_parts[2].split("-")||["",""],mlsid=mlsid_listingid[0],listingid=mlsid_listingid[1];""!==mlsid&&""!==listingid&&$.iqKiosk.loadKioskListingDetails(mlsid,listingid);break;default:$(".modal").each(function(index,element){$(element).modal("hide")})}},init_timers:function(){"2"!==$("#iq_kiosk").attr("data-layout")&&(clearTimeout(iqKiosk_warning),clearTimeout(iqKiosk_activity),1!==$("#edit-menu").length&&(iqKiosk_warning=setTimeout(function(){$("#iq_kiosk_warning_dialog").bsModal({backdrop:!0,title:"&nbsp",body:$("#modal_iqkiosk_warning_dialog").html()}),$("#iq_kiosk_warning_dialog .modal-footer").css({display:"none"})},6e4),iqKiosk_activity=setTimeout(function(){$.iqKiosk.reset_kiosk()},12e4)))},reset_kiosk:function(){$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"reset_kiosk"},success:function(jsonRet){0===jsonRet.STATUS?self.location=self.location:$.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE)},error:function(jsonRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):$.iqUtils.uiMessage("",$.iqParseError(httpRet.responseText))}})},toggleLeads:function(leadtype,oleadform){if($(".iq-email-this-home").hide(),$(".iq-schedule-this-home").hide(),$(".iq-text-this-home").hide(),$(oleadform).find(".iq-request-showing-form-container").is(":visible")||$(oleadform).find(".iq-request-showing-form-container").fadeIn(),$(".iq-leadform-page1").show(),$(".iq-leadform-page2").hide(),"schedule"!==leadtype){var currentleadtype=$(oleadform).attr("data-currentleadtype");""===currentleadtype||currentleadtype!==leadtype?$(oleadform).parent().slideDown():currentleadtype===leadtype&&$(oleadform).parent().slideToggle(),$(".iq-request-showing-form-container").fadeIn()}switch($(oleadform).attr("data-currentleadtype",leadtype),$("#iq_dynamicsource_leadform_banner").show(),leadtype){case"email":$(".iq-email-this-home").show(),$(oleadform).find('input[name="sourcename"]').iqFieldValue($(oleadform).attr("data-website-send-flyer"));break;case"text":$(".iq-text-this-home").show(),$(oleadform).find('input[name="sourcename"]').iqFieldValue($(oleadform).attr("data-website-send-text"));break;case"schedule":$(".iq-schedule-this-home").show(),$(oleadform).find('input[name="sourcename"]').iqFieldValue($(oleadform).attr("data-website-request-showing"))}$.iqKiosk.getHash()},selectDate:function(obj){$(".iq-request-showing-date").removeClass("iq-date-selected"),$(obj).addClass("iq-date-selected"),$(obj).find("input[name=iq-showingdate]").prop("checked",!0),"1"===$(obj).attr("data-dateposition")?($.iqKiosk.clearTimeButtons(),$.iqKiosk.setTimeButtons()):$.iqKiosk.clearTimeButtons()},selectTime:function(obj,oleadform,oscheduleform){$(".iq-request-showing-times-container").slideUp(function(){$(".iq-request-showing-time").removeClass("iq-date-selected"),$(obj).addClass("iq-date-selected"),$(obj).find("input[name=iq-showingtime]").prop("checked",!0);var timeanddate=$(oscheduleform).find($("input[name=iq-showingdate]")).iqFieldValue()+" at "+$(oscheduleform).find("input[name=iq-showingtime]").iqFieldValue(),calendardatetime=$(oscheduleform).find("input[name=iq-showingdate]:checked").attr("data-dbdate")+$("input[name=iq-showingtime]:checked").attr("data-dbdatetime");$(oleadform).find("input[name=viewingdate]").iqFieldValue(timeanddate),$(oleadform).find("input[name=calendardatetime]").iqFieldValue(calendardatetime),$(".iq-requested-datetime").html(timeanddate)})},clearTimeButtons:function(){$(".iq-request-showing-time").removeClass("iq-time-disabled"),$(".iq-request-showing-time").removeClass("iq-date-selected"),$("input[name=iq-showingtime]").each(function(){$(this).prop("disabled",!1)})},setTimeButtons:function(){var current_date=new Date,active_hour=current_date.getHours()+2;$("input[name=iq-showingtime]").each(function(){parseInt($(this).attr("data-hour"))<active_hour&&($(this).parent().addClass("iq-time-disabled"),$(this).prop("disabled",!0))})},getHash:function(){var originaltext=$("#iq_submit_lead_button").html();$.ajax({url:"/components/listing.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"gethash"},success:function(jsonRet){0===jsonRet.STATUS&&$("input[name=_hash_]").each(function(){$(this).iqFieldValue(jsonRet._HASH_)})},error:function(jsonRet){$("#iq_submit_lead_button").find(".alert").slideDown(),$("#iq_submit_lead_button").html(originaltext).attr("disabled",!1)}})},ToggleMenu:function(){var oWrapper=$(".iq-kiosk-searchmenu");"-400px"===$(oWrapper).css("right")?($("#iq_kiosk_menu_toggle").removeClass("fa-bars"),$("#iq_kiosk_menu_toggle").addClass("fa-times"),$(oWrapper).animate({right:0},500)):($("#iq_kiosk_menu_toggle").addClass("fa-bars"),$("#iq_kiosk_menu_toggle").removeClass("fa-times"),$(oWrapper).animate({right:-400},500))},init_autocomplete:function(){$("#multifield_autocomplete").on("keyup",function(e){""===$("#multifield_autocomplete").iqFieldValue()&&$.iqKiosk.clear_autocomplete(),13===e.keyCode&&$.iqKiosk.get_autocomplete_values()}),$("#iq_res_criteria_form").iqMultiFieldAutocomplete({mlsid:$("#iq_res_criteria_form-mlsid").iqFieldValue(),propertytype:"residential",state:"",county:"",city:"",area:"",zip_code:"",street_address:"",ml_number:"",appendto:$(this).attr("data-appendto"),callback:function(a){$.iqKiosk.update_location(a)},fields:"state,county,city,zip_code,communityname,area,schooldistrict",async:!0})},update_location:function(){$("#iq_res_criteria_form-state").iqFieldValue($("#iq_res_criteria_form").data("data-state")),$("#iq_res_criteria_form-county").iqFieldValue($("#iq_res_criteria_form").data("data-county")),$("#iq_res_criteria_form-city").iqFieldValue($("#iq_res_criteria_form").data("data-city")),$("#iq_res_criteria_form-zip_code").iqFieldValue($("#iq_res_criteria_form").data("data-zip_code")),$("#iq_res_criteria_form-area").iqFieldValue($("#iq_res_criteria_form").data("data-area")),$("#iq_res_criteria_form-schooldistrict").iqFieldValue($("#iq_res_criteria_form").data("data-schooldistrict")),$("#iq_res_criteria_form-communityname").iqFieldValue($("#iq_res_criteria_form").data("data-communityname")),$.iqKiosk.criteria_search("t")},get_autocomplete_values:function(){var searchby=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-searchby"),searchvalue=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-searchvalue");$("#multifield_autocomplete").iqFieldValue(searchby+": "+searchvalue),$("#iq_res_criteria_form-city").iqFieldValue(searchvalue),$(".iq-dropdown-menuitem").each(function(){$(this).remove()})},clear_autocomplete_form:function(){$("#iq_res_criteria_form").data("data-state",""),$("#iq_res_criteria_form").data("data-county",""),$("#iq_res_criteria_form").data("data-city",""),$("#iq_res_criteria_form").data("data-zip_code",""),$("#iq_res_criteria_form").data("data-area",""),$("#iq_res_criteria_form").data("data-schooldistrict",""),$("#iq_res_criteria_form").data("data-communityname",""),$("#multifield_autocomplete").iqFieldValue(""),$("#iq_res_criteria_form-county").iqFieldValue(""),$("#iq_res_criteria_form-city").iqFieldValue(""),$("#iq_res_criteria_form-zip_code").iqFieldValue(""),$("#iq_res_criteria_form-area").iqFieldValue(""),$("#iq_res_criteria_form-schooldistrict").iqFieldValue(""),$("#iq_res_criteria_form-communityname").iqFieldValue(""),$.iqKiosk.criteria_search("t")},update_searchform:function(search_criteria){var search_criteria=JSON.parse(search_criteria),layout=search_criteria.listingslayout;switch(search_criteria.searchby.toLowerCase()){case"state":$("#iq_res_criteria_form-state").iqFieldValue(search_criteria.searchvalue);break;case"county":$("#iq_res_criteria_form-county").iqFieldValue(search_criteria.searchvalue);break;case"city":$("#iq_res_criteria_form-city").iqFieldValue(search_criteria.searchvalue);break;case"zip_code":case"zipcode":$("#iq_res_criteria_form-zip_code").iqFieldValue(search_criteria.searchvalue);break;case"area":$("#iq_res_criteria_form-area").iqFieldValue(search_criteria.searchvalue);break;case"communityname":$("#iq_res_criteria_form-communityname").iqFieldValue(search_criteria.searchvalue);break;case"schooldistrict":$("#iq_res_criteria_form-schooldistrict").iqFieldValue(search_criteria.searchvalue)}""!==search_criteria.searchby&&$("#multifield_autocomplete").iqFieldValue(search_criteria.searchby+": "+search_criteria.searchvalue),$("#iq_res_criteria_form-pricemin").iqFieldValue(search_criteria.pricemin),$("#iq_res_criteria_form-pricemax").iqFieldValue(search_criteria.pricemax),$("#iq_res_criteria_form-sqfootmin").iqFieldValue(search_criteria.sqfootmin),$("#iq_res_criteria_form-sqfootmax").iqFieldValue(search_criteria.sqfootmax),$("#iq_res_criteria_form-beds").iqFieldValue(search_criteria.beds),$("#iq_res_criteria_form-baths").iqFieldValue(search_criteria.baths),$("#iq_res_criteria_form-openhouse").iqFieldValue(search_criteria.openhouse),$("#iq_res_criteria_form-waterfront").iqFieldValue(search_criteria.waterfront),$("#iq_res_criteria_form-golfcourse").iqFieldValue(search_criteria.golfcourse),$("#iq_res_criteria_form-propertyview").iqFieldValue(search_criteria.propertyview),$("#iq_res_criteria_form-listingslayout").iqFieldValue(search_criteria.listingslayout),$("#iq_res_criteria_form-listingsbanner").iqFieldValue(search_criteria.listingsbanner),$("#iq_res_criteria_form-showallproperties").iqFieldValue(search_criteria.showallproperties),$("#iq_res_criteria_form-previews").iqFieldValue(search_criteria.previews),$("#iq_res_criteria_form-propertytype").iqFieldValue(search_criteria.propertytype),$("#iq_res_criteria_form-acreage").iqFieldValue(search_criteria.acreage),$("#iq_kiosk_searches").hide(),$("#iq_kiosk_footer").hide(),$("#iq_results_content").show(),"residential"!==search_criteria.propertytype&&$(".iq-kiosk-menu-button").remove(),$.iqKiosk.criteria_search("f",layout)},criteria_search:function(countonly,layout){void 0===countonly&&(countonly="f"),void 0===layout&&(layout=$("#iq_res_criteria_form-listingslayout").iqFieldValue());var images=0;"grid_luxury"===layout&&(images=3);var oDataDefaults={returnformat:"json",method:"docriteriasearch",layout:layout,countonly:countonly,images:images,impression_from:"Kiosk Search Results",return_query:!0},oDataFields=$("#iq_res_criteria_form").iqSerializeFormToStruct({includeblanks:!1}),oData=$.extend(oDataDefaults,oDataFields);oData.sqfoot=$("#iq_res_criteria_form-sqfootmin").iqFieldValue()+"-"+$("#iq_res_criteria_form-sqfootmax").iqFieldValue(),"f"===countonly?"1"===$("#iq_res_criteria_form-startpage").iqFieldValue()&&$.iqKiosk.processing("open"):$("#iq_listings_found").html('<i class="fa fa-fw fa-refresh fa-spin"></i>'),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){if("f"===countonly){var oWrapper=$(".iq-kiosk-searchmenu");"0px"===$(oWrapper).css("right")&&($("#iq_kiosk_menu_toggle").addClass("fa-bars"),$("#iq_kiosk_menu_toggle").removeClass("fa-times"),$(oWrapper).animate({right:-400},500))}switch(jsonRet.STATUS){case 0:$.iqKiosk.processing("close"),$(".iq-kiosk-menu").show();var listingsbanner=$("#iq_res_criteria_form-listingsbanner").iqFieldValue();if(""!==listingsbanner&&($("#iq_listingsbanner_default").hide(),$("#iq_listingsbanner").find("h4").text(listingsbanner),$("#iq_listingsbanner").show()),$("#iq_countsql").data("totalrowcount",jsonRet.TOTALROWCOUNT),"f"===countonly){var startpage=parseInt($("#iq_res_criteria_form-startpage").val()),kiosk_layout=$("#iq_kiosk").data("layout");if(1==startpage){if("1"==kiosk_layout)$("#iq_results_content").html(jsonRet.LAYOUT),$("#iq_results_content").prepend('<a name="1" class="hidden-sm hidden-xs"> </a>');else{var html_results='<div id="iq_listings_carousel" class="carousel slide" data-ride="carousel" data-bs-ride="carousel" data-interval="false" data-bs-interval="false" data-currentpage="1" data-maxpage="1" data-lastpage="">';html_results+='\t<div id="iq_listings_carousel_inner" class="carousel-inner">',html_results+='\t\t<div class="item iq-luxury-carousel-inner active">'+jsonRet.LAYOUT+"</div>",html_results+="\t</div>",html_results+='\t<a class="left carousel-control iq-carousel-left" href="#iq_listings_carousel" data-slide="prev" style="display:none;">',html_results+='\t\t<span id="iq_listings_carousel_prev" class="glyphicon glyphicon-chevron-left"></span>',html_results+='\t\t<span class="sr-only">Previous</span>',html_results+="\t</a>",html_results+='\t<a class="right carousel-control iq-carousel-right" href="#iq_listings_carousel" data-slide="next">',html_results+='\t\t<span id="iq_listings_carousel_next" class="glyphicon glyphicon-chevron-right"></span>',html_results+='\t\t<span class="sr-only">Next</span>',html_results+="\t</a>",html_results+="</div>",$("#iq_results_content").html(html_results);var maxrows=$("#iq_res_criteria_form-maxrows").iqFieldValue(),lastpage=Math.round(jsonRet.TOTALROWCOUNT/maxrows);$("#iq_listings_carousel").data("lastpage",lastpage),parseInt(jsonRet.TOTALROWCOUNT)<=parseInt(maxrows)&&$(".iq-carousel-right").hide(),$("#iq_listings_carousel").swipe({swipe:function(event,direction,distance,duration,fingerCount,fingerData){var currentpage=parseInt($("#iq_listings_carousel").data("currentpage")),lastpage=parseInt($("#iq_listings_carousel").data("lastpage"));"left"===direction&&currentpage<lastpage&&$("#iq_listings_carousel_next").trigger("click"),"right"===direction&&currentpage>1&&$("#iq_listings_carousel_prev").trigger("click")}}),$("#iq_listings_carousel_next").on("click",function(){var currentpage=parseInt($("#iq_listings_carousel").data("currentpage")),maxpage=parseInt(startpage),lastpage=parseInt($("#iq_listings_carousel").data("lastpage"));$("#iq_listings_carousel").data("currentpage",parseInt(currentpage)+1),1===currentpage&&$(".iq-carousel-left").show(),currentpage+1===lastpage?$(".iq-carousel-right").hide():$(".iq-carousel-right").show(),currentpage>=maxpage?($.iqKiosk.processing("open"),$("#iq_res_criteria_form-startpage").iqFieldValue(parseInt(startpage)+currentpage),$("#iq_listings_carousel").data("maxpage",parseInt(startpage)),$.iqKiosk.criteria_search()):$("#iq_listings_carousel").carousel("next")}),$("#iq_listings_carousel_prev").on("click",function(){var currentpage=parseInt($("#iq_listings_carousel").data("currentpage"))-1;$("#iq_listings_carousel").data("currentpage",parseInt(currentpage)),$("#iq_listings_carousel").carousel("prev"),$(".iq-carousel-right").show(),1===currentpage&&$(".iq-carousel-left").hide()}),$("#iq_listings_carousel").bind("slid.bs.carousel",function(e){"iq_listings_carousel"===$(e.target).attr("id")&&$(".iq-listings-carousel").each(function(){$(this).is(":visible")&&$(this).find(".carousel-inner .item:first").addClass("active")})})}$("#iq_kiosk_menu_toggle").show()}else if("1"==kiosk_layout)$("#iq_results_content").append('<a name="'+startpage+'"> </a>'),$("#iq_results_content").append(jsonRet.LAYOUT);else{var lastpage=$("#iq_listings_carousel").data("lastpage");parseInt(1)===parseInt(lastpage)?$(".iq-carousel-right").hide():$(".iq-carousel-right").show(),$("#iq_listings_carousel #iq_listings_carousel_inner").append('<div class="item iq-luxury-carousel-inner">'+jsonRet.LAYOUT+"</div>"),$("#iq_listings_carousel").carousel("next")}$(".iq-kiosk-menu-button").show(),$("#iq_listings_found").html(jsonRet.TOTALROWCOUNT)}else $("#iq_listings_found").html(jsonRet.TOTALROWCOUNT);$.iqKiosk.init_isvisible(),$.iqKiosk.carousel_lazyload(),$.iqKiosk.init_timers();break;case 1:$("#iq_results_content").html(jsonRet.CONTENT);break;case 2:$("#iq_results_content").html(jsonRet.MESSAGE)}},error:function(httpRet){$.iqKiosk.processing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_results_content").html(httpRet.CONTENT):$("#iq_results_content").html(httpRet.responseText)}})},init_isvisible:function(){$(".iq-listings-list-card-wrap").iqVisibleCallback({threshold:150,bindto:$("#iq_kiosk"),callback:function(pElement){$.iqKiosk.isvisible(pElement)}}),$(".iq-listings-grid-card-wrap").iqVisibleCallback({threshold:150,bindto:$("#iq_kiosk"),callback:function(pElement){$.iqKiosk.isvisible(pElement)}})},isvisible:function(pElement){var elmFirst=null,elmSecond=null,elmLast=null,num_images=$("[data-ml_number]").length;elmFirst=$(pElement).find(".item").eq(0),void 0!==elmFirst.attr("data-background")&&elmFirst.css({"background-image":"url("+elmFirst.attr("data-background")+")"}),elmSecond=$(pElement).find(".item").eq(1),void 0!==elmSecond.attr("data-background")&&elmSecond.css({"background-image":"url("+elmSecond.attr("data-background")+")"}),elmLast=$(pElement).find(".item").eq(num_images),void 0!==elmLast.attr("data-background")&&elmLast.css({"background-image":"url("+elmLast.attr("data-background")+")"});var kioskLayout=$("#iq_kiosk").attr("data-layout"),currListing=1,lastListing=0,totalRowCount=0,trcAttr=$("#iq_countsql").attr("data-totalrowcount");if(0!==$(".iq-listings-grid-card-wrap").length&&(currListing=$(pElement).data("rownumber"),lastListing=$(".iq-listings-grid-card-wrap").last().data("rownumber")),0!==$(".iq-listings-list-card-wrap").length&&(currListing=$(pElement).data("rownumber"),lastListing=$(".iq-listings-list-card-wrap").last().data("rownumber")),void 0!==trcAttr&&!1!==trcAttr&&(totalRowCount=$("#iq_countsql").data("totalrowcount")),currListing===lastListing&&currListing<totalRowCount&&lastListing>1&&num_images<totalRowCount&&"1"===kioskLayout){var startpage=parseInt($("#iq_res_criteria_form-startpage").iqFieldValue());$("#iq_res_criteria_form-startpage").iqFieldValue(startpage+1),$.iqKiosk.criteria_search()}},carousel_lazyload:function(){$(".iq-listings-carousel").each(function(){$(this).on("slide.bs.carousel",function(){$(this).find("[data-background]").each(function(){var elm=$(this);void 0!==elm.attr("data-background")&&elm.css({"background-image":"url("+elm.attr("data-background")+")"})})})})},loadKioskListingDetails:function(mlsid,listingid){return $.iqKiosk.processing("open"),setTimeout(function(){try{$.ajax({url:"/components/listing.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"getListingDetails",mlsid:mlsid,listingid:listingid,layout:"fulldetails_kiosk",view_from:"Kiosk Details"},success:function(jsonRet){if($.iqKiosk.processing("close"),0===jsonRet.STATUS){var oListing=$('[data-mls="'+mlsid+'"][data-listingid="'+listingid+'"]');$.iqListings.current_row=$(oListing).data("rownumber");var pageview_url=$(oListing).data("url"),pageview_Title=$(oListing).data("streetaddress")+" | "+$(oListing).data("city")+" Real Estate";$.iqListings.send_pageview(pageview_url,pageview_Title);var modalCount=$(".edit-modal").length;1==modalCount?$("#editModal_content_"+modalCount).html(jsonRet.LAYOUT):$.iqEditPopout("open",jsonRet.LAYOUT),$('[data-toggle="floatLabel"]').attr("data-value",$('[data-toggle="floatLabel"]').val()).on("keyup change",function(){$(this).attr("data-value",$(this).val())}),$(".iq-lead-form").each(function(){$(this).iqForm_Rules()}),$(".iq-lead-form input").each(function(index,element){"phonenumber"===$(element).attr("data-datatype")&&$(element).mask("(999) 999-9999")}),$(".iq-request-showing-form").each(function(){var obj=this,olead_container_fadein=$(this).attr("data-fadein"),oleadform=$(this).attr("data-leadform"),oscheduleform=$(this).attr("data-scheduleform");$(this).find(".iq-request-showing-date").each(function(){$(this).on("click",function(){$.iqKiosk.toggleLeads("schedule",oleadform),$.iqKiosk.selectDate($(this)),$(".iq-dynamicsource-leadform-banner").is(":visible")&&$(oleadform).parent().slideUp()})}),$(this).find(".iq-request-showing-time").each(function(){$(this).on("click",function(){"disabled"!==$(this).find("input[name=iq-showingtime]").attr("disabled")&&($(obj).parent().is(":visible")&&$(obj).parent().fadeOut(function(){$(olead_container_fadein).fadeIn(),$(oleadform).attr("data-currentleadtype",$(oleadform).attr("data-website-request-showing"))}),$.iqKiosk.toggleLeads("schedule",oleadform),$.iqKiosk.selectTime($(this),oleadform,oscheduleform))})})}),$("#iq_listing_details_wrapper").on("click",function(){$.iqKiosk.init_timers()}),$("form").on("keyup",function(){$.iqKiosk.init_timers()}),$.iqKiosk.setTimeButtons(),$.iqKiosk.affix_listing_header(),$.iqListing.carousel_load()}},error:function(jsonRet){$.iqKiosk.processing("close"),void 0===jsonRet.MESSAGE?($("#iq_listing_dialog .container").html(jsonRet),$("#iq_listing_dialog_v2 .modal-dialog").html(jsonRet)):($("#iq_listing_dialog .container").html(jsonRet.MESSAGE),$("#iq_listing_dialog_v2 .modal-dialog").html(jsonRet.MESSAGE))}})}catch(err){$.iqKiosk.processing("close"),$.iqUtils.uiMessage("Error","Error: "+err.message,5e3)}},2e3),!1},register_dialog:function(){$.iqKiosk.processing("open"),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"kiosk_registration"},success:function(jsonRet){$.iqKiosk.processing("close");var modalCount=$(".edit-modal").length;1==modalCount?$("#editModal_content_"+modalCount).html(jsonRet.LAYOUT):($.iqEditPopout("open",jsonRet.LAYOUT),$("#iq_kiosk_registration_form").iqForm_Rules())},error:function(jsonRet){$.iqKiosk.processing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_results_content").html(httpRet.CONTENT):$("#iq_results_content").html(httpRet.responseText)}})},register:function(){var oDataDefaults={ReturnFormat:"json",Method:"create"},oDataLead=$("#iq_kiosk_registration_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataLead);oData.userid=$("#iq_kiosk_registration_form-emailaddress").iqFieldValue(),oData.password="password-"+Math.floor(1e3*Math.random()),$("#iq_kiosk_registration_form_container").hide(),$("#iq_kiosk_registration_processing").fadeIn(),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(jsonRet){$("#iq_kiosk_registration_processing").hide(),0===jsonRet.STATUS?($("#iq_kiosk_registration_complete").fadeIn(),$.iqUtils.cookie("PW_ISAUTHED",!0,365),$.iqUtils.cookie("CONTACTID",jsonRet.CONTACTID),$.iqUtils.cookie("FIRSTNAME",oData.firstname),$.iqUtils.cookie("LASTNAME",oData.lastname),$.iqUtils.cookie("USERID",oData.userid),$.iqKiosk.send_credentials(oData.emailaddress),$.iqKiosk.save_watch(jsonRet.CONTACTID),$.iqKiosk.init_timers()):($("#iq_kiosk_registration_error").fadeIn(),$("#iq_kiosk_registration_errormessage").html(jsonRet.MESSAGE))},error:function(){$("#iq_kiosk_registration_error").fadeIn(),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_kiosk_registration_errormessage").html(httpRet.CONTENT):$("#iq_kiosk_registration_errormessage").html(httpRet.responseText)}})},send_credentials:function(userid){$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",userid:userid,Method:"credentials"},success:function(jsonRet){},error:function(jsonRet){$.iqKiosk.processing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_results_content").html(httpRet.CONTENT):$("#iq_results_content").html(httpRet.responseText)}})},save_watch:function(contactid){var oDataDefaults={ReturnFormat:"json",Method:"save_watch"},oDataLead=$("#iq_res_criteria_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataLead);oData.contactid=contactid,oData.watchname=$("#iq_kiosk_registration_form-watchname").iqFieldValue(),oData.city=$("#multifield_autocomplete").iqFieldValue(),oData.pricemin=$("#iq_res_criteria_form-pricemin").iqFieldValue(),oData.pricemax=$("#iq_res_criteria_form-pricemax").iqFieldValue(),oData.sq_foot=$("#iq_res_criteria_form-sqfootmin").iqFieldValue()+"-"+$("#iq_res_criteria_form-sqfootmax").iqFieldValue(),oData.beds=$("#iq_res_criteria_form").find("input[name=beds]").iqFieldValue(),oData.baths=$("#iq_res_criteria_form").find("input[name=baths]").iqFieldValue(),oData.openhouse=$("#iq_res_criteria_form").find("input[name=openhouse]").iqFieldValue(),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(jsonRet){jsonRet.STATUS},error:function(){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_results_content").html(httpRet.CONTENT):$("#iq_results_content").html(httpRet.responseText)}})},affix_listing_header:function(){var threshhold=$("#iq-listing-info-affix").offset().top-$(window).scrollTop();$("#iq-listing-info-affix").attr("data-offset-top",threshhold),$("#iq_listing_details_wrapper").parent().on("scroll",function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)?$("#iq_listing_details_wrapper").parent().scrollTop()<=threshhold?$("#iq-listing-info-affix").hasClass("affix")&&($("#iq-listing-info-affix").removeClass("affix"),$("#iq-listing-info-affix").removeClass("iq-listing-head"),$("#iq-listing-info-affix").removeClass("iq-kiosk"),$("#iq-listing-info-affix").prependTo(".iq-listing-head"),$("#iq_listing_thumb").hide(),$("#iq-listing-info-affix").css({width:"initial","padding-top":"initial","box-shadow":"none"}),$(".iq-listing-head").css({"z-index":"initial"})):$("#iq-listing-info-affix").hasClass("affix")||($("#iq-listing-info-affix").prependTo("body"),$("#iq-listing-info-affix").addClass("affix"),$("#iq-listing-info-affix").addClass("iq-listing-head"),$("#iq-listing-info-affix").addClass("iq-kiosk"),$("#iq_listing_thumb").show(),$("#iq-listing-info-affix").css({width:$("#iq_listing_details_wrapper").parent().width(),"padding-top":"10px","box-shadow":"0px 5px 5px -5px rgba(0,0,0, .5)"})):$("#iq_listing_details_wrapper").parent().scrollTop()<=threshhold?$("#iq-listing-info-affix").hasClass("affix")&&($("#iq-listing-info-affix").removeClass("affix"),$("#iq_listing_thumb").hide(),$("#iq-listing-info-affix").css({width:"initial","padding-top":"initial","box-shadow":"none"}),$(".iq-listing-head").css({"z-index":"initial"})):$("#iq-listing-info-affix").hasClass("affix")||($("#iq-listing-info-affix").addClass("affix"),$("#iq_listing_thumb").show(),$("#iq-listing-info-affix").css({width:$("#iq_listing_details_wrapper").parent().width(),"padding-top":"10px","box-shadow":"0px 5px 5px -5px rgba(0,0,0, .5)"})),$.iqKiosk.init_timers()})},savelead:function(oLeadForm){var oDataDefaults={ReturnFormat:"json",Method:"postlead"},oDataLead=$(oLeadForm).iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataLead),fullname=oData.fullname.split(" ");fullname.length>1?(oData.firstname=fullname[0],oData.lastname=fullname[1]):oData.firstname=fullname[0];var _spaceregex=new RegExp(" ","g"),sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-");try{sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-")+"/"+oData.firstname.toLowerCase().replace(_spaceregex,"_")+"-"+oData.lastname.toLowerCase().replace(_spaceregex,"_")}catch(e){}var originaltext=$(oLeadForm).find(".iq-kiosk-submit-lead").html();return $(oLeadForm).find(".iq-kiosk-submit-lead").html('<i class="fa fa-fw fa-refresh fa-spin"></i> processing').attr("disabled",!0),$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(jsonRet){0===jsonRet.STATUS||2===jsonRet.STATUS?($(".iq-leadform-page1").fadeOut(function(){switch($(".iq-leadform-page2").fadeIn(),""!==$(oLeadForm).find("input[name=emailaddress]").iqFieldValue()&&$(".iq-email-this-property-container").show(),""!==$(oLeadForm).find('input[name="mobilephone"]').iqFieldValue()&&$(".iq-text-this-property-container").show(),$(".iq-property-emailing").hide(),$(".iq-property-texting").hide(),$(oLeadForm).attr("data-currentleadtype",""),oData.sourcename.toLowerCase()){case"website send flyer":$(".iq-property-emailed").show(),$(".iq-email-this-property-button").prop("disabled",!0);break;case"website send text":$(".iq-property-texted").show(),$("#iq-text-this-property-button").prop("disabled",!0)}}),$(oLeadForm).find("#iq-kiosk-submit-lead").html(originaltext).attr("disabled",!1),$(oLeadForm).find("input[name=_hash_]").iqFieldValue(jsonRet.HASH)):($(oLeadForm).find(".alert").slideDown(),$(oLeadForm).find("button[type=button]").html(originaltext).attr("disabled",!1)),$.iqUtils.analyticsPageView({page_title:oData.sourcename,page_location:self.location.origin+"/lead-entry/"+sourcenameurl,page_path:"/lead-entry/"+sourcenameurl}),$.iqUtils.analyticsLeadConvert({lead_source:oData.sourcename})},error:function(){$(oLeadForm).find(".alert").slideDown(),$(oLeadForm).find(".iq-kiosk-submit-lead").html(originaltext).attr("disabled",!1)}}),!1},email:function(oLeadForm){$(oLeadForm).find("input[name=sourcename]").iqFieldValue($(oLeadForm).attr("data-website-send-flyer")),$(".iq-property-emailing").show(),$(".iq-property-emailed").hide(),$.iqKiosk.savelead(oLeadForm)},text:function(oLeadForm){$(oLeadForm).find("input[name=sourcename]").iqFieldValue($(oLeadForm).attr("data-website-send-text")),$(".iq-property-texting").show(),$(".iq-property-texted").hide(),$.iqKiosk.savelead(oLeadForm)},close_lead_form:function(oLeadForm){$(oLeadForm).parent().slideUp(function(){$(".iq-email-this-home").hide(),$(".iq-schedule-this-home").hide(),$(".iq-text-this-home").hide(),$(".iq-property-emailed").hide(),$(".iq-property-emailing").hide(),$(".iq-property-texted").hide(),$(".iq-property-texting").hide(),$(".iq-leadform-page1").show(),$(".iq-leadform-page2").fadeOut(),$(oLeadForm)[0].reset(),$(".iq-request-showing-form-container").fadeIn(),$(".iq-text-this-property-button").prop("disabled",!1),$(".iq-email-this-property-button").prop("disabled",!1)})},getScrollBarWidth:function(){var $outer=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),widthWithScroll=$("<div>").css({width:"100%"}).appendTo($outer).outerWidth();return $outer.remove(),100-widthWithScroll},processing:function(action){$(".iq-loader")[0]||$("body").prepend('<div class="iq-loader"><div class="iq-loader-inner"><div class="iq-loader-wrapper"><div class="iq-loader-animation"></div></div></div></div>'),"open"===action?($(".iq-loader").show(),$(".iq-loader").css({"background-color":"transparent",visibility:"visible"})):$(".iq-loader").hide()}}}(jQuery);
//# sourceMappingURL=kiosk.min.js.map
;
/* file: ../assets/js/min/leads.min.js */
!function($){"use strict";$(document).ready(function(){var oLeadForm=$("#iq_lead_form");oLeadForm.length>0&&$(oLeadForm).iqForm_Rules()}),$.iqLeads={save_callback:null,fbUserCreate:function(userinfo){$('form[name="iq_lead_form"]').each(function(index,element){if(1===$(element).find("#iq-facebook-login").length)return $(element).find("#iq_lead_form-firstname").iqFieldValue(userinfo.firstname),$(element).find("#iq_lead_form-lastname").iqFieldValue(userinfo.lastname),$(element).find("#iq_lead_form-email").iqFieldValue(userinfo.email),$(element).find("#iq_lead_form-fullname").iqFieldValue(userinfo.firstname+" "+userinfo.lastname),$(element).find("#iq_lead_form-emailaddress").iqFieldValue(userinfo.email),$(element).find("#iq_lead_form-userid").iqFieldValue(userinfo.email),$(element).find("#iq_lead_form-password").iqFieldValue($.iqUtils.left(userinfo.password,16)),$(element).find("#iq_lead_form-passwordagain").iqFieldValue($.iqUtils.left(userinfo.password,16)),"registration"===$(element).data("leadsource-layout")&&($("#iq_lead_form-phonenumber").data("required",!1),$(element).find("#iq_lead_form-password").iqFieldValue($.iqUtils.left(userinfo.password,16))),$(element).find("#iq_lead_form-submit").trigger("click"),!1})},fbUserLogin:function(userinfo){$("#iq_myportal_login_form-userid").iqFieldValue(userinfo.email),$("#iq_myportal_login_form-password").iqFieldValue($.iqUtils.left(userinfo.password,16)),$("#iq_myportal_login_form-submit").trigger("click")},dialog:function(oOptions){var sourcename=oOptions.sourcename||"",title=oOptions.title||sourcename,mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"",publicid=oOptions.publicid||"",mlsid=oOptions.mlsid||"",agentteamid=oOptions.agentteamid||"",requiredonly=oOptions.requiredonly||!1,callback=oOptions.callback||null,method=oOptions.method||"leadform",backdrop=void 0===oOptions.backdrop||oOptions.backdrop,maxwidth=oOptions.maxwidth||"",url=oOptions.url||window.location.href;if($.iqLeads.save_callback=callback,$(document).on("focusin.modal",function(){$(document).off("focusin.modal")}),""===sourcename)return $.iqUtils.uiMessage("Missing sourcename Attribute"),!1;"leadform_registration"===method&&(maxwidth="600px");$("#iq_lead_dialog").bsModal({backdrop:backdrop,title:title,maxwidth:maxwidth,body:'<div class="row"><div id="iq_leads_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-vs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading</h1></div></div>'}),$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,cache:!1,data:{ReturnFormat:"json",Method:method,sourcename:sourcename,mlnumber:mlnumber,propertytype:propertytype,mlsid:mlsid,publicid:publicid,agentteamid:agentteamid,trackingid:$.iqUtils.cookie("TRACKINGID"),requiredonly:requiredonly,url:url},success:function(jsonRet){if($("#iq_lead_dialog_title").text(jsonRet.DISPLAYTITLE),0===jsonRet.STATUS?jsonRet.LAYOUT:jsonRet.CONTENT,$("#iq_lead_dialog .modal-body").html(jsonRet.LAYOUT),"leadform_registration"===method){if(window.location.href.toString().toLowerCase().indexOf("ppc=true")>-1||"true"==$.iqUtils.cookie("ppc"))var registration_type=$("[data-ppc-registration-type]").attr("data-ppc-registration-type");else var registration_type=$("[data-registration-type]").attr("data-registration-type");void 0!==registration_type&&registration_type.indexOf("forced")>-1&&($("#iq_lead_dialog .modal-header button").on("click",function(){self.location="/"}),$("#iq_lead_dialog").on("hidden.bs.modal",function(e){self.location="/"}))}$.iqFaceBook.appids[$_companyid]&&$("#iq-facebook-login").parent().show(),$("#iq_lead_dialog .modal-footer").hide(),$("#iq_lead_dialog #iq_lead_form").iqForm_Rules(),$("#iq_lead_dialog").css({"z-index":"13000",display:"block"}),$("#iq_lead_dialog .modal-content").css({"margin-top":"100px"}),$("#iq_lead_dialog :input").each(function(){"phonenumber"===$(this).attr("data-datatype")&&$(this).mask("(999) 999-9999")})},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage(httpRet.MESSAGE):$.iqUtils.uiMessage(httpRet.responseText)}})},layout:function(oOptions){var sourcename=oOptions.sourcename||"",mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"",publicid=oOptions.publicid||"",mlsid=oOptions.mlsid||"",agentteamid=oOptions.agentteamid||"",requiredonly=oOptions.requiredonly||!1,method=oOptions.method||"leadform",url=oOptions.url||window.location.href;if(""===sourcename)return{STATUS:1,MESSAGE:"Missing sourcename Attribute",DETAIL:"Missing sourcename Attribute",Content:'<h1 class="text-danger text-center">Missing sourcename Attribute</h1>'};var ret={STATUS:1,MESSAGE:"",DETAIL:"",CONTENT:""};return $.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!1,cache:!1,data:{ReturnFormat:"json",Method:method,sourcename:sourcename,mlnumber:mlnumber,propertytype:propertytype,mlsid:mlsid,publicid:publicid,agentteamid:agentteamid,trackingid:$.iqUtils.cookie("TRACKINGID"),requiredonly:requiredonly,url:url},success:function(jsonRet){ret=jsonRet},error:function(httpRet,err){ret={STATUS:1,MESSAGE:err.message,DETAIL:err.detail,CONTENT:httpRet}}}),ret},save:function(oForm){var oDataDefaults={ReturnFormat:"json",Method:"PostLead"},oDataLead=null;oDataLead=void 0!==oForm?$(oForm).iqSerializeFormToStruct():$("#iq_lead_form").iqSerializeFormToStruct();var oData=$.extend(oDataDefaults,oDataLead);if("registration"===$(oForm).attr("data-leadsource-layout")){var fullname=$("#iq_lead_form-fullname").iqFieldValue().trim();fullname=fullname.split(" "),fullname.length>1?(oData.firstname=fullname[0],oData.lastname=fullname[1]):oData.firstname=fullname[0],"property watch"!==$(oForm).attr("data-leadsource").toLowerCase()&&"my portal"!==$(oForm).attr("data-leadsource").toLowerCase()&&"propertywatch"!==$(oForm).attr("data-leadstemplate").toLowerCase()||("1"===oData.password&&(oData.password=oData.phonenumber.replace(/[^0-9.]/g,"")),oData.userid=oData.emailaddress,oData.sendmyportalcredentials="T"),"website send text"===$(oForm).attr("data-leadsource").toLowerCase()&&($.iqUtils.cookie("fromname",$("#iq_lead_form-fullname").iqFieldValue()),$.iqUtils.cookie("fromnumber",$("#iq_lead_form-mobilenumber").iqFieldValue()),$.iqUtils.cookie("toname",$("#iq_lead_form-toname").iqFieldValue()),$.iqUtils.cookie("tonumber",$("#iq_lead_form-tonumber").iqFieldValue()))}var _spaceregex=new RegExp(" ","g"),sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-");try{sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-")+"/"+oData.firstname.toLowerCase().replace(_spaceregex,"_")+"-"+oData.lastname.toLowerCase().replace(_spaceregex,"_")}catch(e){}return $(oForm).parent().css({position:"relative",height:oForm.parent().height()}),$(oForm).parent().append('<div class="iq-lead-progress" style="position:absolute; top:0px; display:none;"><table cellpadding="0" cellspacing="0" width="'+oForm.parent().width()+'" height="'+oForm.parent().height()+'"><tr><td><h4 class="iq-lead-progress-text text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Submitting your request</h4></td></tr></table></div>'),$(oForm).hide(),$(".iq-lead-progress").fadeIn("2000"),$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(jsonRet){console.log("ajax PostLead Success!"),console.log(jsonRet),0===jsonRet.STATUS||2===jsonRet.STATUS?($("#iq_lead_dialog").length&&($("#iq_lead_dialog").remove(),$(".modal-backdrop").remove(),$("#iqListingsContainer").length&&($("#iqListingsContainer").removeClass("iq-blur"),$("#iq_listing_dialog").removeClass("iq-blur"),$("#iq_listing_dialog_v2").removeClass("iq-blur")),$("#iq_listing").length&&$("#iq_listing").removeClass("iq-blur")),$(".iq-lead-progress-text").fadeOut(1e3,function(){$(".iq-lead-progress-text").html('Your request has been sent.<br> A representative will contact you shortly.<div style="clear:both; margin-top:20px;"><button id="iq_lead_submitted_button" class="btn btn-success">OK</button></button>'),$("#iq_lead_submitted_button").on("click",function(){$(".iq-lead-progress").remove(),$(oForm).show()}),$(".iq-lead-progress-text").fadeIn(1e3,function(){$(".iq-lead-progress-text").delay(4e3).fadeOut(1e3,function(){$(".iq-lead-progress").remove(),$(oForm).show()})})}),$.iqLeads.save_callback&&$.iqLeads.save_callback.call(this,jsonRet)):($(oForm).find("#iq_lead_form-_hash_").iqFieldValue(jsonRet.HASH),$(".iq-lead-progress-text").html("<div>"+jsonRet.MESSAGE+'</div><div style="clear:both; margin-top:20px;"><button id="iq_lead_submitted_button" class="btn btn-success">OK</button>'),$("#iq_lead_submitted_button").on("click",function(){$(".iq-lead-progress").remove(),$(oForm).show()})),$.iqUtils.analyticsPageView({page_title:oData.sourcename,page_location:self.location.origin+"/lead-entry/"+sourcenameurl,page_path:"/lead-entry/"+sourcenameurl}),$.iqUtils.analyticsLeadConvert({lead_source:oData.sourcename})},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("Error",httpRet.CONTENT):$.iqUtils.uiMessage("Error",httpRet.responseText)}}),!1},validate:function(oForm){$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",async:!1,cache:!1,data:{ReturnFormat:"json",Method:"validate",authcode:$.iqUtils.localStorage("sms_authcode"),mobilenumber:$(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue()},success:function(jsonRet){switch(jsonRet.STATUS){case 0:$.iqLeads.save(oForm);break;case 2:$("#iq_validation_phonenumber").html($(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue()),$('[data-leadsource-carousel="'+$(oForm).attr("data-leadsource")+'"]').carousel(1),$.iqLeads.init_leadsource_carousel()}},error:function(httpRet,err){ret={STATUS:1,MESSAGE:err.message,DETAIL:err.detail,CONTENT:httpRet}}})},get_validation_code:function(oForm){$("#iq_validation_code").html('<i class="fa fa-fw fa-refresh fa-spin"> </i>Sending Code to '+$(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue()),$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",async:!0,cache:!1,data:{ReturnFormat:"json",Method:"get_validation_code",mobilenumber:$(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS&&(console.log($(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue()),$("#iq_validation_code").hide(),$("#iq_validate_step1").hide(),$("#iq_validate_step2").show(),$("#iq_validate_step2 #iq_validation_phonenumber").text($(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue()))},error:function(httpRet,err){ret={STATUS:1,MESSAGE:err.message,DETAIL:err.detail,CONTENT:httpRet}}})},validate_validation_code:function(oForm){if(isNaN($(oForm).find("#iq_validate_sms_form-code").iqFieldValue())||""===$(oForm).find("#iq_validate_sms_form-code").iqFieldValue())return void $("#iq_validation_error").fadeIn("fast");$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",async:!1,cache:!1,data:{ReturnFormat:"json",Method:"validate_validation_code",mobilenumber:$(oForm).find("#iq_lead_form-mobilenumber").iqFieldValue(),validationcode:$(oForm).find("#iq_validate_sms_form-code").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.localStorage("sms_authcode",jsonRet.AUTHCODE),$.iqLeads.save(oForm)):$("#iq_validation_error").fadeIn("fast")},error:function(httpRet,err){ret={STATUS:1,MESSAGE:err.message,DETAIL:err.detail,CONTENT:httpRet}}})},init_leadsource_carousel:function(){$("[data-leadsource-carousel]").carousel({interval:!1,pause:!0})},iqZeroPad:function(num,len){for(var str=num.toString();str.length<len;)str="0"+str;return str},TogglePage:function(direction,pagecount){if("Next"!=direction||$("#iq_lead_form").iqForm_Check()){var newpage,divid,currpage=$("#iq_lead_form-currpage").iqFieldValue();for(newpage="Previous"==direction?parseInt(currpage)-1:parseInt(currpage)+1,$("#iq_lead_form-currpage").iqFieldValue(newpage),newpage>1&&newpage<pagecount?($("#iq_lead_form-previous").show(),$("#iq_lead_form-next").show()):1==newpage?($("#iq_lead_form-previous").hide(),$("#iq_lead_form-next").show()):($("#iq_lead_form-previous").show(),$("#iq_lead_form-next").hide()),newpage==pagecount?$("#iq_lead_form-submit").parent().show():$("#iq_lead_form-submit").parent().hide(),i=1;i<=pagecount;i++)divid=$.iqLeads.iqZeroPad(i,4),i==newpage?$("#iq_lead_page_"+divid).toggle(!0):$("#iq_lead_page_"+divid).toggle(!1)}}}}(jQuery);
//# sourceMappingURL=leads.min.js.map
;
/* file: ../assets/js/min/listing.min.js */
!function($){"use strict";$(document).ready(function(){($("#iq_listing").length>0||$("#iq_slw").length>0)&&($.iqUtils.sessionStorage("listings_listing_mlsid",$("#iq_listing").attr("data-mlsid")),$.iqUtils.sessionStorage("listings_listing_ml_number",$("#iq_listing").attr("data-mlnumber")),$("a").iqHiddenEmail(),1===$("#iq_listing_learn_more_request").length&&($.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields_condensed",sourcename:$("#iq_listing_learn_more_request").data("sourcename"),mlsid:$("#iq_listing_learn_more_request").data("mlsid"),mlnumber:$("#iq_listing_learn_more_request").data("mlnumber"),propertytype:$("#iq_listing_learn_more_request").data("propertytype"),publicid:$("#iq_listing_learn_more_request").data("publicid"),agentteamid:$("#iq_listing_learn_more_request").data("agentteamid"),url:window.location.href,requiredonly:!0},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_listing_learn_more_request").html(jsonRet.LAYOUT),$("#iq_listing_learn_more_request #iq_lead_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}}),$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields_condensed",sourcename:$("#iq_listing_showing_request").data("sourcename"),mlsid:$("#iq_listing_showing_request").data("mlsid"),mlnumber:$("#iq_listing_showing_request").data("mlnumber"),publicid:$("#iq_listing_showing_request").data("publicid"),propertytype:$("#iq_listing_showing_request").data("propertytype"),url:window.location.href,requiredonly:!0},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_listing_showing_request").html(jsonRet.LAYOUT),$("#iq_listing_showing_request #iq_lead_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})),$(".dropdown-menu input, .dropdown-menu label").click(function(e){e.stopPropagation()}),1===$("#iq_listing_off_market_map").length?($("#iq_listing_off_market_map").height($("#iq-listing-area-info").height()+42),$("#iq_listing_off_market_map").iqGoogleMaps({Lat:parseFloat($("#iq_listing_off_market_map").attr("data-lat")),Lon:parseFloat($("#iq_listing_off_market_map").attr("data-lon")),ZoomLevel:18,mapTypeId:"roadmap",PushPinPath:"/assets/img/map-icons/companylisting.png"})):$.iqListing.carousel_load()),$("#iq_listing_full_details").length&&$.iqListing.showContactInfo(),$("#iq_listing_attachments").length&&$.iqListing.showAttachments()}),$(window).load(function(){$.iqListing.setAffixOffset()}),$.iqListing={fullscreen:function(){var indicators=[];$("#iq_listing_carousel .iq-listing-image").each(function(index,element){var imgsrc=$(element).css("background-image");imgsrc=imgsrc.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),indicators.push('<li data-target="#iq_fullscreen_carousel" data-bs-target="#iq_fullscreen_carousel" data-slide-to="'+index+'" '+(0===index?'class="active"':"")+'><div></div><img id="iq_listing_image_'+index+'" src="'+imgsrc+'"></li>')});var carousel=$("#iq_listing_carousel").clone().attr("id","iq_fullscreen_carousel");$("#iq_fullscreen_modal").bsFullScreenModal({backdrop:!1,title:"fullscreen",scrollable:!1}),$("#iq_fullscreen_modal .modal-body").html(carousel).find(".carousel-control").attr("href","#iq_fullscreen_carousel"),$("#iq_fullscreen_modal .modal-body #iq_fullscreen_button").remove();var ytiframe=$("#iq_fullscreen_modal .modal-body iframe");if($(ytiframe).length>0){var height=$(ytiframe).parent().height(),width=$(ytiframe).parent().width();$(ytiframe).width(width),$(ytiframe).height(height)}$("#iq_fullscreen_carousel").prepend('<ol class="carousel-indicators">'+indicators.join("")+"</ol>"),$("#iq_fullscreen_carousel").swipe({swipeLeft:function(){$(this).carousel("next")},swipeRight:function(){$(this).carousel("prev")},threshold:25}),$("#iq_fullscreen_modal [data-propertybuttons=true]").remove(),$("#iq_fullscreen_modal .carousel-control").css({"z-index":"999"}),$("#iq_fullscreen_modal button").css({"z-index":"1000"})},setAffixOffset:function(){if($("#iq_listing_head").length){var threshhold=$("#iq_listing_head").offset().top-15;$("#iq_listing_head").data("threshhold",threshhold),$(window).on("scroll",function(){if($("#iqListingsContainer").length&&$("#iq_listing_head").length){$("#iq_listing_head").data("threshhold")>=$("#iq_listing_head").offset().top?($("#iq_listing_head").removeClass("iq-affix-listing-head"),$("#iq_listing_thumb").hide()):($("#iq_listing_head").addClass("iq-affix-listing-head"),$("#iq_listing_thumb").show())}})}},googlemap:function(){$("#iq_listing_map").data("googlemap_init")||($("#iq_googlemaps_container").height($("#iq_listing_carousel").innerHeight()+15),$("#iq_listing_map").iqGoogleMaps({Lat:$("#iq_listing_map").data("lat"),Lon:$("#iq_listing_map").data("lon"),ZoomLevel:18,mapTypeId:"roadmap",PushPinPath:"/assets/img/map-icons/companylisting.png"}),$("#iq_listing_map").data("googlemap_init",!0))},googlestreetview:function(){$("#iq_listing_streetview").data("googlestreetview_init")||($("#iq_listing_streetview").iqGoogleMapsStreetview({Lat:$("#iq_listing_map").data("lat"),Lon:$("#iq_listing_map").data("lon"),MaxDistance:50}),$("#iq_listing_streetview").data("googlestreetview_init",!0))},yelp:function(){if($("#iq_whats_around-term").iqFieldValue()!==$("#iq_whats_around").attr("data-term")){$("#iq_whatsaround_grid").html('<div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h3 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Processing</h3></div></div>');var height=$(".iq-listing-area-info").height()-40;$("#iq_whatsaround_grid").css({height:height+"px","max-height":height+"px",overflow:"auto","overflow-x":"hidden","margin-bottom":"20px"}),$.ajax({url:"/components/listing_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"whatsaround",term:$("#iq_whats_around-term").iqFieldValue(),location:$("#iq_whats_around").data("zip_code"),lat:$("#iq_whats_around").data("lat"),lon:$("#iq_whats_around").data("lon")},success:function(jsonRet){0===jsonRet.STATUS&&0!==jsonRet.TOTALBUSINESSES?($("#iq_whatsaround_grid").html(jsonRet.LAYOUT),$("#iq_whats_around").attr("data-term",$("#iq_whats_around-term").iqFieldValue())):$("#iq_whatsaround_grid").html('<div class="col-md-12 text-center"><h4>No Information Available</h4>')}})}},elementResize:function(selector){var e=$(selector);if($(e).length>0){var height=$(e).parent().height(),width=$(e).parent().width();$(e).width(width),$(e).height(height)}},showContactInfo:function(){switch($("#iq_listing_full_details").data("brokerage_display_location")){case 1:$("#brokerage_display_location-above_request_showing").css("display","block");break;case 2:$("#brokerage_display_location-top_right_sidebar").css("display","block")}},showAttachments:function(){$.ajax({url:"/components/listing.cfc",type:"POST",dataType:"json",async:!0,data:{method:"getListingAttachments",mlsid:$("#iq_listing_full_details").data("mlsid"),ml_number:$("#iq_listing_full_details").data("ml_number")},success:function(jsonRet){0===jsonRet.STATUS&&0!==jsonRet.TOTALFILES&&($("#iq_listing_attachments").css("display","table"),$("#iq_listing_attachments tbody").empty(),jsonRet.FILES.forEach(function(file){var fileName=file.NAME,fileHREF=file.HREF,newRowContent='<tr><td><a href="'+fileHREF+'">'+fileName+'</a></td><td class="text-center"><a href="'+fileHREF+'"><i class="fa fa-fw fa-download"></i></a></td></tr>';$("#iq_listing_attachments tbody").append(newRowContent)}))}})},matterport_viewer:function(url){var html='<iframe title="3D Tour Video Window" src="'+url+'&play=1" style="width:100%; height:100%; border:0;" border="0" onload="$.iqListing.matterport_load();"></iframe>';$("#iq_listing_matterport").bsModal({backdrop:!1,title:"3D Walkthrough",body:html})},matterport_load:function(){var iframe=$("#iq_listing_matterport iframe"),width=$(iframe).parent().width(),height=$(iframe).parent().height();".5625"*width<$(window).height()&&(height=".5625"*width),$(iframe).width(width),$(iframe).height(height)},carousel_load:function(){$("#iq_listing_carousel").prepend('<a data-image-button="true" id="iq_fullscreen_button" class="btn btn-default" href="javascript:$.iqListing.fullscreen();" rel="nofollow"><i class="fa fa-fw fa-arrows-alt"></i><span class="sr-only">Fullscreen</span></a>'),$("#iq_listing_carousel .item").each(function(index,element){$(element).on("click",function(){$(this).data("image-postion",index),$.iqListing.all_images()}).css({cursor:"pointer"})}),$("#iq_listing_carousel_nav .img-thumbnail a").on("click",function(e){e.preventDefault(),$("#iq_listing_youtube").hide(),$("#iq_listing_secondyoutube").hide(),$("#iq_listing_map").hide(),$("#iq_listing_streetview").hide(),$("[data-image-button]").show(),$("#iq_googlemaps_container").css({"z-index":"-1"});var item=$(this).data("slide");return $("#iq_listing_carousel").carousel(item-1),$("#iq_listing_carousel_nav").data("slide",item-1),$("#iq_listing_carousel_nav .img-thumbnail").css({opacity:".5"}),$("#iq_listing_carousel_nav a").css({opacity:".5"}),$(this).parent().css({opacity:"1"}),!1}),$("#iq_listing_carousel").on("slid.bs.carousel",function(){$("#iq_listing_carousel_nav .img-thumbnail").css({opacity:".5"});var item=$(this).find(".active").index(),nav_item=Math.ceil((item+1)/6);if($("#iq_listing_carousel_nav").carousel(nav_item-1),$("#iq_listing_carousel_nav .img-thumbnail").css({opacity:".5"}),$('#iq_listing_carousel_nav a[data-slide="'+(item+1)+'"]').parent().css({opacity:"1"}),$("#iq_listing_youtube").length>0&&($("#iq_listing_youtube").is(":visible")?($("#iq_listing_images_button").removeClass("active"),$("#iq_listing_video_button").addClass("active")):($("#iq_listing_images_button").addClass("active"),$("#iq_listing_video_button").removeClass("active")),item>0)){var youtube=$("#iq_listing_youtube").attr("src");$("#iq_listing_youtube").attr("src",""),$("#iq_listing_youtube").attr("src",youtube)}$.iqListing.imgObjectFit()}),$("#iq_listing_carousel").swipe({swipeLeft:function(){$(this).carousel("next")},swipeRight:function(){$(this).carousel("prev")},threshold:25}),$("#iq_listing_carousel_nav").swipe({swipeLeft:function(){$(this).carousel("next")},swipeRight:function(){$(this).carousel("prev")},threshold:25}),$(window).resize(function(){$.iqListing.elementResize("#iq_listing_youtube")}),$.iqListing.elementResize("#iq_listing_youtube"),$.iqListing.imgObjectFit()},imgObjectFit:function(){$(".iq-listing-image .img-fill").each(function(i){$(this).width()>$(this).height()&&($(this).addClass("img-fill-contain"),$(this).removeClass("img-fill"))})},all_images:function(){var images=[];$("#iq_listing_carousel div.active").index();if($("#iq_listing_carousel .iq-listing-image").each(function(index,element){var imgsrc=$(element).children("img").attr("src");imgsrc=imgsrc.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),images.push('<img id="iq_listing_image_'+index+'" style="width:100%;" src="'+imgsrc+'">')}),$("#iq_listing_images").bsModal({backdrop:!1,title:"Listing Images"}),$("#iq_listing_images .modal-body").html(images.join("")),$(".iq_listing_idx_info").length&&$("#iq_listing_images .modal-body").prepend('<div class="modal-image-popup-idx">'+$(".iq_listing_idx_info").html()+"</div>"),1===$("#iq_listing_idx_info").length){var idx_logo_src=$("#iq_listing_idx_info").find("img").attr("src"),lo_name=$("#iq_listing_idx_info").find(".iq-lo_name").text(),la_name=$("#iq_listing_idx_info").find(".iq-la_name").text(),ml_number=$("#iq_listing_carousel").attr("data-mlnumber");$("#iq_listing_images .modal-body").append('<div style="padding:5px; width:'+$("#iq_listing_image_0").width()+'px; position:fixed; top:55px; color:#000000; font-size:12px; background-color:rgba(255,255,255,.8); line-height:12px;"><img align="left" src="'+idx_logo_src+'" style="max-height:24px; vertical-align:niddle">&nbsp;&nbsp;MLS#: '+ml_number+'<br><span class="iq-la_name">&nbsp;&nbsp;Listing Provided By '+la_name+'</span> <span class="iq-la_name-of">of</span> <span class="iq-lo_name">'+lo_name+"</span></div>")}$("#iq_listing_images .modal-header").css({position:"fixed","z-index":"9999",top:"0px",width:$("#iq_listing_images .modal-content").width()}),$(".iq_listing_idx_info").length&&setTimeout(function(){$("#iq_listing_images").scrollTop($(".modal-image-popup-idx").scrollTop())},1e3)},change_view:function(sView){$("[data-slide]").css("z-index","0"),$("[data-image-button]").hide(),$("#iq_listing_carousel_map").hide(),$("#iq_listing_youtube").hide(),$("#iq_listing_secondyoutube").hide(),$("#iq_listing_map").hide(),$("#iq_listing_streetview").hide(),$("#iq_googlemaps_container").css("z-index","-1"),"images"==sView&&($("[data-slide]").css("z-index","5"),$("[data-image-button]").show()),"images_all"==sView&&$.iqListing.all_images(),"video1"==sView&&($("#iq_listing_youtube").show(),$.iqListing.elementResize("#iq_listing_youtube"),$("#iq_listing_youtube").is("video")&&$("#iq_listing_youtube")[0].play()),"video2"==sView&&($("#iq_listing_secondyoutube").show(),$.iqListing.elementResize("#iq_listing_secondyoutube"),$("#iq_listing_secondyoutube").is("video")&&$("#iq_listing_secondyoutube")[0].play()),"roadmap"==sView&&$("#iq_listing_carousel_map").show()},mortgage_calc:function(iListPrice,iInterestRate){$("#iq_mortcalc_dialog").bsModal({backdrop:!0,title:"Mortgage Calculator",body:""}),$("#iq_mortcalc_dialog .modal-footer").hide(),$("#iq_mortcalc_dialog .modal-content").css({"max-width":"600px",margin:"0 auto","margin-top":"100px"}),$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/listing_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"mortgage_calculator"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_mortcalc_dialog .modal-body").html(jsonRet.LAYOUT),$("#LA").iqFieldValue(iListPrice),$("#YR").iqFieldValue(30),$("#IR").iqFieldValue(iInterestRate),$("#AT").iqFieldValue(2e3),$("#AI").iqFieldValue(.02*iListPrice),$("#HOA").iqFieldValue(36),$.iqListing.calc_do_sum(),$("#iq_mortgage_calculator_top").iqBanners({location:"mortgage-calculator-top"}),$("#iq_mortgage_calculator_bottom").iqBanners({location:"mortgage-calculator-bottom"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})},calc_floor:function(iNumber){return Math.floor(iNumber*Math.pow(10,2))/Math.pow(10,2)},calc_do_tax:function(){$("#AT").val($.iqListing.calc_floor(.01*$("#LA").val()))},calc_do_sum:function(){var iMi=$("#IR").val()/1200,iBase=1,iMBase=1+iMi,i=null;for(i=0;i<12*$("#YR").val();i++)iBase*=iMBase;$("#PI").val($.iqListing.calc_floor($("#LA").val()*iMi/(1-1/iBase))),$("#MT").val($.iqListing.calc_floor($("#AT").val()/12)),$("#MI").val($.iqListing.calc_floor($("#AI").val()/12)),$("#MHOA").val($.iqListing.calc_floor($("#HOA").val()/1));var iSum=$("#LA").val()*iMi/(1-1/iBase)+$("#AT").val()/12+$("#AI").val()/12+$("#HOA").val()/1;$("#MP").val($.iqListing.calc_floor(iSum))}}}(jQuery);
//# sourceMappingURL=listing.min.js.map
;
/* file: ../assets/js/min/listings.min.js */
function toggleDropDown(){$("#arrow-icon").hasClass("fa-chevron-down")?($("#arrow-icon").removeClass("fa-chevron-down"),$("#arrow-icon").addClass("fa-chevron-up")):($("#arrow-icon").removeClass("fa-chevron-up"),$("#arrow-icon").addClass("fa-chevron-down"))}!function($){"use strict";$(document).ready(function(){if("listings"===$("body").attr("data-page")&&$(".st-inside-header").css("height","0px"),$(".iq_listing_card_specs").click(function(e){$(".ui-tooltip").show(),e.stopPropagation(),setTimeout(function(){$(".ui-tooltip").hide()},1e3)}),$.iqListings.scrollPos=$(document).scrollTop(),$.iqListings.screenHeight=$(window).height(),$(document).scroll(function(){$.iqListings.scrollPos=$(document).scrollTop()}),$.iqListings.isBS5=$("body").attr("class")&&$("body").attr("class").includes("v2"),$("#iqListingsContainer").length){if($.iqListings.bs5=$("#iqListingsContainer").data("bs5"),$.iqUtils.localStorage("showprivatelistings_registered")&&$.iqUtils.cookie("showprivatelistings_registered","t"),$.iqUtils.cookie("listings_data")&&$.iqListings.sessionStorageToForm(),$("#iqMapContainer").length&&0==$.iqListings.current_map.is_centered&&($.iqListings.current_map.center.lat=$("#iqMapContainer").data("lat"),$.iqListings.current_map.center.lon=$("#iqMapContainer").data("lon"),$.iqListings.current_map.zoom_level=$("#iqMapContainer").data("zoomlevel")),"map"==$("#iqListingsContainer").data("searchby")){if($(".search").length){var search_position=$(".search").offset();$(".search").data("offset-top",search_position.top)}$.iqListings.resizeLayoutPanes(),$.iqListings.map()}switch($.iqUtils.history.init(function(args){$.iqListings.controller(args)}),$("#iq_type_form-propertytype").iqFieldValue().toLowerCase()){case"residential":$.iqListings.searchform="#iq_res_criteria_form",$.iqListings.initSearchForm();break;case"commercial":$.iqListings.searchform="#iq_com_criteria_form",$.iqListings.initSearchForm();break;case"land":$.iqListings.searchform="#iq_lan_criteria_form",$.iqListings.initSearchForm();break;case"multifamily":$.iqListings.searchform="#iq_mul_criteria_form",$.iqListings.initSearchForm()}$("[data-autocomplete-form]").each(function(){var oForm=this;$(oForm).iqListingsAutocomplete({mlsid:$(this).find("[data-mlsid_list]").attr("data-mlsid_list"),propertytype:$(this).attr("data-propertytype"),state:"",county:"",city:"",area:"",zip_code:"",street_address:"",ml_number:"",appendto:$(this).attr("data-appendto"),fields:"state,county,city,area,subarea,zip_code,streetaddress,ml_number,schooldistrict,highschool,jrhighschool,elementaryschool,communityname,buildingname",async:!0,callback:function(){$.iqListings.submit_listings_autocompleteform($(oForm).attr("id"))}})}),($("#iq_listing_full_details").length||$("#iq_listing_full_details_v2").length)&&$.iqListing.showContactInfo(),$(".dropdown-menu").click(function(e){e.stopPropagation()}),$.iqListings.resizeActionLinks(),"grid"===$("#iqListingsContainer").data("searchby")&&$.iqListings.resizeLayoutPanes(),$("body").append('<div id="iq_listings_totop" style="border:1px solid #999; border-radius:50%; padding:15px; position: fixed; bottom: 25px; right: 40px; cursor: pointer; background-color:rgba(255,255,255,.75); display: none;z-index: 6;" aria-label="Back to top of website" label="Back to top of website"><i class="fa fa-arrow-up fa-fw"></i><span class="sr-only">Back to top of website</span></div>'),$(window).scroll(function(){$.iqListings.current_grid_scroll_pos=$(window).scrollTop(),0!==$(this).scrollTop()?$("#iq_listings_totop").fadeIn():$("#iq_listings_totop").fadeOut()}),$(window).resize(function(){$.iqListings.resizeLayoutPanes(),$.iqListings.resizeActionLinks()}),$(window).on("popstate",function(){$.iqListings.trackPopEvent()}),$("#iq_listings_totop").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),1===$("[data-areas-criteria]").length&&$("#iq_areas_wrapper").on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight&&$.iqListings.get_iq_areas()}),$("#dropdownMenuPrice").parent().on("hide.bs.dropdown",function(){$.iqListings.setFilter("price")}),$("#iq_criteria_form-pricemin").keyup(function(){var minPrice=$("#iq_criteria_form-pricemin").val().trim();(isNaN(minPrice)||""==minPrice)&&$("#iq_criteria_form-pricemin").val("")}),$("#iq_criteria_form-pricemax").keyup(function(){var maxPrice=$("#iq_criteria_form-pricemax").val().trim();(isNaN(maxPrice)||""==maxPrice)&&$("#iq_criteria_form-pricemax").val("")}),$("#iq_res_criteria_modal, #iq_mul_criteria_modal, #iq_com_criteria_modal, #iq_lan_criteria_modal").on("hidden.bs.modal",function(){"detailed"==$.iqListings.current_layout&&$("body").addClass("modal-open")}),$(".iq-resstyle-menu").change(function(){$.iqListings.setFilter("style",$.iqListings.getResidentialStyleList("iq-resstyle-menu"))}),$(".iq-resstyle").change(function(){$.iqListings.updateResStyleList($(this).parent().parent())}),$(".js-btn-apply-advanced-filters").bind("click",function(){var filterType=$(this).data("filter-type");if("res_criteria"==filterType){var stylesList=$.iqListings.getResidentialStyleList(),stylesArray=stylesList.split(",");$("#iq_res_criteria_form-resstyle").val(stylesList),$.iqListings.setResidentialStyle(stylesList),$(".iq-resstyle-menu").each(function(i,obj){$(obj).prop("checked",!1),stylesArray.indexOf($(obj).val())>=0&&$(obj).prop("checked",!0)})}$.iqListings.applyAdvancedFilter(filterType)}),$(".iq_listing_card_love a").click(function(e){e.stopPropagation()})}}),$.iqListings={bs5:!1,current_row:1,current_layout:"browse",current_listing:0,current_grid_scroll_pos:0,current_map:{is_loaded:!1,is_centered:!1,visible_points:0,zoom_level:0,center:{lat:0,lon:0},top_left:{lat:0,lon:0},bottom_right:{lat:0,lon:0}},searchform:"#iq_res_criteria_form",original_form:{res_criteria:"",com_criteria:"",lan_criteria:"",mul_criteria:""},current_year:function(){return(new Date).getFullYear()+""},controller:function(){var action=$.iqUtils.history.action(),path_parts=$.iqUtils.history.hashArray();switch(action){case"listing":var mlsid_listingid=path_parts[1].split("-")||["",""],mlsid=mlsid_listingid[0],listingid=mlsid_listingid[1];""!==mlsid&&""!==listingid&&$.iqListings.details_dialog(mlsid,listingid);break;case"for-lease":case"for-sale":var mlsid_listingid=path_parts[path_parts.length-1].split("-")||["",""],mlsid=mlsid_listingid[0],listingid=mlsid_listingid[1];""!==mlsid&&""!==listingid&&$.iqListings.details_dialog(mlsid,listingid);break;case"res_criteria":$.iqfieldschanged=!1,$("#iqListingsContainer").addClass("hasModal"),$.iqListings.openAdvancedFilter("res_criteria");break;case"mul_criteria":$.iqfieldschanged=!1,$("#iqListingsContainer").addClass("hasModal"),$.iqListings.openAdvancedFilter("mul_criteria");break;case"com_criteria":$.iqfieldschanged=!1,$("#iqListingsContainer").addClass("hasModal"),$.iqListings.openAdvancedFilter("com_criteria");break;case"lan_criteria":$.iqfieldschanged=!1,$("#iqListingsContainer").addClass("hasModal"),$.iqListings.openAdvancedFilter("lan_criteria");break;default:$(".modal").each(function(index,element){void 0!==$(element).modal&&$(element).modal("hide")}),$("#iqListingsContainer").removeClass("hasModal"),$.iqUtils.sessionStorage("listings_listing_mlsid",null),$.iqUtils.sessionStorage("listings_listing_ml_number",null),$.iqUtils.sessionStorage("listings_listing_listingid",null)}},resizeLayoutPanes:function(){var viewport=$.iqUtils.getViewPort(),window_width=$(window).width(),window_height=$(window).height(),search_form_height=$("#iqSearchFormHeader").height(),map_container_left=0,map_container_width=window_width,list_container_width=.25*window_width,editMenuHeight=0;$("body").hasClass("editbar")&&$("#edit-menu").length&&(editMenuHeight=$("#edit-menu").outerHeight(),$("#iqSearchFormHeader").css("top",editMenuHeight));var container_height=window_height-search_form_height-editMenuHeight;$("#iqListingsContainer").css("height",""),"xs"==viewport||"sm"==viewport?($("#iqListResults").css("width",0),list_container_width=0):($("#iqListResults").css("width",.25*window_width),map_container_left=.25*window_width,map_container_width=.75*window_width,list_container_width=.25*window_width),$("#iqMapContainer").length&&$("#iqMapContainer").css({left:map_container_left,top:search_form_height+editMenuHeight,width:map_container_width,height:container_height}),$("#iqListingsContainer").length&&($("#iqListResults").css({left:0,top:search_form_height+editMenuHeight,width:list_container_width,height:container_height}),$("#iqListResults").removeClass("d-none"),window_width<992&&($("#iqListResults").addClass("d-none"),$("#iqMapContainer").css("width","100%"),$("#iqMapContainer").css("left","0")),"map"==$("#iqListingsContainer").data("searchby")&&$("#iqListingsContainer").css("height",window_height)),$(".modal-backdrop").length&&$(".modal-backdrop").remove()},resizeActionLinks:function(){if($("#iq_listing_head_main").length&&$(".iq-listing-address").length&&$("#iq_listing_head_toolbar").length){var listingHeaderWidth=$("#iq_listing_head_main").width(),addressWidth=$(".iq-listing-address").width(),toolbarWidth=$("#iq_listing_head_toolbar").width(),thumbnailSize=0;"none"!=$("#iq_listing_thumb").css("display")&&(thumbnailSize=$("#iq_listing_thumb").width()+parseInt($("#iq_listing_thumb").css("margin-right")));var availableToolbarArea=listingHeaderWidth-(addressWidth+30+thumbnailSize);const links=["iq_listing_header-text","iq_listing_header-email","iq_listing_header-print","iq_listing_header-share"];if(toolbarWidth>availableToolbarArea)for(var i=0;i<links.length&&($("#"+links[i]).hide(),"iq_listing_header-share"==links[i]&&$("#iq_listing_header-share").css("display","block"),"iq_listing_header-text"==links[i]&&$("#iq_listing_header-dd_text").css("display","block"),"iq_listing_header-email"==links[i]&&$("#iq_listing_header-dd_email").css("display","block"),"iq_listing_header-print"==links[i]&&($(".iq_listing_header-print").hide(),$("#iq_listing_header-dd_print").show()),!($("#iq_listing_head_toolbar").width()<=availableToolbarArea));i++);for(var i=links.length-1;i>=0;i--)if("iq_listing_header-print"==links[i]&&$("#"+links[i]).is(":visible")&&$("#iq_listing_header-dd_print").hide(),!$("#"+links[i]).is(":visible")){var current_toolbar_width=$("#iq_listing_head_toolbar").width(),hidden_link_width=$("#"+links[i]).width(),toolbarWidthPlusHiddenLink=current_toolbar_width+hidden_link_width+30;toolbarWidthPlusHiddenLink<availableToolbarArea&&("iq_listing_header-text"==links[i]&&$("#iq_listing_header-dd_text").css("display","none"),"iq_listing_header-email"==links[i]&&$("#iq_listing_header-dd_email").css("display","none"),"iq_listing_header-print"==links[i]&&($("#iq_listing_header-dd_print").hide(),$(".iq_listing_header-print").show()),$("#"+links[i]).show())}}},initSearchForm:function(){for(var searchForms=["#iq_res_criteria_form","#iq_com_criteria_form","#iq_lan_criteria_form","#iq_mul_criteria_form"],i=0;i<searchForms.length;i++){var formName=searchForms[i];$('[data-dropdown="'+$(formName+"-propertytype").iqFieldValue()+'"]').each(function(){var oDropDown=$(this).attr("id"),field_initialized=$("#"+oDropDown).attr("initialized");-1===oDropDown.indexOf("display")&&void 0===field_initialized&&($("#"+oDropDown).iqFieldFormat({min:$("#"+oDropDown).attr("data-min"),max:$("#"+oDropDown).attr("data-max"),displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"{{val}}",format:$("#"+oDropDown).attr("data-format")}),$("#"+oDropDown).iqTextDropdown(),void 0!==$("#"+oDropDown).attr("data-min")&&$("#"+oDropDown).iqFieldValue()===$("#"+oDropDown).attr("data-min")&&$("#"+oDropDown+"-display").iqFieldValue("No Min"),void 0!==$("#"+oDropDown).attr("data-max")&&$("#"+oDropDown).iqFieldValue()===$("#"+oDropDown).attr("data-max")&&$("#"+oDropDown+"-display").iqFieldValue("No Max"),$("#"+oDropDown).change(function(){$("#"+oDropDown).attr("data-docountonly")?($.iqListings.criteriasearch("1","t"),$.iqListings.sync_searchformfields($("#"+oDropDown).attr("data-field"),$("#"+oDropDown).iqFieldValue())):($(formName+"-"+$("#"+oDropDown).attr("data-field")).iqFieldValue($("#"+oDropDown).iqFieldValue()),$.iqListings.sync_searchformfields($("#"+oDropDown).attr("data-field"),$("#"+oDropDown).iqFieldValue()),$.iqListings.criteriasearch(1)),oDropDown.indexOf("price")&&$.iqListings.setPriceLabel()}),oDropDown.indexOf("price")&&$("#"+oDropDown).on("input",function(e){e.preventDefault(),$(this).val().toString().length>=5&&($.iqListings.setFilter($(this).attr("name"),$(this).val()),$.iqListings.sync_searchformfields($("#"+oDropDown).attr("data-field"),$("#"+oDropDown).iqFieldValue()),$("#"+oDropDown).attr("data-docountonly")?$.iqListings.criteriasearch(1,"t"):($(formName+"-"+$("#"+oDropDown).attr("data-field")).iqFieldValue($("#"+oDropDown).iqFieldValue()),$.iqListings.criteriasearch(1)))}),$("#"+oDropDown).attr("initialized",!0))})}switch($.iqListings.updateListingCountDisplay(),$("#iq_listings-filters_res").hide(),$("#iq_listings-filters_mul").hide(),$("#iq_listings-filters_com").hide(),$("#iq_listings-filters_lan").hide(),$(".iq-pricepersqfoot").hide(),$('[data-listings-filter="all"]').show(),$('[data-listings-filter="res"]').hide(),$('[data-listings-filter="mul"]').hide(),$('[data-listings-filter="com"]').hide(),$('[data-listings-filter="lan"]').hide(),$($.iqListings.searchform+"-propertytype").iqFieldValue()){case"residential":$("#iq_listings-filters_res").show(),$('[data-listings-filter="res"]').show();break;case"multifamily":$("#iq_listings-filters_mul").show(),$('[data-listings-filter="mul"]').show();break;case"commercial":$("#iq_listings-filters_com").show(),$('[data-listings-filter="com"]').show();break;case"land":$("#iq_listings-filters_lan").show(),$('[data-listings-filter="lan"]').show()}($.iqListings.getParamFromUrl("propertytype").length||$.iqListings.getParamFromUrl("resstyle").length)&&$("#dropdownMenuPropertyType").addClass("btn-filtered"),$.iqListings.change_listprice()},initAdvancedFilterDD:function(){for(var propertyTypes=["residential","multifamily","commercial","land"],i=0;i<propertyTypes.length;i++){var formName="iq_listings_criteria_form";$('[data-dropdown="'+propertyTypes[i]+'"]').each(function(){var oDropDown=$(this).attr("id"),field_initialized=$("#"+oDropDown).attr("initialized");-1===oDropDown.indexOf("display")&&void 0===field_initialized&&($("#"+oDropDown).iqFieldFormat({min:$("#"+oDropDown).attr("data-min"),max:$("#"+oDropDown).attr("data-max"),displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"{{val}}",format:$("#"+oDropDown).attr("data-format")}),$("#"+oDropDown).iqTextDropdown(),void 0!==$("#"+oDropDown).attr("data-min")&&$("#"+oDropDown).iqFieldValue()===$("#"+oDropDown).attr("data-min")&&$("#"+oDropDown+"-display").iqFieldValue("No Min"),void 0!==$("#"+oDropDown).attr("data-max")&&$("#"+oDropDown).iqFieldValue()===$("#"+oDropDown).attr("data-max")&&$("#"+oDropDown+"-display").iqFieldValue("No Max"),$("#"+oDropDown).change(function(){$("#"+oDropDown).attr("data-docountonly")?($.iqListings.criteriasearch("1","t"),$.iqListings.sync_searchformfields($("#"+oDropDown).attr("data-field"),$("#"+oDropDown).iqFieldValue())):($(formName+"-"+$("#"+oDropDown).attr("data-field")).iqFieldValue($("#"+oDropDown).iqFieldValue()),$.iqListings.sync_searchformfields($("#"+oDropDown).attr("data-field"),$("#"+oDropDown).iqFieldValue()),$.iqListings.criteriasearch(1)),oDropDown.indexOf("price")&&$.iqListings.setPriceLabel()}),oDropDown.indexOf("price")&&$("#"+oDropDown).on("input",function(e){e.preventDefault(),$(this).val().toString().length>=5&&($.iqListings.setFilter($(this).attr("name"),$(this).val()),$.iqListings.sync_searchformfields($("#"+oDropDown).attr("data-field"),$("#"+oDropDown).iqFieldValue()),$("#"+oDropDown).attr("data-docountonly")?$.iqListings.criteriasearch(1,"t"):($(formName+"-"+$("#"+oDropDown).attr("data-field")).iqFieldValue($("#"+oDropDown).iqFieldValue()),$.iqListings.criteriasearch(1)))}),$("#"+oDropDown).attr("initialized",!0))})}},updateListingCountDisplay:function(){var recordCount=$("#iqListingsContainer").data("listings-record-count"),sPropType=$($.iqListings.searchform+"-propertytype").iqFieldValue();if(recordCount=0!=recordCount.length?$.iqUtils.numberFormat(recordCount):"0","map"==$("#iqListingsContainer").data("searchby"))if($.iqListings.current_map.visible_points>0){var points_to_show=Math.min($.iqListings.current_map.visible_points,500);$("#finalResultsCounter").html("Map Showing "+points_to_show+" of "+recordCount)}else 500==recordCount?$("#finalResultsCounter").html("More than "+recordCount+" Records Found"):$("#finalResultsCounter").html(recordCount+" Records Found");else $("#finalResultsCounter").html(recordCount+" Records Found");""!=sPropType&&($('[data-showcount="'+sPropType+'"]').html(recordCount),$("[data-countonly="+sPropType+"]").html(recordCount+" Records Found"))},trackPopEvent:function(){var url_searchBy=$.iqListings.getParamFromUrl("searchby","grid");url_searchBy!=$("#iqListingsContainer").data("searchby")&&$.iqListings.updateSearchBy(url_searchBy),$("#iq_listing_dialog").length&&$("#iq_listing_dialog .modal-body").html($.iqListings.getLoadingHtml()),$("#iq_listing_dialog_v2").length&&$("#iq_listing_dialog_v2 .modal-body").html($.iqListings.getLoadingHtml())},checkAdvancedFilters:function(type){var ignoreFields=["baths","bathsmax","bathsmin","beds","bedsmax","bedsmin","maxrows","pricemax","pricemax-display","pricemin","pricemin-display","propertytype","res_baths","res_beds","searchby","startpage"];if(""==$.iqListings.original_form[type]){var saveForm=$("#iq_"+type+"_form").iqSerializeFormToStruct();ignoreFields.forEach(function(k){delete saveForm[k]}),$.iqListings.original_form[type]=JSON.stringify(saveForm)}var origForm=$.iqListings.original_form[type],currForm=$("#iq_"+type+"_form").iqSerializeFormToStruct();ignoreFields.forEach(function(k){delete currForm[k]}),currForm=JSON.stringify(currForm),currForm!==origForm?$("#btn_advanced_"+type).addClass("btn-filtered"):$("#btn_advanced_"+type).removeClass("btn-filtered")},openAdvancedFilter:function(type){$.iqListings.checkAdvancedFilters(type),"browse"==$.iqListings.current_layout?($.iqUtils.history.action()!=type&&$.iqUtils.history.push(type),$("body").attr("class").includes("v2")?$("#bay_"+type+"_modal_v2").modal("show"):$("#iq_"+type+"_modal").modal("show")):($("#iqListingsContainer").addClass("hasModal"),$("#iq_"+type+"_modal").modal("show"))},closeAdvancedFilter:function(type){"detailed"==$.iqListings.current_layout?($("#iqListingsContainer").removeClass("hasModal"),$("#iq_"+type+"_modal").modal("hide")):$.iqUtils.history.push("/"),$.iqListings.checkAdvancedFilters(type)},applyAdvancedFilter:function(type){var formTypeSubmitted="#iq_"+type+"_form",newPropertyType="";if($.iqListings.searchform!=formTypeSubmitted){switch(type){case"res_criteria":newPropertyType="residential";break;case"com_criteria":newPropertyType="commercial";break;case"lan_criteria":newPropertyType="land";break;case"mul_criteria":newPropertyType="multifamily"}$.iqListings.update_autocomplete_form(),$.iqListings.setFilter("property_type",newPropertyType),$("#iqListingsContainer").removeClass("hasModal"),$("#iq_"+type+"_modal").modal("hide"),document.activeElement.blur()}else $.iqListings.closeAdvancedFilter(type),$.iqListings.update_autocomplete_form(),$.iqListings.criteriasearch(1),$.iqListings.checkAdvancedFilters(type)},change_listprice:function(){$("#iq_criteria_form-pricemin").attr("data-settings-pricemin");switch($("#iq_criteria_form").attr("data-propertytype")){case"residential":$("#iq_res_criteria_form-listingtype").iqFieldValue().toLowerCase(),"res";break;case"multifamily":$("#iq_mul_criteria_form-listingtype").iqFieldValue().toLowerCase(),"mul";break;case"commercial":$("#iq_com_criteria_form-listingtype").iqFieldValue().toLowerCase(),"com";break;case"land":$("#iq_lan_criteria_form-listingtype").iqFieldValue().toLowerCase(),"lan"}},sync_searchformfields:function(index,value){var forms=$.iqListings.searchform+",#iq_criteria_form";$.each(forms.split(","),function(){var oFields=$(this).find($("[data-field="+index+"]"));$(oFields).each(function(){var oField=$("#"+$(this).attr("id"));if(0!==oField.length&&-1===$(oField).attr("id").indexOf("display")){var min_value=$("#"+$(oField).attr("id")).attr("data-min"),max_value=$("#"+$(oField).attr("id")).attr("data-max"),curr_value=value,format=$("#"+$(oField).attr("id")).attr("data-format");switch(void 0===format&&(format="any"),$(oField).attr("type").toLowerCase()){case"hidden":case"text":switch($("#"+$(oField).attr("id")).iqFieldValue(value),format){case"any":case"numeric":$("#"+$(oField).attr("id")+"-display").iqFieldValue(value);break;case"numericdecimalcomma":$("#"+$(oField).attr("id")+"-display").iqFieldValue($.iqUtils.numberFormat(value));break;case"numericdecimalcommadollar":$("#"+$(oField).attr("id")+"-display").iqFieldValue("$"+$.iqUtils.numberFormat(value))}curr_value===min_value&&$("#"+$(oField).attr("id")+"-display").iqFieldValue("No Min"),curr_value===max_value&&$("#"+$(oField).attr("id")+"-display").iqFieldValue("No Max");break;case"radio":case"checkbox":$(oField).parent().find(":input").each(function(){$(this).attr("value").toLowerCase()===value.toLowerCase()?($(this).prop("checked",!0),$(this).parent().hasClass("btn")&&$(this).parent().addClass("active")):($(this).prop("checked",!1),value.toLowerCase().indexOf($(this).attr("value").toLowerCase())>-1&&$(this).prop("checked",!0),$(this).parent().hasClass("btn")&&$(this).parent().removeClass("active"))});break;case"select":$("#"+$(oField).attr("id")).iqFieldValue(value)}}})}),$.each("streetaddress,state,county,city,area,zipcode,schooldisctrict,highschool,jrhighschool,elementaryschool".split(","),function(){if(index===this&&""!==value)switch(index.toLowerCase()){case"zipcode":$($.iqListings.searchform).attr("data-autocomplete-text","Zip Code: "+$.iqUtils.fCase(value));break;case"schooldistrict":$($.iqListings.searchform).attr("data-autocomplete-text","School District: "+$.iqUtils.fCase(value));break;case"highschool":$($.iqListings.searchform).attr("data-autocomplete-text","High School: "+$.iqUtils.fCase(value));break;case"jrhighschool":$($.iqListings.searchform).attr("data-autocomplete-text","Jr. High School: "+$.iqUtils.fCase(value));break;case"elementaryschool":$($.iqListings.searchform).attr("data-autocomplete-text","Elementary School: "+$.iqUtils.fCase(value));break;default:$($.iqListings.searchform).attr("data-autocomplete-text",$.iqUtils.fCase(this)+": "+$.iqUtils.fCase(value))}}),"pricemin"===index.toLowerCase()&&$($.iqListings.searchform).attr("data-pricemin",value),"pricemax"===index.toLowerCase()&&$($.iqListings.searchform).attr("data-pricemax",value)},slide_menu:function(){var viewport=$.iqUtils.getViewPort(),oSlideMenu=$(".st-sitemenu-02");oSlideMenu.toggleClass("open"),$(".nav-stacked").css({"max-height":$(window).height()}),$(".nav-stacked").css({"overflow-x":"hidden"}),$(".nav-stacked").css({"overflow-y":"auto"}),oSlideMenu.hasClass("open")?(oSlideMenu.find("#nav-expander .fa").removeClass("fa-bars"),oSlideMenu.animate({right:"0px"},{duration:300,queue:!1,done:function(){"xs"!=viewport&&"sm"!=viewport&&$("#nav-expander").show()}}),oSlideMenu.find("#nav-expander .fa").addClass("fa-times")):(oSlideMenu.find("#nav-expander .fa").removeClass("fa-times"),oSlideMenu.animate({right:"-"+parseInt(oSlideMenu.css("width"))},{duration:300,queue:!1,done:function(){"xs"!=viewport&&"sm"!=viewport&&$("#nav-expander").hide()}}),oSlideMenu.find("#nav-expander .fa").addClass("fa-bars"))},slide_menu_bs5:function(){var viewport=$.iqUtils.getViewPort(),oSlideMenu=$(".st-sitemenu-02v2");$("body").hasClass("editbar")&&($(".st-sitemenu-02v2").css("top","50px"),$("#edit-menu").css("z-index","12005"),$(".st-sitemenu-02v2 .navbar-header .navbar-toggle").css({top:"50px","margin-top":"0px"})),oSlideMenu.toggleClass("open"),$(".nav-stacked").css({"max-height":$(window).height()}),$(".nav-stacked").css({"overflow-x":"hidden"}),$(".nav-stacked").css({"overflow-y":"auto"}),oSlideMenu.hasClass("open")?(oSlideMenu.find("#nav-expander .fa").removeClass("fa-bars"),oSlideMenu.animate({right:"0px"},{duration:300,queue:!1,done:function(){"xs"!=viewport&&"sm"!=viewport&&$("#nav-expander").show()}}),oSlideMenu.find(".navbar-fixed-top").css("display","block"),oSlideMenu.find("#nav-expander .fa").addClass("fa-times")):(oSlideMenu.find("#nav-expander .fa").removeClass("fa-times"),oSlideMenu.animate({right:"-"+parseInt(oSlideMenu.css("width"))},{duration:300,queue:!1,done:function(){}}),oSlideMenu.find(".navbar-fixed-top").css("display","none"),oSlideMenu.find("#nav-expander .fa").addClass("fa-bars"))},setPriceLabel:function(){var defaultPriceLabel=$("#dropdownMenuPrice").data("list_price_label"),currentMinPrice=$("#iq_criteria_form-pricemin").val().trim(),currentMaxPrice=$("#iq_criteria_form-pricemax").val().trim(),customMinPrice=!1,customMaxPrice=!1,displayMin="",displayMax="",displayPriceLabel=defaultPriceLabel;""!=currentMinPrice&&(customMinPrice=!0,displayMin=currentMinPrice>999999?$.iqUtils.abbrNum(currentMinPrice,1):$.iqUtils.abbrNum(currentMinPrice,0)),""!=currentMaxPrice&&(customMaxPrice=!0,displayMax=currentMaxPrice>999999?$.iqUtils.abbrNum(currentMaxPrice,1):$.iqUtils.abbrNum(currentMaxPrice,0)),1==customMinPrice&&0==customMaxPrice&&(displayPriceLabel="Price: "+displayMin+"+"),0==customMinPrice&&1==customMaxPrice&&(displayPriceLabel="Price &lt; "+displayMax),1==customMinPrice&&customMaxPrice&&(displayPriceLabel=displayMin+" - "+displayMax),$("#dropdownMenuPrice .selectedValue").html(displayPriceLabel),defaultPriceLabel!=displayPriceLabel?$("#dropdownMenuPrice").addClass("btn-filtered"):$("#dropdownMenuPrice").removeClass("btn-filtered")},setFilter:function(pField,pValue){switch(pField){case"property_type":$("#dropdownMenuPropertyType").dropdown("toggle"),$("#dropdownMenuPropertyType").removeClass("btn-filtered"),$("#dropdownMenuPropertyTypeOptions li").removeClass("active"),$("#iq_type_form-propertytype").iqFieldValue(pValue),$(".iq_sortby_filter").css("display","none"),$.iqListings.setPropertyType(pValue),"residential"==pValue&&($("[data-propertytype-label]").html("Residential"),$("[data-propertytype-label-mobile]").html("Res"),$("#ddMenuOpt_PropertyTypeRes").addClass("active"),$("#iq_sortby_residential").css("display","inline-block"),$.iqListings.searchform="#iq_res_criteria_form"),"commercial"==pValue&&($("#dropdownMenuPropertyType").addClass("btn-filtered"),$("[data-propertytype-label]").html("Commercial"),$("[data-propertytype-label-mobile]").html("Com"),$("#ddMenuOpt_PropertyTypeCom").addClass("active"),$("#iq_sortby_commercial").css("display","inline-block"),$.iqListings.searchform="#iq_com_criteria_form"),"land"==pValue&&($("#dropdownMenuPropertyType").addClass("btn-filtered"),$("[data-propertytype-label]").html("Land"),$("[data-propertytype-label-mobile]").html("Lan"),$("#ddMenuOpt_PropertyTypeLan").addClass("active"),$("#iq_sortby_land").css("display","inline-block"),$.iqListings.searchform="#iq_lan_criteria_form"),"multifamily"==pValue&&($("#dropdownMenuPropertyType").addClass("btn-filtered"),$("[data-propertytype-label]").html("Multifamily"),$("[data-propertytype-label-mobile]").html("Mul"),$("#ddMenuOpt_PropertyTypeMul").addClass("active"),$("#iq_sortby_multifamily").css("display","inline-block"),$.iqListings.searchform="#iq_mul_criteria_form"),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.initSearchForm(),$.iqListings.criteriasearch(1);break;case"style":$("#iq_res_criteria_form-resstyle").val(pValue),$.iqListings.setResidentialStyle(pValue),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.initSearchForm(),$.iqListings.criteriasearch(1);break;case"price":var minPrice=$("#iq_criteria_form-pricemin").val(),maxPrice=$("#iq_criteria_form-pricemax").val();""===minPrice&&(minPrice=0),""===maxPrice&&(maxPrice=99999999),$($.iqListings.searchform).attr("data-pricemin",minPrice),$($.iqListings.searchform+"-pricemin").val(minPrice),$($.iqListings.searchform+"-pricemax").val(maxPrice),$.iqListings.setPriceLabel(),$("#dropdownMenuPrice").parent().hasClass("open")&&$("#dropdownMenuPrice").parent().removeClass("open"),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1);break;case"pricemin":var currMin=$("#iq_criteria_form-pricemin").val();$("#iq_criteria_form-pricemin").val(pValue),$("[name=pricemin]").iqFieldValue(pValue),pValue>currMin&&($("#iq_criteria_form-pricemin").val(pValue),$("[name=pricemin]").iqFieldValue(pValue),$($.iqListings.searchform).attr("data-pricemin",pValue));break;case"pricemax":var currMax=$("#iq_criteria_form-pricemax").val();$("#iq_criteria_form-pricemax").val(pValue),$("[name=pricemax]").iqFieldValue(pValue),$($.iqListings.searchform).attr("data-pricemax",pValue),pValue<currMax&&($("#iq_criteria_form-pricemax").val(pValue),$("[name=pricemax]").iqFieldValue(pValue));break;case"beds":var arrBeds=pValue.split(",");$("#iq_res_criteria_form-bedsmin").iqFieldValue(arrBeds[0]),$("#iq_res_criteria_form-bedsmax").iqFieldValue("99"),$.iqListings.sync_searchformfields("bedsmin",arrBeds[0]),0==arrBeds[0]?($("#dropdownMenuBeds .selectedValue").html(""),$("#dropdownMenuBeds").removeClass("btn-filtered")):($("#dropdownMenuBeds .selectedValue").html(arrBeds[0]+"+"),$("#dropdownMenuBeds").addClass("btn-filtered")),$("#dropdownMenuBedOptions li").removeClass("active"),$("#ddMenuOpt_Beds"+arrBeds[0]).addClass("active"),1==arrBeds[1]?$.iqListings.criteriasearch(1,"t"):($("#dropdownMenuBeds").dropdown("toggle"),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1));break;case"baths":var arrBaths=pValue.split(",");$("#iq_res_criteria_form-bathsmin").iqFieldValue(arrBaths[0]),$("#iq_res_criteria_form-bathsmax").iqFieldValue("99"),$.iqListings.sync_searchformfields("bathsmin",arrBaths[0]),0==arrBaths[0]?($("#dropdownMenuBaths .selectedValue").html(""),$("#dropdownMenuBaths").removeClass("btn-filtered")):($("#dropdownMenuBaths .selectedValue").html(arrBaths[0]+"+"),$("#dropdownMenuBaths").addClass("btn-filtered")),$("#dropdownMenuBathOptions li").removeClass("active"),$("#ddMenuOpt_Baths"+arrBaths[0]).addClass("active"),1==arrBaths[1]?$.iqListings.criteriasearch(1,"t"):($("#dropdownMenuBaths").dropdown("toggle"),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1));break;case"sqfootmin":$('[name="sqfootmin"]').val(pValue),$("#iq_com_criteria_form-sqfootmin").val(pValue),""!=pValue&&parseInt(pValue)>0&&$("#dropdownMenuSqFt").addClass("btn-filtered");break;case"sqfootmax":$('[name="sqfootmax"]').val(pValue),$("#iq_com_criteria_form-sqfootmax").val(pValue),""!=pValue&&99999!=parseInt(pValue)&&$("#dropdownMenuSqFt").addClass("btn-filtered");break;case"sqfeet":$("#dropdownMenuSqFt").dropdown("toggle"),$("#dropdownMenuSqFt").removeClass("btn-filtered");var sqfootmin=$('[name="sqfootmin"]').val(),sqfootmax=$('[name="sqfootmax"]').val();$("#iq_com_criteria_form-sqfootmin").val(sqfootmin),$("#iq_com_criteria_form-sqfootmax").val(sqfootmax),""!=sqfootmin&&parseInt(sqfootmin)>0&&$("#dropdownMenuSqFt").addClass("btn-filtered"),""!=sqfootmax&&99999!=parseInt(sqfootmax)&&$("#dropdownMenuSqFt").addClass("btn-filtered"),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1);break;case"subtype":$("#dropdownMenuSubtype").dropdown("toggle"),$("#dropdownMenuSubtype").removeClass("btn-filtered"),$("#iq_com_criteria_form-subtype").iqFieldValue(pValue),""!=pValue&&$("#dropdownMenuSubtype").addClass("btn-filtered"),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.change_listprice(),$.iqListings.criteriasearch(1);break;case"acreage":var arrAcreage=pValue.split(",");$("#dropdownMenuAcreage").dropdown("toggle"),
$("#dropdownMenuAcreage").removeClass("btn-filtered"),$("#dropdownMenuAcreage .selectedValue").html(""),$("#dropdownMenuAcreageOptions li").removeClass("active"),0==arrAcreage[0]&&99==arrAcreage[1]&&$("#ddMenuOpt_Acreage0").addClass("active"),0==arrAcreage[0]&&1==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage1").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("&lt;1")),1==arrAcreage[0]&&2==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage2").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("1-2")),2==arrAcreage[0]&&5==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage3").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("2-5")),5==arrAcreage[0]&&10==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage4").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("5-10")),10==arrAcreage[0]&&20==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage5").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("10-20")),20==arrAcreage[0]&&40==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage6").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("20-40")),40==arrAcreage[0]&&80==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage7").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("40-80")),80==arrAcreage[0]&&100==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage8").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("80-100")),100==arrAcreage[0]&&500==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage9").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("100-500")),500==arrAcreage[0]&&9999==arrAcreage[1]&&($("#dropdownMenuAcreage").addClass("btn-filtered"),$("#ddMenuOpt_Acreage10").addClass("active"),$("#dropdownMenuAcreage .selectedValue").html("500+")),$("#iq_res_criteria_form-acreagemin").iqFieldValue(arrAcreage[0]),$("#iq_res_criteria_form-acreagemax").iqFieldValue(arrAcreage[1]),$("#iq_lan_criteria_form-acreagemin").iqFieldValue(arrAcreage[0]),$("#iq_lan_criteria_form-acreagemax").iqFieldValue(arrAcreage[1]),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1);break;case"zoning":$("#dropdownMenuZoning").dropdown("toggle"),$("#dropdownMenuZoning .selectedValue").html(""),$("#dropdownMenuZoning").removeClass("btn-filtered"),$("#dropdownMenuZoningOptions li").removeClass("active"),""==pValue?$("#dropdownMenuZoningOptions li:first").addClass("active"):($("#dropdownMenuZoning").addClass("btn-filtered"),$("#dropdownMenuZoningOptions a").filter(function(index){return $(this).text()===pValue}).parent().addClass("active"),pValue.length>8?$("#dropdownMenuZoning .selectedValue").html(pValue.substring(0,8).toLowerCase().replace(/\b[a-z]/g,function(letter){return letter.toUpperCase()})+"..."):$("#dropdownMenuZoning .selectedValue").html(pValue.toLowerCase().replace(/\b[a-z]/g,function(letter){return letter.toUpperCase()}))),$("#iq_lan_criteria_form-zoning").iqFieldValue(pValue),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1);break;case"buildings":var arrBuildings=pValue.split(","),buildingid=0;$("#dropdownMenuBuildings").dropdown("toggle"),$("#dropdownMenuBuildings .selectedValue").html(""),$("#iq_mul_criteria_form-buildingsmin").iqFieldValue(arrBuildings[0]),$("#iq_mul_criteria_form-buildingsmax").iqFieldValue(arrBuildings[1]),$("#dropdownMenuBuildings").removeClass("btn-filtered"),$("#dropdownMenuBuildingOptions li").removeClass("active"),0==arrBuildings[0]&&99==arrBuildings[1]&&(buildingid=0,$("#ddMenuOpt_Buildings0").addClass("active")),2==arrBuildings[0]&&4==arrBuildings[1]&&(buildingid=1,$("#dropdownMenuBuildings").addClass("btn-filtered"),$("#ddMenuOpt_Buildings1").addClass("active"),$("#dropdownMenuBuildings .selectedValue").html("2-4")),5==arrBuildings[0]&&8==arrBuildings[1]&&(buildingid=2,$("#dropdownMenuBuildings").addClass("btn-filtered"),$("#ddMenuOpt_Buildings2").addClass("active"),$("#dropdownMenuBuildings .selectedValue").html("5-8")),9==arrBuildings[0]&&12==arrBuildings[1]&&(buildingid=3,$("#dropdownMenuBuildings").addClass("btn-filtered"),$("#ddMenuOpt_Buildings3").addClass("active"),$("#dropdownMenuBuildings .selectedValue").html("9-12")),13==arrBuildings[0]&&24==arrBuildings[1]&&(buildingid=4,$("#dropdownMenuBuildings").addClass("btn-filtered"),$("#ddMenuOpt_Buildings4").addClass("active"),$("#dropdownMenuBuildings .selectedValue").html("13-24")),25==arrBuildings[0]&&99==arrBuildings[1]&&(buildingid=5,$("#dropdownMenuBuildings").addClass("btn-filtered"),$("#ddMenuOpt_Buildings5").addClass("active"),$("#dropdownMenuBuildings .selectedValue").html("25+")),$('input:radio[name="pop_mulbuildings"]').filter('[value="'+buildingid+'"]').attr("checked",!0),$.iqListings.sync_searchformfields("buildingsmin",arrBuildings[0]),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1);break;case"unitsmin":break;case"units":var newUnits=pValue.split(","),unitsid=0;$("#dropdownMenuUnits").dropdown("toggle"),$("#dropdownMenuUnits .selectedValue").html(""),$("#iq_mul_criteria_form-unitsmin").iqFieldValue(newUnits[0]),$("#iq_mul_criteria_form-unitsmax").iqFieldValue(newUnits[1]),$("#dropdownMenuUnits").removeClass("btn-filtered"),$("#dropdownMenuUnitOptions li").removeClass("active"),0==newUnits[0]&&99==newUnits[1]&&(unitsid=0,$("#ddMenuOpt_Units0").addClass("active")),2==newUnits[0]&&4==newUnits[1]&&(unitsid=1,$("#dropdownMenuUnits").addClass("btn-filtered"),$("#ddMenuOpt_Units1").addClass("active"),$("#dropdownMenuUnits .selectedValue").html("2-4")),5==newUnits[0]&&8==newUnits[1]&&(unitsid=2,$("#dropdownMenuUnits").addClass("btn-filtered"),$("#ddMenuOpt_Units2").addClass("active"),$("#dropdownMenuUnits .selectedValue").html("5-8")),9==newUnits[0]&&12==newUnits[1]&&(unitsid=3,$("#dropdownMenuUnits").addClass("btn-filtered"),$("#ddMenuOpt_Units3").addClass("active"),$("#dropdownMenuUnits .selectedValue").html("9-12")),13==newUnits[0]&&24==newUnits[1]&&(unitsid=4,$("#dropdownMenuUnits").addClass("btn-filtered"),$("#ddMenuOpt_Units4").addClass("active"),$("#dropdownMenuUnits .selectedValue").html("13-24")),25==newUnits[0]&&99==newUnits[1]&&(unitsid=5,$("#dropdownMenuUnits").addClass("btn-filtered"),$("#ddMenuOpt_Units5").addClass("active"),$("#dropdownMenuUnits .selectedValue").html("25+")),$('input:radio[name="pop_mulunits"]').filter('[value="'+unitsid+'"]').attr("checked",!0),$.iqListings.sync_searchformfields("unitsmin",newUnits[0]),$.iqListings.sync_searchformfields("unitsmax",newUnits[1]),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1)}},clearFilter:function(pField){switch(pField){case"price":$("#iq_criteria_form-pricemin").val(""),$("#iq_criteria_form-pricemax").val(""),$($.iqListings.searchform).attr("data-pricemin",""),$("[name=pricemin]").val(""),$("#iq_res_criteria_form-pricemin").val(""),$("#iq_res_criteria_form-pricemax").val(""),$("[name=pricemax]").val(""),$.iqListings.setPriceLabel(),$("#dropdownMenuPrice").parent().hasClass("open")&&$("#dropdownMenuPrice").parent().removeClass("open"),$.iqListings.criteriasearch(1)}},sessionStorageToForm:function(){var oData=$.parseJSON($.iqUtils.sessionStorage("listings_data"));if(oData){var property_type="residential";void 0!==oData.propertytype&&(property_type=oData.propertytype),$.iqListings.setPropertyType(property_type);var forms=$.iqListings.searchform+",#iq_criteria_form";$.each(forms.split(","),function(){$.each(oData,function(index,value){$.iqListings.sync_searchformfields(index,value)})}),setTimeout(function(){var statuscode=$($.iqListings.searchform+"-statuscode").iqFieldValue().toLowerCase();""!==statuscode&&($($.iqListings.searchform).find("[data-statuscode]").each(function(){$(this).parent().removeClass("active")}),$.each(statuscode.split(","),function(){$($.iqListings.searchform).find("[data-statuscode="+this.replace(/ /g,"").toLowerCase()+"]").each(function(){$(this).prop("checked",!0),-1!==$(this).parent().attr("class").indexOf("btn")&&$(this).parent().addClass("active")})}))},500),$.iqUtils.sessionStorage("listings_data",null)}if(""!==$($.iqListings.searchform+"-watchname").iqFieldValue()){var state=$($.iqListings.searchform+"-state").iqFieldValue(),county=$($.iqListings.searchform+"-county").iqFieldValue(),city=$($.iqListings.searchform+"-city").iqFieldValue(),area=$($.iqListings.searchform+"-area").iqFieldValue(),zipcode=$($.iqListings.searchform+"-zipcode").iqFieldValue(),communityname=$($.iqListings.searchform+"-communityname").iqFieldValue(),propertytype=$($.iqListings.searchform+"-propertytype").iqFieldValue();if(""!==state&&$("#iq_listings-location").iqFieldValue("State: "+$.iqUtils.fCase(state)),""!==county&&$("#iq_listings-location").iqFieldValue("County: "+$.iqUtils.fCase(county)),""!==city&&$("#iq_listings-location").iqFieldValue("City: "+$.iqUtils.fCase(city)),""!==area&&$("#iq_listings-location").iqFieldValue("Area: "+$.iqUtils.fCase(area)),""!==zipcode&&$("#iq_listings-location").iqFieldValue("Zip Code: "+$.iqUtils.fCase(zipcode)),""!==communityname&&$("#iq_listings-location").iqFieldValue("Community: "+$.iqUtils.fCase(communityname)),$("#iq_property_type_label").iqFieldValue(propertytype),"residential"===propertytype){var style=$($.iqListings.searchform+"-resstyle").iqFieldValue();$("#iq_type_form-resstyle").iqFieldValue(style)}}1===$("#iqMapContainer").length&&($.iqListings.current_map.center.lat=$($.iqListings.searchform+"-lat").iqFieldValue(),$.iqListings.current_map.center.lon=$($.iqListings.searchform+"-lon").iqFieldValue(),$.iqListings.current_map.zoom_level=$($.iqListings.searchform+"-zoomlevel").iqFieldValue(),$.iqListings.current_map.is_centered=!0),$.iqUtils.cookie("listings_data",!1,-1),$.iqListings.criteriasearch()},updateSearchBy:function(newSearchBy){if($("#iqListingsContainer").data("searchby")!=newSearchBy)if($("#iqListingsContainer").data("searchby",newSearchBy),$($.iqListings.searchform+"-searchby").iqFieldValue(newSearchBy),"map"===newSearchBy){$($.iqListings.searchform+"-rowlimit").iqFieldValue("500"),$($.iqListings.searchform+"-maxrows").iqFieldValue("500"),window.history.pushState("searchby_map",null,$.iqListings.replaceUrlParamVal("searchby","map")),$("#iqGridResults").hide(),$("#iqListResults").show(),$("#iqMapContainer").show(),$("#btnSwitchViewToGrid").removeClass("btn-primary"),$("#btnSwitchViewToMap").addClass("btn-primary"),$("html, body").scrollTop(0),$.iqListings.resizeLayoutPanes(),$.iqListings.map(),$("#iqListResults").html($.iqListings.getLoadingHtml("Loading Listing")),$("#iq_listing_dialog").length&&$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html("");var hasBounds=setInterval(function(){var topLeftLon=$("#iqMapContainer").attr("data-topleftlon"),topLeftLat=$("#iqMapContainer").attr("data-topleftlat"),bottomRightLat=$("#iqMapContainer").attr("data-bottomrightlat"),bottomRightLon=$("#iqMapContainer").attr("data-bottomrightlon");if(void 0!==typeof topLeftLon&&void 0!==typeof topLeftLat&&void 0!==typeof bottomRightLat&&void 0!==typeof bottomRightLon){clearInterval(hasBounds);var topLeftLon=$("#iqMapContainer").attr("data-topleftlon"),topLeftLat=$("#iqMapContainer").attr("data-topleftlat"),bottomRightLat=$("#iqMapContainer").attr("data-bottomrightlat"),bottomRightLon=$("#iqMapContainer").attr("data-bottomrightlon");$.iqListings.current_map.is_loaded=!1,$.iqListings.map_events(),$.iqListings.criteriasearch(1)}},1e3)}else $($.iqListings.searchform+"-rowlimit").iqFieldValue("0"),$($.iqListings.searchform+"-maxrows").iqFieldValue("36"),window.history.pushState("searchby_grid",null,$.iqListings.replaceUrlParamVal("searchby","grid")),$("#iqGridResults").show(),$("#iqGridResults").css({visibility:"visible",height:"100vh","overflow-y":"scroll"}),$("#iqListResults").hide(),$("#iqMapContainer").hide(),$("#btnSwitchViewToGrid").addClass("btn-primary"),$("#btnSwitchViewToMap").removeClass("btn-primary"),$.iqListings.current_grid_scroll_pos>0&&$("html, body").scrollTop($.iqListings.current_grid_scroll_pos),$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$.iqListings.criteriasearch(1)},listings_data:function(){var oData=$($.iqListings.searchform).iqSerializeFormToStruct({includeblanks:!1});$.iqUtils.sessionStorage("listings_data",oData),$.iqUtils.cookie("listings_data",!0)},gpslocation:function(countonly){if("map"===$($.iqListings.searchform+"-searchby").iqFieldValue()?$("#iqMapContainer").data("query",""):($.iqUtils.uiProcessing("show","Getting Location"),$("#iq_listings-gpslocation").find("i").removeClass("fa-map-marker").addClass("fa-refresh fa-spin")),!navigator.geolocation)return void $.iqUtils.uiMessage("","Geolocation is not supported by this browser.");navigator.geolocation.getCurrentPosition(function(location){$.iqListings.gpslocation_complete(location,countonly)},function(error){$.iqListings.gpslocation_error(error)})},gpslocation_complete:function(location,countonly){$("#iq_listings-gpslocation").find("i").removeClass("fa-refresh fa-spin").addClass("fa-map-marker"),$.iqListings.current_map.center.lat=location.coords.latitude,$.iqListings.current_map.center.lon=location.coords.longitude,$($.iqListings.searchform+"-lat").iqFieldValue(location.coords.latitude),$($.iqListings.searchform+"-lon").iqFieldValue(location.coords.longitude),$($.iqListings.searchform+"-searchnearby").iqFieldValue("T"),$($.iqListings.searchform+"-state").iqFieldValue(""),$($.iqListings.searchform+"-city").iqFieldValue(""),$($.iqListings.searchform+"-county").iqFieldValue(""),$($.iqListings.searchform+"-zipcode").iqFieldValue(""),$($.iqListings.searchform+"-topleftlat").iqFieldValue(""),$($.iqListings.searchform+"-topleftlon").iqFieldValue(""),$($.iqListings.searchform+"-bottomrightlat").iqFieldValue(""),$($.iqListings.searchform+"-bottomrightlon").iqFieldValue(""),$.iqListings.update_autocomplete_form(),void 0!==countonly?($.iqUtils.uiProcessing("hide"),$($.iqListings.searchform+"-searchnearby").iqFieldValue("T"),$.iqListings.criteriasearch(1,"t")):1===$("#iqMapContainer").length?($.iqMap_CenterOnLatLng($.iqListings.current_map.center.lat,$.iqListings.current_map.center.lon),$.iqMap_AddPushPin(location.coords.latitude,location.coords.longitude)):($.iqListings.updateSearchBy("map"),self.location="/listings/searchby_map")},gpslocation_error:function(error){if($.iqUtils.uiProcessing("hide"),"https:"===window.location.protocol)switch(error.code){case error.PERMISSION_DENIED:$.iqUtils.uiMessage("","Your current location could not be obtained because your browser has denied the request for location. Please update your phones location settings and try again later.",5e3);break;case error.POSITION_UNAVAILABLE:$.iqUtils.uiMessage("","Your current location could not be obtained because location information is unavailable. Please try again later.",5e3);break;case error.TIMEOUT:$.iqUtils.uiMessage("","Your current location could not be obtained because the request to get your location timed out. Please try again later.",5e3);break;case error.UNKNOWN_ERROR:$.iqUtils.uiMessage("","Your current location could not be because of an unknown error. Please try again later.",5e3)}},criteriasearch:function(startpage,countonly,searchform){var oDataDefaults={returnformat:"json",method:"docriteriasearch",layout:"grid,sidebar",impression_from:"Search Results",return_query:!0};$("#iqListResults").is(":visible")||$.iqListings.closeListing(),void 0===countonly&&(countonly="f"),void 0===searchform&&(searchform=$.iqListings.searchform),1===(startpage=startpage||parseInt($(searchform+"-startpage").iqFieldValue()))&&$(searchform+"-startpage").iqFieldValue(startpage);var reo="T",shortsale="T",resale="T",propertytype="",subtype="";reo=$(searchform+"-reo").iqFieldValue(),shortsale=$(searchform+"-shortsale").iqFieldValue(),resale=$(searchform+"-resale").iqFieldValue(),subtype=$(searchform+"-subtype").iqFieldValue(),"T"!==reo&&(reo="F"),"T"!==shortsale&&(shortsale="F"),"T"!==resale&&(resale="F");var bedsmin="0",bedsmax="99",bathsmin="0",bathsmax="99",sqfootmin="0",sqfootmax="99999",sqfootofficemin="0",sqfootofficemax="99999",acreagemin="0",acreagemax="99",unitsmin="0",unitsmax="99",buildingsmax="0",buildingsmin="99",yearbuiltmin="",yearbuiltmax="",garagemin="0",garagemax="10";switch(searchform){case"#iq_res_criteria_form":propertytype="residential",bedsmin=$("#iq_res_criteria_form-bedsmin").iqFieldValue(),bedsmax=$("#iq_res_criteria_form-bedsmax").iqFieldValue(),bathsmin=$("#iq_res_criteria_form-bathsmin").iqFieldValue(),bathsmax=$("#iq_res_criteria_form-bathsmax").iqFieldValue(),sqfootmin=$("#iq_res_criteria_form-sqfootmin").iqFieldValue(),sqfootmax=$("#iq_res_criteria_form-sqfootmax").iqFieldValue(),isNaN(parseInt(sqfootmin))&&(sqfootmin="0"),isNaN(parseInt(sqfootmax))&&(sqfootmax="99999"),acreagemin=$("#iq_res_criteria_form-acreagemin").iqFieldValue(),acreagemax=$("#iq_res_criteria_form-acreagemax").iqFieldValue(),isNaN(parseInt(acreagemin))&&(acreagemin="0"),isNaN(parseInt(acreagemax))&&(acreagemax="99"),yearbuiltmin=$("#iq_res_criteria_form-yearbuiltmin").iqFieldValue(),yearbuiltmax=$("#iq_res_criteria_form-yearbuiltmax").iqFieldValue(),garagemin=$("#iq_res_criteria_form-garagemin").iqFieldValue(),garagemax=$("#iq_res_criteria_form-garagemax").iqFieldValue(),isNaN(parseInt(garagemin))&&(garagemin="0"),isNaN(parseInt(garagemax))&&(garagemax="99"),$("#iq_res_criteria_form-beds").iqFieldValue(bedsmin),"0"!==bedsmin&&"99"!==bedsmax?$("#iq_res_criteria_form-beds").iqFieldValue(bedsmin+"-"+bedsmax):"99"!==bedsmax&&$("#iq_res_criteria_form-beds").iqFieldValue(bedsmin+"-"+bedsmax),$("#iq_res_criteria_form-baths").iqFieldValue(bathsmin),"0"!==bathsmin&&"99"!==bathsmax?$("#iq_res_criteria_form-baths").iqFieldValue(bathsmin+"-"+bathsmax):"99"!==bathsmax&&$("#iq_res_criteria_form-baths").iqFieldValue(bathsmin+"-"+bathsmax),$("#iq_res_criteria_form-sqfoot").iqFieldValue(sqfootmin),"0"!==sqfootmin&&"99999"!==sqfootmax?$("#iq_res_criteria_form-sqfoot").iqFieldValue(sqfootmin+"-"+sqfootmax):"99999"!==sqfootmax&&$("#iq_res_criteria_form-sqfoot").iqFieldValue(sqfootmin+"-"+sqfootmax),$("#iq_res_criteria_form-acreage").iqFieldValue(acreagemin),"0"!==acreagemin&&"99"!==acreagemax?$("#iq_res_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax):"99"!==acreagemax&&$("#iq_res_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax),$("#iq_res_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin),""!==yearbuiltmin&&""!==yearbuiltmax&&yearbuiltmax!==$.iqListings.current_year()?$("#iq_res_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin+"-"+yearbuiltmax):yearbuiltmax!==$.iqListings.current_year()&&""!==yearbuiltmax&&$("#iq_res_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin+"-"+yearbuiltmax),$("#iq_res_criteria_form-garage").iqFieldValue(garagemin),"0"!==garagemin&&"10"!==garagemax?$("#iq_res_criteria_form-garage").iqFieldValue(garagemin+"-"+garagemax):"10"!==garagemax&&$("#iq_res_criteria_form-garage").iqFieldValue(garagemin+"-"+garagemax);break;case"#iq_com_criteria_form":propertytype="commercial",sqfootmin=$("#iq_com_criteria_form-sqfootmin").iqFieldValue(),sqfootmax=$("#iq_com_criteria_form-sqfootmax").iqFieldValue(),isNaN(parseInt(sqfootmin))&&(sqfootmin="0"),isNaN(parseInt(sqfootmax))&&(sqfootmax="99999"),sqfootofficemin=$("#iq_com_criteria_form-sqfootofficemin").iqFieldValue(),sqfootofficemax=$("#iq_com_criteria_form-sqfootofficemax").iqFieldValue(),isNaN(parseInt(sqfootofficemin))&&(sqfootofficemin="0"),isNaN(parseInt(sqfootofficemax))&&(sqfootofficemax="99999"),unitsmin=$("#iq_com_criteria_form-unitsmin").iqFieldValue(),unitsmax=$("#iq_com_criteria_form-unitsmax").iqFieldValue(),isNaN(parseInt(unitsmin))&&(unitsmin="0"),isNaN(parseInt(unitsmax))&&(unitsmax="99"),yearbuiltmin=$("#iq_com_criteria_form-yearbuiltmin").iqFieldValue(),yearbuiltmax=$("#iq_com_criteria_form-yearbuiltmax").iqFieldValue(),$("#iq_com_criteria_form-sqfoot").iqFieldValue(sqfootmin),"0"!==sqfootmin&&"99999"!==sqfootmax?$("#iq_com_criteria_form-sqfoot").iqFieldValue(sqfootmin+"-"+sqfootmax):"99999"!==sqfootmax&&$("#iq_com_criteria_form-sqfoot").iqFieldValue(sqfootmin+"-"+sqfootmax),$("#iq_com_criteria_form-sqfootoffice").iqFieldValue(sqfootofficemin),"0"!==sqfootofficemin&&"99999"!==sqfootofficemax?$("#iq_com_criteria_form-sqfootoffice").iqFieldValue(sqfootofficemin+"-"+sqfootofficemax):"99999"!==sqfootofficemax&&$("#iq_com_criteria_form-sqfootoffice").iqFieldValue(sqfootofficemin+"-"+sqfootofficemax),$("#iq_com_criteria_form-units").iqFieldValue(unitsmin),"0"!==unitsmin&&"99"!==unitsmax?$("#iq_com_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax):"99"!==unitsmax&&$("#iq_com_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax),$("#iq_com_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin),""!==yearbuiltmin&&""!==yearbuiltmax&&yearbuiltmax!==$.iqListings.current_year()?$("#iq_com_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin+"-"+yearbuiltmax):yearbuiltmax!==$.iqListings.current_year()&&""!==yearbuiltmax&&$("#iq_com_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin+"-"+yearbuiltmax);break;case"#iq_lan_criteria_form":propertytype="land",acreagemin=$("#iq_lan_criteria_form-acreagemin").iqFieldValue(),acreagemax=$("#iq_lan_criteria_form-acreagemax").iqFieldValue(),isNaN(parseInt(acreagemin))&&(acreagemin="0"),isNaN(parseInt(acreagemax))&&(acreagemax="99"),$("#iq_lan_criteria_form-acreage").iqFieldValue(acreagemin),"0"!==acreagemin&&"99"!==acreagemax?$("#iq_lan_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax):"99"!==acreagemax&&$("#iq_lan_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax);break;case"#iq_mul_criteria_form":propertytype="multifamily",sqfootmin=$("#iq_mul_criteria_form-sqfootmin").iqFieldValue(),sqfootmax=$("#iq_mul_criteria_form-sqfootmax").iqFieldValue(),isNaN(parseInt(sqfootmin))&&(sqfootmin="0"),isNaN(parseInt(sqfootmax))&&(sqfootmax="99999"),unitsmin=$("#iq_mul_criteria_form-unitsmin").iqFieldValue(),unitsmax=$("#iq_mul_criteria_form-unitsmax").iqFieldValue(),buildingsmin=$("#iq_mul_criteria_form-buildingsmin").iqFieldValue(),buildingsmax=$("#iq_mul_criteria_form-buildingsmax").iqFieldValue(),yearbuiltmin=$("#iq_mul_criteria_form-yearbuiltmin").iqFieldValue(),yearbuiltmax=$("#iq_mul_criteria_form-yearbuiltmax").iqFieldValue(),$("#iq_mul_criteria_form-sqfoot").iqFieldValue(sqfootmin),"0"!==sqfootmin&&"99999"!==sqfootmax?$("#iq_mul_criteria_form-sqfoot").iqFieldValue(sqfootmin+"-"+sqfootmax):"99999"!==sqfootmax&&$("#iq_mul_criteria_form-sqfoot").iqFieldValue(sqfootmin+"-"+sqfootmax),$("#iq_mul_criteria_form-units").iqFieldValue(unitsmin),"0"!==unitsmin&&"99"!==unitsmax?$("#iq_mul_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax):"99"!==unitsmax&&$("#iq_mul_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax),$("#iq_mul_criteria_form-buildings").iqFieldValue(buildingsmin),"0"!==buildingsmin&&"99"!==buildingsmax?$("#iq_mul_criteria_form-buildings").iqFieldValue(buildingsmin+"-"+buildingsmax):"99"!==buildingsmax&&$("#iq_mul_criteria_form-buildings").iqFieldValue(buildingsmin+"-"+buildingsmax),$("#iq_mul_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin),""!==yearbuiltmin&&""!==yearbuiltmax&&yearbuiltmax!==$.iqListings.current_year()?$("#iq_mul_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin+"-"+yearbuiltmax):yearbuiltmax!==$.iqListings.current_year()&&""!==yearbuiltmax&&$("#iq_mul_criteria_form-yearbuilt").iqFieldValue(yearbuiltmin+"-"+yearbuiltmax)}var oDataFields=$(searchform).iqSerializeFormToStruct({includeblanks:!1}),sSearchBy=$("#iqListingsContainer").data("searchby"),iMaxRows=oDataFields.maxrows,oData=$.extend(oDataDefaults,oDataFields);if(oData.pricemin<$("#iq_criteria_form-pricemin").attr("data-settings-pricemin")&&(oData.pricemin=$("#iq_criteria_form-pricemin").attr("data-settings-pricemin")),"#iq_res_criteria_form"==searchform&&(oData.resstyle="t"==countonly?$.iqListings.getResidentialStyleList():$.iqListings.getResidentialStyleList("iq-resstyle-menu")),oData.countonly=countonly,"t"!==countonly&&$("#iq_results_counter").html('<i class="fa fa-fw fa-refresh fa-spin"></i>'),$("[data-showcount="+oData.propertytype+"]").html('<i class="fa fa-fw fa-refresh fa-spin"></i>'),"map"===sSearchBy)"t"!==countonly&&$("#iqListResults").html($.iqListings.getLoadingHtml("Loading Listing")),oData.orderby="list_price",oData.orderdirection="desc",oData.method="doMapCriteriaSearch","t"===countonly&&(oData.lat=$("#iqMapContainer").attr("data-lat"),oData.lon=$("#iqMapContainer").attr("data-lon"),oData.topleftlat=$("#iqMapContainer").attr("data-topleftlat"),oData.bottomrightlat=$("#iqMapContainer").attr("data-bottomrightlat"),oData.topleftlon=$("#iqMapContainer").attr("data-topleftlon"),oData.bottomrightlon=$("#iqMapContainer").attr("data-bottomrightlon"));else{if(1===startpage&&"t"!==countonly){if(0!==$(".iq-searchform-filters").length){$("#iqGridResults").offset();$("html,body").animate({scrollTop:0},"fast"),$("#iqGridResults").html($.iqListings.getLoadingHtml("Loading Listing")),$("#iqListResults").html($.iqListings.getLoadingHtml("Loading Listing"))}}else $("#iqGridResults").append($.iqListings.getLoadingHtml("Loading More Listings"));var sSortBy=$("#"+propertytype.toLowerCase()+"_sortby").iqFieldValue(),aSortBy=sSortBy.split("-");oData.orderby=aSortBy[0],oData.orderdirection=aSortBy[1],oData.maxrows=iMaxRows>48?24:iMaxRows,oData.resale=resale,oData.reo=reo,oData.shortsale=shortsale,oData.subtype=subtype,""===$(searchform+"-searchnearby").iqFieldValue()&&(oData.lat="0",oData.lon="0",oData.topleftlon="0",oData.topleftlat="0",oData.bottomrightlon="0",oData.bottomrightlat="0")}return $.iqUtils.localStorage("showprivatelistings_registered")&&(oData.showprivate=!0),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch(jsonRet.STATUS){case 0:"f"===oData.countonly?(1===startpage||"map"===sSearchBy?($.iqListings.update_autocomplete_form(),jsonRet.TOTALROWCOUNT?$("#iqGridResults").append(jsonRet.GRIDLAYOUT):$("#iqGridResults").append(jsonRet.LAYOUT),"map"!==sSearchBy&&($("#iqGridResults").prepend('<a name="1" class="iq_scrollto_page hidden-sm hidden-xs"> </a>'),$("#iqListResults").prepend('<a name="1" class="iq_scrollto_page hidden-sm hidden-xs"> </a>').append(jsonRet.SIDEBARLAYOUT))):($(".iq-sidebar-loading").remove(),$("#iqGridResults").append('<a name="'+startpage+'" class="iq_scrollto_page"> </a>'),jsonRet.TOTALROWCOUNT?$("#iqGridResults").append(jsonRet.GRIDLAYOUT):$("#iqGridResults").append(jsonRet.LAYOUT),$("#iqListResults").append(jsonRet.SIDEBARLAYOUT)),$("#iqListResults").preventBodyScroll(),$("#iq_sortby_residential").hide(),$("#iq_sortby_multifamily").hide(),$("#iq_sortby_land").hide(),$("#iq_sortby_commercial").hide(),$("#iq_sortby_"+$(searchform+"-propertytype").iqFieldValue()).show(),$.iqListings.updaterowcount(jsonRet.TOTALROWCOUNT),"map"===sSearchBy?$.iqListings.cluster(jsonRet.QUERY):$.iqListings.init_isvisible(),$("#iq_results_counter").html($.iqUtils.numberFormat(jsonRet.TOTALROWCOUNT)),$("[data-showcount="+oData.propertytype+"]").html($.iqUtils.numberFormat(jsonRet.TOTALROWCOUNT)),setTimeout(function(){$.iqListings.updateListingCountDisplay()},500),$.iqfieldschanged=!0):($("[data-showcount="+oData.propertytype+"]").html($.iqUtils.numberFormat(jsonRet.TOTALROWCOUNT)),$.iqfieldschanged=!0);break;case 1:$.iqListings.updaterowcount("0"),$("#iqGridResults").html(jsonRet.CONTENT);break;case 2:if($.iqListings.updaterowcount(jsonRet.TOTALROWCOUNT),"map"===sSearchBy){$.iqMap_Clear(),$("#iqListResults").html(jsonRet.MESSAGE);var viewport=$.iqUtils.getViewPort();"xs"!==viewport&&"sm"!==viewport||($("#iqMapContainer").find(".iq-rowlimit").remove(),$("#iqMapContainer").prepend($(".iq-rowlimit").clone()))}else $("#iqGridResults").html(jsonRet.MESSAGE)}$("#iq_results_content_loading").remove(),$.iqUtils.uiProcessing("close")},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iqGridResults").html(httpRet.CONTENT):$("#iqGridResults").html(httpRet.responseText)}}),!1},clear_autocomplete_form:function(updateonly){$("#iq_res_listings-location").iqFieldValue(""),$("#iq_mul_listings-location").iqFieldValue(""),$("#iq_com_listings-location").iqFieldValue(""),$("#iq_lan_listings-location").iqFieldValue(""),"t"!==updateonly&&$("#iq_listings-location").iqFieldValue(""),$.each("iq_res_criteria_form,iq_mul_criteria_form,iq_com_criteria_form,iq_lan_criteria_form".split(","),function(){$("#"+this).attr("data-autocomplete-text",""),$("#"+this+"-streetaddress").iqFieldValue(""),$("#"+this+"-mlnumber").iqFieldValue(""),$("#"+this+"-state").iqFieldValue(""),$("#"+this+"-county").iqFieldValue(""),$("#"+this+"-city").iqFieldValue(""),$("#"+this+"-zipcode").iqFieldValue(""),$("#"+this+"-lat").iqFieldValue(""),$("#"+this+"-lon").iqFieldValue(""),$("#"+this+"-area").iqFieldValue(""),$("#"+this+"-subarea").iqFieldValue(""),$("#"+this+"-schooldistrict").iqFieldValue(""),$("#"+this+"-highschool").iqFieldValue(""),$("#"+this+"-jrhighschool").iqFieldValue(""),$("#"+this+"-elementaryschool").iqFieldValue(""),$("#"+this+"-communityname").iqFieldValue(""),$("#"+this+"-buildingname").iqFieldValue(""),$("#"+this+"-startpage").iqFieldValue("")}),"f"===updateonly&&$.iqListings.criteriasearch(1,"f")},update_autocomplete_form:function(){var previous_query=$("#iqMapContainer").data("query"),streetaddress=$($.iqListings.searchform+"-streetaddress").iqFieldValue(),ml_number=$($.iqListings.searchform+"-mlnumber").iqFieldValue(),state=$($.iqListings.searchform+"-state").iqFieldValue(),county=$($.iqListings.searchform+"-county").iqFieldValue(),city=$($.iqListings.searchform+"-city").iqFieldValue(),area=$($.iqListings.searchform+"-area").iqFieldValue(),zipcode=$($.iqListings.searchform+"-zipcode").iqFieldValue(),lat=$.iqListings.current_map.center.lat,lon=$.iqListings.current_map.center.lon,communityname=$($.iqListings.searchform+"-communityname").iqFieldValue(),searchnearby=$($.iqListings.searchform+"-searchnearby").iqFieldValue(),searchby=$($.iqListings.searchform+"-searchby").iqFieldValue(),autocomplete_text=$($.iqListings.searchform).attr("data-autocomplete-text");$.each("iq_res_criteria_form,iq_mul_criteria_form,iq_com_criteria_form,iq_lan_criteria_form".split(","),function(){$("#"+this+"-streetaddress").iqFieldValue(streetaddress),$("#"+this+"-mlnumber").iqFieldValue(ml_number),$("#"+this+"-state").iqFieldValue(state),$("#"+this+"-county").iqFieldValue(county),$("#"+this+"-city").iqFieldValue(city),$("#"+this+"-zipcode").iqFieldValue(zipcode),$("#"+this+"-lat").iqFieldValue(lat),$("#"+this+"-lon").iqFieldValue(lon),$("#"+this+"-area").iqFieldValue(area),$("#"+this+"-communityname").iqFieldValue(communityname)}),"map"===searchby&&(""!==state&&$("#iqMapContainer").data("query",state),""!==county&&(""===state&&(state=$("#iqMapContainer").attr("data-state")),$("#iqMapContainer").data("query",county+","+state)),""!==city&&(""===state&&(state=$("#iqMapContainer").attr("data-state")),$("#iqMapContainer").data("query",city+","+state)),""!==zipcode&&$("#iqMapContainer").data("query",zipcode),""!=communityname&&""!=city&&""!=state&&$("#iqMapContainer").data("query",communityname+","+city+","+state),""!==area&&""!=state&&$("#iqMapContainer").data("query",area+","+area+","+state),""!==streetaddress&&($("#iqMapContainer").data("query",streetaddress+","+city+","+state),$("#iqMapContainer").data("lat",$.iqListings.current_map.center.lat),$("#iqMapContainer").data("lon",$.iqListings.current_map.center.lon)),
$("#iqMapContainer").data("query")!==previous_query?$.iqMap_GeoCode($("#iqMapContainer").data("query")):""!==searchnearby&&$.iqMap_CenterOnLatLng($.iqListings.current_map.center.lat,$.iqListings.current_map.center.lon)),""!==searchnearby&&$($.iqListings.searchform).find("[data-listings-location]").each(function(){$(this).iqFieldValue("Searching Nearby")}),""!==ml_number&&$($.iqListings.searchform).find("[data-listings-location]").each(function(){$(this).iqFieldValue("MLS#: "+ml_number)}),$($.iqListings.searchform).find("[data-listings-location]").each(function(){$(this).iqFieldValue(autocomplete_text)}),$("#iq_listings-location").iqFieldValue(autocomplete_text)},updateLayout:function(newLayout){if($.iqListings.current_layout!=newLayout){switch($.iqListings.current_layout=newLayout,newLayout){case"detailed":$("#iqGridResults").css("visibility","hidden"),$("#iq_listings_totop").css("visibility","hidden"),$("#iqListResults").show();break;case"browse":switch($("#iqListingsContainer").data("searchby")){case"grid":$("#iqListResults").hide(),$("#iqGridResults").css("visibility","visible"),$("#iq_listings_totop").css("visibility","visible"),0!=$.iqListings.current_listing&&$.iqListings.scrollToActiveListing("grid",$.iqListings.current_listing)}}$.iqListings.resizeLayoutPanes()}},clearSelectedListing:function(){$(".iq_listings_property").each(function(idx,elm){var listingCard=$(this).children(".iq_listing_card");listingCard.hasClass("active")&&listingCard.removeClass("active")})},highlightActiveListing:function(pListingID){$(".iq_listing_card").removeClass("active"),$("[data-listing_card='"+pListingID+"']").addClass("active")},scrollToActiveListing:function(pContainer,pActiveListingID){var viewport=$.iqUtils.getViewPort();if("xs"!=viewport&&"sm"!=viewport){if("grid"==pContainer){var focusOnElement=$("#iqGridResults").find($("[data-listing_card='"+pActiveListingID+"']"));focusOnElement.length&&$("html,body").animate({scrollTop:focusOnElement.offset().top-$("#iqGridResults").offset().top-15},500),$.iqListings.current_listing=0}if("list"==pContainer){var focusOnElement=$("#iqListResults").find($("[data-listing_card='"+pActiveListingID+"']"));if(focusOnElement.length){var listContainer=$("#iqListResults");listContainer.animate({scrollTop:focusOnElement.offset().top-listContainer.offset().top+listContainer.scrollTop()},500)}}}},viewListing:function(obj){var sListingID=$(obj).data("listingid"),hasHrefHistory=obj.hasAttribute("hrefHistory");$.iqUtils.sessionStorage("listings_listing_mlsid",$(obj).data("mlsid")),$.iqUtils.sessionStorage("listings_listing_ml_number",$(obj).data("ml_number")),$.iqUtils.sessionStorage("listings_listing_listingid",$(obj).data("listingid")),$.iqListings.current_listing!=sListingID&&("detailed"==$.iqListings.current_layout?($("#iq_listing_dialog").length&&$("#iq_listing_dialog .modal-body").html($.iqListings.getLoadingHtml()),$("#iq_listing_dialog_v2").length&&$("#iq_listing_dialog_v2 .modal-body").html($.iqListings.getLoadingHtml())):$.iqListings.updateLayout("detailed"),hasHrefHistory||$.iqUtils.history.push($(obj).data("listing_href")))},closeListing:function(){($("#iq_listing_dialog").length||$("#iq_listing_dialog_v2").length)&&($.iqUtils.history.push("/"),$.iqListings.updateLayout("browse"))},getLoadingHtml:function(msg){if(void 0===msg||null===msg)var msg="";var contentLoadingHTML=[];return contentLoadingHTML.push('<div class="row">'),contentLoadingHTML.push('    <div id="iq_results_content_loading" class="col-lg-12 text-center" style="height:100vh">'),contentLoadingHTML.push('        <h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> '+msg+"</h1>"),contentLoadingHTML.push("    </div>"),contentLoadingHTML.push("</div>"),contentLoadingHTML.join("")},details_dialog:function(pMLSID,pListingID){$.iqListings.current_listing=pListingID;var sDialogID="iq_listing_dialog",sDisplayLayout="FullDetails";$.iqListings.isBS5&&(sDialogID="iq_listing_dialog_v2",sDisplayLayout="FullDetails_v2");try{if($("[data-listingid="+pListingID+"]").length>0)var isprivate=$("[data-listingid="+pListingID+"]").attr("data-isprivate").toLowerCase();$.iqListings.updateLayout("detailed"),$.iqListings.current_listing=pListingID,$.iqListings.highlightActiveListing(pListingID),$.iqListings.scrollToActiveListing("list",pListingID),$("#"+sDialogID).bsModal({backdrop:!1,fade:!1,title:"Listing Details",body:$.iqListings.getLoadingHtml()}),$.ajax({url:"/components/listing.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getListingDetails",mlsid:pMLSID,listingid:pListingID,layout:sDisplayLayout,view_from:"Listing Details Popup"},success:function(jsonRet){if(0===jsonRet.STATUS){var oListing=$("#iqListResults").find('[data-listingid="'+pListingID+'"]'),pageview_url=$(oListing).data("url"),pageview_Title=$(oListing).data("streetaddress")+" | "+$(oListing).data("city")+" Real Estate";"myportal"===$("#site-wrapper").attr("data-page")&&(oListing=$(".savedLists").find('[data-savedListingId="'+pListingID+'"]')),$.iqListings.current_row=$(oListing).data("rownumber"),$.iqListings.send_pageview(pageview_url,pageview_Title),$("#"+sDialogID+" .modal-body").html(jsonRet.LAYOUT),$("#iq_listing_share").dropdown(),"map"!==$($.iqListings.searchform+"-searchby").iqFieldValue()&&($(".iq-listing-nav").show(),1===$.iqListings.current_row&&$("#iq_listing_previous").hide()),$("#iq_listing_banners").iqBanners({location:"listing"}),$("a").iqHiddenEmail(),1===$("#iq_listing_learn_more_request").length&&($.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields_condensed",sourcename:$("#iq_listing_learn_more_request").data("sourcename"),mlsid:$("#iq_listing_learn_more_request").data("mlsid"),mlnumber:$("#iq_listing_learn_more_request").data("mlnumber"),propertytype:$("#iq_listing_learn_more_request").data("propertytype"),publicid:$("#iq_listing_learn_more_request").data("publicid"),agentteamid:$("#iq_listing_learn_more_request").data("agentteamid"),url:window.location.href,requiredonly:!0},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_listing_learn_more_request").html(jsonRet.LAYOUT),$("#iq_listing_learn_more_request #iq_lead_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}}),$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields_condensed",sourcename:$("#iq_listing_showing_request").data("sourcename"),mlsid:$("#iq_listing_showing_request").data("mlsid"),mlnumber:$("#iq_listing_showing_request").data("mlnumber"),publicid:$("#iq_listing_showing_request").data("publicid"),propertytype:$("#iq_listing_showing_request").data("propertytype"),url:window.location.href,requiredonly:!0},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_listing_showing_request").html(jsonRet.LAYOUT),$("#iq_listing_showing_request #iq_lead_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})),"5.0.2"==$.fn.tooltip.Constructor.VERSION?$.iqListing.carousel_load_v2():$.iqListing.carousel_load(),$(".dropdown-menu input, .dropdown-menu label").click(function(e){e.stopPropagation()}),$(".btn-close-listing").show(),$.iqListings.setAffixOffset(),$.iqListings.resizeActionLinks(),$.iqListings.init_isvisible()}else $("#"+sDialogID+" .modal-body").html(jsonRet.CONTENT);if("myportal"===$("#site-wrapper").attr("data-page")){$(".savedLists").css("display","block"),$("[data-savedListingId]").each(function(){$(this).removeClass("active")});var activeElm=$(".savedLists").find('[data-savedListingId="'+pListingID+'"]');$(activeElm).addClass("active"),$("#iq-myportal").css("display","none");var siteTemplate="";const bodyClass=$("body").attr("class").split(" ");if($.each(bodyClass,function(index,className){if(className.startsWith("v2-")||className.startsWith("st-"))return siteTemplate=className,!1}),$.iqListings.screenHeight<=700)var modalHeight="80%";else var modalHeight="90%";var navField="";switch(siteTemplate){case"v2-01":navField="#probootstrap-navbar";break;case"v2-04":case"v2-08":navField=".st-sitemenu-12v2";break;case"v2-02":navField=".header_rem_top";break;case"v2-03":navField=".probootstrap-header";break;case"v2-05":case"st-05":navField=".st-sitemenu-06";break;case"v2-06":navField="#st_sitemenu_11";break;case"v2-10":navField=".st-site-menu";break;case"v2-07":case"v2-09":case"v2-12":case"v2-13":navField=".st-sitemenu-01v2";break;case"st-01":break;case"st-03":navField=".st-sitemenu-05";break;case"st-04":navField=".st-sitemenu-07";break;case"st-06":navField=".st-sitemenu-08";break;case"st-07":navField=".st-social-top-wrap";break;case"st-08":case"st-09":case"st-11":case"st-31":navField=".st-sitemenu-01";break;case"st-places":navField=".st-sitemenu-15"}if("st-01"==siteTemplate)var navbarHeight=0;else var navbarHeight=$(navField).outerHeight();$(".savedLists").css({top:navbarHeight+$.iqListings.scrollPos,height:modalHeight}),$("#iq_listing_dialog_v2").css({top:navbarHeight+$.iqListings.scrollPos,position:"absolute",height:modalHeight}),$("#iq_listing_dialog").css({top:navbarHeight+$.iqListings.scrollPos,position:"absolute",height:modalHeight})}if($("#iq_listing_full_details_v2").length)var objLeadRegistration=$("#iq_listing_full_details_v2"),sMLSID=$("#iq_listing_full_details_v2").data("mlsid"),sMLNumber=$("#iq_listing_full_details_v2").data("ml_number"),sListingID=$("#iq_listing_full_details_v2").data("listingid");else var objLeadRegistration=$("#iq_listing_full_details"),sMLSID=$("#iq_listing_full_details").data("mlsid"),sMLNumber=$("#iq_listing_full_details").data("ml_number"),sListingID=$("#iq_listing_full_details").data("listingid");if($.iqRegistration.load(objLeadRegistration,isprivate))return $("#iqListingsContainer").addClass("iq-blur"),$("#"+sDialogID).length&&$("#"+sDialogID).addClass("iq-blur"),$.iqUtils.sessionStorage("listings_listing_listingid",sListingID),$.iqUtils.sessionStorage("listings_listing_mlsid",sMLSID),void $.iqUtils.sessionStorage("listings_listing_ml_number",sMLNumber);($("#iq_listing_full_details").length||$("#iq_listing_full_details_v2").length)&&$.iqListing.showContactInfo(),$("#"+sDialogID).on("hidden.bs.modal",function(){$.iqUtils.history.push("/"),$.iqListings.updateLayout("browse"),$(".savedLists").attr("style","display: none !important"),$("#iq-myportal").css("display","block"),$("#"+sDialogID).remove()})},error:function(jsonRet){void 0===jsonRet.MESSAGE?$("#"+sDialogID+" .container").html(jsonRet):$("#"+sDialogID+" .container").html(jsonRet.MESSAGE)}})}catch(err){$.iqListings.current_listing=0,$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("Error","Error: "+err.message,5e3)}return!1},setAffixOffset:function(){$("#iqListingsContainer").length&&($("#iq_listing_head").length&&$("#iq_listing_dialog").length&&$("#iq_listing_dialog").on("scroll",function(){if(0==$("#iq_listing_dialog").scrollTop())$("#iq_listing_head").hasClass("iq-affix-listing-head")&&($("#iq_listing_head").removeClass("iq-affix-listing-head"),$("#iq_listing_thumb").hide());else if(!$("#iq_listing_head").hasClass("iq-affix-listing-head")){$("#iq_listing_head").addClass("iq-affix-listing-head");var viewport=$.iqUtils.getViewPort();"xs"!=viewport&&"sm"!=viewport&&$("#iq_listing_thumb").show()}$.iqListings.resizeActionLinks()}),$("#iq_listing_head").length&&$("#iq_listing_dialog_v2").length&&$("#iq_listing_dialog_v2").on("scroll",function(){if(0==$("#iq_listing_dialog_v2").scrollTop())$("#iq_listing_head").hasClass("iq-affix-listing-head")&&($("#iq_listing_head").removeClass("iq-affix-listing-head"),$("#iq_listing_thumb").hide());else if(!$("#iq_listing_head").hasClass("iq-affix-listing-head")){$("#iq_listing_head").addClass("iq-affix-listing-head");var viewport=$.iqUtils.getViewPort();"xs"!=viewport&&"sm"!=viewport&&$("#iq_listing_thumb").show(),$(window).width()<768&&$("#iq_listing_head_main img").hide()}$.iqListings.resizeActionLinks()}))},send_pageview:function(pageview_url,pageview_title){$.iqUtils.analyticsPageView({page_title:pageview_title,page_location:self.location.origin+pageview_url,page_path:pageview_url})},updaterowcount:function(pCount){if($("#iqListingsContainer").length){var newCount=$.iqUtils.numberFormat(pCount);$("#iqListingsContainer").data("totalrowcount",pCount),$("#iqListingsContainer").data("listings-record-count",pCount),$("#iq_results_counter").html(newCount),$.iqListings.updateListingCountDisplay()}},checkImgObjectFit:function(){$(".iq_listing_card_media img.property-image").each(function(i){0==$(this).hasClass("chkImgFit")&&($(this).addClass("chkImgFit"),$(this).width()>$(this).height()&&$(this).addClass("object-fit-contain"))})},init_isvisible:function(){$("#iqGridResults .iq_listings_property").iqVisibleCallback({threshold:150,callback:function(pElement){$.iqListings.isVisibleInGrid(pElement)}}),$("#iqListResults .iq_listings_property").iqVisibleCallback({threshold:150,callback:function(pElement){$.iqListings.isVisibleInSidebar(pElement)},bindto:$("#iqListResults")}),$.iqListings.checkImgObjectFit()},isVisibleInGrid:function(pElement){if(!$("#iqListResults").is(":visible")){var currListing=1,lastListing=0;if(currListing=$(pElement).data("rownumber"),lastListing=$("#iqGridResults").find(".iq_listings_property").last().data("rownumber"),$("#iqListingsContainer").length){var totalRowCount=0,trcAttr=$("#iqListingsContainer").attr("data-totalrowcount");if(void 0!==trcAttr&&!1!==trcAttr)var totalRowCount=$("#iqListingsContainer").data("totalrowcount");if(currListing===lastListing&&currListing<totalRowCount&&lastListing>1){var startPage=parseInt($($.iqListings.searchform+"-startpage").iqFieldValue())+1;$($.iqListings.searchform+"-startpage").iqFieldValue(startPage),-1<$("#iqListingsContainer").data("totalrowcount")&&$.iqListings.criteriasearch()}}}},isVisibleInSidebar:function(pElement){if($("#iqListResults").is(":visible")){var currListing=1,lastListing=0;currListing=$(pElement).data("rownumber"),lastListing=$("#iqListResults").find(".iq_listings_property").last().data("rownumber");var totalRowCount=0,trcAttr=$("#iqListingsContainer").attr("data-totalrowcount");if(void 0!==trcAttr&&!1!==trcAttr)var totalRowCount=$("#iqListingsContainer").data("totalrowcount");if(currListing===lastListing&&currListing<totalRowCount){var startPage=parseInt($($.iqListings.searchform+"-startpage").iqFieldValue())+1;$($.iqListings.searchform+"-startpage").iqFieldValue(startPage),-1<$("#iqListingsContainer").data("totalrowcount")&&($("#iqListResults").append('<h4 class="text-center iq-sidebar-loading"><i class="fa fa-fw fa-refresh fa-spin"></i>Loading More Listings</h4>'),$.iqListings.criteriasearch())}}},nextlisting:function(){var nextListing=parseInt($.iqListings.current_row)+1,oNextElm=$('[data-rownumber="'+nextListing+'"]');if(0!==oNextElm.length){if($("#iq_listing_dialog").length&&$("#iq_listing_dialog .modal-body").html($.iqListings.getLoadingHtml("Loading Listing")),$("#iq_listing_dialog_v2").length&&$("#iq_listing_dialog_v2 .modal-body").html($.iqListings.getLoadingHtml("Loading Listing")),"myportal"!=$("#site-wrapper").attr("data-page"))$("html,body").animate({scrollTop:$(oNextElm).offset().top+$(oNextElm).height()/2-$(window).height()/2},800);else{var favListingId=$(oNextElm).attr("data-savedListingId"),mlsid=$(oNextElm).attr("data-mlsid");$.iqListings.details_dialog(mlsid,favListingId)}var url=$(oNextElm).data("url");$.iqListings.current_row=nextListing,void 0!==url&&$.iqUtils.history.push(url)}},previouslisting:function(){var prevListing=parseInt($.iqListings.current_row)-1,oPrevElm=$('[data-rownumber="'+prevListing+'"]');if(0!==oPrevElm.length){if($("#iq_listing_dialog").length&&$("#iq_listing_dialog .modal-body").html($.iqListings.getLoadingHtml("Loading Listing")),$("#iq_listing_dialog_v2").length&&$("#iq_listing_dialog_v2 .modal-body").html($.iqListings.getLoadingHtml("Loading Listing")),"myportal"!=$("#site-wrapper").attr("data-page"))$("html,body").animate({scrollTop:$(oPrevElm).offset().top+$(oPrevElm).height()/2-$(window).height()/2},800);else{var favListingId=$(oPrevElm).attr("data-savedListingId"),mlsid=$(oPrevElm).attr("data-mlsid");$.iqListings.details_dialog(mlsid,favListingId)}var url=$(oPrevElm).data("url");$.iqListings.current_row=prevListing,void 0!==url&&$.iqUtils.history.push(url)}},map:function(){$.iqListings.current_map.visible_points=0;var iZoomLevel=13,current_zoom=parseInt($.iqListings.current_map.zoom_level)||0;current_zoom>0&&current_zoom<25&&(iZoomLevel=current_zoom);var iLat=parseFloat($.iqListings.current_map.center.lat)||0,iLon=parseFloat($.iqListings.current_map.center.lon)||0;$("#iqMapContainer").iqMap({zoomlevel:iZoomLevel,lat:iLat,lon:iLon,callback:function(){var pins=[],in_cluster="",map_bounds=$.iqMap.oGoogleMap.getBounds(),retry=0,mapMarkersExist=setInterval(function(){if(void 0!==$.iqMap.oMarkers){clearInterval(mapMarkersExist);for(var cluster_counter=0,non_cluster_counter=0,i=0;i<$.iqMap.oMarkers.length;i++)if(map_bounds.contains($.iqMap.oMarkers[i].position))if(null!==(in_cluster=$.iqMap.oMarkers[i].getMap())&&void 0!==in_cluster){var pinID=$.iqMap.oMarkers[i].listingid;$.iqMap.oMarkers[i].listingid.toString().indexOf("-")>=0&&(pinID=$.iqMap.oMarkers[i].listingid.split("-")[1]),pins.push(pinID),non_cluster_counter=++non_cluster_counter}else cluster_counter=++cluster_counter;$.iqListings.current_map.visible_points=non_cluster_counter;var oData={returnformat:"json",method:"doCriteriaSearch",layout:"grid,sidebar",impression_from:"Search Results",maxrows:99999,listingid:pins.join(",")};""!=$("#iq_criteria_form-pricemin").iqFieldValue()&&(oData.pricemin=$("#iq_criteria_form-pricemin").iqFieldValue()),""!=$("#iq_criteria_form-pricemax").iqFieldValue()&&(oData.pricemax=$("#iq_criteria_form-pricemax").iqFieldValue()),window.location.href.indexOf("/rentals/")>-1&&(oData.listingtype="for-lease");var pathArray=window.location.pathname.split("/");for(i=0;i<pathArray.length;i++)pathArray[i].indexOf("acreage_")>-1&&(oData.acreagemin=pathArray[i].split("_")[1]),pathArray[i].indexOf("resstyle_")>-1&&(oData.resstyle=pathArray[i].split("_")[1]);0!==pins.length&&$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){0===jsonRet.STATUS?($("#iqListResults").html(jsonRet.SIDEBARLAYOUT),$("#iqListResults").preventBodyScroll(),$("#iq_results_counter").html(cluster_counter+non_cluster_counter),$('[data-showcount="'+$($.iqListings.searchform+"-propertytype").iqFieldValue()+'"]').html(cluster_counter+non_cluster_counter),setTimeout(function(){$.iqListings.updateListingCountDisplay()},500)):$("#iqListResults").html(jsonRet.MESSAGE)},error:function(jsonRet){$("#iqListResults").html(jsonRet.MESSAGE)}}),0==non_cluster_counter&&($.iqListings.current_map.visible_points=0,$.iqListings.updateListingCountDisplay(),$("#iqGridResults, #iqListResults").html("<h3>No Results Found</h3><h4>Please Adjust the map position or your search criteria</h4>"))}else retry++,$.iqListings.map_refresh();20==retry&&($.iqListings.current_map.visible_points=0,$.iqListings.updateListingCountDisplay(),clearInterval(mapMarkersExist),$("#iqGridResults, #iqListResults").html("<h3>No Results Found</h3><h4>Please Adjust the map position or your search criteria</h4>"))},500)}}),$.isEmptyObject(_map_points)||$.iqListings.cluster(_map_points);var mapquery=$("#iqMapContainer").data("query");""!==mapquery&&$.iqMap_GeoCode(mapquery)},map_events:function(){0==$.iqListings.current_map.is_loaded&&void 0!==$.iqMap.oGoogleMap&&($.iqMap.oGoogleMap.addListener("dragend",function(){$.iqListings.map_refresh()}),$.iqMap.oGoogleMap.addListener("zoom_changed",function(){var zoomLevel=$.iqMap.oGoogleMap.getZoom();$.iqListings.current_map.zoom_level!=zoomLevel&&($.iqListings.current_map.zoom_level=zoomLevel,$.iqListings.map_refresh())}),$.iqListings.current_map.is_loaded=!0)},map_refresh:function(){var center=$.iqMap.oGoogleMap.getCenter(),bounds=$.iqMap.oGoogleMap.getBounds(),areaBounds={north:bounds.getNorthEast().lat(),south:bounds.getSouthWest().lat(),east:bounds.getNorthEast().lng(),west:bounds.getSouthWest().lng()};$.iqListings.current_map.zoom_level=$.iqMap.oGoogleMap.getZoom(),$.iqListings.current_map.center.lat=center.lat(),$.iqListings.current_map.center.lon=center.lng(),$.iqListings.current_map.top_left.lat=areaBounds.north,$.iqListings.current_map.top_left.lon=areaBounds.west,$.iqListings.current_map.bottom_right.lat=areaBounds.south,$.iqListings.current_map.bottom_right.lon=areaBounds.east,$($.iqListings.searchform+"-zoomlevel").iqFieldValue($.iqListings.current_map.zoom_level),$($.iqListings.searchform+"-lat").iqFieldValue($.iqListings.current_map.center.lat),$($.iqListings.searchform+"-lon").iqFieldValue($.iqListings.current_map.center.lon),$($.iqListings.searchform+"-topleftlat").iqFieldValue($.iqListings.current_map.top_left.lat),$($.iqListings.searchform+"-topleftlon").iqFieldValue($.iqListings.current_map.top_left.lon),$($.iqListings.searchform+"-bottomrightlat").iqFieldValue($.iqListings.current_map.bottom_right.lat),$($.iqListings.searchform+"-bottomrightlon").iqFieldValue($.iqListings.current_map.bottom_right.lon),$.iqListings.criteriasearch(1)},changeModalType:function(currType,newType){$.iqListings.closeAdvancedFilter(currType),setTimeout(function(){var searchform="#iq_"+newType+"_criteria_form";$.iqListings.openAdvancedFilter(newType+"_criteria"),$.iqListings.criteriasearch(1,"t",searchform)},500)},setPropertyType:function(newPropertyType){switch($(".iq-searchform-filters").find('div[data-propertytype="residential"]').hide(),$(".iq-searchform-filters").find('div[data-propertytype="commercial"]').hide(),$(".iq-searchform-filters").find('div[data-propertytype="multi-family"]').hide(),$(".iq-searchform-filters").find('div[data-propertytype="land"]').hide(),$("#iq_criteria_form").attr("data-propertytype",newPropertyType),$.iqListings.getParamFromUrl("propertytype")!=newPropertyType&&(window.history.pushState("propertytype_"+newPropertyType,null,$.iqListings.replaceUrlParamVal("propertytype",newPropertyType)),$.iqListings.getParamFromUrl("resstyle").length&&"residential"!=newPropertyType&&window.history.pushState({},null,$.iqListings.removeUrlParam("resstyle"))),newPropertyType){case"commercial":$.iqListings.searchform="#iq_com_criteria_form",$(".iq-searchform-filters").find('div[data-propertytype="commercial"]').show();break;case"land":$.iqListings.searchform="#iq_lan_criteria_form",$(".iq-searchform-filters").find('div[data-propertytype="land"]').show();break;case"multifamily":$.iqListings.searchform="#iq_mul_criteria_form",$(".iq-searchform-filters").find('div[data-propertytype="multi-family"]').show();break;case"residential":$.iqListings.searchform="#iq_res_criteria_form",$(".iq-searchform-filters").find('div[data-propertytype="residential"]').show()}},setResidentialStyle:function(newStyle){$("#iq_criteria_form").attr("data-resstyle",newStyle),$.iqListings.getParamFromUrl("resstyle")!=newStyle&&window.history.pushState("resstyle_"+newStyle,null,$.iqListings.replaceUrlParamVal("resstyle",newStyle))},toggleCriteriaDD:function(obj){if($(obj).parent().find(".iq-criteria-drop").is(":visible"))return $(".iq-criteria-nav").find(".active").removeClass("active"),$(".iq-criteria-nav").find(".iq-criteria-drop").hide(),!0;$(".iq-criteria-nav").find(".active").removeClass("active"),$(".iq-criteria-nav").find(".iq-criteria-drop").hide(),$(obj).parent().addClass("active"),$(obj).parent().find(".iq-criteria-drop").css({display:"table"}),$.iqListings.initSearchForm()},getResidentialStyleList:function(cls){cls=cls||"iq-resstyle";var arrStyle=[];return $("."+cls).length&&$("."+cls).each(function(){$(this).prop("checked")&&arrStyle.push($(this).val())}),arrStyle.toString()},updateResStyleList:function(obj){var cb_group=$(obj).attr("class");if("dropdown-menu-checkbox"==cb_group){var stylesList=$.iqListings.getResidentialStyleList("iq-resstyle-menu"),stylesArray=stylesList.split(",");$(".iq-resstyle").each(function(i,obj){$(obj).prop("checked",!1),stylesArray.indexOf($(obj).val())>=0&&$(obj).prop("checked",!0)}),$.iqListings.setFilter("style",stylesList)}"switch-light-checkbox"==cb_group&&setTimeout(function(){$("#iq_type_form-resstyle").iqFieldValue($.iqListings.getResidentialStyleList()),$.iqListings.criteriasearch(1,"t")},500)},submit_listings_autocompleteform:function(oForm){$($.iqListings.searchform+"-lat").iqFieldValue(""),$($.iqListings.searchform+"-lon").iqFieldValue("");var current_form=oForm;if("iq_criteria_form"===current_form){oForm=$("#"+current_form);var streetaddress=$(oForm).find($("#iq_criteria_form-streetaddress")).iqFieldValue(),mlnumber=$(oForm).find($("#iq_criteria_form-mlnumber")).iqFieldValue(),state=$(oForm).find($("#iq_criteria_form-state")).iqFieldValue(),county=$(oForm).find($("#iq_criteria_form-county")).iqFieldValue(),city=$(oForm).find($("#iq_criteria_form-city")).iqFieldValue(),area=$(oForm).find($("#iq_criteria_form-area")).iqFieldValue(),subarea=$(oForm).find($("#iq_criteria_form-subarea")).iqFieldValue(),zipcode=$(oForm).find($("#iq_criteria_form-zipcode")).iqFieldValue(),lat=$(oForm).find($("#iq_criteria_form-lat")).iqFieldValue(),lon=$(oForm).find($("#iq_criteria_form-lon")).iqFieldValue(),schooldistrict=$(oForm).find($("#iq_criteria_form-schooldistrict")).iqFieldValue(),highschool=$(oForm).find($("#iq_criteria_form-highschool")).iqFieldValue(),jrhighschool=$(oForm).find($("#iq_criteria_form-jrhighschool")).iqFieldValue(),elementaryschool=$(oForm).find($("#iq_criteria_form-elementaryschool")).iqFieldValue(),communityname=$(oForm).find($("#iq_criteria_form-communityname")).iqFieldValue(),buildingname=$(oForm).find($("#iq_criteria_form-buildingname")).iqFieldValue();$.each("iq_res_criteria_form,iq_mul_criteria_form,iq_com_criteria_form,iq_lan_criteria_form".split(","),function(){$("#"+this+"-streetaddress").iqFieldValue(streetaddress),$("#"+this+"-mlnumber").iqFieldValue(mlnumber),$("#"+this+"-state").iqFieldValue(state),$("#"+this+"-county").iqFieldValue(county),$("#"+this+"-city").iqFieldValue(city),$("#"+this+"-zipcode").iqFieldValue(zipcode),$("#"+this+"-lat").iqFieldValue(lat),$("#"+this+"-lon").iqFieldValue(lon),$("#"+this+"-area").iqFieldValue(area),$("#"+this+"-subarea").iqFieldValue(subarea),$("#"+this+"-schooldistrict").iqFieldValue(schooldistrict),$("#"+this+"-highschool").iqFieldValue(highschool),$("#"+this+"-jrhighschool").iqFieldValue(jrhighschool),$("#"+this+"-elementaryschool").iqFieldValue(elementaryschool),$("#"+this+"-communityname").iqFieldValue(communityname),$("#"+this+"-buildingname").iqFieldValue(buildingname),$("#"+this+"-startpage").iqFieldValue("1")});var prefix="";""!==streetaddress&&(prefix="Street Address: "),""!==mlnumber&&(prefix="mls#: "),""!==state&&(prefix="State: "),""!==county&&(prefix="County: "),""!==city&&(prefix="City: "),""!==zipcode&&(prefix="Zip Code: "),""!==area&&(prefix="Area: "),""!==subarea&&(prefix="Sub Area: "),""!==schooldistrict&&(prefix="School District: "),""!==highschool&&(prefix="High School: "),""!==jrhighschool&&(prefix="Jr. High School: "),""!==elementaryschool&&(prefix="Elementary School: "),""!==communityname&&(prefix="Community: "),""!==buildingname&&(prefix="Building: "),$("#iq_res_listings-location").iqFieldValue(prefix+$("#iq_listings-location").iqFieldValue()),$("#iq_mul_listings-location").iqFieldValue(prefix+$("#iq_listings-location").iqFieldValue()),$("#iq_com_listings-location").iqFieldValue(prefix+$("#iq_listings-location").iqFieldValue()),$("#iq_lan_listings-location").iqFieldValue(prefix+$("#iq_listings-location").iqFieldValue())}else oForm=$("#"+current_form);$.iqListings.closeListing(),$("#iqListResults").length&&$("#iqListResults").html(""),$(oForm).attr("data-countonly")?$.iqListings.criteriasearch(1,"t"):$.iqListings.criteriasearch(1)},setPriceBy:function(priceby){"sq_foot"===priceby?($(".iq-pricepersqfoot").show(),$(".iq-listprice").hide(),$("#iq_criteria_form-pricemin").iqFieldValue("0"),$("#iq_criteria_form-pricemax").iqFieldValue("99999999"),$("#iq_com_criteria_form-pricemin").iqFieldValue("0"),$("#iq_com_criteria_form-pricemax").iqFieldValue("99999999"),$("[data-priceby=sq_foot]").prop("checked",!0)):($(".iq-pricepersqfoot").hide(),$(".iq-listprice").show(),$("#iq_criteria_form-pricepersq_footmin").iqFieldValue("0"),$("#iq_criteria_form-pricepersq_footmax").iqFieldValue("9999"),$("#iq_com_criteria_form-pricepersq_footmin").iqFieldValue("0"),$("#iq_com_criteria_form-pricepersq_footmax").iqFieldValue("9999"),$("[data-priceby=list_price]").prop("checked",!0))},get_iq_areas:function(){var startpage=1,areas_criteria=$.parseJSON($('[data-section="iq_areas"]').attr("data-areas-criteria").toLowerCase()),publicid=areas_criteria.publicid,state=areas_criteria.state,county=areas_criteria.county,city=areas_criteria.city,zip_code=areas_criteria.zip_code,area=areas_criteria.area,communityname=areas_criteria.communityname,pricemin=areas_criteria.pricemin,pricemax=areas_criteria.pricemax,newdays=areas_criteria.newdays,reduceddays=areas_criteria.reduceddays,virtualtourid=areas_criteria.virtualtourid,videotour=areas_criteria.videotour,openhouse=areas_criteria.openhouse,previews=areas_criteria.previews,featured=areas_criteria.featured,images=areas_criteria.images,golfcourse=areas_criteria.golfcourse,waterfront=areas_criteria.waterfront,propertyview=areas_criteria.propertyview,numlistings=parseInt($("#iq_areas_wrapper").attr("data-num-listings")),totalrowcount=parseInt($("#iq_areas_wrapper").attr("data-totalrowcount"));numlistings<totalrowcount&&($("#iq_areas_wrapper").append($.iqListings.getLoadingHtml("Loading More Listings")),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!1,data:{Method:"docriteriasearch_multifield",layout:"list_small_areas_template",maxrows:24,publicid:publicid,state:state,county:county,city:city,zipcode:zip_code,area:area,communityname:communityname,pricemin:pricemin,pricemax:pricemax,reduceddays:reduceddays,newdays:newdays,virtualtourid:virtualtourid,videotour:videotour,openhouse:openhouse,previews:previews,featured:featured,images:images,golfcourse:golfcourse,waterfront:waterfront,propertyview:propertyview,startpage:$("#iq_areas_wrapper").attr("data-startpage")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_results_content_loading").remove(),(numlistings=$("[data-listingid]").length)<=jsonRet.TOTALROWCOUNT&&(startpage=parseInt($("#iq_areas_wrapper").attr("data-startpage"))+parseInt(1),$("#iq_areas_wrapper").attr("data-startpage",startpage),$("#iq_areas_wrapper").attr("data-totalrowcount",jsonRet.TOTALROWCOUNT),$("table thead").not(":eq(0)").hide(),numlistings<jsonRet.TOTALROWCOUNT&&$("#iq_areas_wrapper").append(jsonRet.LAYOUT),numlistings=$("[data-listingid]").length,$("#iq_areas_wrapper").attr("data-num-listings",numlistings))):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}}))},cluster:function(query){var i,data=[],rs=$.iqUtils.JsonQueryToRS(query),centerPoint={},searchForm=$.iqListings.searchform,re_center_map=!1;for(""!==$(searchForm+"-communityname").iqFieldValue()&&(re_center_map=!0),i=0;i<rs.length;i++)if("-1"!==rs[i].lat&&"-1"!==rs[i].lon){var point={},list_price=rs[i].list_price.toString(),digits=list_price.length;switch(digits){case 5:list_price=list_price.substr(0,2)+"K";break;case 6:list_price=list_price.substr(0,3)+"K";break;case 7:list_price=list_price.substr(0,1)+"."+list_price.substr(1,2)+"M";break;case 8:list_price=list_price.substr(0,2)+"."+list_price.substr(2,1)+"M";break;case 9:list_price=list_price.substr(0,3)+"M";break;case 10:list_price=list_price.substr(0,1)+"."+list_price.substr(1,2)+"B"}var idx_info="";""===rs[i].companyid&&(idx_info='<span class="iq-la_name">Listed By: '+rs[i].la_name+'</span><span class="iq-la_name-of"><br>of</span> <span class="iq-lo_name"> '+rs[i].lo_name+'</span><img class="pull-right" width="25" src="https://bay.cdn.bkat.io/idx/'+rs[i].mlsid+'.png" onerror="this.onerror=null; this.src=\'https://bay.cdn.bkat.io/idx/idx.png\';" alt="'+rs[i].lo_name+' Listing Logo">')
;var point_info="";point_info+='    <div class="iqMapPointInfoTop">',"mls_recolorado"===rs[i].mlsid&&rs[i].optional_01.length?point_info+='    <span class="pull-left">        &nbsp;&nbsp;'+rs[i].optional_01.toString()+"<br>        &nbsp;&nbsp;$"+rs[i].list_price.toLocaleString()+'    </span>    <span class="pull-right" style="text-align:right;">        MLS#&nbsp;&nbsp;<br>'+rs[i].ml_number+"&nbsp;&nbsp;    </span>":point_info+='    <span class="pull-left">$'+rs[i].list_price.toLocaleString()+'</span>    <span class="pull-right">MLS#: '+rs[i].ml_number+"</span>",point_info+='    </div><div data-url="'+rs[i].url+'" data-mlsid="'+rs[i].mlsid+'" data-ml_number="'+rs[i].ml_number+'" class="iqMapPointInfo"     onclick="$.iqListings.click_map_popup_link(this);"     style="background-image:url('+rs[i].image_list+');">    <div class="iqMapPointInfoContent">        <img class="iq-results-img-overlay" src="/assets/img/spacer_4x3.gif">    </div>    <div class="iqMapPointInfoBottom">'+idx_info+"    </div></div>",point.lat=rs[i].latitude,point.lng=rs[i].longitude,point.listingid=rs[i].listingid,point.label="$"+list_price,point.info=point_info,data.push(point),re_center_map&&(centerPoint=point,re_center_map=!1)}$.isEmptyObject(centerPoint)||$.iqMap_CenterOnLatLng(centerPoint.lat,centerPoint.lng),$.iqMap_Clear(),$.iqMap_Cluster({locations:data,customicon:"t",customlabelcolor:"white",callback:function(){var scrollTop=$("#iqListResults").scrollTop()+$("#iqListResults").find('div[data-listingid="'+this.listingid.split("-")[1]+'"]').position().top-47;$("#iqListResults").animate({scrollTop:scrollTop},500),$("#iqListResults").find("img").css({border:""}),$("#iqListResults").find('div[data-listingid="'+this.listingid.split("-")[1]+'"]').find("img").css({border:"4px solid #ff0000"})}}),setTimeout(function(){google.maps.event.trigger($.iqMap.oGoogleMap,"idle")},500),setTimeout(function(){$.iqListings.updateListingCountDisplay()},1e3)},click_map_popup_link:function(obj){$.iqUtils.sessionStorage("listings_listing_mlsid",$(obj).data("mlsid")),$.iqUtils.sessionStorage("listings_listing_ml_number",$(obj).data("ml_number")),$.iqUtils.sessionStorage("listings_listing_listingid",$(obj).data("listingid"));var iOSversion=$.iqUtils.iOSversion();if(iOSversion)if(iOSversion[0]<13){var propTab=window.open($(obj).attr("data-url"),"_blank");propTab&&propTab.focus()}else $.iqUtils.history.push($(obj).attr("data-url"));else $.iqUtils.history.push($(obj).attr("data-url"))},getParamFromUrl:function(param,fallback){var results=fallback||"",pathArray=window.location.pathname.split("/"),foundParam=!1;for(i=0;i<pathArray.length;i++)pathArray[i].length&&0===pathArray[i].indexOf(param+"_")&&(foundParam=pathArray[i].split("_"),results=foundParam[1]);return results},replaceUrlParamVal:function(param,value){var urlOrigin=window.location.origin,pathArray=window.location.pathname.split("/"),newPathname="",urlHasParam=!1;for(i=0;i<pathArray.length;i++)pathArray[i].length&&(newPathname+="/",0===pathArray[i].indexOf(param+"_")?(newPathname+=param+"_"+value,urlHasParam=!0):newPathname+=pathArray[i]);return urlHasParam||("/"!==newPathname.substr(newPathname.length-1)&&(newPathname+="/"),newPathname+=param+"_"+value),newPathname+="/#/",urlOrigin+newPathname},removeUrlParam:function(param){var urlOrigin=window.location.origin,pathArray=window.location.pathname.split("/"),newPathname="";for(i=0;i<pathArray.length;i++)pathArray[i].length&&0!==pathArray[i].indexOf(param+"_")&&(newPathname+="/"+pathArray[i]);return newPathname+="/#/",urlOrigin+newPathname}},$.fn.extend({iqListingsAutocomplete:function(options){var defaults={mlsid:"",ml_number:"",propertytype:"residential",state:"",county:"",area:"",city:"",zipcode:"",streetaddress:"",callback:"",appendto:"body",fields:"area,city,county,state,zip_code,ml_number,streetaddress,schooldistrict,highschool,jrhighschool,elementaryschool,communityname,buildingname,subarea"},oSettings=$.extend(defaults,options),oForm="",appendto="body";switch($(this).attr("id")){case"iq_criteria_form":oForm="#iq_criteria_form";break;default:switch(oSettings.propertytype){case"residential":oForm="#iq_res_criteria_form",appendto="form";break;case"multifamily":oForm="#iq_mul_criteria_form",appendto="form";break;case"commercial":oForm="#iq_com_criteria_form",appendto="form";break;case"land":oForm="#iq_lan_criteria_form",appendto="form"}}this.each(function(){var oMultiFieldAutocomplete=$(oForm).find("[data-listings-location]"),sFormID=($(oMultiFieldAutocomplete).iqFieldValue(),$(oForm).attr("id")),header_value="",header_title="",oURL=$('input[id="'+sFormID+'-url"]',oForm),oStreetAddress=$(oForm+"-streetaddress"),oMl_Number=$(oForm+"-mlnumber"),oState=$(oForm+"-state"),oCounty=$(oForm+"-county"),oArea=$(oForm+"-area"),oSubArea=$(oForm+"-subarea"),oCity=$(oForm+"-city"),oZipCode=$(oForm+"-zipcode"),oLat=$(oForm+"-lat"),oLon=$(oForm+"-lon"),oSchoolDistrict=$(oForm+"-schooldistrict"),oHighSchool=$(oForm+"-highschool"),oJrHighSchool=$(oForm+"-jrhighschool"),oElementarySchool=$(oForm+"-elementaryschool"),oCommunityName=$(oForm+"-communityname"),oBuildingName=$(oForm+"-buildingname"),oSearchBy=$(oForm+"-searchby");$(oMultiFieldAutocomplete).click(function(){$("[data-button=getlocation]").hide()}),$(oMultiFieldAutocomplete).blur(function(){setTimeout(function(){$("[data-button=getlocation]").show()},500),""===$(this).val()&&$.iqListings.clear_autocomplete_form("f")}),$(oMultiFieldAutocomplete).focus(function(){$("[data-button=clear-autocomplete]").show(),$("[data-button=getlocation]").hide(),$(oStreetAddress).iqFieldValue(""),$(oMl_Number).iqFieldValue(""),$(oState).iqFieldValue(""),$(oCounty).iqFieldValue(""),$(oArea).iqFieldValue(""),$(oSubArea).iqFieldValue(""),$(oCity).iqFieldValue(""),$(oZipCode).iqFieldValue(""),$(oSchoolDistrict).iqFieldValue(""),$(oHighSchool).iqFieldValue(""),$(oJrHighSchool).iqFieldValue(""),$(oElementarySchool).iqFieldValue(""),$(oCommunityName).iqFieldValue(""),$(oBuildingName).iqFieldValue("")}),$(oForm).submit(function(e){if($("[data-autocomplete-searchby]").length>0)if(""!==$("[data-autocomplete-searchby]").first().attr("data-autocomplete-searchby")){var autocomplete_searchby=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-searchby").toLowerCase(),autocomplete_searchvalue=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-searchvalue").toLowerCase(),autocomplete_streetaddress=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-streetaddress").toLowerCase(),autocomplete_lat=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-lat"),autocomplete_lon=$("[data-autocomplete-searchby]").first().attr("data-autocomplete-lon");switch($(oForm+"-streetaddress").iqFieldValue(""),$(oForm+"-mlnumber").iqFieldValue(""),$(oForm+"-state").iqFieldValue(""),$(oForm+"-county").iqFieldValue(""),$(oForm+"-city").iqFieldValue(""),$(oForm+"-zipcode").iqFieldValue(""),$(oForm+"-lat").iqFieldValue(""),$(oForm+"-lon").iqFieldValue(""),$(oForm+"-area").iqFieldValue(""),$(oForm+"-subarea").iqFieldValue(""),$(oForm+"-schooldistrict").iqFieldValue(""),$(oForm+"-highschool").iqFieldValue(""),$(oForm+"-jrhighschool").iqFieldValue(""),$(oForm+"-elementaryschool").iqFieldValue(""),$(oForm+"-communityname").iqFieldValue(""),$(oForm+"-buildingname").iqFieldValue(""),$("#ui-id-1 li").each(function(){$(this).remove()}),autocomplete_searchby){case"streetaddress":$(oStreetAddress).iqFieldValue(autocomplete_streetaddress),$(oForm+"-streetaddress").iqFieldValue(autocomplete_streetaddress),$(oForm+"-lat").iqFieldValue(autocomplete_lat),$(oForm+"-lon").iqFieldValue(autocomplete_lon);break;case"ml_number":$(oMl_Number).iqFieldValue(autocomplete_searchvalue),$(oForm+"-mlnumber").iqFieldValue(autocomplete_searchvalue),$(oForm+"-lat").iqFieldValue(autocomplete_lat),$(oForm+"-lon").iqFieldValue(autocomplete_lon);break;case"state":$(oState).iqFieldValue(autocomplete_searchvalue);break;case"county":$(oCounty).iqFieldValue(autocomplete_searchvalue);break;case"city":$(oCity).iqFieldValue(autocomplete_searchvalue);break;case"zip_code":$(oZipCode).iqFieldValue(autocomplete_searchvalue);break;case"area":$(oArea).iqFieldValue(autocomplete_searchvalue);break;case"subarea":$(oSubArea).iqFieldValue(autocomplete_searchvalue);break;case"schooldistrict":$(oSchoolDistrict).iqFieldValue(autocomplete_searchvalue);break;case"highschool":$(oHighSchool).iqFieldValue(autocomplete_searchvalue);break;case"jrhighschool":$(oJrHighSchool).iqFieldValue(autocomplete_searchvalue);break;case"elementaryschool":$(oElementarySchool).iqFieldValue(autocomplete_searchvalue);break;case"communityname":$(oCommunityName).iqFieldValue(autocomplete_searchvalue);break;case"buildingname":$(oBuildingName).iqFieldValue(autocomplete_searchvalue)}$.iqListings.submit_listings_autocompleteform()}else e.preventDefault();else e.preventDefault()}),$("button",oForm).click(function(e){e.preventDefault()}),$(oMultiFieldAutocomplete).autocomplete({delay:500,appendTo:"body"===appendto?"body":oForm,source:function(request,response){$(oMultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/autocomplete.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"listings",Fields:oSettings.fields,mlsid:oSettings.mlsid,pricemin:parseInt($($.iqListings.searchform+"-pricemin").iqFieldValue()),propertytype:$("#iq_type_form-propertytype").iqFieldValue(),propertytype_list:$("#iq_type_form-propertytype").attr("data-propertytype_list"),LookupValue:$(oMultiFieldAutocomplete).iqFieldValue(),listingtype:$("#iq_type_form-listingtype").val()},success:function(jsonRet){var suggestions=[],suggestion="";$(oMultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.status?(header_value="",header_title="",jsonRet.data.length>0?(header_value=jsonRet.data[0].description,header_title="<h4>"+jsonRet.data[0].header+"</h4>",jsonRet.data.forEach(function(record){suggestion={searchby:record.fieldname,label:record.fieldvalue,value:record.fieldvalue,title:record.title,url:record.url,html:record.layout,propertytype:record.propertytype,ml_number:record.ml_number,streetaddress:record.streetaddress,city:record.city,state:record.state,zip:record.zip_code,lat:record.lat,lon:record.lon},suggestions.push(suggestion)})):(suggestion={searchby:"",label:"No Results Found",value:"",url:"",html:"<h4>No Results Found</h4>"},suggestions.push(suggestion))):$.iqUtils.uiMessage("Error: "+jsonRet.message,jsonRet.detail),response(suggestions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet.responseText)}})},select:function(e,ui){if($("[data-button=clear-autocomplete]").hide(),$("[data-button=getlocation]").show(),$(oStreetAddress).iqFieldValue(""),$(oMl_Number).iqFieldValue(""),$(oURL).iqFieldValue(""),$(oState).iqFieldValue(""),$(oCounty).iqFieldValue(""),$(oCity).iqFieldValue(""),$(oArea).iqFieldValue(""),$(oSubArea).iqFieldValue(""),$(oSchoolDistrict).iqFieldValue(""),$(oHighSchool).iqFieldValue(""),$(oJrHighSchool).iqFieldValue(""),$(oElementarySchool).iqFieldValue(""),$(oCommunityName).iqFieldValue(""),$(oBuildingName).iqFieldValue(""),$(oZipCode).iqFieldValue(""),$(oLat).iqFieldValue(""),$(oLon).iqFieldValue(""),$(oSearchBy).iqFieldValue($($.iqListings.searchform+"-searchby").iqFieldValue()),""!==ui.item.value){if($(oURL).iqFieldValue(ui.item.url),"ml_number"===ui.item.searchby.toLowerCase()||"streetaddress"===ui.item.searchby.toLowerCase())if(""!=ui.item.url)window.location.href=ui.item.url;else{switch($("#iq_type_form-propertytype").iqFieldValue(ui.item.propertytype),ui.item.propertytype.toLowerCase()){case"residential":$("[data-propertytype-label]").html("Residential"),$("[data-propertytype-label-mobile]").html("Res"),$.iqListings.searchform="#iq_res_criteria_form";break;case"multifamily":$("[data-propertytype-label]").html("Multifamily"),$("[data-propertytype-label-mobile]").html("Mul"),$.iqListings.searchform="#iq_mul_criteria_form";break;case"commercial":$("[data-propertytype-label]").html("Commercial"),$("[data-propertytype-label-mobile]").html("Com"),$.iqListings.searchform="#iq_com_criteria_form";break;case"land":$("[data-propertytype-label]").html("Land"),$("[data-propertytype-label-mobile]").html("Lan"),$.iqListings.searchform="#iq_lan_criteria_form",$($.iqListings.searchform+"-mlnumber").iqFieldValue(ui.item.ml_number)}$.iqListings.initSearchForm()}else{switch($("#iq_criteria_form").attr("data-propertytype").toLowerCase()){case"residential":$("[data-propertytype-label]").html("Residential"),$("[data-propertytype-label-mobile]").html("Res"),$.iqListings.searchform="#iq_res_criteria_form";break;case"multifamily":$("[data-propertytype-label]").html("Multifamily"),$("[data-propertytype-label-mobile]").html("Mul"),$.iqListings.searchform="#iq_mul_criteria_form";break;case"commercial":$("[data-propertytype-label]").html("Commercial"),$("[data-propertytype-label-mobile]").html("Com"),$.iqListings.searchform="#iq_com_criteria_form";break;case"land":$("[data-propertytype-label]").html("Land"),$("[data-propertytype-label-mobile]").html("lan"),$.iqListings.searchform="#iq_lan_criteria_form"}$.iqListings.initSearchForm()}"streetaddress"===ui.item.searchby.toLowerCase()&&($(oStreetAddress).iqFieldValue(ui.item.streetaddress.toLowerCase()),$(oLat).iqFieldValue(ui.item.lat),$(oLon).iqFieldValue(ui.item.lon),$(oCity).iqFieldValue(ui.item.city),$(oState).iqFieldValue(ui.item.state),$(oZipCode).iqFieldValue(ui.item.zip),ui.item.searchby="Street Address"),"ml_number"===ui.item.searchby.toLowerCase()&&($(oMl_Number).iqFieldValue(ui.item.value.toLowerCase()),$(oLat).iqFieldValue(ui.item.lat),$(oLon).iqFieldValue(ui.item.lon),$(oCity).iqFieldValue(ui.item.city),$(oState).iqFieldValue(ui.item.state),$(oZipCode).iqFieldValue(ui.item.zip),ui.item.searchby="MLS#"),"state"===ui.item.searchby.toLowerCase()&&($(oState).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="State"),"county"===ui.item.searchby.toLowerCase()&&($(oCounty).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="County"),"city"===ui.item.searchby.toLowerCase()&&($(oCity).iqFieldValue(ui.item.value.toLowerCase()),$(oState).iqFieldValue(ui.item.state),ui.item.searchby="City"),"area"===ui.item.searchby.toLowerCase()&&($(oArea).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Area"),"subarea"===ui.item.searchby.toLowerCase()&&($(oSubArea).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Sub Area"),"zip_code"===ui.item.searchby.toLowerCase()&&($(oZipCode).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Zip Code"),"schooldistrict"===ui.item.searchby.toLowerCase()&&($(oSchoolDistrict).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="School District"),"highschool"===ui.item.searchby.toLowerCase()&&($(oHighSchool).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="High School"),"jrhighschool"===ui.item.searchby.toLowerCase()&&($(oJrHighSchool).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Jr. High School"),"elementaryschool"===ui.item.searchby.toLowerCase()&&($(oElementarySchool).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Elementary School"),"communityname"===ui.item.searchby.toLowerCase()&&($(oCommunityName).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Community Name"),"buildingname"===ui.item.searchby.toLowerCase()&&($(oBuildingName).iqFieldValue(ui.item.value.toLowerCase()),ui.item.searchby="Building Name"),ui.item.value=ui.item.searchby+": "+ui.item.value,$($.iqListings.searchform).attr("data-autocomplete-text",ui.item.value),$($.iqListings.searchform+"-searchnearby").iqFieldValue(""),$("#ui-id-1 li").each(function(){$(this).remove()}),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[])}}},{autofill:!0}).data("ui-autocomplete")._renderItem=function(ul,item){return item.searchby!==header_value&&void 0!==item.title?(header_value=item.searchby,header_title="<h6><strong>"+item.title+"</strong></h6>"):header_title="",$('<li data-autocomplete-searchby="'+item.searchby+'" data-autocomplete-searchvalue="'+item.label+'" data-autocomplete-streetaddress="'+item.streetaddress+'" data-autocomplete-lat="'+item.lat+'" data-autocomplete-lon="'+item.lon+'" style="padding-top:5px; padding-bottom:5px"></li>').data("item.autocomplete",item).append($('<div class="text-muted" style="font-size:12px; color:#000000;"></div>').html(header_title+" "+item.html)).appendTo(ul)}})}})}(jQuery);
//# sourceMappingURL=listings.min.js.map
;
/* file: ../assets/js/min/login.min.js */
!function($){$.iqWebsite_LoginDialog=function(){0==$("#iqwebsite_login_dialog").length&&$("body").append('<div id="iqwebsite_login_dialog"><div id="iqwebsite_login_body"></div></div>'),$("#iqwebsite_login_dialog").dialog({closeOnEscape:!0,title:"iQ Web Login",width:"auto",height:"auto",resizable:!1,autoOpen:!1,bgiframe:!0,modal:!1,draggable:!0,beforeClose:function(){$(this).remove()},zIndex:100}),$.iqUtils.uiProcessing("open"),$("#iqwebsite_login_dialog").dialog("open"),$.ajax({url:"/components/website_edit_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"login"},success:function(jsonRet){if(0==jsonRet.STATUS)if($.iqUtils.uiProcessing("close"),$("#iqwebsite_login_dialog").html(jsonRet.LAYOUT),$("#iqwebsite_login_dialog").dialog("open"),$("#iqwebsite_login_dialog").iqRecenterDialog(),"t"==$.iqUtils.cookie("LoginAutoLogin")){var userid=$.iqUtils.cookie("LoginUserID"),password=$.iqUtils.cookie("LoginPassword"),autologin=$.iqUtils.cookie("LoginAutoLogin");$("#login-form_userid").iqFieldValue(userid),$("#login-form_password").iqFieldValue("password"),$("#login-form_passwordhash").iqFieldValue(password),$("#login-form_autologin").attr("checked","checked").iqFieldValue(autologin),$.iqLogin()}else""!=$("#login_error").html()&&($("#login_error").slideToggle(),setTimeout(function(){$("#login-form_password").parent().removeClass("iq-login-field-wrapper-error"),$("#login_error").html("").slideToggle()},5e3));else $.iqUtils.uiProcessing("close"),$.iqUIMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},$.iqWebsiteLogin=function(){var userid=$("#login-form_userid").iqFieldValue(),password=$("#login-form_password").iqFieldValue(),passwordhash=$("#login-form_passwordhash").iqFieldValue(),autologin=$("#login-form_autologin").iqFieldValue(),iq_login_showing_error=!1;return"t"!=autologin&&($("#login-form_passwordhash").iqFieldValue(""),passwordhash=""),$("#login-form_userid").parent().removeClass("iq-login-field-wrapper-error"),$("#login-form_password").parent().removeClass("iq-login-field-wrapper-error"),""==userid||"User ID"==userid?($("#login-form_userid").parent().addClass("iq-login-field-wrapper-error"),iq_login_showing_error||($("#login_error").html("Invalid User ID").slideToggle("fast"),iq_login_showing_error=!0,setTimeout(function(){$("#login-form_userid").parent().removeClass("iq-login-field-wrapper-error"),$("#login_error").html("").slideToggle("fast"),iq_login_showing_error=!1},5e3)),!1):""==password||"Password"==password?($("#login-form_password").parent().addClass("iq-login-field-wrapper-error"),iq_login_showing_error||($("#login_error").html("Invalid Password").slideToggle("fast"),iq_login_showing_error=!0,setTimeout(function(){$("#login-form_password").parent().removeClass("iq-login-field-wrapper-error"),$("#login_error").html("").slideToggle("fast"),iq_login_showing_error=!1},5e3)),!1):($("#login_processing").find("span").show(),$.ajax({url:"/components/website.cfc",type:"POST",dataType:"json",async:!0,data:{method:"doLogin",returnformat:"json",userid:userid,showallagents:"T",password:password,passwordhash:passwordhash},success:function(jsonRet){0==jsonRet.STATUS?($.iqUtils.cookie("Auth_Timeout",jsonRet.AUTH_TIMEOUT,30),$.iqUtils.cookie("Auth_Hash",jsonRet.AUTH_HASH,30),$.iqUtils.cookie("PublicID",jsonRet.PUBLICID,30),$.iqUtils.cookie("ActingAsPublicID",jsonRet.ACTINGASPUBLICID,30),"t"==$("#login-form_autologin").iqFieldValue()?($.iqUtils.cookie("LoginAutoLogin","t",30),$.iqUtils.cookie("LoginUserID",$("#login-form_userid").iqFieldValue(),30),$.iqUtils.cookie("LoginPassword",jsonRet.PASSWORDHASH,30)):($.iqUtils.cookie("LoginAutoLogin","f",-30),$.iqUtils.cookie("LoginUserID","",-30),$.iqUtils.cookie("LoginPassword","",-30)),self.location="/"):($("#login_processing").find("span").hide(),$("#login-form_userid").removeAttr("readonly"),$("#login-form_password").removeAttr("readonly"),iq_login_showing_error||($("#login_error").html(jsonRet.MESSAGE+" - "+jsonRet.DETAIL).slideToggle(),iq_login_showing_error=!0,setTimeout(function(){$("#login_error").html("").slideToggle(),iq_login_showing_error=!1},5e3)))},error:function(httpRet,err){$("#login_processing").find("span").hide();var errorMessage=httpRet.MESSAGE;errorMessage=void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?httpRet.MESSAGE:httpRet.responseText,$("#login_error").html(errorMessage).slideToggle(),setTimeout(function(){$("#login_error").html("").slideToggle()},5e3)}}),!1)},$.iqWebsite_CheckLoginStatus=function(){$.ajax({url:"/components/website.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"loginstatus"},success:function(jsonRet){0==jsonRet.STATUS?jsonRet.ISAUTHED&&$.iqWebsite_Edit.EditBar():($.iqUtils.uiProcessing("close"),$.iqUIMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},$.iqWebsite_LogOut=function(){$.iqUtils.cookie("Auth_Timeout",""),$.iqUtils.cookie("IsAuthed",""),self.location="/"},$.fn.extend({iqInputSelect:function(){this.each(function(){$(this).css({color:"#ccc"}),""!=$(this).iqFieldValue()&&$(this).removeClass("iq-login-"+$(this).attr("name")).css("color","#000"),$(this).focus(function(){$(this).parent().addClass("iq-login-field-glow").removeClass("iq-login-field-wrapper-error"),$(this).removeClass("iq-login-"+$(this).attr("name")).css("color","#000")}),$(this).blur(function(){""==$(this).iqFieldValue()?($(this).parent().removeClass("iq-login-field-glow"),$(this).css("color","#ccc").addClass("iq-login-"+$(this).attr("name"))):$(this).parent().removeClass("iq-login-field-glow")})})}})}(jQuery);
//# sourceMappingURL=login.min.js.map
;
/* file: ../assets/js/min/map_clustered.min.js */
!function($){"use strict";$.iqClusteredMap={create:function(pMapDiv,pOptions){var iqmap={VEMap:null,VEMapGeo:null,VEMapGeoDiv:"",VEShapes:[],VELayers:{},VECustomInfoBox:null,VESearchManager:null,GEOData:"",sessionid:null,PinClusterer:null,options:{GEODataURL:"/components/listings.cfc",GEODataMethod:"doGeoData",onChange:null,onPinToMap:null,onLocation:null,onPinClick:null,setLocation:!1,trackLocation:!0,Lat:0,Lon:0,ZoomLevel:4,Point:null,Points:[],ShowLayers:!1,clusterSize:250}};pOptions&&$.extend(iqmap.options,pOptions),(0===iqmap.options.Lat&&""===iqmap.options.Lat||0===iqmap.options.Lon&&""===iqmap.options.Lon)&&$(pMapDiv).data("lat")&&$(pMapDiv).data("lon")&&(iqmap.options.Lat=$(pMapDiv).data("lat"),iqmap.options.Lon=$(pMapDiv).data("lon"));var sCredentials=$("#virtualearth").data("key");""===sCredentials&&(sCredentials="AlMvuvNVgOM0U0Pey9ZkfxEskHxrBelaObhVUOvyopZfW44iBEaZogouLxlKkuS_");var mapid=$(pMapDiv).attr("id");iqmap.VEMap=new Microsoft.Maps.Map(document.getElementById(mapid),{credentials:sCredentials}),iqmap.VEMap.getCredentials(function(credentials){null!==credentials&&(iqmap.sessionid=credentials)}),Microsoft.Maps.registerModule("CustomInfoboxModule","/assets/js/vemaps/V7CustomInfobox.js"),Microsoft.Maps.loadModule("CustomInfoboxModule",{callback:function(){iqmap.VECustomInfoBox=new CustomInfobox(iqmap.VEMap,{arrowColor:"#fff",color:"transparent",borderColor:"transparent",orientation:1,offset:{x:0,y:0}})}}),0!==iqmap.options.Lat&&0!==iqmap.options.Lon&&iqmap.VEMap.setView({zoom:parseInt(iqmap.options.ZoomLevel),center:new Microsoft.Maps.Location(iqmap.options.Lat,iqmap.options.Lon)}),iqmap.PinClusterer=new $.iqClusteredMap.PinClusterer(iqmap.VEMap,{onPinToMap:iqmap.options.onPinToMap,onPinClick:iqmap.options.onPinClick,onChange:iqmap.options.onChange,clusterSize:iqmap.options.clusterSize}),$(pMapDiv).data("iqmap",iqmap),iqmap.options.Point&&$(pMapDiv).iqClusteredMap("loadpoints",[iqmap.options.Point]),0!==iqmap.options.Points.length&&$(pMapDiv).iqClusteredMap("loadpoints",iqmap.options.Points),iqmap.options.setLocation&&$.iqClusteredMap.gpslocation(pMapDiv),iqmap.options.trackLocation&&$(pMapDiv).iqClusteredMap("tracklocation_menu",pMapDiv),$.iqUtils.logFeature("sites","google_maps_search")},tracklocation_menu:function(pMapDiv){var oControls=$(pMapDiv).find(".NavBar_modeSelectorControlContainer");if(0!==oControls.length){var left=parseInt($(oControls).css("left").replace("px",""))+parseInt($(oControls).find(".NavBar_typeButton").outerWidth())+5;$(pMapDiv).append('<div class="MicrosoftNav"><div class="iq-map-tracklocation" style="color: #5077bb; position:absolute; height:29px; background:#faf7f5; left:'+left+'px; padding:0 5px; border-bottom:0; display:block; z-index:990;"><span class="NavBar_separator"></span> <span class="NavBar_button" style="font-family: Arial,Helvetica,sans-serif;"> <input type="checkbox" name="keepcentered" value="true">Follow Me</div></div>'),$(pMapDiv).find(".iq-map-tracklocation input").on("click",function(){var iqkeepcentered=null;$(this).is(":checked")?(iqkeepcentered=setInterval(function(){$(pMapDiv).iqClusteredMap("gpslocation")},5e3),$(this).data("iqkeepcenterd",iqkeepcentered),$(pMapDiv).iqClusteredMap("gpslocation")):(iqkeepcentered=$(this).data("iqkeepcenterd"),clearInterval(iqkeepcentered))})}else setTimeout(function(){$(pMapDiv).iqClusteredMap("tracklocation_menu",pMapDiv)},500)},loadpoints:function(pMapDiv,points){var iqmap=$(pMapDiv).data("iqmap");return iqmap.VEMap?void 0===points?($.iqUtils.uiMessage("","Map points object not defined"),!1):void iqmap.PinClusterer.cluster(points):($.iqUtils.uiMessage("","Map Object Not Loaded"),!1)},bounds:function(pMapDiv){var iqmap=$(pMapDiv).data("iqmap"),oLatLong=iqmap.VEMap.getCenter(),iCenterLat=oLatLong.latitude,iCenterLong=oLatLong.longitude,ZoomLevel=iqmap.VEMap.getZoom(),oMapCoords={},iBounds=iqmap.VEMap.getBounds(),iNorthWest=iBounds.getNorthwest(),iSouthEast=iBounds.getSoutheast();return oMapCoords.topleftlat=iNorthWest.latitude,oMapCoords.topleftlon=iNorthWest.longitude,oMapCoords.bottomrightlat=iSouthEast.latitude,oMapCoords.bottomrightlon=iSouthEast.longitude,oMapCoords.centerlat=iCenterLat,oMapCoords.centerlon=iCenterLong,oMapCoords.zoomlevel=ZoomLevel,$(".ero-body br").css({display:"none"}),oMapCoords},layers:function(pMapDiv){var oChecks=$('input[name="iq_map_layer"]');if(0===oChecks.length)return!1;$(oChecks).each(function(){$(pMapDiv).iqClusteredMap("layer_toggle",this)})},layer_toggle:function(pMapDiv,oCheck){var iqmap=$(pMapDiv).data("iqmap"),layername=$(oCheck).val(),layer={query:layername,icon:layername,bounds:iqmap.VEMap.getBounds(),count:100,callback:"$.iqMap.searchresults",errorCallback:"$.iqMap.searcherror",userData:layername};iqmap.VELayers[layername]||(iqmap.VELayers[layername]=new Microsoft.Maps.EntityCollection,iqmap.VEMap.entities.push(iqmap.VELayers[layername]),iqmap.VESearchManager&&iqmap.VESearchManager.search(layer)),$(oCheck).is(":checked")?iqmap.VELayers[layername].setOptions({visible:!0}):iqmap.VELayers[layername].setOptions({visible:!1})},clear:function(pMapDiv){var iqmap=$(pMapDiv).data("iqmap");if(iqmap)for(var i=iqmap.VEMap.entities.getLength()-1;i>=0;i--){var entity=iqmap.VEMap.entities.get(i);(!entity._id||"current_location"!==entity._id&&"info_box"!==entity._id)&&(entity instanceof Microsoft.Maps.Pushpin?iqmap.VEMap.entities.removeAt(i):"pincluster"===entity._id&&iqmap.VEMap.entities.removeAt(i))}},loading:function(pMapDiv,pAction){var oLoading=$(pMapDiv).find("#iq_map_loading"),action=pAction||"hide";"show"===action&&0===oLoading.length?$(pMapDiv).append('<h3 id="iq_map_loading" style="position: absolute; text-align: center; margin:0; display: table; width:100%; padding: 10px 15px; background-color: rgba(0,0,0,.25); bottom: 0; color: #fff;">Loading <i class="fa fa-fw fa-refresh fa-spin"></i></h3>').find("#iq_map_loading").slideDown("fast"):"show"!==action&&$(oLoading).slideUp("fast")},gpslocation:function(pMapDiv){if(!$(pMapDiv).data("gpslocation")){if($(pMapDiv).append('<h3 id="iq_map_message" style="position: absolute; text-align: center; margin:0; display: table; width:100%; padding: 10px 15px; background-color: rgba(0,0,0,.25); bottom: 0; color: #fff; display:none;">Getting Location <i class="fa fa-fw fa-refresh fa-spin"></i></h3>').find("#iq_map_message").slideDown("fast"),$(pMapDiv).data("gpslocation",!0),!navigator.geolocation)return void $.iqUtils.uiMessage("","Geolocation is not supported by this browser.");navigator.geolocation.getCurrentPosition(function(location){$.iqClusteredMap.gpslocation_complete(location,pMapDiv)},function(error){$.iqClusteredMap.gpslocation_error(error,pMapDiv)})}},gpslocation_complete:function(location,pMapDiv){for(var iqmap=$(pMapDiv).data("iqmap"),i=iqmap.VEMap.entities.getLength()-1;i>=0;i--){var entity=iqmap.VEMap.entities.get(i);entity._id&&"current_location"===entity._id&&iqmap.VEMap.entities.removeAt(i)}var oLatLong=new Microsoft.Maps.Location(location.coords.latitude,location.coords.longitude),oVEShape=new Microsoft.Maps.Pushpin(oLatLong);oVEShape._id="current_location",iqmap.VEMap.entities.push(oVEShape),iqmap.VEMap.setView({center:oLatLong}),iqmap.options.trackLocation&&$(pMapDiv).find(".iq-map-tracklocation").show(),$(pMapDiv).find("#iq_map_message").slideUp("fast"),$(pMapDiv).data("gpslocation",!1)},gpslocation_error:function(error,pMapDiv){var oMessage=$(pMapDiv).find("#iq_map_message");if($(pMapDiv).data("gpslocation",!1),"https:"===window.location.protocol)switch(error.code){case error.PERMISSION_DENIED:$(oMessage).html("Your current location could not be obtained because your browser has denied the request for location. Please update your phones location settings and try again later.");break;case error.POSITION_UNAVAILABLE:$(oMessage).html("Your current location could not be obtained because location information is unavailable. Please try again later.");break;case error.TIMEOUT:$(oMessage).html("Your current location could not be obtained because the request to get your location timed out. Please try again later.");break;case error.UNKNOWN_ERROR:$(oMessage).html("Your current location could not be because of an unknown error. Please try again later.")}setTimeout(function(){$(oMessage).remove()},5e3)},geocode:function(pMapDiv,pQuery){var iqmap=$(pMapDiv).data("iqmap"),sCredentials=$("#virtualearth").data("key");""===sCredentials&&(sCredentials="AlMvuvNVgOM0U0Pey9ZkfxEskHxrBelaObhVUOvyopZfW44iBEaZogouLxlKkuS_"),iqmap.sessionid&&(sCredentials=iqmap.sessionid);var query=pQuery||$(pMapDiv).attr("query");$(pMapDiv).iqClusteredMap("loading","show"),$.ajax({url:"https://dev.virtualearth.net/REST/v1/Locations?query="+query+"&output=json&key="+sCredentials,dataType:"jsonp",jsonp:"jsonp",success:function(result){$(pMapDiv).iqClusteredMap("geocode_complete",result)},error:function(e){console.log(e)}})},geocode_complete:function(pMapDiv,result){var iqmap=$(pMapDiv).data("iqmap");if($(pMapDiv).iqClusteredMap("loading","hide"),result.resourceSets[0].resources[0]&&result.resourceSets[0].resources[0]){var lat=result.resourceSets[0].resources[0].point.coordinates[0],lon=result.resourceSets[0].resources[0].point.coordinates[1];iqmap.VEMap.setView({center:new Microsoft.Maps.Location(lat,lon)})}},mouseover:function(pMapDiv,pOptions){var options={};if(options._id=pOptions._id||"",options.htmlContent=pOptions.htmlContent||"",""!==options._id){for(var iqmap=$(pMapDiv).data("iqmap"),pin=null,i=iqmap.VEMap.entities.getLength()-1;i>=0;i--){var layer=iqmap.VEMap.entities.get(i);if(layer._id&&"pincluster"===layer._id){for(var j=layer.getLength()-1;j>=0;j--){var pushpin=layer.get(j);if(pushpin._id&&pushpin._id===options._id){pin=pushpin;break}}break}}if(pin&&($(pMapDiv).find("#"+options._id).addClass("pin-hover"),""!==options.htmlContent)){var htmlContent=options.htmlContent;$.each(pin.data,function(key,value){htmlContent=htmlContent.replace("{{"+key+"}}",value)}),iqmap.VECustomInfoBox.show(pin,htmlContent)}}},mouseout:function(pMapDiv,pOptions){var options={};if(options._id=pOptions._id||"",""!==options._id){var iqmap=$(pMapDiv).data("iqmap"),pin=null;$(pMapDiv).find("#"+options._id).addClass("pin-hover");for(var i=iqmap.VEMap.entities.getLength()-1;i>=0;i--){var layer=iqmap.VEMap.entities.get(i);if(layer._id&&"pincluster"===layer._id){for(var j=layer.getLength()-1;j>=0;j--){var pushpin=layer.get(j);if(pushpin._id&&pushpin._id===options._id){pin=pushpin;break}}break}}$(".pin_clusterer").each(function(index,element){$(element).removeClass("pin-hover")}),pin&&iqmap.VECustomInfoBox.hide(pin,"")}},mouseclick:function(pMapDiv,pOptions){var options={};if(options._id=pOptions._id||"",options.htmlContent=pOptions.htmlContent||"",""!==options._id){for(var iqmap=$(pMapDiv).data("iqmap"),pin=null,i=iqmap.VEMap.entities.getLength()-1;i>=0;i--){var layer=iqmap.VEMap.entities.get(i);if(layer._id&&"pincluster"===layer._id){for(var j=layer.getLength()-1;j>=0;j--){var pushpin=layer.get(j);if(pushpin._id&&pushpin._id===options._id){pin=pushpin;break}}break}}if($(".pin_clusterer").each(function(index,element){$(element).removeClass("pin-hover")}),pin&&($(pMapDiv).find("#"+options._id).addClass("pin-hover"),""!==options.htmlContent)){var htmlContent=options.htmlContent;$.each(pin.data,function(key,value){htmlContent=htmlContent.replace("{{"+key+"}}",value)}),iqmap.VECustomInfoBox.show(pin,htmlContent)}}},centeron_latlon:function(pMapDiv,coords){var iqmap=$(pMapDiv).data("iqmap"),iqmapready=typeof iqmap;if("undefined"!==iqmapready){iqmap.VEMap.setView({zoom:15,center:new Microsoft.Maps.Location(coords.lat,coords.lon)});var oLatLong=new Microsoft.Maps.Location(coords.lat,coords.lon),oVEShape=new Microsoft.Maps.Pushpin(oLatLong);oVEShape._id="current_location",iqmap.VEMap.entities.push(oVEShape)}return iqmapready}},$.fn.extend({iqClusteredMap:function(action,pOptions){return $.iqClusteredMap[action](this,pOptions)}}),$.iqClusteredMap.PinClusterer_Defaults={pinTypeName:"pin_clusterer pin",clusterTypeName:"pin_clusterer cluster",pinHeight:25,pinWidth:60,extendMapBoundsBy:2,clusterSize:60,maxZoom:16,clickToZoom:!0,minZoom:2,debug:!1,onPinToMap:null,onChange:null,onPinClick:null},$.iqClusteredMap.PinClusterer=window.PinClusterer=function(map,options){this.map=map,this.options=options,this.layer=null,this.setOptions(this.options),this.doClickToZoom=$.iqClusteredMap.PinClusterer_Defaults.clickToZoom},$.iqClusteredMap.PinClusterer.prototype={cluster:function(pins){if(this._entityExists("_id","pincluster")||(this.layer=new Microsoft.Maps.EntityCollection,this.layer._id="pincluster",this.map.entities.push(this.layer)),pins)this._pins=pins;else if(!this._pins)return;var self=this;this._viewchangeendHandler?(this._redraw(),$.iqClusteredMap.PinClusterer_Defaults.onChange&&$.iqClusteredMap.PinClusterer_Defaults.onChange.apply(this,[self,this])):this._viewchangeendHandler=Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",function(){self._redraw(),$.iqClusteredMap.PinClusterer_Defaults.onChange&&$.iqClusteredMap.PinClusterer_Defaults.onChange.apply(this,[self,this])})},_entityExists:function(field,value){for(var i=this.map.entities.getLength()-1;i>=0;i--){var entity=this.map.entities.get(i);if(entity[field]&&entity[field]===value)return!0}return!1},_redraw:function(){this._pins&&(this._metersPerPixel=this.map.getMetersPerPixel(),this._bounds=this.getExpandedBounds(this.map.getBounds(),$.iqClusteredMap.PinClusterer_Defaults.extendMapBoundsBy),this._zoom=this.map.getZoom(),this._clusters=[],this.doClickToZoom=!0,this.layer.clear(),this.each(this._pins,this._addToClosestCluster),this.toMap())},_addToClosestCluster:function(pin){var d,distance=4e4,location=new Microsoft.Maps.Location(pin.latitude,pin.longitude),clusterToAddTo=null;if(!(this._zoom>$.iqClusteredMap.PinClusterer_Defaults.minZoom)||this._bounds.contains(location)){if(this._zoom>=$.iqClusteredMap.PinClusterer_Defaults.maxZoom)return this.doClickToZoom=!1,void this._createCluster(location,pin);this.each(this._clusters,function(cluster){(d=this._distanceToPixel(cluster.center.location,location))<distance&&(distance=d,clusterToAddTo=cluster)}),clusterToAddTo&&clusterToAddTo.containsWithinBorders(location)?clusterToAddTo.add(location,pin):this._createCluster(location,pin)}},_createCluster:function(location,pin){var cluster=new $.iqClusteredMap.PinClusterer_Cluster(this);cluster.add(location,pin),this._clusters.push(cluster)},setOptions:function(options){for(var opt in options)void 0!==$.iqClusteredMap.PinClusterer_Defaults[opt]&&($.iqClusteredMap.PinClusterer_Defaults[opt]=options[opt])},toMap:function(){this.each(this._clusters,function(cluster){cluster.toMap()})},getExpandedBounds:function(bounds,clusterFactor){var northWest=this.map.tryLocationToPixel(bounds.getNorthwest()),southEast=this.map.tryLocationToPixel(bounds.getSoutheast()),size=clusterFactor?$.iqClusteredMap.PinClusterer_Defaults.clusterSize*clusterFactor:$.iqClusteredMap.PinClusterer_Defaults.clusterSize/2;return northWest&&southEast&&(northWest=this.map.tryPixelToLocation(new Microsoft.Maps.Point(northWest.x-size,northWest.y-size)),southEast=this.map.tryPixelToLocation(new Microsoft.Maps.Point(southEast.x+size,southEast.y+size)),northWest&&southEast&&(bounds=Microsoft.Maps.LocationRect.fromCorners(northWest,southEast))),bounds},_distanceToPixel:function(l1,l2){return 1e3*this.distance(l1,l2)/this._metersPerPixel},each:function(items,fn){if(items.length)for(var item,i=0;item=items[i];i++){var rslt=fn.apply(this,[item,i]);if(!1===rslt)break}},distance:function(p1,p2){if(!p1||!p2)return 0;var pi180=Math.PI/180,dLat=(p2.latitude-p1.latitude)*pi180,dLon=(p2.longitude-p1.longitude)*pi180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(p1.latitude*pi180)*Math.cos(p2.latitude*pi180)*Math.sin(dLon/2)*Math.sin(dLon/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}},$.iqClusteredMap.PinClusterer_Cluster=function(PinClusterer){this._PinClusterer=PinClusterer,this.locations=[],this.center=null,this._bounds=null,this.length=0,this.doClickToZoom=this._PinClusterer.doClickToZoom},$.iqClusteredMap.PinClusterer_Cluster.prototype={add:function(location,pin){this._alreadyAdded(location)||(this.locations.push(location),this.length+=1,this.center||(this.center=new $.iqClusteredMap.PinClusterer_Pin(location,this,pin),this._calculateBounds()))},containsWithinBorders:function(location){return!!this._bounds&&this._bounds.contains(location)},click:function(){if("pin_clusterer pin"===this.center.pushpin._typeName)this._PinClusterer.options.onPinClick&&this._PinClusterer.options.onPinClick.apply(this,[this.center.pushpin,this]);else{var viewBoundaries=Microsoft.Maps.LocationRect.fromLocations(this.locations);this._PinClusterer.map.setView({bounds:viewBoundaries})}},_alreadyAdded:function(location){if(this.locations.indexOf)return this.locations.indexOf(location)>-1;for(var l,i=0;l=this.locations[i];i++)if(l===location)return!0;return!1},_calculateBounds:function(){var bounds=Microsoft.Maps.LocationRect.fromLocations(this.center.location);this._bounds=this._PinClusterer.getExpandedBounds(bounds)},toMap:function(){if(this._updateCenter(),this.center.toMap(this._PinClusterer.layer),!$.iqClusteredMap.PinClusterer_Defaults.debug)return!0;var north=this._bounds.getNorth(),east=this._bounds.getEast(),west=this._bounds.getWest(),south=this._bounds.getSouth(),nw=new Microsoft.Maps.Location(north,west),se=new Microsoft.Maps.Location(south,east),ne=new Microsoft.Maps.Location(north,east),sw=new Microsoft.Maps.Location(south,west),color=new Microsoft.Maps.Color(100,100,0,100),poly=new Microsoft.Maps.Polygon([nw,ne,se,sw],{fillColor:color,strokeColor:color,strokeThickness:1});this._PinClusterer.layer.push(poly)},_updateCenter:function(){var count=this.locations.length,text="",typeName=$.iqClusteredMap.PinClusterer_Defaults.pinTypeName;count>1&&(text+=count,typeName=$.iqClusteredMap.PinClusterer_Defaults.clusterTypeName),this.center.pushpin.setOptions({text:text,typeName:typeName}),$.iqClusteredMap.PinClusterer_Defaults.onPinToMap&&$.iqClusteredMap.PinClusterer_Defaults.onPinToMap.apply(this._PinClusterer,[this.center.pushpin,this])}},$.iqClusteredMap.PinClusterer_Pin=function(location,cluster,pin){this.location=location,this._cluster=cluster,this._options={},this._options.typeName=this._options.typeName||$.iqClusteredMap.PinClusterer_Defaults.pinTypeName,this._options.height=$.iqClusteredMap.PinClusterer_Defaults.pinHeight,this._options.width=$.iqClusteredMap.PinClusterer_Defaults.pinWidth,this._options.anchor=new Microsoft.Maps.Point($.iqClusteredMap.PinClusterer_Defaults.pinWidth/2,$.iqClusteredMap.PinClusterer_Defaults.pinHeight/2),this._options.textOffset=new Microsoft.Maps.Point(0,2),this._create(pin)},$.iqClusteredMap.PinClusterer_Pin.prototype={_create:function(pin){this.pushpin=new Microsoft.Maps.Pushpin(this.location,this._options),this.pushpin.data=pin,pin._id&&(this.pushpin._id=pin._id);var self=this;Microsoft.Maps.Events.addHandler(this.pushpin,"click",function(){self._cluster.click()})},toMap:function(layer){layer.push(this.pushpin)}}}(jQuery);
//# sourceMappingURL=map_clustered.min.js.map
;
/* file: ../assets/js/min/map.min.js */
!function($){var isGoogleMapsApiLoaded=!1;if(window.mapsCallback=function(){isGoogleMapsApiLoaded=!0},"object"==typeof google&&"object"==typeof google.maps&&(isGoogleMapsApiLoaded=!0),!isGoogleMapsApiLoaded){var apikey=$("body").data("googleapikey")||"AIzaSyCWOFjQIqmkkMS6u7VCVp6zHmSUXiTZng8";document.write('<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key='+apikey+'&libraries=places&callback=mapsCallback"><\/script>')}$.iqMap={dialog:function(lat,lon){$("#iq_map_dialog").bsModal({backdrop:!0,title:"&nbsp",body:'<div id="iq_map_container" style="height:300px;"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i><h1></div>'}),setTimeout(function(){$("#iq_map_container").iqGoogleMaps({Lat:parseFloat(lat),Lon:parseFloat(lon),ZoomLevel:15,mapTypeId:"roadmap"})},1e3)}},$.iqMap_CenterOnLatLng=function(lat,lng){$.iqMap.oGoogleMap.setCenter({lat:parseFloat(lat),lng:parseFloat(lng)})},$.iqMap_GeoCode=function(query){(new google.maps.Geocoder).geocode({address:query},function(results,status){if("OK"===status){var newCenterLatlng={lat:results[0].geometry.location.lat(),lng:results[0].geometry.location.lng()};if(void 0!==$.iqGoogleMap&&($.iqGoogleMap.setCenter(newCenterLatlng),$.iqGoogleMap.myMarker.setPosition(newCenterLatlng)),void 0!==$.iqMap.oGoogleMap){$.iqMap.oGoogleMap.setCenter(newCenterLatlng);var position=new google.maps.LatLng(newCenterLatlng);marker=new google.maps.Marker({position:position,map:$.iqMap.oGoogleMap})}}})},$.iqMap_Clear=function(){if(void 0!==$.iqMap){if(void 0!==$.iqMap.oMarkers){for(var i=0;i<$.iqMap.oMarkers.length;i++)$.iqMap.oMarkers[i].setMap(null);$.iqMap.oMarkers=[]}void 0!==$.iqMap.oMarkerCluster&&$.iqMap.oMarkerCluster.clearMarkers()}},$.iqMap_AddPushPin=function(lat,lon){var position=new google.maps.LatLng(lat,lon);marker=new google.maps.Marker({position:position,map:$.iqMap.oGoogleMap})},$.iqMap_Cluster=function(pOptions){var defaults={callback:"",locations:"",customicon:"",customlabels:".",customlabelcolor:"black"};$.iqUtils.logFeature("iqweb","google_maps_display");var oSettings=$.extend(defaults,pOptions),info_window=!1;if(void 0!==oSettings.locations[0].info){var infoWindow=new google.maps.InfoWindow({closeBoxMargin:"10px 20px 2px 2px",disableAutoPan:!0});info_window=!0}if("t"===oSettings.customicon)var icons={standard:{icon:"/assets/img/map-icons/pin.png"}},icon=icons.standard.icon;$.iqMap.oMarkers=oSettings.locations.map(function(locations){var marker=new google.maps.Marker({position:locations,lat:locations.lat,lng:locations.lng,listingid:locations.listingid,icon:icon,label:{text:locations.label,color:oSettings.customlabelcolor}});return info_window&&google.maps.event.addListener(marker,"click",function(evt){infoWindow.setContent(locations.info),infoWindow.open($.iqMap.oGoogleMap,marker)}),"function"==typeof oSettings.callback&&google.maps.event.addListener(marker,"click",function(){oSettings.callback.apply(this,[])}),marker}),$.iqMap.oMarkerCluster=new MarkerClusterer($.iqMap.oGoogleMap,$.iqMap.oMarkers,{imagePath:"/assets/img/map-icons/markerclusterer/",maxZoom:20,gridSize:30})},$.iqMap_CenterIcon=function(controlDiv,map){var controlUI=document.createElement("div");controlUI.style.display="inline-block",controlUI.style.background="url('/assets/img/map-icons/geolocation.png')",controlUI.style.backgroundColor="#fff",controlUI.style.border="2px solid #fff",controlUI.style.borderRadius="3px",controlUI.style.boxShadow="0 2px 6px rgba(0,0,0,.1)",controlUI.style.cursor="pointer",controlUI.style.marginRight="10px",controlUI.style.marginBottom="22px",controlUI.title="Click to recenter the map",controlUI.id="MapRecenterIcon",controlDiv.appendChild(controlUI),controlUI.addEventListener("click",function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){var pos={lat:position.coords.latitude,lng:position.coords.longitude};map.setCenter(pos)},function(){})})},$.fn.extend({iqMap:function(pOptions){if($.iqUtils.isBot())return alert("Unsupported Browser: "+navigator.userAgent),this;var defaults={mapTypeId:"roadmap",mapTypeControl:!0,lat:0,lon:0,zoomlevel:14,query:"",callback:""},oSettings=$.extend(defaults,pOptions),latlon={lat:oSettings.lat,lng:oSettings.lon},obj=$("#"+$(this).attr("id"));"xs"===$.iqUtils.getViewPort()&&(oSettings.mapTypeControl=!1);var map=new google.maps.Map(document.getElementById($(this).attr("id")),{zoom:oSettings.zoomlevel,center:latlon,zoomControl:!0,mapTypeControl:oSettings.mapTypeControl,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,mapTypeId:oSettings.mapTypeId,gestureHandling:"greedy"});if($.iqMap.oGoogleMap=map,0!==oSettings.lat&&0!==oSettings.lon){var position=new google.maps.LatLng(oSettings.lat,oSettings.lon);marker=new google.maps.Marker({position:position,map:map})}map.addListener("idle",function(){var map_bounds=map.getBounds(),ne=map_bounds.getNorthEast(),sw=map_bounds.getSouthWest(),nw=$.parseJSON($.toJSON(new google.maps.LatLng(ne.lat(),sw.lng()))),se=$.parseJSON($.toJSON(new google.maps.LatLng(sw.lat(),ne.lng())));$(obj).attr("data-lat",map.getCenter().lat()),$(obj).attr("data-lon",map.getCenter().lng()),$(obj).attr("data-topleftlat",nw.lat),$(obj).attr("data-bottomrightlat",se.lat),$(obj).attr("data-topleftlon",nw.lng),$(obj).attr("data-bottomrightlon",se.lng),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[])});var centerCurrentLocationDiv=document.createElement("div");new $.iqMap_CenterIcon(centerCurrentLocationDiv,map);centerCurrentLocationDiv.index=1,map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(centerCurrentLocationDiv)},iqGoogleMaps:function(pOptions){if($.iqUtils.isBot())return alert("Unsupported Browser: "+navigator.userAgent),this;$.iqUtils.logFeature("iqweb","google_maps_display");var i=0,latlon={lat:pOptions.Lat,lng:pOptions.Lon},arrmarkers=[],obj=$("#"+$(this).attr("id")),draggable_marker=!1,map_control_type=!0;void 0!==pOptions.draggable&&(draggable_marker=pOptions.draggable),void 0!==pOptions.arrmarkers?arrmarkers=pOptions.arrmarkers:(arrmarkers[0]=new Array(4),arrmarkers[0][0]=pOptions.Lat,arrmarkers[0][1]=pOptions.Lon,arrmarkers[0][2]="",arrmarkers[0][3]=""),"xs"===$.iqUtils.getViewPort()&&(map_control_type=!1);var map=new google.maps.Map(document.getElementById($(this).attr("id")),{zoom:pOptions.ZoomLevel,center:latlon,zoomControl:!0,mapTypeControl:map_control_type,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,mapTypeId:pOptions.mapTypeId,gestureHandling:"greedy"});for($.iqGoogleMap=map,i=0;i<arrmarkers.length;i++)var position=new google.maps.LatLng(arrmarkers[i][0],arrmarkers[i][1]),myMarker=new google.maps.Marker({position:position,map:map,title:arrmarkers[i][2],label:arrmarkers[i][3].toString(),icon:pOptions.PushPinPath,draggable:draggable_marker});map.addListener("idle",function(event){var map_bounds=map.getBounds(),ne=map_bounds.getNorthEast(),sw=map_bounds.getSouthWest(),nw=$.parseJSON($.toJSON(new google.maps.LatLng(ne.lat(),sw.lng()))),se=$.parseJSON($.toJSON(new google.maps.LatLng(sw.lat(),ne.lng())));$(obj).attr("data-lat",map.getCenter().lat()),$(obj).attr("data-lon",map.getCenter().lng()),$(obj).attr("data-topleftlat",nw.lat),$(obj).attr("data-bottomrightlat",se.lat),$(obj).attr("data-topleftlon",nw.lng),$(obj).attr("data-bottomrightlon",se.lng),$(obj).attr("data-zoomlevel",map.getZoom())}),map.addListener("center_changed",function(event){var map_bounds=map.getBounds(),ne=map_bounds.getNorthEast(),sw=map_bounds.getSouthWest(),nw=$.parseJSON($.toJSON(new google.maps.LatLng(ne.lat(),sw.lng()))),se=$.parseJSON($.toJSON(new google.maps.LatLng(sw.lat(),ne.lng())));if($(obj).attr("data-lat",map.getCenter().lat()),$(obj).attr("data-lon",map.getCenter().lng()),$(obj).attr("data-topleftlat",nw.lat),$(obj).attr("data-bottomrightlat",se.lat),$(obj).attr("data-topleftlon",nw.lng),$(obj).attr("data-bottomrightlon",se.lng),$(obj).attr("data-zoomlevel",map.getZoom()),$("#iq_area_map_form-lat").length){var center=$.iqGoogleMap.getCenter();$("#iq_area_map_form-lat").val(center.lat),$("#iq_area_map_form-lon").val(center.lng),$("#iq_area_map_form-zoomlevel").val($.iqGoogleMap.getZoom())}}),1===arrmarkers.length&&draggable_marker&&($.iqGoogleMap.myMarker=myMarker,myMarker.addListener("dragend",function(event){map.setCenter(this.getPosition())}))},iqGoogleMapsStreetview:function(pOptions){var latlon={lat:pOptions.Lat,lng:pOptions.Lon},oDiv=$(this).attr("id"),streetViewService=new google.maps.StreetViewService;$.iqUtils.logFeature("iqweb","google_maps_streetview"),streetViewService.getPanoramaByLocation(latlon,pOptions.MaxDistance,function(streetViewPanoramaData,status){if(status===google.maps.StreetViewStatus.OK){new google.maps.StreetViewPanorama(document.getElementById(oDiv),{position:latlon,pov:{heading:180,pitch:10}});$("[data-mapbutton=streetview]").show()}else console.log("no street view")})}})}(jQuery);
//# sourceMappingURL=map.min.js.map
;
/* file: ../assets/js/min/marketanalysis.min.js */
!function($){"use strict";$(document).ready(function(){var oMarketAnalysis=$("#iq_marketanalysis"),registration_type=$("#iq_marketanalysis").data("registration_type"),registration_interval=$("#iq_marketanalysis").data("registration_interval");if(1===oMarketAnalysis.length){var icounter=0;if(""!==registration_type){if("true"!==$.iqUtils.cookie("pw_isauthed"))switch(registration_type){case"nag":if($.iqUtils.cookie("marketanalysis_nagpageview_counter")){var iCounter=parseInt($.iqUtils.cookie("marketanalysis_nagpageview_counter"))+1;$.iqUtils.cookie("marketanalysis_nagpageview_counter",iCounter,365),iCounter===registration_interval&&($.iqUtils.cookie("marketanalysis_nagpageview_counter",null,-365),$.iqMyPortal.register_callback=function(){$.iqMarketAnalysis.draw_charts()},$.iqMyPortal.login({callback:function(){$.iqMarketAnalysis.draw_charts()}}))}else $.iqUtils.cookie("marketanalysis_nagpageview_counter",1,365);break;case"offer":if($.iqUtils.cookie("marketanalysis_offer_counter")){""===$.iqUtils.cookie("marketanalysis_session")&&($.iqUtils.cookie("marketanalysis_session",1),icounter=parseInt($.iqUtils.cookie("marketanalysis_offer_counter"))+1,$.iqUtils.cookie("marketanalysis_offer_counter",icounter,365),icounter===registration_interval&&($.iqMyPortal.register_callback=function(){$.iqMarketAnalysis.draw_charts()},$.iqMyPortal.login({callback:function(){$.iqMarketAnalysis.draw_charts()}})))}else $.iqUtils.cookie("marketanalysis_offer_counter",1,365);break;case"forced":$.iqUtils.cookie("marketanalysis_forcedpageview_counter")?(icounter=parseInt($.iqUtils.cookie("marketanalysis_forcedpageview_counter"))+1)>=registration_interval&&($.iqMarketAnalysis.hide_page(),$.iqMyPortal.register_callback=function(){$.iqMarketAnalysis.show_page()},$.iqMyPortal.login({callback:function(){$.iqMarketAnalysis.show_page()}})):$.iqUtils.cookie("marketanalysis_forcedpageview_counter",1,365)}}}}),$.iqMarketAnalysis={draw_charts:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/marketanalysis.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getMarketAnalysis",zip_code:$("#zip_code").iqFieldValue(),months:$("#months").iqFieldValue(),city:$("#city").iqFieldValue(),layout:"marketgrid"},success:function(jsonRet){if($.iqUtils.uiProcessing("close"),0===jsonRet.STATUS){var i=0,rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY),aAvgSalePrice=[],aCountSalesCharts=[];for(i=0;i<rs.length;i++)aCountSalesCharts.push([$.iqMarketAnalysis.getMonthString(rs[i].closingdate),rs[i].count_sales]),aAvgSalePrice.push([$.iqMarketAnalysis.getMonthString(rs[i].closingdate),rs[i].avg_saleprice]);$("#grid").html(jsonRet.LAYOUT),$.iqMarketAnalysis.avgSalePriceCharts(aAvgSalePrice),$.iqMarketAnalysis.countSalesCharts(aCountSalesCharts)}else $.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage(httpRet.MESSAGE):$.iqUtils.uiMessage(httpRet.responseText)}})},avgSalePriceCharts:function(data){var sChartType=$("#avgSalePricePriceGraphType").iqFieldValue(),avgSalePriceData=new google.visualization.DataTable;avgSalePriceData.addColumn("string","Month"),avgSalePriceData.addColumn("number","Avg. Sale Price"),avgSalePriceData.addRows(data);var options={title:"Average Sale Price",legend:{position:"none"},chartArea:{left:"15%",width:"85%"}};if("Bar"===sChartType){new google.visualization.BarChart(document.getElementById("avgSalePriceCharts")).draw(avgSalePriceData,options)}else{new google.visualization.LineChart(document.getElementById("avgSalePriceCharts")).draw(avgSalePriceData,options)}},countSalesCharts:function(data){var countSalesData=new google.visualization.DataTable,sChartType=$("#countSalesChartsGraphType").iqFieldValue();countSalesData.addColumn("string","Month"),countSalesData.addColumn("number","Total Sales"),countSalesData.addRows(data);var options={title:"Total Sales",legend:{position:"none"},chartArea:{left:"15%",width:"85%"}};if("Bar"===sChartType){new google.visualization.BarChart(document.getElementById("countSalesCharts")).draw(countSalesData,options)}else{new google.visualization.LineChart(document.getElementById("countSalesCharts")).draw(countSalesData,options)}},getMonthString:function(yyyymm){var month=yyyymm.substr(4,2),year=yyyymm.substr(0,4);switch(month){case"01":return"Jan "+year;case"02":return"Feb "+year;case"03":return"Mar "+year;case"04":return"Apr "+year;case"05":return"May "+year;case"06":return"Jun "+year;case"07":return"Jul "+year;case"08":return"Aug "+year;case"09":return"Sep "+year;case"10":return"Oct "+year;case"11":return"Nov "+year;case"12":return"Dec "+year}return month+" "+year},hide_page:function(){$(".iq-pg-body").css({visibility:"hidden"})},show_page:function(){$(".iq-pg-body").css({visibility:"visible"})}}}(jQuery);
//# sourceMappingURL=marketanalysis.min.js.map
;
/* file: ../assets/js/min/myportal.min.js */
!function($){"use strict";var impressionsChart,viewsChart;$(document).ready(function(){if($.fn.modal&&($.fn.modal.Constructor.prototype.enforceFocus=function(){}),1===$("#iq_myportal_profile_form").length&&$("#iq_myportal_profile_form").iqForm_Rules(),1===$("#iq_create_search").length){var obj=$("#iq_create_search");"create"===$(obj).data("create-action")&&$(obj).trigger("click")}if($("#impressions-chart-area").length>0){impressionsChart=document.getElementById("impressions-chart-area").getContext("2d"),$.iqMyPortal.impressionsChart=new Chart(impressionsChart,impressionsConfig);var impressionsLegend=$.iqMyPortal.impressionsChart.generateLegend();$("#impressions-chart-legend").html(impressionsLegend)}if($("#views-chart-area").length>0){viewsChart=document.getElementById("views-chart-area").getContext("2d"),$.iqMyPortal.viewsChart=new Chart(viewsChart,viewsConfig);var viewsLegend=$.iqMyPortal.viewsChart.generateLegend();$("#views-chart-legend").html(viewsLegend)}$('[data-toggle="popover"]').popover&&$('[data-toggle="popover"]').popover({trigger:"hover",placement:"left"}),$('[data-bs-toggle="popover"]').Popover&&$('[data-bs-toggle="popover"]').Popover({trigger:"hover",placement:"left"})}),$.iqMyPortal={fbUserLogin:function(userinfo){$("#iq_myportal_login_form-userid").iqFieldValue(userinfo.email),$("#iq_myportal_login_form-password").iqFieldValue($.iqUtils.left(userinfo.password,16)),$("#iq_myportal_login_form-savelogin").attr("checked",!0),$("#iq_myportal_login_form-autologin").attr("checked",!0),$("#iq_myportal_login_form-submit").trigger("click")},register_callback:null,register:function(oOptions){var mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"",publicid=oOptions.publicid||"",mlsid=oOptions.mlsid||"",agentteamid=oOptions.agentteamid||"",layout="",callback=oOptions.callback||$.iqMyPortal.register_callback;return $.iqMyPortal.register_callback=callback,$("#iq_myportal_login_dialog").dialog("close"),$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"register_form",mlnumber:mlnumber,propertytype:propertytype,mlsid:mlsid,publicid:publicid,agentteamid:agentteamid},success:function(jsonRet){$.iqUtils.uiProcessing("close"),layout=0===jsonRet.STATUS?jsonRet.LAYOUT:jsonRet.CONTENT,$("#iq_myportal_register_dialog").bsModal({backdrop:!0,title:"&nbsp;Register",body:layout}),$("#iq_myportal_register_dialog .modal-footer").css({display:"none"}),$("#iq_myportal_register_dialog #iq_lead_form-submit").prop("onclick",null),$("#iq_myportal_register_dialog #iq_lead_form-submit").on("click",function(){$("#iq_myportal_register_dialog #iq_lead_form").iqForm_Check()&&$.iqMyPortal.register_save()}),$("#iq_myportal_register_dialog #iq_lead_form").iqForm_Rules()},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},register_save:function(){$.iqUtils.uiProcessing("open");var oData=$("#iq_myportal_register_dialog #iq_lead_form").iqSerializeFormToStruct();return oData.ReturnFormat="json",oData.method="create",$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:"A"===jsonRet.PWSTATUS?($("#iq_myportal_register_dialog").modal("hide"),$.iqUtils.cookie("PW_ISAUTHED",!0,365),$.iqUtils.cookie("CONTACTID",jsonRet.CONTACTID),$.iqUtils.cookie("FIRSTNAME",oData.firstname),$.iqUtils.cookie("LASTNAME",oData.lastname),$.iqUtils.cookie("USERID",oData.userid),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3),1===$("#iq-myportal").length&&$.iqMyPortal.private(),$.iqMyPortal.register_callback&&$.iqMyPortal.register_callback.call(this,jsonRet)):($("#iq_myportal_register_dialog").modal("hide"),$.iqUtils.uiMessage("","Your account has been created but set to inactive. An email has been sent to the email address you provided. Please follow the directions in the email to activate your account."));break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE),$("#iq_lead_form-_hash_").iqFieldValue(jsonRet.HASH);break;case 2:$.iqUtils.uiMessage("",jsonRet.MESSAGE);break;case 3:$("#iq_myportal_register_dialog").modal("hide"),$.iqUtils.uiMessage("",jsonRet.MESSAGE);break;case 4:$.iqMyPortal.contactselect(jsonRet);break;case 5:$.iqMyPortal.agentselect(jsonRet)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},listings_data:function(pPropertyType,pWatchName){$.iqUtils.uiProcessing("open"),pPropertyType=pPropertyType.toLowerCase(),setTimeout(function(){$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"edit_watch",WatchName:pWatchName,PropertyType:pPropertyType,ContactID:$.iqUtils.cookie("CONTACTID")},success:function(jsonRet){if(0===jsonRet.STATUS){$("#iq_hidden_watch_form").html(jsonRet.LAYOUT);var searchby=$("#iq_hidden_watch_form #iq_watch_criteria_form-searchby").iqFieldValue(),resale=$("#iq_hidden_watch_form #iq_watch_criteria_form-resale").iqFieldValue(),reo=$("#iq_hidden_watch_form #iq_watch_criteria_form-reo").iqFieldValue(),shortsale=$("#iq_hidden_watch_form #iq_watch_criteria_form-shortsale").iqFieldValue(),oData=$("#iq_hidden_watch_form #iq_watch_criteria_form").iqSerializeFormToStruct({includeblanks:!1});oData.zipcode=$("#iq_hidden_watch_form #iq_watch_criteria_form-zip_code").iqFieldValue(),"residential"!==pPropertyType&&"commercial"!==pPropertyType&&"multifamily"!==pPropertyType||(oData.sqfoot=$("#iq_hidden_watch_form #iq_watch_criteria_form-sq_foot").iqFieldValue(),oData.sqfootmin=$("#iq_hidden_watch_form #iq_watch_criteria_form-sq_footmin").iqFieldValue(),oData.sqfootmax=$("#iq_hidden_watch_form #iq_watch_criteria_form-sq_footmax").iqFieldValue(),oData.year_built=$("#iq_hidden_watch_form #iq_watch_criteria_form-year_built").iqFieldValue()),"commercial"===pPropertyType&&(oData.sqfootoffice=$("#iq_hidden_watch_form #iq_watch_criteria_form-sq_footoffice").iqFieldValue(),oData.sqfootofficemin=$("#iq_hidden_watch_form #iq_watch_criteria_form-sq_footofficemin").iqFieldValue(),oData.sqfootofficemax=$("#iq_hidden_watch_form #iq_watch_criteria_form-sq_footofficemax").iqFieldValue()),"residential"===pPropertyType&&$.iqUtils.sessionStorage("listings_data",oData),oData.resstyle=$("#iq_hidden_watch_form #iq_watch_criteria_form-style").iqFieldValue(),oData.notification=$("#iq_hidden_watch_form #iq_watch_criteria_form-notification").iqFieldValue(),console.log(oData.resstyle),$.iqUtils.sessionStorage("listings_data",oData),$.iqUtils.cookie("listings_data",!0);var aSearchString=[];aSearchString.push("/listings"),"T"===resale&&"T"===shortsale&&"T"===reo||("T"===resale?aSearchString.push("/resale_t"):aSearchString.push("/resale_f"),"T"===shortsale?aSearchString.push("/shortsale_t"):aSearchString.push("/shortsale_f"),"T"===reo?aSearchString.push("/reo_t"):aSearchString.push("/reo_f")),"map"===searchby&&aSearchString.push("/searchby_map"),aSearchString.push("/propertytype_"+pPropertyType),self.location=aSearchString.join("").toLowerCase()}else $.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},100)},save_watch_dialog:function(){return"true"===$.iqUtils.cookie("PW_ISAUTHED")?($.iqUtils.uiProcessing("open"),$("body").append('<div id="iq_myportal_save_watch" style="z-index:12050"><div id="iq_myportal_save_watch_body" style="padding:20px;"></div></div>'),$("#iq_myportal_save_watch").dialog({title:"Save Watch",width:"600",resizable:!1,autoOpen:!1,modal:!0,close:function(){$(this).remove()}}),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",CacheData:!0,watchname:$($.iqListings.searchform+"-watchname").iqFieldValue(),Method:"save_watch_dialog"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS&&($("#iq_myportal_save_watch").dialog("open"),$("#iq_myportal_save_watch_body").html(jsonRet.LAYOUT),$("#iq_myportal_save_watch_form").iqForm_Rules(),$("#iq_myportal_save_watch_form-watchname").focus())},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})):$.iqMyPortal.login({callback:$.iqMyPortal.save_watch_dialog}),!1},save_watch:function(){var searchby=$("#iq_myportal_save_watch_form-searchby").iqFieldValue(),oData="";if("map"===searchby){var lat=$("#iq_watch_criteria_form-lat").iqFieldValue(),lon=$("#iq_watch_criteria_form-lon").iqFieldValue();if(""===lat&&""===lon)return void $.iqUtils.uiMessage("","Please click on <strong>Update Map Location</strong> to set location for watch.")}$("#iq_myportal_save_watch_form").iqForm_Check(),$("#iq_myportal_save_watch_form").iqForm_Check()&&($.iqMyPortal.range_values(),$.iqUtils.uiProcessing("open"),1===$("#iq_propertywatch_watches").length?(oData=$("#iq_watch_criteria_form").iqSerializeFormToStruct(),oData.resstyle=$("#iq_watch_criteria_form-style").iqFieldValue(),oData.notification=$("#iq_watch_criteria_form-notification").iqFieldValue(),""===$("#iq_watch_criteria_form-dostatuscodechangenotification").iqFieldValue()&&(oData.dostatuscodechangenotification="F"),""===$("#iq_watch_criteria_form-doreducednotification").iqFieldValue()&&(oData.doreducednotification="F"),""===$("#iq_watch_criteria_form-doopenhousenotification").iqFieldValue()&&(oData.doopenhousenotification="F"),""===$("#iq_watch_criteria_form-images").iqFieldValue()&&(oData.images=0)):(oData=$($.iqListings.searchform).iqSerializeFormToStruct(),oData.notification=$("#iq_myportal_save_watch_form-notification").iqFieldValue(),oData.dostatuscodechangenotification="T",oData.doreducednotification="T",oData.doopenhousenotification="T",""===$("#iq_watch_criteria_form-images").iqFieldValue()&&(oData.images=0),1===$($.iqListings.searchform+"-sqfoot").length&&(oData.sq_foot=$($.iqListings.searchform+"-sqfoot").iqFieldValue()),oData.zip_code=$($.iqListings.searchform+"-zipcode").iqFieldValue()),oData.ReturnFormat="json",oData.watchname=$("#iq_myportal_save_watch_form-watchname").iqFieldValue(),oData.contactid=$.iqUtils.cookie("CONTACTID"),oData.method="save_watch",$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE),1===$("#iq_propertywatch_watches").length?self.location=self.location:$("#iq_myportal_save_watch").dialog("close")):$.iqUtils.uiMessage("",jsonRet.CONTENT)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}))},update_watch:function(){$.iqUtils.uiProcessing("open"),$.iqMyPortal.range_values();var oData=$("#iq_watch_criteria_form").iqSerializeFormToStruct();""===$("#iq_watch_criteria_form-images").iqFieldValue()&&(oData.images=0),oData.method="save_watch",oData.resstyle=$("#iq_watch_criteria_form-style").iqFieldValue(),oData.notification=$("#iq_watch_criteria_form-notification").iqFieldValue(),""===$("#iq_watch_criteria_form-dostatuscodechangenotification").iqFieldValue()&&(oData.dostatuscodechangenotification="F"),""===$("#iq_watch_criteria_form-doreducednotification").iqFieldValue()&&(oData.doreducednotification="F"),""===$("#iq_watch_criteria_form-doopenhousenotification").iqFieldValue()&&(oData.doopenhousenotification="F"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$.iqMyPortal.close_watch_form(),$.iqUtils.uiMessage("",jsonRet.MESSAGE),setTimeout(function(){$.iqMyPortal.get_watches()},1e3)):$.iqUtils.uiMessage("",jsonRet.CONTENT)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},range_values:function(){var propertytype=$("#iq_watch_criteria_form-propertytype").iqFieldValue(),bedsmin="",bedsmax="",bathsmin="",bathsmax="",sq_footmin="",sq_footmax="",sq_footofficemin="",sq_footofficemax="",acreagemin="",acreagemax="",unitsmin="",unitsmax="",buildingsmax="",buildingsmin="";switch(propertytype){case"residential":bedsmin=$("#iq_watch_criteria_form-bedsmin").iqFieldValue(),bedsmax=$("#iq_watch_criteria_form-bedsmax").iqFieldValue(),bathsmin=$("#iq_watch_criteria_form-bathsmin").iqFieldValue(),bathsmax=$("#iq_watch_criteria_form-bathsmax").iqFieldValue(),sq_footmin=$("#iq_watch_criteria_form-sq_footmin").iqFieldValue(),sq_footmax=$("#iq_watch_criteria_form-sq_footmax").iqFieldValue(),acreagemin=$("#iq_watch_criteria_form-acreagemin").iqFieldValue(),acreagemax=$("#iq_watch_criteria_form-acreagemax").iqFieldValue(),$("#iq_watch_criteria_form-beds").iqFieldValue(bedsmin),"0"!==bedsmin&&"99"!==bedsmax?bedsmin!==bedsmax&&$("#iq_watch_criteria_form-beds").iqFieldValue(bedsmin+"-"+bedsmax):"99"!==bedsmax&&$("#iq_watch_criteria_form-beds").iqFieldValue(bedsmin+"-"+bedsmax),$("#iq_watch_criteria_form-baths").iqFieldValue(bathsmin),"0"!==bathsmin&&"99"!==bathsmax?bathsmin!==bathsmax&&$("#iq_watch_criteria_form-baths").iqFieldValue(bathsmin+"-"+bathsmax):"99"!==bathsmax&&$("#iq_watch_criteria_form-baths").iqFieldValue(bathsmin+"-"+bathsmax),$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin),"0"!==sq_footmin&&"99999"!==sq_footmax?sq_footmin!==sq_footmax&&$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin+"-"+sq_footmax):"99999"!==sq_footmax&&$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin+"-"+sq_footmax),$("#iq_watch_criteria_form-acreage").iqFieldValue(acreagemin),"0"!==acreagemin&&"99"!==acreagemax?acreagemin!==acreagemax&&$("#iq_watch_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax):"99"!==acreagemax&&$("#iq_watch_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax);break;case"multifamily":sq_footmin=$("#iq_watch_criteria_form-sq_footmin").iqFieldValue(),sq_footmax=$("#iq_watch_criteria_form-sq_footmax").iqFieldValue(),unitsmin=$("#iq_watch_criteria_form-unitsmin").iqFieldValue(),unitsmax=$("#iq_watch_criteria_form-unitsmax").iqFieldValue(),buildingsmin=$("#iq_watch_criteria_form-buildingsmin").iqFieldValue(),buildingsmax=$("#iq_watch_criteria_form-buildingsmax").iqFieldValue(),$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin),"0"!==sq_footmin&&"99999"!==sq_footmax?sq_footmin!==sq_footmax&&$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin+"-"+sq_footmax):"99999"!==sq_footmax&&$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin+"-"+sq_footmax),$("#iq_watch_criteria_form-units").iqFieldValue(unitsmin),"0"!==unitsmin&&"99"!==unitsmax?unitsmin!==unitsmax&&$("#iq_watch_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax):"99"!==unitsmax&&$("#iq_watch_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax),$("#iq_watch_criteria_form-buildings").iqFieldValue(buildingsmin),"0"!==buildingsmin&&"99"!==buildingsmax?buildingsmin!==buildingsmax&&$("#iq_watch_criteria_form-buildings").iqFieldValue(buildingsmin+"-"+buildingsmax):"99"!==buildingsmax&&$("#iq_watch_criteria_form-buildings").iqFieldValue(buildingsmin+"-"+buildingsmax);break;case"commercial":sq_footmin=$("#iq_watch_criteria_form-sq_footmin").iqFieldValue(),sq_footmax=$("#iq_watch_criteria_form-sq_footmax").iqFieldValue(),sq_footofficemin=$("#iq_watch_criteria_form-sq_footofficemin").iqFieldValue(),sq_footofficemax=$("#iq_watch_criteria_form-sq_footofficemax").iqFieldValue(),unitsmin=$("#iq_watch_criteria_form-unitsmin").iqFieldValue(),unitsmax=$("#iq_watch_criteria_form-unitsmax").iqFieldValue(),$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin),"0"!==sq_footmin&&"99999"!==sq_footmax?sq_footmin!==sq_footmax&&$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin+"-"+sq_footmax):"99999"!==sq_footmax&&$("#iq_watch_criteria_form-sq_foot").iqFieldValue(sq_footmin+"-"+sq_footmax),$("#iq_watch_criteria_form-sq_foot_office").iqFieldValue(sq_footofficemin),"0"!==sq_footofficemin&&"99999"!==sq_footofficemax?sq_footofficemin!==sq_footofficemax&&$("#iq_watch_criteria_form-sq_foot_office").iqFieldValue(sq_footofficemin+"-"+sq_footofficemax):"99999"!==sq_footofficemax&&$("#iq_watch_criteria_form-sq_foot_office").iqFieldValue(sq_footofficemin+"-"+sq_footofficemax),$("#iq_watch_criteria_form-units").iqFieldValue(unitsmin),"0"!==unitsmin&&"99"!==unitsmax?unitsmin!==unitsmax&&$("#iq_watch_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax):"99"!==unitsmax&&$("#iq_watch_criteria_form-units").iqFieldValue(unitsmin+"-"+unitsmax);break;case"land":acreagemin=$("#iq_watch_criteria_form-acreagemin").iqFieldValue(),acreagemax=$("#iq_watch_criteria_form-acreagemax").iqFieldValue(),$("#iq_watch_criteria_form-acreage").iqFieldValue(acreagemin),"0"!==acreagemin&&"99"!==acreagemax?acreagemin!==acreagemax&&$("#iq_watch_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax):"99"!==acreagemax&&$("#iq_watch_criteria_form-acreage").iqFieldValue(acreagemin+"-"+acreagemax)}},delete_watch:function(pPropertyType,pWatchName){return $.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"delete_watch",WatchName:pWatchName,PropertyType:pPropertyType,ContactID:$.iqUtils.cookie("CONTACTID")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),self.location=self.location):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},close_watch_form:function(){$("#"+$.div_to_toggle).slideToggle("slow",function(){var div_to_remove="#"+$(this).attr("id")+"_container";$(div_to_remove).remove(),$.div_to_toggle=""})},create_watch_form:function(){$.iqUtils.uiProcessing("open"),void 0!==$.div_to_toggle&&$("#"+$.div_to_toggle).slideToggle("slow",function(){var div_to_remove="#"+$(this).attr("id")+"_container";$(div_to_remove).remove()}),setTimeout(function(){$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"create_watch",ContactID:$.iqUtils.cookie("CONTACTID")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$.div_to_toggle="iq_myportal_create_watch",$("#iq_myportal_create_watch").html(jsonRet.LAYOUT),"create"===$("#iq_create_search").attr("data-create-action")?($("#iq_create_search").attr("data-create-action",""),$("#iq_myportal_create_watch").slideToggle("slow")):$("#"+$.div_to_toggle).slideToggle("slow"),$.iqMyPortal.init_searchform("#iq_myportal_create_watch")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},500)},update_watch_form:function(pPropertyType,pWatchName,obj){void 0!==$.div_to_toggle&&$(obj).data("div_to_toggle")===$.div_to_toggle||(0!==$("#iq_myportal_create_watch").length&&$("#iq_myportal_create_watch #iq_watch_criteria_form").remove(),$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"edit_watch",WatchName:pWatchName,PropertyType:pPropertyType,ContactID:$.iqUtils.cookie("CONTACTID")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),void 0!==$.div_to_toggle&&$("#"+$.div_to_toggle).slideToggle("slow",function(){var div_to_remove="#"+$(this).attr("id")+"_container";$(div_to_remove).remove()}),$.div_to_toggle=$(obj).data("div_to_toggle"),$(obj).closest("tr").after('<tr id="'+$.div_to_toggle+'_container"><td colspan="6" bgcolor="#eeeeee"><div id="'+$.div_to_toggle+'" style="display:none;"></div></td></tr>'),$("#"+$.div_to_toggle).html(jsonRet.LAYOUT),$("#"+$.div_to_toggle).slideToggle("slow"),$.iqMyPortal.init_searchform("#"+$.div_to_toggle)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}))},change_watch_form:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"create_watch",watchname:$("#iq_myportal_save_watch_form-watchname").iqFieldValue(),propertytype:$("#iq_myportal_save_watch_form-propertytype").iqFieldValue(),searchby:$("#iq_myportal_save_watch_form-searchby").iqFieldValue(),ContactID:$.iqUtils.cookie("CONTACTID")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_myportal_create_watch").html(jsonRet.LAYOUT),$.iqMyPortal.init_searchform("#iq_myportal_create_watch")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},init_searchform:function(pwatch_form_div){switch($(pwatch_form_div+" #iq_myportal_save_watch_form").iqForm_Rules(),$(pwatch_form_div+" #iq_watch_criteria_form").iqMyPortalMultiFieldAutocomplete({mlsid:$("#multifield_autocomplete").data("mlsid_list"),propertytype:"residential",state:"",county:"",city:"",area:"",subarea:"",zip_code:"",fields:"state,county,city,area,zip_code,subarea",callback:"",async:!0}),$(pwatch_form_div+" #iq_watch_criteria_form-propertytype").iqFieldValue()){case"residential":$(pwatch_form_div+" #iq_watch_criteria_form-bedsmin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-bedsmax").iqFieldFormat({min:1,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-bedsmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-bedsmax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-bathsmin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-bathsmax").iqFieldFormat({min:1,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-bathsmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-bathsmax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmin").iqFieldFormat({min:0,max:99999,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmax").iqFieldFormat({min:0,max:99999,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemax").iqFieldFormat({min:0,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemax").iqTextDropdown();break;case"multifamily":$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmin").iqFieldFormat({min:0,max:99999,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmax").iqFieldFormat({min:0,max:99999,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-buildingsmin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-buildingsmax").iqFieldFormat({min:0,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-buildingsmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-buildingsmax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmax").iqFieldFormat({min:0,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmax").iqTextDropdown();break;case"commercial":$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmin").iqFieldFormat({min:0,max:99999,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmax").iqFieldFormat({min:0,max:99999,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footmax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footofficemin").iqFieldFormat({min:0,max:99999,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footofficemax").iqFieldFormat({min:0,max:99999,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footofficemin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-sq_footofficemax").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmax").iqFieldFormat({min:0,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-unitsmax").iqTextDropdown();break;case"land":$(pwatch_form_div+" #iq_watch_criteria_form-acreagemin").iqFieldFormat({min:0,max:99,displayMin:"No Min",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"${{val}}"}),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemax").iqFieldFormat({min:0,max:99,displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"No Max"}),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemin").iqTextDropdown(),$(pwatch_form_div+" #iq_watch_criteria_form-acreagemax").iqTextDropdown()}$.iqMyPortal.change_listprice()},change_listprice:function(){"lease"===$("#iq_watch_criteria_form-subtype").iqFieldValue().toLowerCase()?($("[data-forlease=true]").each(function(){$(this).show()}),$("[data-forsale=true]").each(function(){$(this).hide()})):($("[data-forlease=true]").each(function(){$(this).hide()}),$("[data-forsale=true]").each(function(){$(this).show()}))},view_map:function(){$.iqUtils.uiProcessing("open");var gmap_lat="",gmap_lon="",gmap_zoom=12,pLat=$("#iq_watch_criteria_form-lat").val(),pLon=$("#iq_watch_criteria_form-lon").val(),pZoom=$("#iq_watch_criteria_form-zoomlevel").val(),pDomainLat=$("#iq_watch_criteria_form-domain-lat").val(),pDomainLon=$("#iq_watch_criteria_form-domain-lon").val(),pDomainZoom=$("#iq_watch_criteria_form-domain-zoomlevel").val();setTimeout(function(){$("body").append('<div id="iq_myportal_view_map"><div id="iq_myportal_view_map_body"></div></div>'),$("#iq_myportal_view_map").dialog({title:"View / Update Map",width:800,height:"auto",resizable:!1,autoOpen:!1,modal:!0,close:function(){$(this).remove()}}),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"view_map"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_myportal_view_map_body").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),$("#iq_myportal_view_map").dialog("open"),""==pLat||0==pLat?(gmap_lat=pDomainLat,gmap_lon=pDomainLon,gmap_zoom=pDomainZoom):(gmap_lat=pLat,gmap_lon=pLon,gmap_zoom=pZoom),$("#iq_myportal_map").iqGoogleMaps({Lat:parseFloat(gmap_lat),Lon:parseFloat(gmap_lon),ZoomLevel:parseInt(gmap_zoom),mapTypeId:"roadmap"})},100)},update_map:function(){var map=$.iqGoogleMap,map_bounds=map.getBounds(),ne=map_bounds.getNorthEast(),sw=map_bounds.getSouthWest(),topleftlat=ne.lat(),bottomrightlat=sw.lat(),topleftlon=ne.lng(),bottomrightlon=sw.lng();$("#iq_watch_criteria_form-zoomlevel").iqFieldValue(map.zoom),$("#iq_watch_criteria_form-lat").iqFieldValue(map.center.lat),$("#iq_watch_criteria_form-lon").iqFieldValue(map.center.lng),$("#iq_watch_criteria_form-topleftlat").iqFieldValue(topleftlat),$("#iq_watch_criteria_form-bottomrightlat").iqFieldValue(bottomrightlat),$("#iq_watch_criteria_form-topleftlon").iqFieldValue(topleftlon),$("#iq_watch_criteria_form-bottomrightlon").iqFieldValue(bottomrightlon),$("#iq_myportal_view_map").dialog("close")},get_watches:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",layout:"watches_grid",Method:"get_watches",ContactID:$.iqUtils.cookie("CONTACTID")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_propertywatch_grid").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},register_message:function(){$("#iq_myportal_register_complete").dialog({title:"My Portal Account Created",width:"auto",resizable:!1,autoOpen:!1,modal:!0}),$("#iq_myportal_register_complete").dialog("open"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",CacheData:!0,layout:"account_created",Method:"account_created"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.cookie("PW_ISAUTHED","T",365),$("#iq_myportal_register_complete").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),
void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},register_togglepage:function(direction,pagecount){var newpage="",i="";if("Next"!==direction||$("#myportal_register_form").iqForm_Check()){var currpage=$("#myportal_register_form").find("#currpage").iqFieldValue();for(newpage="Previous"===direction?parseInt(currpage)-1:parseInt(currpage)+1,$("#myportal_register_form").find("#currpage").iqFieldValue(newpage),i=1;i<=pagecount;i++){var divid=$.iqZeroPad(i,4);i===newpage?$("#div_page_"+divid).toggle(!0):$("#div_page_"+divid).toggle(!1)}newpage<pagecount?$("#imgnext").toggle(!0):$("#imgnext").toggle(!1),newpage>1?$("#imgprevious").toggle(!0):$("#imgprevious").toggle(!1),newpage===pagecount?$("#imgsave").toggle(!0):$("#imgsave").toggle(!1),pagecount>1&&$("#progressbar").progressbar({value:newpage/pagecount*100})}},deactivate_account:function(pcontactid){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",CacheData:!0,contactid:pcontactid,comments:$("#comments").iqFieldValue(),layout:"account_deactivated",Method:"account_deactivated"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_myportal_changestatus").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},contactselect:function(jsonRet){return $("body").append('<div id="iq_myportal_contactselect_dialog"><div id="myportal_contactselect_message" class="iq-form-message"></div><div id="myportal_contactselect_body"></div></div>'),$("#iq_myportal_contactselect_dialog").dialog({title:"Signup / Login",width:"auto",resizable:!1,autoOpen:!1,modal:!0,close:function(){$(this).remove()},zIndex:200}),$("#myportal_contactselect_body").html(jsonRet.LAYOUT),$("#iq_myportal_contactselect_dialog").dialog("open"),!1},contactselect_process:function(){var sContactID=$("#myportal_contactselect_form #contactid").iqFieldValue();return $("#myportal_register_form #contactid").iqFieldValue(sContactID),$("#iq_myportal_contactselect_dialog").dialog("close"),$("#iq_myportal_contactselect_dialog").remove(),$.iqMyPortal.register_save(),!1},agentselect:function(jsonRet){return $("body").append('<div id="myportal_agentselect_dialog"><div id="myportal_agentselect_message" class="iq-form-message"></div><div id="myportal_agentselect_body"></div></div>'),$("#myportal_agentselect_dialog").dialog({title:"Signup / Login",width:"auto",resizable:!1,autoOpen:!1,modal:!0,close:function(){$(this).remove()}}),$("#myportal_agentselect_body").html(jsonRet.LAYOUT),$("#myportal_agentselect_dialog").dialog("open"),!1},agentselect_process:function(){var sPublicID=$("#iq_myportal_agentselect_form-publicid").iqFieldValue();return"NONE"===sPublicID?$("#iq_lead_form-publicid").iqFieldValue(""):$("#iq_lead_form-publicid").iqFieldValue(sPublicID),$("#myportal_agentselect_dialog").dialog("close"),$("#myportal_agentselect_dialog").remove(),$.iqMyPortal.register_save(),!1},login_callback:null,watch:function(oOptions){$.iqUtils.uiProcessing("close");var mlsid=oOptions.mlsid||"",mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"";if(""===mlsid||""===mlnumber||""===propertytype)return $.iqUtils.uiMessage("Missing or blank parameter<br>MLSID:"+mlsid+"<br>MLS Number:"+mlnumber+"<br>Property Type:"+propertytype),!1;if("true"===$.iqUtils.cookie("PW_ISAUTHED")){var data={returnformat:"json",method:"watchproperty",userid:$.iqUtils.cookie("USERID"),contactid:$.iqUtils.cookie("CONTACTID"),mlsid:mlsid,mlnumber:mlnumber,propertytype:propertytype},oElm=$("[data-mlsid='"+mlsid+"'][data-ml_number='"+mlnumber+"']");$(oElm).find(".fa-heart").hide(),$(oElm).find(".fa-spinner").show(),1===$(".iq-watching-button").length&&($(".iq-watch-button").find(".fa-heart-o").hide(),$(".iq-watch-button").find(".fa-spinner").show()),$('[data-love="watch-property-'+mlnumber+'"]').each(function(){$(this).switchClass("property-card-love","property-card-love-saved")}),$('[data-button="watch-property-'+mlnumber+'"]').each(function(){$(this).hide()}),$('[data-button="watching-property-'+mlnumber+'"]').each(function(){$(this).html('<i class="fa fa-spinner fa-spin"></i><div class="text-success" style="font-size:14px;">Save</div>'),$(this).show()}),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:data,success:function(jsonRet){$(oElm).find(".fa-spinner").hide(),$(oElm).find(".fa-heart").show(),0===jsonRet.STATUS?($(oElm).find("#iq_watching_button").attr("style",null),$(oElm).find("#iq_watch_button").hide(),$(oElm).find("#iq_hideproperty_button").hide(),1===$(".iq-watching-button").length&&($(".iq-watch-button").hide(),$(".iq-watching-button").show(),$(".iq-watch-button").find(".fa-heart-o").show(),$(".iq-watch-button").find(".fa-spinner").hide()),$('[data-button="watch-property-'+mlnumber+'"]').each(function(){$(this).hide()}),$('[data-button="watching-property-'+mlnumber+'"]').each(function(){$(this).html('<i class="fa fa-heart-o text-success"></i><div class="text-success" style="font-size:14px;">Saved</div>'),$(this).show()})):(jsonRet.STATUS,$.iqUtils.uiMessage("",jsonRet.MESSAGE))},error:function(httpRet){$(oElm).find(".fa-spinner").hide(),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})}else oOptions.callback=function(){$.iqMyPortal.watch(oOptions)},$.iqMyPortal.login(oOptions);return!1},unwatch:function(oOptions){var mlsid=oOptions.mlsid||"",mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"";if(""===mlsid||""===mlnumber||""===propertytype)return $.iqUtils.uiMessage("Missing or blank parameter<br>MLSID:"+mlsid+"<br>MLS Number:"+mlnumber+"<br>Property Type:"+propertytype),!1;if("true"===$.iqUtils.cookie("PW_ISAUTHED")){var oElm=$("[data-mlsid='"+mlsid+"'][data-ml_number='"+mlnumber+"']");$(oElm).find(".fa-check").hide(),$(oElm).find(".fa-spinner").show(),1===$(".iq-watching-button").length&&($(".iq-watching-button").find(".fa-check").hide(),$(".iq-watching-button").find(".fa-spinner").show()),$('[data-button="watch-property-'+mlnumber+'"]').each(function(){$(this).html('<i class="fa fa-spinner fa-spin"></i><div class="text-success" style="font-size:14px;">Save</div>'),$(this).show()}),$('[data-button="watching-property-'+mlnumber+'"]').each(function(){$(this).hide()});var data={returnformat:"json",method:"unwatchproperty",userid:$.iqUtils.cookie("USERID"),contactid:$.iqUtils.cookie("CONTACTID"),mlsid:mlsid,mlnumber:mlnumber,propertytype:propertytype};$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:data,success:function(jsonRet){$(oElm).find(".fa-spinner").hide(),$(oElm).find(".fa-heart").show(),0===jsonRet.STATUS?($(oElm).find("#iq_watching_button").hide(),$(oElm).find("#iq_watch_button").attr("style",null),$(oElm).find("#iq_hideproperty_button").attr("style",null),$(oElm).find(".fa-check").show(),$(".iq-watching-button").find(".fa-check").show(),$(".iq-watching-button").find(".fa-spinner").hide(),$(".iq-watching-button").hide(),$(".iq-watch-button").show(),$('[data-button="watch-property-'+mlnumber+'"]').each(function(){$(this).html('<i class="fa fa-heart-o text-success"></i><div class="text-success" style="font-size:14px;">Save</div>'),$(this).show()}),$('[data-button="watching-property-'+mlnumber+'"]').each(function(){$(this).hide()})):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$(oElm).find(".fa-spinner").hide(),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})}},hide:function(oOptions){var mlsid=oOptions.mlsid||"",mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"";if(""===mlsid||""===mlnumber||""===propertytype)return $.iqUtils.uiMessage("Missing or blank parameter<br>MLSID:"+mlsid+"<br>MLS Number:"+mlnumber+"<br>Property Type:"+propertytype),!1;if("true"===$.iqUtils.cookie("PW_ISAUTHED")){var data={returnformat:"json",method:"hideproperty",userid:$.iqUtils.cookie("USERID"),contactid:$.iqUtils.cookie("CONTACTID"),mlsid:mlsid,mlnumber:mlnumber,propertytype:propertytype};$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:data,success:function(jsonRet){if(0===jsonRet.STATUS){$.iqUtils.uiProcessing("close");var oElm=$("[data-mlsid='"+mlsid+"'][data-ml_number='"+mlnumber+"']");$(oElm).parent().hasClass("iq-listings-grid-card-wrap")?$(oElm).parent().remove():$(oElm).remove()}else jsonRet.STATUS,$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})}else oOptions.callback=function(){$.iqMyPortal.hide(oOptions)},$.iqMyPortal.login(oOptions);return!1},login:function(oOptions){var mlsid=oOptions.mlsid||"",mlnumber=oOptions.mlnumber||"",propertytype=oOptions.propertytype||"",publicid=oOptions.publicid||"",agentteamid=oOptions.agentteamid||"",callback=oOptions.callback||null,layout="";$.iqMyPortal.login_callback=callback,$.iqMyPortal.register_callback=callback,$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"login_form",mlsid:mlsid,mlnumber:mlnumber,propertytype:propertytype,publicid:publicid,agentteamid:agentteamid},success:function(jsonRet){layout=0===jsonRet.STATUS?jsonRet.LAYOUT:jsonRet.CONTENT,0===$("#iq_myportal_login_dialog").length&&($("body").append('<div id="iq_myportal_login_dialog" "><div class="container" style="min-width:320px;"><div id="iq_lead_container">'+layout+"</div></div></div>"),$("#iq_myportal_login_form").iqForm_Rules()),$("#iq_myportal_login_dialog").dialog({closeOnEscape:!0,title:"My Portal",width:"auto",resizable:!1,autoOpen:!0,modal:!0,zIndex:900,close:function(){$(this).remove()}}),1===$("#iq_listing_dialog").length&&($("#iq_listing_dialog").css({"z-index":"12000"}),$("#iq_myportal_login_dialog").css({"border-top":"1px solid #cccccc;"}))},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},login_process:function(){return!!$("#iq_myportal_login_form").iqForm_Check()&&($.iqUtils.uiProcessing("open"),setTimeout(function(){var data=$("#iq_myportal_login_form").iqSerializeFormToStruct(),$no_refresh="";data.method="login",data.ReturnFormat="json",$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:if($.iqUtils.cookie("PW_ISAUTHED",!0,365),$.iqUtils.cookie("FIRSTNAME",jsonRet.FIRSTNAME,365),$.iqUtils.cookie("LASTNAME",jsonRet.LASTNAME,365),$.iqUtils.cookie("EMAILADDRESS",jsonRet.EMAILADDRESS,365),$.iqUtils.cookie("CONTACTID",jsonRet.CONTACTID,365),$.iqUtils.cookie("TRACKINGID",jsonRet.TRACKINGID,365),"T"===$("#iq_myportal_login_form-savelogin").iqFieldValue()?($.iqUtils.cookie("USERID",jsonRet.USERID,365),$.iqUtils.cookie("PASSWORD",jsonRet.PASSWORD,365),$.iqUtils.cookie("SAVELOGIN","T",365)):($.iqUtils.cookie("USERID",jsonRet.USERID),$.iqUtils.cookie("PASSWORD",jsonRet.PASSWORD)),"T"===$("#iq_myportal_login_form-autologin").iqFieldValue()?$.iqUtils.cookie("AUTOLOGIN","T",365):$.iqUtils.cookie("AUTOLOGIN","F",-1),$("#iq_myportal_login_dialog").dialog("close"),1===$("#iq_myportal_login_page").length&&$.iqMyPortal.private(),$.iqMyPortal.login_callback){var callback=$.iqMyPortal.login_callback;$.iqMyPortal.login_callback=null,callback.call(this,jsonRet)}break;case 1:$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.CONTENT);break;case 2:$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("Invalid User ID",jsonRet.MESSAGE,5e3),$("#iq_message_dialog").css({"z-index":"13000"}),$no_refresh=!0;break;case 3:$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("Activation Pending",jsonRet.MESSAGE,5e3),$("#iq_message_dialog").css({"z-index":"13000"})}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},500),!1)},save_profile:function(){if($("#iq_myportal_profile_form").iqForm_Check(),$("#iq_myportal_profile_form").iqForm_Check()){$.iqUtils.uiProcessing("open");var oData=$("#iq_myportal_profile_form").iqSerializeFormToStruct();oData.method="doprofileupdate",$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?$.iqUtils.uiMessage("",jsonRet.MESSAGE):$.iqUtils.uiMessage("",jsonRet.CONTENT)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})}},private:function(){self.location="/myportal"},LogoutAndRedirect:function(sURL){return $.iqUtils.cookie("PW_ISAUTHED",!1),$.iqUtils.cookie("AUTOLOGIN","F"),self.location=sURL,!0},passwordreminder:function(){$.iqUtils.uiProcessing("open");var oDialog=$("#iq_myportal_passwordreminder_dialog"),layout="";return $.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"passwordreminder_form"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),layout=0===jsonRet.STATUS?jsonRet.LAYOUT:jsonRet.CONTENT,0===oDialog.length&&($("body").append('<div id="iq_myportal_passwordreminder_dialog"><div class="container" style="min-width:320px; max-width:480px;"><div id="iq_myportal_passwordreminder_container">'+layout+"</div></div></div>"),$("#iq_myportal_passwordreminder_form").iqForm_Rules()),$("#iq_myportal_passwordreminder_dialog").dialog({closeOnEscape:!0,title:"Password Reminder",width:"auto",resizable:!1,autoOpen:!0,modal:!0,close:function(){$(this).remove()}})},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},passwordreminder_process:function(){return!!$("#iq_myportal_passwordreminder_form").iqForm_Check()&&($.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"passwordreminder",UserID:$("#iq_myportal_passwordreminder_form-userid").iqFieldValue()},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#iq_myportal_passwordreminder_dialog").dialog("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3)):2===jsonRet.STATUS?$.iqUtils.uiMessage("",jsonRet.MESSAGE):$.iqUtils.uiMessage("",jsonRet.CONTENT)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1)},delete_history:function(contactid,propertytype,ml_number,mlsid,referenceid){return confirm("Are you sure you wish to delete this property?")&&($.iqUtils.uiProcessing("open"),setTimeout(function(){$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"doDeleteHistory",contactid:contactid,ml_number:ml_number,mlsid:mlsid,propertytype:propertytype,referenceid:referenceid},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiMessage("","Delete Complete.",2e3),self.location=self.location):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},500)),!1},clear_history:function(contactid,referenceid){return confirm("Are you sure you wish to delete all properties?")&&($.iqUtils.uiProcessing("open"),setTimeout(function(){$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"doClearHistory",contactid:contactid,referenceid:referenceid},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiMessage("","Delete Complete.",3e3),self.location=self.location):$.iqUtils.uiMessage("",jsonRet.MESSAGE)},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",$.iqParseError(httpRet.responseText))}})},500)),!1},editpropertystory:function(obj){$("#iq_propertystory_dialog").bsModal({backdrop:!0,title:"Property Story For MLS# "+$(obj).attr("data-ml_number"),body:'<div class="row"><div id="iq_propertystory_dialog" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h5 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading Property Story Dialog</h5></div></div>'}),$.ajax({url:"/components/listings_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"property_story",propertystory_html:$("[data-propertystory-html="+$(obj).attr("data-ml_number")+"]").html(),mlsid:$(obj).attr("data-mlsid"),propertytype:$(obj).attr("data-propertytype"),ml_number:$(obj).attr("data-ml_number")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_propertystory_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_propertystory_dialog .modal-footer").css({display:"none"}),$("#iq_property_story_form-propertystory").iqTinyMCE({height:"400"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE)}})},savepropertystory:function(obj){$.iqUtils.uiProcessing("open"),$("[data-propertystory-html="+$(obj).attr("data-propertystory")+"]").html($("#iq_property_story_form-propertystory").iqFieldValue()),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"propertystory",propertystory:$("[data-propertystory-html="+$(obj).attr("data-ml_number")+"]").html(),propertystorystatus:"P",mlsid:$(obj).attr("data-mlsid"),ml_number:$(obj).attr("data-ml_number"),propertytype:$(obj).attr("data-propertytype")},success:function(jsonRet){0===jsonRet.STATUS?($("button[data-ml_number="+$(obj).attr("data-ml_number")+"]").html("Update Property Story"),$("#iq_propertystory_dialog").modal("hide"),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"propertystory_notification",mlsid:$(obj).attr("data-mlsid"),ml_number:$(obj).attr("data-ml_number"),propertytype:$(obj).attr("data-propertytype"),sellerid:$("#iq_seller_properties").attr("data-sellerid")},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("button[data-ml_number="+$(obj).attr("data-ml_number")+"]").html("Update Property Story"),$("#iq_propertystory_dialog").modal("hide"),$("[data-propertystorygrid-status="+$(obj).attr("data-ml_number")+"]").html("Pending")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))}})):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))}})},propertystorydeclined:function(obj){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"propertystory_declined",sellerid:obj.attr("data-sellerid"),mlsid:$(obj).attr("data-mlsid"),ml_number:$(obj).attr("data-ml_number"),propertytype:$(obj).attr("data-propertytype"),reason:$("#iq_propertystory_decline-reason").iqFieldValue()},success:function(jsonRet){0===jsonRet.STATUS?$.iqUtils.uiProcessing("close"):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE))}})},getTransactionDocuments:function(transactionid,contactid){$("#iq_transactiondocuments_dialog").bsModal({backdrop:!0,title:"Transaction Documents",maxwidth:"600",body:$.iqEditor.BuildLoadingDialogHtml("Loading")}),$.ajax({url:"/components/myportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",transactionid:transactionid,contactid:contactid,Method:"transactionDocuments"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_transactiondocuments_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_transactiondocuments_dialog .modal-footer").css({display:"none"}),$("#iq_transactiondocuments_dialog .modal-body").css({padding:"0"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_transactiondocuments_dialog .modal-bod").html(httpRet.CONTENT):$("#iq_transactiondocuments_dialog .modal-bod").html(httpRet.responseText)}})},downloadTransactionDocument:function(transactionid,documentid,displayname){window.frames.utilframe.location="/components/myportal.cfc?method=GetTransactionDocument&TransactionID="+transactionid+"&DocumentID="+documentid+"&DisplayName="+displayname}},$.fn.extend({iqMyPortalMultiFieldAutocomplete:function(options){var defaults={mlsid:"",ml_number:"",propertytype:"residential",state:"",county:"",area:"",subarea:"",city:"",zipcode:"",callback:"",fields:"state,county,city,zip_code,area,subarea"},oSettings=$.extend(defaults,options);this.each(function(){var oForm=$(this),oMultiFieldAutocomplete=$('input[id="multifield_autocomplete"]',oForm),sInitialValue=$(oMultiFieldAutocomplete).iqFieldValue(),sFormID=$(oForm).attr("id");$(oForm).submit(function(e){e.preventDefault()}),$(oMultiFieldAutocomplete).click(function(){$(this).val("")}),$(oMultiFieldAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)});var oState=$('input[id="'+sFormID+'-state"]',oForm),oCounty=$('input[id="'+sFormID+'-county"]',oForm),oArea=$('input[id="'+sFormID+'-area"]',oForm),oSubArea=$('input[id="'+sFormID+'-subarea"]',oForm),oCity=$('input[id="'+sFormID+'-city"]',oForm),oZipCode=$('input[id="'+sFormID+'-zip_code"]',oForm);$("button",oForm).click(function(e){e.preventDefault()}),$(oMultiFieldAutocomplete).autocomplete({delay:500,appendTo:oForm,source:function(request,response){$(oMultiFieldAutocomplete).addClass("st-loading"),$.ajax({url:"/components/lookups.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getLookup_MultiField",Fields:oSettings.fields,mlsid:oSettings.mlsid,LookupValue:$(oMultiFieldAutocomplete).iqFieldValue()},success:function(jsonRet){var arrsuggestions=[],slabel="";if($(oMultiFieldAutocomplete).removeClass("st-loading"),0===jsonRet.STATUS){var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY),objVals="";if(Array(),jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++){var description=$.iqUtils.fCase(rs[i].description);switch(rs[i].lookupname.toLowerCase()){case"zip_code":slabel="Zip Code";break;case"ml_number":slabel="MLS#";break;default:slabel=rs[i].lookupname}objVals={searchby:rs[i].lookupname,label:slabel+": "+description,value:rs[i].description,mlsid:rs[i].mlsid},arrsuggestions.push(objVals)}else objVals={searchby:"",label:"NO RECORDS FOUND",value:"",description:""},arrsuggestions[0]=objVals}else $.iqUtils.uiMessage("","Status: "+jsonRet.STATUS+" "+jsonRet.DETAIL+" "+jsonRet.MESSAGE);response(arrsuggestions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet.responseText)}})},select:function(e,ui){$(oState).iqFieldValue(""),$(oCounty).iqFieldValue(""),$(oCity).iqFieldValue(""),$(oArea).iqFieldValue(""),$(oSubArea).iqFieldValue(""),$(oZipCode).iqFieldValue(""),""!==ui.item.value&&("state"===ui.item.searchby.toLowerCase()&&$(oState).iqFieldValue(ui.item.value.toLowerCase()),"county"===ui.item.searchby.toLowerCase()&&$(oCounty).iqFieldValue(ui.item.value.toLowerCase()),"city"===ui.item.searchby.toLowerCase()&&$(oCity).iqFieldValue(ui.item.value.toLowerCase()),"area"===ui.item.searchby.toLowerCase()&&$(oArea).iqFieldValue(ui.item.value.toLowerCase()),"subarea"===ui.item.searchby.toLowerCase()&&$(oSubArea).iqFieldValue(ui.item.value.toLowerCase()),"zip_code"===ui.item.searchby.toLowerCase()&&$(oZipCode).iqFieldValue(ui.item.value.toLowerCase()),"zip_code"===ui.item.searchby.toLowerCase()&&(ui.item.searchby="Zip Code"),ui.item.value=ui.item.searchby+": "+ui.item.value,$(oMultiFieldAutocomplete).iqFieldValue(ui.item.value),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[]))}},{autofill:!0})})}})}(jQuery);
//# sourceMappingURL=myportal.min.js.map
;
/* file: ../assets/js/min/nearby.min.js */
!function($){"use strict";$(document).ready(function(){if(0===$("#iq_nearby").length)return!1;navigator.geolocation.getCurrentPosition($.iqNearby.foundLocation,$.iqNearby.noLocation)}),$.iqNearby={foundLocation:function(position){var _data={searchnearby:"t",lat:position.coords.latitude,lon:position.coords.longitude},_mobilephone=$("#iq_nearby").attr("iq-mobilephone")||"",_publicid=$("#iq_nearby").attr("iq-publicid")||"";$.iqUtils.cookie("listings_data",!0),$.iqUtils.sessionStorage("listings_data",_data),""!==_mobilephone&&$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"PostLead",FirstName:"Nearby",LastName:"Search",PhoneNumber:_mobilephone,EmailAddress:"",Lat:position.coords.latitude,Lon:position.coords.longitude,MobilePhone:_mobilephone,SourceName:"SMS Nearby",PublicID:_publicid,trackingid:$.iqUtils.cookie("trackingid"),Routing_Status:"N"},complete:function(){self.location="/listings/searchby_map"}})},noLocation:function(error){if($("#iq_nearby").html("Your current location could not be obtained. Please check your phones location settings try again later."),"https:"===window.location.protocol)switch(error.code){case error.PERMISSION_DENIED:$("#iq_nearby").html("Your current location could not be obtained because your browser has denied the request for location. Please update your phones location settings and try again later.");break;case error.POSITION_UNAVAILABLE:$("#iq_nearby").html("Your current location could not be obtained because location information is unavailable. Please try again later.");break;case error.TIMEOUT:$("#iq_nearby").html("Your current location could not be obtained because the request to get your location timed out. We will attempt to get your location again in 5 Seconds."),setTimeout(function(){self.location=self.location},5e3);break;case error.UNKNOWN_ERROR:$("#iq_nearby").html("Your current location could not be because of an unknown error. Please try again later.")}}}}(jQuery);
//# sourceMappingURL=nearby.min.js.map
;
/* file: ../assets/js/min/office.min.js */
!function($){"use strict";$(document).ready(function(){1===$("#iq-office").length&&$.iqOffice.init_listings_paging()}),$.iqListings_Page=function(ppage){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",publicid_list:$("#iq-listings_wrapper").attr("data-publicid_list"),officeid:$(".iq-office-listings").data("officeid"),startpage:ppage,return_listings:"f",layout:"agent_grid",Method:"doCriteriaSearch"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),jsonRet.TOTALROWCOUNT>0&&($(".iq-office-listings").show(),$("#office_listings").html(jsonRet.LAYOUT))):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},$.iqListings_Page=function(ppage){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",publicid_list:$("#iq-listings_wrapper").attr("data-publicid_list"),officeid:$(".iq-office-listings").data("officeid"),startpage:ppage,return_listings:"f",layout:"agent_grid",Method:"doCriteriaSearch"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),jsonRet.TOTALROWCOUNT>0&&($(".iq-office-listings").show(),$("#office_listings").html(jsonRet.LAYOUT))):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},$.iqOffice={init_listings_paging:function(){$(".pagination a").on("click",function(e){e.preventDefault(),$(".pagination").find(".active").removeClass("active"),$(this).parent().addClass("active"),$("#office_listings").attr("data-startpage",$(this).attr("data-startpage")),$.iqOffice.get_listings(),$("html,body").animate({scrollTop:$(".nav-tabs").offset().top},"slow")})},listings_paging:function(){$.ajax({url:"/components/office_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",totalrowcount:$("#office_listings").attr("data-totalrowcount"),pageurl:$("#iq_office_listings_paging").attr("data-url"),startpage:$("#office_listings").attr("data-startpage"),Method:"paging"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_office_listings_paging").html(jsonRet.LAYOUT),$.iqOffice.init_listings_paging()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},agents_init_isvisible:function(){$(".iq-agents-card-sm-wrapper").iqVisibleCallback({threshold:150,callback:function(pElement){$.iqOffice.agents_isvisible(pElement)}})},agents_isvisible:function(pElement){var currAgent=$(pElement).data("rownumber")||1,lastAgent=$(".iq-agents-card-sm-wrapper").last().data("rownumber")||0,totalRowCount=parseInt($(".iq-office-agents").attr("data-totalrowcount"));if($("[data-publicid]").length<totalRowCount&&currAgent===lastAgent&&totalRowCount>24){var startPage=parseInt($(".iq-office-agents").attr("data-startpage"))+parseInt(1);$(".iq-office-agents").attr("data-startpage",startPage),$.iqOffice.get_agents()}},get_agents:function(){var arrPublicID=[];$("[data-publicid]").each(function(){arrPublicID.push($(this).data("publicid"))}),$(".iq-office-agents").append('<div id="iq_results_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-vs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading More Agents</h1></div>'),$.ajax({url:"/components/agents.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",officeid:$(".iq-office-agents").data("officeid"),orderdirection:"asc",maxrows:"24",startpage:$(".iq-office-agents").attr("data-startpage"),randomorder:"true",viewed_publicid_list:arrPublicID.join(","),layout:"card_small",Method:"docriteriasearch"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_results_content_loading").remove(),$(".iq-office-agents").append(jsonRet.LAYOUT),$.iqOffice.agents_init_isvisible()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},get_listings:function(){$(".iq-office-listings").html('<div id="iq_results_content_loading" class="col-lg-12 col-md-12 col-sm-12 col-vs-12 text-center"><h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Loading More Listings</h1></div>'),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",officeid:$(".iq-office-listings").data("officeid"),orderby:"list_price",orderdirection:"DESC",maxrows:"25",startpage:$(".iq-office-listings").attr("data-startpage"),layout:"agent_grid",Method:"docriteriasearch",impression_from:"Office Listings"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_results_content_loading").remove(),$.iqOffice.listings_paging(),$(".iq-office-listings").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},get_active_listings:function(){$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",publicid_list:$("#iq-listings_wrapper").attr("data-publicid_list"),startpage:$("#iq-listings_wrapper").attr("data-startpage"),return_listings:"f",Method:"docriteriasearch"},success:function(jsonRet){0===jsonRet.STATUS?jsonRet.TOTALROWCOUNT>0&&($(".iq-office-listings").show(),$("#iq-listings_wrapper").attr("data-totalrowcount",jsonRet.TOTALROWCOUNT),$("#iq_active_listings").html(jsonRet.TOTALROWCOUNT)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},get_sold_listings:function(){$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",publicid_list:$("#iq-listings_sold_wrapper").attr("data-publicid_list"),startpage:$("#iq-listings_sold_wrapper").attr("data-startpage"),statuscode:"sold",return_query:!1,maxrows:"25",updatedays:"365",ShowDeleted:"T",impression_from:"Office Listings",Method:"docriteriasearch"},success:function(jsonRet){0===jsonRet.STATUS?jsonRet.TOTALROWCOUNT>0&&($("#iq-listings_sold_wrapper").attr("data-totalrowcount",jsonRet.TOTALROWCOUNT),$("#iq_sold_listings").html(jsonRet.TOTALROWCOUNT)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},get_recentsold_listings:function(){$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",publicid_list:$("#iq-listings_recentsold_wrapper").attr("data-publicid_list"),startpage:$("#iq-listings_recentsold_wrapper").attr("data-startpage"),listingsellingflag:"l",return_listings:"f",Method:"listings_transactions"},success:function(jsonRet){0===jsonRet.STATUS?jsonRet.TOTALROWCOUNT>0&&($("#iq-listings_recentsold_wrapper").attr("data-totalrowcount",jsonRet.TOTALROWCOUNT),$("#iq_recentsold_listings").html(jsonRet.TOTALROWCOUNT)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},get_recentbuyersales_listings:function(){$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",publicid_list:$("#iq-listings_recentbuyersales_wrapper").attr("data-publicid_list"),startpage:$("#iq-listings_recentbuyersales_wrapper").attr("data-startpage"),listingsellingflag:"s",return_listings:"f",Method:"listings_transactions"},success:function(jsonRet){0===jsonRet.STATUS?jsonRet.TOTALROWCOUNT>0&&($("#iq-listings_recentbuyersales_wrapper").attr("data-totalrowcount",jsonRet.TOTALROWCOUNT),$("#iq_recentbuyersales_listings").html(jsonRet.TOTALROWCOUNT)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}}}(jQuery);
//# sourceMappingURL=office.min.js.map
;
/* file: ../assets/js/min/offices.min.js */
!function($){"use strict";$(document).ready(function(){$("#iq_offices_search_form").iqOfficesAutocomplete({callback:$.iqOffices.submit_search})}),$.iqOffices={submit_search:function(){var lookupname=$("#iq_offices_search_form-lookupname").iqFieldValue(),lookupvalue=$("#iq_offices_search_form-lookupvalue").iqFieldValue(),streetaddress="",state="",city="",zipcode="";if(""===lookupvalue)return $("#ui-id-1").show(),void $("#multifield_autocomplete").tooltip({title:"You must make a selection.",trigger:"manual"}).tooltip("show");switch($.iqUtils.uiProcessing("open"),lookupname){case"address":streetaddress=lookupvalue;break;case"state":state=lookupvalue;break;case"city":city=lookupvalue;break;case"zip":zipcode=lookupvalue}$.ajax({url:"/components/offices.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",state:state,city:city,zipcode:zipcode,streetaddress:streetaddress,layout:$("#iq_offices_layout").data("layout"),Method:"docriteriasearch"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#multifield_autocomplete").tooltip("hide"),$("#iq_offices_layout").html(jsonRet.LAYOUT),$.iqOffices.paging(jsonRet.TOTALROWCOUNT,"/offices/"+lookupname+"_"+lookupvalue+"/")):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},paging:function(ptotalrowcount,purl){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/offices_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",totalrowcount:ptotalrowcount,pageurl:purl,Method:"paging"},success:function(jsonRet){0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$(".iq-offices-paging").html(jsonRet.LAYOUT)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})}},$.fn.extend({iqOfficesAutocomplete:function(options){var defaults={lookupname:"",lookupvalue:"",callback:"",fields:"officeaddress,officestate,officecity,officezip"},oSettings=$.extend(defaults,options);this.each(function(){var oForm=$(this),oOfficesAutocomplete=$('input[id="multifield_autocomplete"]',oForm),sInitialValue=$(oOfficesAutocomplete).iqFieldValue(),sFormID=$(oForm).attr("id");$(oForm).submit(function(e){e.preventDefault()}),$(oOfficesAutocomplete).click(function(){$(this).val("")}),$(oOfficesAutocomplete).blur(function(){""===$(this).val()&&$(this).val(sInitialValue)}),$(oForm).append('<input type="hidden" name="lookupname" id="'+sFormID+'-lookupname" value="'+oSettings.lookupname+'">'),$(oForm).append('<input type="hidden" name="lookupvalue" id="'+sFormID+'-lookupvalue" value="'+oSettings.lookupvalue+'">');var oLookupName=$('input[id="'+sFormID+'-lookupname"]',oForm),oLookupValue=$('input[id="'+sFormID+'-lookupvalue"]',oForm);$("button",oForm).click(function(e){e.preventDefault()}),$(oOfficesAutocomplete).autocomplete({delay:500,appendTo:oForm,source:function(request,response){$(oOfficesAutocomplete).addClass("st-loading"),$.ajax({url:"/components/offices.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"getLookup_autocomplete",Fields:oSettings.fields,Lookup_Value:$(oOfficesAutocomplete).iqFieldValue()},success:function(jsonRet){var arrsuggestions=[];if($(oOfficesAutocomplete).removeClass("st-loading"),0===jsonRet.STATUS){var rs=$.iqUtils.JsonQueryToRS(jsonRet.QUERY),slabel="",objVals="";if(jsonRet.TOTALROWCOUNT>0)for(var i=0;i<jsonRet.TOTALROWCOUNT;i++){switch(rs[i].lookupname.toLowerCase()){case"address":slabel="Address : "+rs[i].lookupvalue;break;case"state":slabel="State : "+rs[i].lookupvalue;break;case"city":slabel="City : "+rs[i].lookupvalue;break;case"zip":slabel="Zip Code : "+rs[i].lookupvalue}objVals={label:slabel,lookupname:rs[i].lookupname,lookupvalue:rs[i].lookupvalue},arrsuggestions.push(objVals)}else objVals={label:"NO RECORDS FOUND",lookupname:"",lookupvalue:""},arrsuggestions[0]=objVals}else $.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT));response(arrsuggestions)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.DETAIL):""!==httpRet.responseText&&$.iqUtils.uiMessage("",httpRet)}})},select:function(e,ui){$(oLookupName).iqFieldValue(""),$(oLookupValue).iqFieldValue(""),""!==ui.item.value&&($(oLookupName).iqFieldValue(ui.item.lookupname.toLowerCase()),$(oLookupValue).iqFieldValue(ui.item.lookupvalue.toLowerCase()),"function"==typeof oSettings.callback&&oSettings.callback.apply(this,[]))}},{autofill:!0})})}})}(jQuery);
//# sourceMappingURL=offices.min.js.map
;
/* file: ../assets/js/min/pages.min.js */
!function($){"use strict";$(document).ready(function(){$("#iq_search_listings_form").length&&$.iqPages.init_searchform(),0!==$("[data-rssfeed]").length&&$.iqPages.GetIQ_RssFeed(),0!==$("[data-whatsaround]").length&&$.iqPages.GetBusinesses(),$("#iq_area_googlemap").length&&$.iqPages.AreaMap(),0!==$("#iq_showcase_carousel").length&&$.iqPages.init_showcase_carousel(),0!==$("#iq_listings_carousel").length&&$.iqPages.init_listings_carousel(),$("#iq_areas_template_2").length&&($.iqListings.init_isvisible(),$.iqUtils.history.init(function(args){$.iqListings.controller(args),$(".iq-listings-list-compare-input").hide()}),$.iqPages.init_paging(),""!==$(".iq-listings-paging").html()&&$("#iq_listings_sort-orderby").attr("disabled",!1),$("#-lucee-debug").hide()),$("#iq_listings_template_1").length&&$("#iq_listings").on("scroll",function(){Math.round($(this)[0].scrollHeight-$(this).scrollTop())===$(this).outerHeight()&&$(".iq_listings_property").length<$(this).attr("data-totalrowcount")&&($(this).attr("data-startpage",parseInt($(this).attr("data-startpage"))+parseInt(1)),$.iqPages.get_listings_centralized($(this).attr("data-startpage")))}),$("#iq_listings_template_2").length&&($.iqPages.init_paging(),""!==$(".iq-listings-paging").html()&&$("#iq_listings_sort-orderby").attr("disabled",!1),$("#-lucee-debug").hide()),$.iqUtils.cookie("editorisauthed")||0!==$("[data-leadsource-sourcename]").length&&$.iqPages.RenderLeadForms()}),$.iqPages={init_searchform:function(){$('[data-dropdown="magic"]').each(function(){var oDropDown=$(this).attr("id"),field_initialized=$("#"+oDropDown).attr("initialized");-1===oDropDown.indexOf("display")&&void 0===field_initialized&&($("#"+oDropDown).iqFieldFormat({min:$("#"+oDropDown).attr("data-min"),max:$("#"+oDropDown).attr("data-max"),displayMin:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayMax:"{{val}}",format:$("#"+oDropDown).attr("data-format")}),$("#"+oDropDown).iqTextDropdown(),void 0!==$("#"+oDropDown).attr("data-min")&&$("#"+oDropDown).iqFieldValue()===$("#"+oDropDown).attr("data-min")&&$("#"+oDropDown+"-display").iqFieldValue("No Min"),void 0!==$("#"+oDropDown).attr("data-max")&&$("#"+oDropDown).iqFieldValue()===$("#"+oDropDown).attr("data-max")&&$("#"+oDropDown+"-display").iqFieldValue("No Max"),$("#"+oDropDown).change(function(){$("#iq_search_listings_form-"+$("#"+oDropDown).attr("data-field")).iqFieldValue($("#"+oDropDown).iqFieldValue())}),oDropDown.indexOf("price")&&$("#"+oDropDown).on("input",function(e){e.preventDefault(),$(this).val().toString().length>=5&&$("#iq_search_listings_form-"+$("#"+oDropDown).attr("data-field")).iqFieldValue($("#"+oDropDown).iqFieldValue())}),$("#"+oDropDown).attr("initialized",!0))})},RenderLeadForms:function(){$("[data-leadsource-sourcename]").each(function(){var leadform=this;$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:$(leadform).data("leadsource-layout"),sourcename:$(leadform).data("leadsource-sourcename"),publicid:$(leadform).data("leadsource-publicid"),agentteamid:$(leadform).data("leadsource-agentteamid"),requiredonly:$(leadform).data("leadsource-showonlyrequired")},success:function(jsonRet){0===jsonRet.STATUS?($(leadform).html(jsonRet.LAYOUT),$(leadform).iqForm_Rules(jsonRet.FORMRULES)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})})},GetIQ_RssFeed:function(){$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"website_page_template_rssfeed_layout",rssfeed:$('[data-section="iq_rssfeed"]').attr("data-rssfeed")},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_rssfeed_layout").html(jsonRet.LAYOUT):$("[data-editable-type=iq_rssfeed]").html("")}})},GetBusinesses:function(term){1===$("#iq_yelp_grid").length&&$("#iq_yelp_grid").html('<div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"><h1 class="text-center"><i class="fa fa-refresh fa-spin"></i> Processing</h1></div></div>');var obj=$("[data-whatsaround]");$.ajax({url:"/components/website_layout.cfc",type:"POST",dataType:"json",async:!0,data:{method:"website_page_template_yelp_layout",yelpdata:$(obj).attr("data-yelp"),term:term},success:function(jsonRet){0===jsonRet.STATUS&&0!==jsonRet.TOTALBUSINESSES?($("#iq_yelp_layout").html(jsonRet.LAYOUT),0!==$("#iq_yelp_map").length&&$.iqPages.YelpMap()):$("#iq_yelp_grid").html('<div class="col-md-12 text-center"><h4>No Information Available</h4>')}})},YelpMap:function(){if(!$("#iq_yelp_map").data("googlemap_init")){var ilat=$("#iq_yelp_map").data("lat"),ilon=$("#iq_yelp_map").data("lon"),arrmarkers=[],i=0;$("[data-yelp]").each(function(){arrmarkers[i]=new Array(4),arrmarkers[i][0]=$(this).data("lat"),arrmarkers[i][1]=$(this).data("lon"),arrmarkers[i][2]=$(this).data("title"),arrmarkers[i][3]=$(this).data("label"),i+=1}),$("#iq_yelp_map").iqGoogleMaps({arrmarkers:arrmarkers,Lat:ilat,Lon:ilon,ZoomLevel:12,mapTypeId:"roadmap"}),$("#iq_yelp_map").data("googlemap_init",!0),$.iqUtils.logFeature("sites","google_maps_yelp")}},AreaMap:function(){var mapData=JSON.parse($("#iq_area_map").attr("data-iq-area-map-details")),areaMarker=[];"y"===mapData.showmap&&(areaMarker[0]=new Array(4),areaMarker[0][0]=mapData.lat,areaMarker[0][1]=mapData.lon,areaMarker[0][2]="",areaMarker[0][3]="",$("#iq_area_googlemap").iqGoogleMaps({arrmarkers:areaMarker,Lat:parseFloat(mapData.lat),Lon:parseFloat(mapData.lon),ZoomLevel:parseInt(mapData.zoomlevel),mapTypeId:"roadmap"}),$.iqUtils.logFeature("sites","google_maps_area"))},init_showcase_carousel:function(){var showcase_active_slide=1,showcase_get_background=1,num_slides=$("#iq_showcase_carousel").data("showcase-carousel-slides");0===$(".st-blank").length&&$("body").css("overflow","hidden"),$("#iq_showcase_carousel").carousel({interval:1e4}),$("#iq_showcase_carousel").on("slide.bs.carousel",function(e){"left"===e.direction?(showcase_active_slide=parseInt(showcase_active_slide)+1,showcase_get_background=parseInt(showcase_active_slide)+1,showcase_active_slide>num_slides&&(showcase_active_slide=1,showcase_get_background=2)):(showcase_active_slide=parseInt(showcase_active_slide)-1,showcase_get_background=parseInt(showcase_active_slide)-1,0===showcase_active_slide&&(showcase_active_slide=num_slides,showcase_get_background=num_slides-1)),$("[data-current-slide]").html(showcase_active_slide);var obj=$("#"+e.relatedTarget.id);"f"===$(obj).attr("data-showcase-image-loaded")&&($(obj).css({"background-image":"url("+$(obj).attr("data-showcase-carousel-image-url")+")"}),$(obj).attr("data-showcase-image-loaded","t"))})},init_listings_carousel:function(){$("#iq_listings_carousel").on("slide.bs.carousel",function(e){var obj=$("#"+e.relatedTarget.id);$(obj).find("[data-listings-carousel-image-url]").each(function(){"f"===$(this).attr("data-listing-image-loaded")&&($(this).css({"background-image":"url("+$(this).attr("data-listings-carousel-image-url")+")"}),$(this).attr("data-listing-image-loaded","t"))})})},init_paging:function(){$("#iq_areas_template_2 .pagination a").on("click",function(e){e.preventDefault(),$(".pagination").find(".active").removeClass("active"),$(this).parent().addClass("active"),$("#iq_listings_sort-startpage").iqFieldValue($(this).attr("data-startpage")),$.iqPages.get_listings($(this).attr("data-startpage"),"")}),$("#iq_listings_template_2 .pagination a").on("click",function(e){e.preventDefault(),$(".pagination").attr("data-startpage",$(this).data("startpage")),$(".pagination").find(".active").removeClass("active"),$(this).parent().addClass("active"),$("#iq_listings_sort-startpage").iqFieldValue($(this).attr("data-startpage")),$.iqPages.get_listings_centralized($(this).attr("data-startpage"),"")})},paging:function(startPage,maxRows,totalRowCount){$.ajax({url:"/components/listings_centralized_layout.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"paging",startpage:startPage,maxrows:maxRows,totalrowcount:totalRowCount},success:function(jsonRet){0===jsonRet.status?($(".iq-listings-paging").each(function(){$(this).html(jsonRet.layout)}),$.iqPages.init_paging()):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.message+"<br>"+jsonRet.detail+"<br>"+encodeURI(jsonRet.content)))}})},get_listings:function(startpage){$.iqUtils.uiProcessing("open"),void 0===startpage&&(startpage=$("#iq_listings_sort-startpage").iqFieldValue());var areas_criteria=$.parseJSON($('[data-section="iq_areas"]').attr("data-areas-criteria").toLowerCase()),publicid=areas_criteria.publicid,state=areas_criteria.state,county=areas_criteria.county,city=areas_criteria.city,zip_code=areas_criteria.zip_code,area=areas_criteria.area,communityname=areas_criteria.communityname,pricemin=areas_criteria.pricemin,pricemax=areas_criteria.pricemax,newdays=areas_criteria.newdays,reduceddays=areas_criteria.reduceddays,virtualtourid=areas_criteria.virtualtourid,videotour=areas_criteria.videotour,openhouse=areas_criteria.openhouse,previews=areas_criteria.previews,featured=areas_criteria.featured,images=areas_criteria.images,golfcourse=areas_criteria.golfcourse,waterfront=areas_criteria.waterfront,propertyview=areas_criteria.propertyview,propertytype=areas_criteria.propertytype,arrorderby=$("#iq_listings_sort-orderby").iqFieldValue().split("|"),orderby=arrorderby[0],orderdirection=arrorderby[1],officelistingsfirst=areas_criteria.listings_officelistingsfirst,layout="grid_3col",maxrows="24";$("#iq_areas_template_2").length&&(layout=areas_criteria.layout,maxrows=areas_criteria.maxrows),$.ajax({url:"/components/listings.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"docriteriasearch_multifield",layout:layout,startpage:startpage,maxrows:maxrows,publicid:publicid,state:state,county:county,city:city,zipcode:zip_code,area:area,communityname:communityname,pricemin:pricemin,pricemax:pricemax,reduceddays:reduceddays,newdays:newdays,virtualtourid:virtualtourid,videotour:videotour,openhouse:openhouse,previews:previews,featured:featured,images:images,golfcourse:golfcourse,waterfront:waterfront,propertyview:propertyview,propertytype:propertytype,orderby:orderby,orderdirection:orderdirection,officelistingsfirst:officelistingsfirst},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($.iqUtils.uiProcessing("close"),$("#iq_areas_wrapper").html(jsonRet.LAYOUT),$("#iq_areas_template_2").length&&($.iqListings.init_isvisible(),$(".iq-listings-list-compare-input").hide())):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT)))}})},get_listings_centralized:function(startPage){$.iqUtils.uiProcessing("open");var showAllProperties="f",maxRows=20,city="",state="",zip_code="",county="",area="",communityName="",elementarySchool="",jrHighSchool="",highSchool="",propertyType="residential",listingType="resale",resale="t",shortsale="f",reo="f",statusCode="active",orderBy="list_price",orderDirection="desc",priceMin=0,priceMax=99999999,beds=0,baths=0,buildings=0,units=0,sq_foot=0,sq_foot_office=0,acreage=0,garage=0,reducedDays=0,newDays=0,images=0,carport="",style="",story="",basement="",year_built="",subType="",openHouse="",virtualTourId="",videoTour="",previews="",featured="",golfcourse="",waterfront="",propertyView="",pool="",zoning="",layout="";if(void 0===startPage&&(startPage=$("#iq_listings_sort-startpage").iqFieldValue()),$("[data-listings-criteria]").length>0){var listingsCriteria=$.parseJSON($("[data-listings-criteria]").attr("data-listings-criteria").toLowerCase());showAllProperties=listingsCriteria.showallproperties,maxRows=listingsCriteria.maxrows,city=listingsCriteria.city,state=listingsCriteria.state,zip_code=listingsCriteria.zip_code,county=listingsCriteria.county,area=listingsCriteria.area,communityName=listingsCriteria.communityname,elementarySchool=listingsCriteria.elementaryschool,jrHighSchool=listingsCriteria.jrhighschool,highSchool=listingsCriteria.highschool,propertyType=listingsCriteria.propertytype,listingType=listingsCriteria.listingtype,listingsCriteria.ml_number,listingsCriteria.streetaddress,resale=listingsCriteria.resale,shortsale=listingsCriteria.shortsale,reo=listingsCriteria.reo,statusCode=listingsCriteria.statuscode,orderBy=listingsCriteria.orderby,orderDirection=listingsCriteria.orderdirection,priceMin=listingsCriteria.pricemin,priceMax=listingsCriteria.pricemax,beds=listingsCriteria.beds,baths=listingsCriteria.baths,buildings=listingsCriteria.buildings,units=listingsCriteria.units,sq_foot=listingsCriteria.sq_foot,sq_foot_office=listingsCriteria.sq_foot_office,acreage=listingsCriteria.acreage,garage=listingsCriteria.garage,reducedDays=listingsCriteria.reduceddays,newDays=listingsCriteria.newdays,images=listingsCriteria.images,carport=listingsCriteria.carport,style=listingsCriteria.style,story=listingsCriteria.story,basement=listingsCriteria.basement,year_built=listingsCriteria.year_built,subType=listingsCriteria.subtype,openHouse=listingsCriteria.openhouse,virtualTourId=listingsCriteria.virtualtourid,videoTour=listingsCriteria.videotour,previews=listingsCriteria.previews,featured=listingsCriteria.featured,golfcourse=listingsCriteria.golfcourse,waterfront=listingsCriteria.waterfront,propertyView=listingsCriteria.propertyview,pool=listingsCriteria.pool,zoning=listingsCriteria.zoning,layout=listingsCriteria.layout}var orderBy="list_price",orderDirection="desc";if($("#iq_listings_sort-orderby").length){var arrorderby=$("#iq_listings_sort-orderby").iqFieldValue().split("|");orderBy=arrorderby[0],orderDirection=arrorderby[1]}$.ajax({url:"/components/listings_centralized.cfc",type:"POST",dataType:"json",async:!0,data:{Method:"getlistings",showallproperties:showAllProperties,startpage:startPage,maxrows:maxRows,state:state,county:county,city:city,zip_code:zip_code,area:area,communityname:communityName,elementaryschool:elementarySchool,jrhighschool:jrHighSchool,highschool:highSchool,pricemin:priceMin,pricemax:priceMax,propertytype:propertyType,listingtype:listingType,resale:resale,shortsale:shortsale,reo:reo,style:style,beds:beds,baths:baths,buildings:buildings,units:units,sq_foot:sq_foot,sq_foot_office:sq_foot_office,acreage:acreage,garage:garage,story:story,basement:basement,year_built:year_built,subtype:subType,openhouse:openHouse,newdays:newDays,reduceddays:reducedDays,virtualtourid:virtualTourId,videotour:videoTour,previews:previews,featured:featured,golfcourse:golfcourse,waterfront:waterfront,propertyview:propertyView,images:images,carport:carport,pool:pool,statuscode:statusCode,zoning:zoning,layout:layout,orderby:orderBy,orderdirection:orderDirection},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.status?($.iqPages.paging(jsonRet.startPage,jsonRet.maxRows,jsonRet.totalRowCount),$('[data-section="iq_listings_centralized"]').attr("data-listings-criteria",jsonRet.searchCriteria),$('[data-section="iq_listings_centralized"]').attr("data-totalrowcount",jsonRet.totalRowCount),$("#iq_listings_template_1").length&&$("#iq_listings_wrapper").append(jsonRet.layout),$("#iq_listings_template_2").length&&$("#iq_listings_wrapper").html(jsonRet.layout)):($.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.message+"<br>"+jsonRet.message+"<br>"+encodeURI(jsonRet.content)))}})},submit_search:function(){var oForm="#iq_search_listings_form",listingtype=$(oForm).data("listingtype"),aSearchString=[],propertytype=$("#iq_search_listings_form-propertytype").iqFieldValue(),pricemin=parseInt($(oForm+"-pricemin-display").iqFieldValue()),pricemax=parseInt($(oForm+"-pricemax-display").iqFieldValue()),bedsmin=parseInt($(oForm+"-bedsmin-display").iqFieldValue()),bedsmax=parseInt($(oForm+"-bedsmax-display").iqFieldValue()),bathsmin=parseInt($(oForm+"-bathsmin-display").iqFieldValue()),bathsmax=parseInt($(oForm+"-bathsmax-display").iqFieldValue()),sqfootmin=parseInt($(oForm+"-sqfootmin-display").iqFieldValue()),sqfootmax=parseInt($(oForm+"-sqfootmax-display").iqFieldValue());isNaN(pricemin)&&(pricemin=0),isNaN(pricemax)&&(pricemax=99999999),isNaN(bedsmin)&&(bedsmin=0),isNaN(bedsmax)&&(bedsmax=99),isNaN(bathsmin)&&(bathsmin=0),isNaN(bathsmax)&&(bathsmax=99),isNaN(sqfootmin)&&(sqfootmin=0),isNaN(sqfootmax)&&(sqfootmax=99999),aSearchString.push("/"+listingtype),aSearchString.push("/propertytype_"+propertytype),0!==pricemin&&aSearchString.push("/pricemin_"+pricemin),99999999!==pricemax&&aSearchString.push("/pricemax_"+pricemax),"residential"===propertytype.toLowerCase()&&(0!==bedsmin&&99!==bedsmax||0===bedsmin&&99!==bedsmax?aSearchString.push("/beds_"+bedsmin+"-"+bedsmax):0!==bedsmin&&99===bedsmax&&aSearchString.push("/beds_"+bedsmin),0!==bathsmin&&99!==bathsmax||0===bathsmin&&99!==bathsmax?aSearchString.push("/baths_"+bathsmin+"-"+bathsmax):0!==bathsmin&&99===bathsmax&&aSearchString.push("/baths_"+bathsmin)),"land"!==propertytype.toLowerCase()&&(0!==sqfootmin&&99999!==sqfootmax||0===sqfootmin&&99999!==sqfootmax?aSearchString.push("/sqfoot_"+sqfootmin+"-"+sqfootmax):0!==sqfootmin&&99999===sqfootmax&&aSearchString.push("/sqfoot_"+sqfootmin)),self.location=aSearchString.join("").toLowerCase()}}}(jQuery);
//# sourceMappingURL=pages.min.js.map
;
/* file: ../assets/js/min/registration.min.js */
!function($){"use strict";$(document).ready(function(){var ppc,url=window.location.href.toString();if(url.toLowerCase().indexOf("ppc=true")>-1?($.iqUtils.cookie("ppc","true",365),ppc=$.iqUtils.localStorage("ppc"),ppc&&"false"!==ppc||($.iqUtils.localStorage("ppc","true",365),$.iqUtils.localStorage("ppc_registered","false",365)),url.toLowerCase().indexOf("sourcename=")>-1&&url.replace("?","").split("&").forEach(function(param,index){var key=param.split("=")[0],value=decodeURIComponent(param.split("=")[1]||"");"sourcename"===key.toLowerCase()&&($.iqUtils.localStorage("ppc_source",value,365),$.iqUtils.cookie("ppc_source",value,365))})):"true"==$.iqUtils.cookie("ppc")?ppc=$.iqUtils.cookie("ppc"):(ppc=$.iqUtils.localStorage("ppc"))||$.iqUtils.localStorage("ppc","false",365),!$.iqUtils.cookie("editorisauthed")&&0!==$("[data-registration-leadsource]").length&&0===$("#iq_rentals").length){var obj=$("[data-registration-leadsource]");""===$(obj).data("registration_type")&&""===$(obj).data("ppc-registration_type")||$.iqRegistration.load(obj)}}),$.iqRegistration={load:function(obj,isprivate){if(!$(obj).length||0===$(obj).length)return!1;var sitetype=""+$(obj).data("sitetype"),agentteamid=$(obj).data("agentteamid"),counter=0,registration_forced=!1,publicid="b"!==sitetype.toLowerCase()?$(obj).data("publicid"):"";$.registration_leadsource=$(obj).data("registration-leadsource");var ppc=$.iqUtils.localStorage("ppc");ppc&&"false"!==ppc?($.registration_type=$(obj).data("ppc-registration-type"),$.registration_interval=$(obj).data("ppc-registration-interval"),$.page_name="ppc_"+$(obj).data("page")):($.registration_type=$(obj).data("registration-type"),$.registration_interval=$(obj).data("registration-interval"),$.page_name=$(obj).data("page"));var registered=$.iqUtils.localStorage($.page_name+"_registered"),registered_showprivatelistings=$.iqUtils.localStorage("showprivatelistings_registered");if("true"==$.iqUtils.cookie("ppc")&&(ppc=$.iqUtils.cookie("ppc"),$.registration_type=$(obj).data("ppc-registration-type")),$.registration_type.toLowerCase().indexOf("ppc")>-1){if("true"===registered)return!1;if(!ppc||"false"===ppc)return!1}if("true"!==registered)switch($.registration_type){case"nag":case"nag-ppc":null===$.iqUtils.sessionStorage($.page_name+"_nagcounter")&&$.iqUtils.sessionStorage($.page_name+"_nagcounter","0",365),$.iqUtils.sessionStorage($.page_name+"_nagcounter")&&(counter=parseInt($.iqUtils.sessionStorage($.page_name+"_nagcounter"))+1,$.iqUtils.sessionStorage($.page_name+"_nagcounter",counter),counter>=parseInt($.registration_interval)&&(setTimeout(function(){if("listings"===$.page_name||"ppc_listings"===$.page_name||"for-sale"===$.page_name||"ppc_for-sale"===$.page_name||"listing_dialog"===$.page_name){var mlsid=$.iqUtils.sessionStorage("listings_listing_mlsid"),ml_number=$.iqUtils.sessionStorage("listings_listing_ml_number");$.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,mlsid:mlsid,mlnumber:ml_number,callback:$.iqRegistration.registered,method:"leadform_registration",backdrop:"false"})}else $.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,callback:$.iqRegistration.registered,method:"leadform_registration",backdrop:"false"})},2e3),$.iqUtils.sessionStorage($.page_name+"_nagcounter",null)));break;case"offer":case"offer-ppc":null===$.iqUtils.localStorage($.page_name+"_offercounter")&&$.iqUtils.localStorage($.page_name+"_offercounter","0",365),$.iqUtils.localStorage($.page_name+"_offercounter")&&(counter=parseInt($.iqUtils.localStorage($.page_name+"_offercounter"))+1,$.iqUtils.localStorage($.page_name+"_offercounter",counter),counter===parseInt($.registration_interval)&&setTimeout(function(){if("listings"===$.page_name||"ppc_listings"===$.page_name||"for-sale"===$.page_name||"ppc_for-sale"===$.page_name){var mlsid=$.iqUtils.sessionStorage("listings_listing_mlsid"),ml_number=$.iqUtils.sessionStorage("listings_listing_ml_number");$.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,mslid:mlsid,mlnumber:ml_number,callback:$.iqRegistration.registered,method:"leadform_registration",backdrop:"false"})}else $.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,callback:$.iqRegistration.registered,method:"leadform_registration",backdrop:"false"})},2e3));break;case"forced":case"forced-ppc":null===$.iqUtils.localStorage($.page_name+"_forcedcounter")&&$.iqUtils.localStorage($.page_name+"_forcedcounter","0",365),$.iqUtils.localStorage($.page_name+"_forcedcounter")&&(counter=parseInt($.iqUtils.localStorage($.page_name+"_forcedcounter"))+1,$.iqUtils.localStorage($.page_name+"_forcedcounter",counter,365),counter>=parseInt($.registration_interval)&&(registration_forced=!0,setTimeout(function(){if(0===$("#iqListingsContainer").length)if("listings"===$.page_name||"ppc_listings"===$.page_name||"for-sale"===$.page_name||"ppc_for-sale"===$.page_name){var mlsid=$.iqUtils.sessionStorage("listings_listing_mlsid"),ml_number=$.iqUtils.sessionStorage("listings_listing_ml_number");$.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,mlsid:mlsid,mlnumber:ml_number,callback:$.iqRegistration.registered,method:"leadform_registration",backdrop:"false"})}else $.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,callback:$.iqRegistration.registered,method:"leadform_registration",backdrop:"false"});else{var listing_mlsid=$.iqUtils.sessionStorage("listings_listing_mlsid"),listing_ml_number=$.iqUtils.sessionStorage("listings_listing_ml_number");$.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:$(obj).attr("data-agent-teamid"),mlsid:listing_mlsid,mlnumber:listing_ml_number,callback:$.iqRegistration.registered,method:"leadform_registration"})}},2e3)))}return"true"!==registered_showprivatelistings&&"t"===isprivate&&($.iqLeads.dialog({sourcename:$.registration_leadsource,publicid:publicid,agentteamid:agentteamid,callback:$.iqRegistration.registered_showprivatelistings,method:"leadform_registration"}),registration_forced=!0,$(obj).addClass("iq-blur")),registration_forced},registered:function(){switch($.iqUtils.localStorage($.page_name+"_registered",!0),$.registration_type.toLowerCase().indexOf("ppc")>-1&&$.iqUtils.localStorage("ppc_registered","true",365),$.registration_type){case"nag":case"nag-ppc":$.iqUtils.localStorage($.page_name+"_nagcounter",null);break;case"offer":case"offer-ppc":$.iqUtils.localStorage($.page_name+"_offercounter",null);break;case"forced":case"forced-ppc":$.iqUtils.localStorage($.page_name+"_forcedcounter",null),($("#iq_listings").length||$("#iqListingsContainer").length)&&$.iqListings.details_dialog($.iqUtils.sessionStorage("listings_listing_mlsid"),$.iqUtils.sessionStorage("listings_listing_listingid"));$("[data-registration-leadsource]");$("#iqListingsContainer").removeClass("iq-blur"),$("#iq_listing_dialog").removeClass("iq-blur")}$.iqUtils.sessionStorage("listings_listing_mlsid",null),$.iqUtils.sessionStorage("listings_listing_ml_number",null),$("#iq_listing").length&&$("body").removeClass("modal-open")},registered_showprivatelistings:function(){$.iqUtils.localStorage("showprivatelistings_registered",!0),$.iqUtils.localStorage($.page_name+"_registered_ppc",null);var obj=$("[data-registration-leadsource]");$(obj).removeClass("iq-blur"),$.iqListings.details_dialog($.iqUtils.sessionStorage("listings_listing_mlsid"),$.iqUtils.sessionStorage("listings_listing_listingid"))},login_process:function(){if(!$("#iq_myportal_login_form").iqForm_Check())return!1;var oForm=$("#iq_myportal_login_form");return $(oForm).parent().css({position:"relative",height:oForm.parent().height()}),$(oForm).parent().append('<div class="iq-lead-progress" style="position:absolute; top:0px; display:none;"><table cellpadding="0" cellspacing="0" width="'+oForm.parent().width()+'" height="'+oForm.parent().height()+'"><tr><td><h4 class="iq-lead-progress-text text-center"><i class="fa fa-fw fa-refresh fa-spin"></i> Logging in</h4></td></tr></table></div>'),$(oForm).hide(),$(".iq-lead-progress").fadeIn("2000"),setTimeout(function(){var data=$("#iq_myportal_login_form").iqSerializeFormToStruct();data.method="login",data.ReturnFormat="json",$.ajax({url:"/components/myportal.cfc",type:"POST",dataType:"json",async:!1,data:data,success:function(jsonRet){switch(jsonRet.STATUS){case 0:if($.iqUtils.cookie("PW_ISAUTHED",!0,365),$.iqUtils.cookie("FIRSTNAME",jsonRet.FIRSTNAME,365),$.iqUtils.cookie("LASTNAME",jsonRet.LASTNAME,365),$.iqUtils.cookie("EMAILADDRESS",jsonRet.EMAILADDRESS,365),$.iqUtils.cookie("CONTACTID",jsonRet.CONTACTID,365),$.iqUtils.cookie("TRACKINGID",jsonRet.TRACKINGID,365),$(".iq-lead-progress-text").fadeOut(1e3,function(){$(".iq-lead-progress-text").html("You are logged into My Portal."),$(".iq-lead-progress-text").fadeIn(1e3,function(){$(".iq-lead-progress-text").delay(4e3).fadeOut(1e3,function(){$("#iq_lead_dialog").remove(),$(".modal-backdrop").remove()})})}),$.iqUtils.localStorage($.page_name+"_registered",!0),$.registration_type.toLowerCase().indexOf("ppc")>-1&&$.iqUtils.localStorage("ppc_registered","true",365),("forced"===$.registration_type||"forced-ppc"===$.registration_type)&&($("#iqListingsContainer").length&&(null!==$.iqUtils.sessionStorage("listings_listing_mlsid")&&null!==$.iqUtils.sessionStorage("listings_listing_listingid")&&$.iqListings.details_dialog($.iqUtils.sessionStorage("listings_listing_mlsid"),$.iqUtils.sessionStorage("listings_listing_listingid")),$("#iqListingsContainer").removeClass("iq-blur"),$("#iq_listing_dialog").removeClass("iq-blur")),$("#iq_listing").length&&$("#iq_listing").removeClass("iq-blur"),1===$("[data-hideable]").length)){var ohtml=$("[data-hideable]");$(ohtml).html($.iqUtils.localStorage($.page_name+"_html")),$.iqUtils.localStorage($.page_name+"_html",null)}break;case 1:$(".iq-lead-progress-text").fadeOut(1e3,function(){$(".iq-lead-progress-text").html(jsonRet.MESSAGE),$(".iq-lead-progress-text").fadeIn(1e3,function(){$(".iq-lead-progress-text").delay(4e3).fadeOut(1e3,function(){$(".iq-lead-progress").remove()})})});break;case 2:$(".iq-lead-progress-text").fadeOut(1e3,function(){$(".iq-lead-progress-text").html("Invalid User ID<br><br>"+jsonRet.MESSAGE),$(".iq-lead-progress-text").fadeIn(1e3,function(){$(".iq-lead-progress-text").delay(4e3).fadeOut(1e3,function(){$(".iq-lead-progress").remove(),$(oForm).show()})})});break;case 3:$(".iq-lead-progress-text").fadeOut(1e3,function(){$(".iq-lead-progress-text").html("Activation Pending<br><br>"+jsonRet.MESSAGE),$(".iq-lead-progress-text").fadeIn(1e3,function(){$(".iq-lead-progress-text").delay(4e3).fadeOut(1e3,function(){$(".iq-lead-progress").remove(),$(oForm).show()})})})}},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},500),!1}}}(jQuery);
//# sourceMappingURL=registration.min.js.map
;
/* file: ../assets/js/min/selectbox.min.js */
!function($){"use strict";$(document).ready(function(){}),$.iqSelectBox={hasOptions:function(obj){return null!=obj&&null!=obj.options},selectUnselectMatchingOptions:function(obj,regex,which,only){if(window.RegExp){if("select"==which)var selected1=!0,selected2=!1;else{if("unselect"!=which)return;var selected1=!1,selected2=!0}var re=new RegExp(regex);if(!$.iqSelectBox.hasOptions(obj))return;for(var i=0;i<obj.options.length;i++)re.test(obj.options[i].text)?obj.options[i].selected=selected1:1==only&&(obj.options[i].selected=selected2)}},unSelectMatchingOptions:function(obj,regex){$.iqSelectBox.selectUnselectMatchingOptions(obj,regex,"unselect",!1)},sortSelect:function(obj){var o=new Array;if($.iqSelectBox.hasOptions(obj)){for(var i=0;i<obj.options.length;i++)o[o.length]=new Option(obj.options[i].text,obj.options[i].value,obj.options[i].defaultSelected,obj.options[i].selected);if(0!=o.length){o=o.sort(function(a,b){return a.text+""<b.text+""?-1:a.text+"">b.text+""?1:0});for(var i=0;i<o.length;i++)obj.options[i]=new Option(o[i].text,o[i].value,o[i].defaultSelected,o[i].selected)}}},selectAllOptions:function(obj){if($.iqSelectBox.hasOptions(obj))for(var i=0;i<obj.options.length;i++)obj.options[i].selected=!0},moveSelectedOptions:function(from,to){if(arguments.length>3){var regex=arguments[3];""!=regex&&$.iqSelectBox.unSelectMatchingOptions(from,regex)}if($.iqSelectBox.hasOptions(from)){for(var i=0;i<from.options.length;i++){var o=from.options[i];if(o.selected){if($.iqSelectBox.hasOptions(to))var index=to.options.length;else var index=0;to.options[index]=new Option(o.text,o.value,!1,!1)}}for(var i=from.options.length-1;i>=0;i--){var o=from.options[i];o.selected&&(from.options[i]=null)}(arguments.length<3||1==arguments[2])&&($.iqSelectBox.sortSelect(from),$.iqSelectBox.sortSelect(to)),from.selectedIndex=-1,to.selectedIndex=-1}},moveAllOptions:function(from,to){$.iqSelectBox.selectAllOptions(from),2==arguments.length?$.iqSelectBox.moveSelectedOptions(from,to):3==arguments.length?$.iqSelectBox.moveSelectedOptions(from,to,arguments[2]):4==arguments.length&&$.iqSelectBox.moveSelectedOptions(from,to,arguments[2],arguments[3])},moveOptionUp:function(obj){if($.iqSelectBox.hasOptions(obj))for(i=0;i<obj.options.length;i++)obj.options[i].selected&&(0==i||obj.options[i-1].selected||($.iqSelectBox.swapOptions(obj,i,i-1),obj.options[i-1].selected=!0))},moveOptionDown:function(obj){if($.iqSelectBox.hasOptions(obj))for(i=obj.options.length-1;i>=0;i--)obj.options[i].selected&&(i==obj.options.length-1||obj.options[i+1].selected||($.iqSelectBox.swapOptions(obj,i,i+1),obj.options[i+1].selected=!0))},copySelectedOptions:function(from,to){var options=new Object;if($.iqSelectBox.hasOptions(to))for(var i=0;i<to.options.length;i++)options[to.options[i].value]=to.options[i].text;if($.iqSelectBox.hasOptions(from)){for(var i=0;i<from.options.length;i++){var o=from.options[i];if(o.selected&&(null==options[o.value]||"undefined"==options[o.value]||options[o.value]!=o.text)){if($.iqSelectBox.hasOptions(to))var index=to.options.length;else var index=0;to.options[index]=new Option(o.text,o.value,!1,!1)}}(arguments.length<3||1==arguments[2])&&$.iqSelectBox.sortSelect(to),from.selectedIndex=-1,to.selectedIndex=-1}},copyAllOptions:function(from,to){$.iqSelectBox.selectAllOptions(from),2==arguments.length?$.iqSelectBox.copySelectedOptions(from,to):3==arguments.length&&$.iqSelectBox.copySelectedOptions(from,to,arguments[2])},swapOptions:function(obj,i,j){var o=obj.options,i_selected=o[i].selected,j_selected=o[j].selected,temp=new Option(o[i].text,o[i].value,o[i].defaultSelected,o[i].selected),temp2=new Option(o[j].text,o[j].value,o[j].defaultSelected,o[j].selected);o[i]=temp2,o[j]=temp,o[i].selected=j_selected,o[j].selected=i_selected},removeSelectedOptions:function(from){if($.iqSelectBox.hasOptions(from)){if("select-one"==from.type)from.options[from.selectedIndex]=null;else for(var i=from.options.length-1;i>=0;i--){var o=from.options[i];o.selected&&(from.options[i]=null)}from.selectedIndex=-1}},removeAllOptions:function(from){if($.iqSelectBox.hasOptions(from)){for(var i=from.options.length-1;i>=0;i--)from.options[i]=null;from.selectedIndex=-1}},addOption:function(obj,text,value,selected){null!=obj&&null!=obj.options&&(obj.options[obj.options.length]=new Option(text,value,!1,selected))}}}(jQuery);
//# sourceMappingURL=selectbox.min.js.map
;
/* file: ../assets/js/min/showcase.min.js */
!function($){"use strict";$(document).ready(function(){if(1===$("#iq_showcase").length&&($.iqUtils.sessionStorage("listings_listing_mlsid",$("#iq_showcase").attr("data-mlsid")),$.iqUtils.sessionStorage("listings_listing_ml_number",$("#iq_showcase").attr("data-mlnumber"))),1===$("#iq_showcase_template_2").length&&($("[data-section=footer]").remove(),$("#iq_showcase_template_2").height($(window).height()),$("[class^=st-sitemenu-]").first().css({position:"fixed","z-index":"12006"})),0===$("#iq_listing_contact").length)return!1;$.iqShowcase.load(),$("#iq_showcase_carousel .item").each(function(index,element){$(element).on("click",function(){$(this).data("image-postion",index)}).css({cursor:"pointer"})}),$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields_condensed",sourcename:$("#iq_listing_contact").data("sourcename"),mlsid:$("#iq_listing_contact").data("mlsid"),mlnumber:$("#iq_listing_contact").data("mlnumber"),publicid:$("#iq_listing_contact").data("publicid"),propertytype:$("#iq_listing_contact").data("propertytype"),requiredonly:$("#iq_listing_contact").data("requiredonly")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_listing_contact").html(jsonRet.LAYOUT),$("#iq_listing_contact #iq_lead_form").iqForm_Rules(jsonRet.FORMRULES)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})}),$.iqShowcase={load:function(){$("#iq_showcase_carousel").swipe({swipeLeft:function(){$(this).carousel("next")},swipeRight:function(){$(this).carousel("prev")},threshold:25})},googlemap:function(){if(!$("#iq_showcase_map").data("googlemap_init")){var iLat=$("#iq_showcase_map").data("lat"),iLon=$("#iq_showcase_map").data("lon");$("#iq_showcase_map").iqGoogleMaps({Lat:iLat,Lon:iLon,ZoomLevel:18,mapTypeId:"roadmap",PushPinPath:"/assets/img/map-icons/companylisting.png"}),$("#iq_showcase_map").data("googlemap_init",!0)}},googlestreetview:function(){if(!$("#iq_showcase_streetview").data("googlestreetview_init")){var iLat=$("#iq_showcase_map").data("lat"),iLon=$("#iq_showcase_map").data("lon");$("#iq_showcase_streetview").iqGoogleMapsStreetview({Lat:iLat,Lon:iLon,MaxDistance:50}),$("#iq_showcase_streetview").data("googlestreetview_init",!0)}},googlestreetview_clicked:function(){$("#iq_showcase_streetview").data("googlestreetview_clicked")||($.iqUtils.logFeature("iqweb","google_maps_streetview"),$("#iq_showcase_streetview").data("googlestreetview_clicked",!0))},fullscreen:function(oDiv){var div=$(oDiv).clone();$("#iq_fullscreen_modal").bsFullScreenModal({backdrop:!1,title:"fullscreen",scrollable:!1}),$("#iq_fullscreen_modal .modal-body").html(div).find(".thumbnail").removeClass("thumbnail"),$("#iq_fullscreen_modal .modal-body #iq_fullscreen_button").remove()},showing:function(){$("#iq_listing_showing_request").html('<h1 class="text-center"><i class="fa fa-refresh fa-spin"></i> Loading Form</h1>'),$.ajax({url:"/components/leads_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"leadform_fields_condensed",sourcename:$("#iq_listing_showing_request").data("sourcename"),mlsid:$("#iq_listing_showing_request").data("mlsid"),mlnumber:$("#iq_listing_showing_request").data("mlnumber"),publicid:$("#iq_listing_showing_request").data("publicid"),propertytype:$("#iq_listing_showing_request").data("propertytype"),requiredonly:$("#iq_listing_showing_request").data("requiredonly")},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_listing_showing_request").html('<h1 class="page-header text-center" style="margin:0 0 40px 0;">Schedule a showing</h1>'),$("#iq_listing_showing_request").append(jsonRet.LAYOUT),$("#iq_listing_showing_request #iq_lead_form").iqForm_Rules(jsonRet.FORMRULES)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})},matterport_load:function(){var iframe=$("#iq_showcase_matterport"),width=$(iframe).parent().width(),height=$(iframe).parent().height();".5625"*width<$(window).height()&&(height=".5625"*width),$(iframe).width(width),$(iframe).height(height)},listings_data:function(){var oData=$("#criteria_form").iqSerializeFormToStruct({includeblanks:!1});$.iqUtils.sessionStorage("listings_data",oData),console.log(oData),$.iqUtils.cookie("listings_data",!0),window.open("/listings")}}}(jQuery);
//# sourceMappingURL=showcase.min.js.map
;
/* file: ../assets/js/min/sign-in.min.js */
!function($){"use strict";$(document).ready(function(){1===$("#iq_signin").length&&($("#iq_lead_form input").each(function(index,element){"phonenumber"===$(element).attr("data-datatype")&&$(element).mask("(999) 999-9999")}),$('[data-toggle="floatLabel"]').attr("data-value",$(this).val()).on("keyup change",function(){$(this).attr("data-value",$(this).val())}),$("#iq_lead_form").iqForm_Rules())}),$.iqSignIn={savelead:function(){var oDataDefaults={ReturnFormat:"json",Method:"PostLead"},oDataLead=$("#iq_lead_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataLead),fullname=oData.fullname.split(" ");fullname.length>1?(oData.firstname=fullname[0],oData.lastname=fullname[1]):oData.firstname=fullname[0];var _spaceregex=new RegExp(" ","g"),sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-");try{sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-")+"/"+oData.firstname.toLowerCase().replace(_spaceregex,"_")+"-"+oData.lastname.toLowerCase().replace(_spaceregex,"_")}catch(e){}var originaltext=$("#iq_lead_form-submit").html();return $("#iq_lead_form-submit").html('<i class="fa fa-fw fa-refresh fa-spin"></i> Signing In').attr("disabled",!0),$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(jsonRet){0===jsonRet.STATUS||2===jsonRet.STATUS?($("#iq_lead_form-openhouse_id").length?(0===$("#iq_lead_form-openhouse_id").val().length&&(""!==$("#iq_lead_form-emailaddress").iqFieldValue()&&$("#iq_signin_page2-send_email").show(),""!==$("#iq_lead_form-mobilephone").iqFieldValue()&&$("#iq_signin_page2-send_text").show()),$("#iq_signin_page1").slideUp(function(){$("#iq_signin_page2").slideDown()})):$.iqUtils.uiMessage("","Your request has been sent.<br> A representative will contact you shortly"),$("#iq_lead_form-_hash_").iqFieldValue(jsonRet.HASH)):($.iqUtils.uiMessage("",jsonRet.MESSAGE),$("#iq_lead_form .alert").slideDown(),$("#iq_lead_form-submit").html(originaltext).attr("disabled",!1)),$.iqUtils.analyticsPageView({page_title:oData.sourcename,page_location:self.location.origin+"/lead-entry/"+sourcenameurl,page_path:"/lead-entry/"+sourcenameurl}),$.iqUtils.analyticsLeadConvert({lead_source:oData.sourcename})},error:function(){$("#iq_lead_form .alert").slideDown(),$("#iq_lead_form-submit").html(originaltext).attr("disabled",!1)}}),!1},email:function(){var oDataDefaults={ReturnFormat:"json",Method:"PostLead"},oDataLead=$("#iq_lead_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataLead);oData.sourcename="Website Send Flyer",oData.toname=$("#iq_lead_form-fullname").iqFieldValue(),oData.toemail=$("#iq_lead_form-emailaddress").iqFieldValue(),oData.messagebody="";var _spaceregex=new RegExp(" ","g"),sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-"),fullname=oData.toname.split(" ");fullname.length>1?(oData.firstname=fullname[0],oData.lastname=fullname[1]):oData.firstname=fullname[0];var originaltext=$("#iq_signin_page2-send_email button").html();$("#iq_signin_page2-send_email button").html('<i class="fa fa-fw fa-refresh fa-spin"></i> Sending Email').attr("disabled",!0),$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(){$("#iq_signin_page2-send_email button").html('<i class="fa fa-fw fa-check"></i> Email Sent').attr("disable",!1),$.iqUtils.analyticsPageView({page_title:oData.sourcename,page_location:self.location.origin+"/lead-entry/"+sourcenameurl,page_path:"/lead-entry/"+sourcenameurl}),$.iqUtils.analyticsLeadConvert({lead_source:oData.sourcename})},error:function(httpRet){$("#iq_lead_form .alert").slideDown(),$("#iq_signin_page2-send_email button").html(originaltext).attr("disabled",!1)}})},text:function(){var oDataDefaults={ReturnFormat:"json",Method:"PostLead"},oDataLead=$("#iq_lead_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataLead);oData.sourcename="Website send text",oData.fullname=$("#iq_lead_form-fullname").iqFieldValue(),oData.tonumber=$("#iq_lead_form-mobilephone").iqFieldValue(),oData.from=$("#iq_lead_form-mobilephone").iqFieldValue(),oData.messagebody=$("#iq_lead_form-textmessagebody").iqFieldValue(),oData.layouttemplate="signintextmessage";var _spaceregex=new RegExp(" ","g"),sourcenameurl=oData.sourcename.toLowerCase().replace(_spaceregex,"-"),fullname=oData.fullname.split(" ");fullname.length>1?(oData.firstname=fullname[0],oData.lastname=fullname[1]):oData.firstname=fullname[0];var originaltext=$("#iq_signin_page2-send_text button").html();$("#iq_signin_page2-send_text button").html('<i class="fa fa-fw fa-refresh fa-spin"></i> Sending Text Message').attr("disabled",!0),$.ajax({url:"/components/leads.cfc",type:"POST",dataType:"json",cache:!1,async:!0,data:oData,success:function(){if($("#iq_signin_page2-send_text button").html('<i class="fa fa-fw fa-check"></i> Text Message Sent').attr("disable",!1),window.ga)try{ga.getAll().forEach(function(gTracker){gTracker.set("page","/lead-entry/"+sourcenameurl),gTracker.set("title",oData.sourcename),gTracker.set("location",self.location.origin+"/lead-entry/"+sourcenameurl),gTracker.send("pageview")})}catch(err){console.log(err)}if(window.gtag)try{gtag("event","page_view",{page_title:oData.sourcename,page_location:self.location.origin+"/lead-entry/"+sourcenameurl,page_path:"/lead-entry/"+sourcenameurl})}catch(e){console.log(e)}},error:function(httpRet){$("#iq_lead_form .alert").slideDown(),$("#iq_signin_page2-send_text button").html(originaltext).attr("disabled",!1)}})},watch_video:function(){console.log("Watch Pre-Recorded Video"),window.open($("#iq_lead_form-video_url").val(),"_blank")},clear:function(){self.location=self.location}}}(jQuery);
//# sourceMappingURL=sign-in.min.js.map
;
/* file: ../assets/js/min/surveys.min.js */
!function($){"use strict";$(document).ready(function(){$("#iq_surveys_entry").data("loadsurvey")&&$.iqSurveys.load()}),$.iqSurveys={check_page:function(pageid,onSuccess){var bCheck=$("#iq_surveys_carousel-page"+pageid).iqForm_Check();if(bCheck){var oFields=$("#iq_surveys_carousel-page"+pageid+" .checkbox, #iq_surveys_carousel-page"+pageid+" .radio");$.each(oFields,function(){if(!0===$(this).data("required")){var fieldid=$(this).attr("id"),checked=$(this).find("input:checked"),oMessageElm=$("#"+fieldid+"_message");$(oMessageElm).hide(),0===checked.length&&($(oMessageElm).html("Please choose at least one option.").show(),bCheck=!1)}})}bCheck&&onSuccess.call(this)},update_progress:function(){var items=$("#iq_surveys_carousel").find(".item").length,item=$("#iq_surveys_carousel").find(".item.active").data("slideid"),progress=Math.floor(item/items*100)+"%";$(".progress-bar").css({width:progress}).find("span").html(progress+" Complete")},load:function(){var config=$("#iq_surveys_entry").data();config.loadsurvey&&$.ajax({url:"/components/surveys_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"ResponseEntry",surveyid:config.surveyid,recipientid:config.recipientid,recipientpublicid:config.recipientpublicid,trackingid:config.trackingid,propertytype:config.propertytype,mlsid:config.mlsid,mlnumber:config.mlnumber,showingid:config.showingid,multiresponse:config.multiresponse,return_query:!0},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_surveys_entry").html(jsonRet.LAYOUT),$("#iq_surveys_responseentry_form").iqForm_Rules(),$.iqSurveys.checkradio_required()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE+"<br>"+httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}})},save:function(){var oDataDefaults={ReturnFormat:"json",Method:"ProcessResponse"},oDataFields=$("#iq_surveys_responseentry_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);$.iqUtils.uiProcessing("show","Recording Responses"),$.ajax({url:"/components/surveys.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("hide"),jsonRet.STATUS){case 0:$("#iq_surveys_carousel").carousel("next"),"true"===$("#iq_surveys_carousel-pagecomplete").data("redirect")&&setTimeout(function(){window.location="/"},5e3);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)}},error:function(httpRet){$.iqUtils.uiProcessing("hide"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE+"<br>"+httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}})},checkradio_required:function(){var elements=$("#iq_surveys_carousel .checkbox, #iq_surveys_carousel .radio");$.each(elements,function(index,value){var oField=$(value),sFieldID=$(oField).attr("id"),bRequired=$(oField).data("required"),oParent=$(oField).parent(),oMessageElem=$(oParent).find("#"+sFieldID+"_message");!0===bRequired&&0===oMessageElem.length&&$(oParent).append('<div style="margin-top:5px; display:none;" id="'+sFieldID+'_message" class="text-danger"></div>')})},rate:function(questionid,rating){for(var i=1;i<=5;i++)rating>=i?$("#"+questionid+"_rating_"+i).removeClass("fa-star-o").addClass("fa-star").css({color:"#F48000"}):$("#"+questionid+"_rating_"+i).removeClass("fa-star").addClass("fa-star-o").css({color:""}),$("#"+questionid).val(rating)}}}(jQuery);
//# sourceMappingURL=surveys.min.js.map
;
/* file: ../assets/js/min/testimonial.min.js */
!function($){"use strict";$(document).ready(function(){0!==$("#iq_testimonial_entry").length&&$.iqTestimonials.getform()}),$.iqTestimonials={getform:function(){$.ajax({url:"/components/testimonial_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",recipientid:$("#iq_testimonial_entry").data("recipientid"),publicid:$("#iq_testimonial_entry").data("publicid"),Method:"getform"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_testimonial_entry").html(jsonRet.LAYOUT),$("#iq_testimonial_responseentry_form").iqForm_Rules()):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE+"<br>"+httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}})},rate:function(questionid,rating){for(var i=1;i<=5;i++)rating>=i?$("#iq_testimonial_responseentry_form-rating_"+i).removeClass("fa-star-o").addClass("fa-star").css({color:"#F48000"}):$("#iq_testimonial_responseentry_form-rating_"+i).removeClass("fa-star").addClass("fa-star-o").css({color:""}),$("#"+questionid).val(rating)},save:function(){if(!0===$("#iq_testimonial_responseentry_form").iqForm_Check()){var oDataFields={},oFormFields=$("#iq_testimonial_responseentry_form").iqSerializeFormToStruct(),oData=$.extend(oDataFields,oFormFields);oData.testimonial=$("#iq_testimonial_responseentry_form-testimonial").iqFieldValue().replace(/\r?\n/g,"<br />"),oData.Method="Save",$.ajax({url:"/components/testimonial.cfc",type:"POST",dataType:"json",async:!1,data:oData,success:function(jsonRet){0===jsonRet.STATUS?($("#iq_testimonial_carousel").carousel("next"),setTimeout(function(){window.location="/"},5e3)):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+jsonRet.CONTENT)},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE+"<br>"+httpRet.DETAIL):$.iqUtils.uiMessage("",httpRet.responseText)}})}}}}(jQuery);
//# sourceMappingURL=testimonial.min.js.map
;
/* file: ../assets/js/min/testing.min.js */
!function($){"use strict";$(document).ready(function(){$.iqTesting.carousel_load()}),$.iqTesting={carousel_load:function(){$("#iq_areas_carousel .item").each(function(index,element){$(element).on("click",function(){$(this).data("image-postion",index),$.iqListing.all_images($(this).data("image-postion"))})}),$("#iq_areas_carousel_nav .img-thumbnail a").on("click",function(e){e.preventDefault();var item=$(this).data("slide");return $("#iq_areas_carousel").carousel(item-1),$("#iq_areas_carousel_nav").data("slide",item-1),$("#iq_areas_carousel_nav .img-thumbnail").css({opacity:".5"}),$("#iq_areas_carousel_nav a").css({opacity:".5"}),$(this).parent().css({opacity:"1"}),!1}),$("#iq_areas_carousel").on("slid.bs.carousel",function(){$("#iq_areas_carousel_nav .img-thumbnail").css({opacity:".5"});var item=$(this).find(".active").index(),nav_item=Math.ceil((item+1)/6);$("#iq_areas_carousel_nav").carousel(nav_item-1),$("#iq_areas_carousel_nav .img-thumbnail").css({opacity:".5"}),$('#iq_areas_carousel_nav a[data-slide="'+(item+1)+'"]').parent().css({opacity:"1"})})},initialize:function(){for(var center=new google.maps.LatLng(37.4419,-122.1419),map=new google.maps.Map(document.getElementById("map"),{zoom:3,center:center,mapTypeId:google.maps.MapTypeId.ROADMAP}),markers=[],i=0;i<_map_points.DATA.length;i++){var point=_map_points.DATA[i],latLng=new google.maps.LatLng(point[0],point[1]),marker=new google.maps.Marker({position:latLng});markers.push(marker)}new MarkerClusterer(map,markers,{imagePath:"/assets/js/markerclusterer/m"})}}}(jQuery);
//# sourceMappingURL=testing.min.js.map
;
/* file: ../assets/js/min/utils.min.js */
$=jQuery.noConflict(),function($,window,document,undefined){var $window=$(window);$(document).ready(function(){$(document).ajaxComplete(function(event,xhr,options){xhr.responseJSON||xhr.responseText;$.iqUtils.preventDefault()}),$.iqUtils.preventDefault(),$.iqUtils.hrefHistory(),$(document).ajaxComplete(function(event,xhr,options){$.iqUtils.preventDefault()}),$(document).ajaxComplete(function(event,xhr,options){$.iqUtils.hrefHistory()}),$('[data-scroll="true"]').each(function(index,element){var bs_target=$(element).data("scroll_target"),scroll_offset=$(element).data("scroll_offset");$(element).append('<a href="##" data-target="'+bs_target+'" data-bs-target="'+bs_target+'" class="scroll_down"><span></span>More<span class="sr-only">Scroll for more records</span></a>'),$(element).find("a.scroll_down").on("click",function(e){e.preventDefault();var targetElement=$("#"+$(this).data("target"));0===targetElement.length&&(targetElement=$(this).parent("section").next()),$("html, body").animate({scrollTop:$(targetElement).offset().top-scroll_offset},500,"linear")})}),$(".iq-loader").is(":visible")&&setTimeout(function(){$(".iq-loader").css({position:"fixed"}),$("body").css({overflow:"visible"}),$(".iq-loader").fadeOut()},100),location.search.indexOf("lead_convert=true")>-1&&(console.log("Firing Lead Convert Analytics",{lead_source:"Intial Setup"}),$.iqUtils.analyticsLeadConvert({lead_source:"Intial Setup"}))}),$.iqUtils={analyticsPageView:function(analytics){try{if(window.ga)try{ga.getAll().forEach(function(gTracker){gTracker.set("page",analytics.page_path),gTracker.set("title",analytics.page_title),gTracker.set("location",analytics.page_location),gTracker.send("pageview")})}catch(e){console.log("analyticsPageView","ga","error",e)}window.gtag&&gtag("event","page_view",{page_title:analytics.page_title,page_location:analytics.page_location,page_path:analytics.page_path})}catch(e){console.log("analyticsPageView","gtag","error",e)}},analyticsLeadConvert:function(lead){try{var eventName="lead_convert-"+self.location.host.replace("www.","");window.ga&&ga("send","event","leads",eventName,lead.lead_source),window.gtag&&gtag("event",eventName,{lead_source:lead.lead_source,page_location:self.location.href})}catch(e){console.log("analyticsPageView","gtag","error",e)}},isBot:function(){var bots=["bot","google","yahoo","bing","baidu","crawl","spider","robot","minelabs","statuscake","link","http","@","search"];for(var i in bots){if(new RegExp(bots[i],"i").test(navigator.userAgent)&&!window.MSStream)return!0}return!1},videoOverlay:function(videoid,autoplay){var html=[],_autoplay=void 0!==autoplay&&autoplay?"1":"0";html.push('<div class="container-fluid" style="padding:10px;">'),html.push('<div class="row">'),html.push('<div class="col-md-12">'),html.push('<iframe title="YouTube Video Window" id="iq_property_details_youtube" class="iq-property-details-youtube" width="640" height="480" src="https://www.youtube.com/embed/'+videoid+"?fs=1&autoplay="+_autoplay+'&loop=0&rel=0" frameborder="0" allowfullscreen></iframe>'),html.push("</div>"),html.push("</div>"),html.push('<div class="row">'),html.push('<div class="col-md-12">'),html.push('<hr style="margin:5px 0 5px 0">'),html.push("</div>"),html.push("</div>"),html.push('<div class="row">'),html.push('<div class="text-right col-md-12">'),html.push('<button onclick="$(\'#st_playvideo_dialog\').dialog(\'close\')" class="btn btn-danger pull-right"><i class="fa fa-minus-circle"></i> Close</button>'),html.push("</div>"),html.push("</div>"),html.push("</div>"),0===$("#st_playvideo_dialog").length&&$("body").append('<div id="st_playvideo_dialog"><div id="st_playvideo_dialog_body"></div></div>'),$("#st_playvideo_dialog").dialog({closeOnEscape:!0,title:"Video Tour",width:"auto",height:"auto",resizable:!1,autoOpen:!1,bgiframe:!0,modal:!0,draggable:!0,beforeClose:function(){$(this).remove()},zIndex:999}),$("#st_playvideo_dialog").parent().find(".ui-dialog-titlebar").hide(),$("#st_playvideo_dialog_body").html(html.join("")),$("#st_playvideo_dialog").dialog("open"),$("#st_playvideo_dialog").iqRecenterDialog()},logFeature:function(app,feature){$.get("/components/features.cfc?method=add&app="+app+"&feature="+feature)},getViewPort:function(){return $("#bs_lg").is(":visible")?"lg":$("#bs_md").is(":visible")?"md":$("#bs_sm").is(":visible")?"sm":"xs"},preventDefault:function(){$('[preventDefault="true"]').each(function(index,element){$(element).click(function(event){event.preventDefault()}).submit(function(event){event.preventDefault()})})},hrefHistory:function(){$('[hrefHistory="true"]').each(function(index,element){$(element).data("hashrefhistory")||($(element).data("hashrefhistory",!0),$(element).click(function(event){event.preventDefault(),$.iqUtils.history.push($(this).attr("href"))}))})},sessionStorage:function(pKey,pValue){try{if(null===pValue)return sessionStorage.removeItem(pKey),!0;if(void 0===pValue)return sessionStorage.getItem(pKey);sValue=pValue||"","object"==typeof pValue&&(sValue=$.toJSON(pValue)),sessionStorage.setItem(pKey,sValue)}catch(e){}},localStorage:function(pKey,pValue){try{if(null===pValue)return localStorage.removeItem(pKey),!0;if(void 0===pValue)return localStorage.getItem(pKey);sValue=pValue||"","object"==typeof pValue&&(sValue=$.toJSON(pValue)),localStorage.setItem(pKey,sValue)}catch(e){}},history:{init:function(pCallback){$(window).on("hashchange",function(e){pCallback.apply(this,e)});var bTrigger=!0;window.addEventListener("popstate",function(){$(window).trigger("hashchange"),bTrigger=!1},!1),bTrigger&&$(window).trigger("hashchange")},push:function(pHash){var hash=pHash.replace("#",""),location=window.location.pathname;"/"!==$.iqUtils.right(location,1)&&(location+="/"),hash="/"===$.iqUtils.left(hash,1)?location+"#"+hash:location+"#/"+hash,"function"==typeof window.history.pushState?(window.history.pushState(null,hash,hash),$(window).trigger("hashchange")):window.location.hash=hash},action:function(){var hash=$.iqUtils.history.hashArray();return hash.length>0?hash[0]:""},hashArray:function(){var hashArray=window.location.href.split("#");return hashArray=1!==hashArray.length?$.iqUtils.cleanUrl(hashArray[1]).split("/"):[]},vars:function(){var hash,vars={};if(hash=$.iqUtils.history.hashArray(),hash.length>1)for(var i=2;i<hash.length;i++){var _key,_value,KeyValuePair=hash[i].split("_");KeyValuePair.length>2?(_value=KeyValuePair[KeyValuePair.length-1],_key=KeyValuePair.slice(0,KeyValuePair.length-1).join("_")):(_value=KeyValuePair[1]||"",_key=KeyValuePair[0]),vars[_key]=_value}return vars},var:function(name){return $.iqUtils.url.vars()[name]}},cleanUrl:function(url){return"/"===String(url).substring(0,1)&&(url=String(url).substring(1,String(url).length)),"/"===String(url).substring(String(url).length-1,String(url).length)&&(url=String(url).substring(0,String(url).length-1)),url},right:function(str,n){if(n<=0)return"";if(n>String(str).length)return str;var iLen=String(str).length;return String(str).substring(iLen,iLen-n)},left:function(str,n){return n<=0?"":n>String(str).length?str:String(str).substring(0,n)},mid:function(str,start,len){if(start<0||len<0)return"";var iEnd,iLen=String(str).length;if(!(start+len>iLen))return iEnd=start+len,String(str).substring(start,iEnd);iEnd=iLen},fCase:function(pStr){var aWords=pStr.split(" ");if(aWords.length<1)return pStr.charAt(0).toUpperCase()+pStr.slice(1).toLowerCase();for(var index in aWords)"indexOf"!==index&&(aWords[index]=aWords[index].charAt(0).toUpperCase()+aWords[index].slice(1).toLowerCase());return aWords.join(" ")},numberFormat:function(pNumber){return parseInt(pNumber).toLocaleString("en-US")},numberKFormat:function(pNumber){var number=pNumber.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),a=number.split(",");if(1===a.length)return a[0];if(2===a.length)return a[0]+"K";if(3===a.length){var pos1=a[0],pos2=a[1];return pos2=pos2.substring(0,2),"00"===pos2&&(pos2=""),pos2=""!==pos2?"."+pos2:"",pos1+pos2+"M"}return number},removeHtml:function(sHTML){return sHTML.replace(/<[^>]+>/gi,"")},cookie:function(name,value,expires){if(void 0!==value){var today=new Date;today.setTime(today.getTime()),expires&&(expires=1e3*expires*60*60*24);var tDomain=window.location.hostname.toLowerCase().replace("www.",""),expires_date=new Date(today.getTime()+expires);document.cookie=name.toUpperCase()+"="+escape(value)+(expires?"; expires="+expires_date.toGMTString():"")+"; path=/; domain=."+tDomain}else{var a_all_cookies=document.cookie.split(";"),a_temp_cookie="",cookie_name="",cookie_value="",b_cookie_found=!1;for(i=0;i<a_all_cookies.length;i++){if(a_temp_cookie=a_all_cookies[i].split("="),cookie_name=a_temp_cookie[0].replace(/^\s+|\s+$/g,""),cookie_name.toUpperCase()===name.toUpperCase())return b_cookie_found=!0,a_temp_cookie.length>1&&(cookie_value=a_temp_cookie[1].replace(/^\s+|\s+$/g,""),cookie_value=cookie_value.replace(/^["]+|["]+$/g,""),cookie_value=unescape(cookie_value)),cookie_value;a_temp_cookie=null,cookie_name=""}if(!b_cookie_found)return""}},md5:function(string){function RotateLeft(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8}function F(x,y,z){return x&y|~x&z}function G(x,y,z){return x&z|y&~z}function H(x,y,z){return x^y^z}function I(x,y,z){return y^(x|~z)}function FF(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function WordToHex(lValue){var lByte,lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;lCount<=3;lCount++)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);return WordToHexValue}if(""===(string=string||""))return"";var k,AA,BB,CC,DD,a,b,c,d,x=Array();for(string=function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}(string),x=function(string){for(var lWordCount,lMessageLength=string.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lByteCount<lMessageLength;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}(string),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],7,3614090360),d=FF(d,a,b,c,x[k+1],12,3905402710),c=FF(c,d,a,b,x[k+2],17,606105819),b=FF(b,c,d,a,x[k+3],22,3250441966),a=FF(a,b,c,d,x[k+4],7,4118548399),d=FF(d,a,b,c,x[k+5],12,1200080426),c=FF(c,d,a,b,x[k+6],17,2821735955),b=FF(b,c,d,a,x[k+7],22,4249261313),a=FF(a,b,c,d,x[k+8],7,1770035416),d=FF(d,a,b,c,x[k+9],12,2336552879),c=FF(c,d,a,b,x[k+10],17,4294925233),b=FF(b,c,d,a,x[k+11],22,2304563134),a=FF(a,b,c,d,x[k+12],7,1804603682),d=FF(d,a,b,c,x[k+13],12,4254626195),c=FF(c,d,a,b,x[k+14],17,2792965006),b=FF(b,c,d,a,x[k+15],22,1236535329),a=GG(a,b,c,d,x[k+1],5,4129170786),d=GG(d,a,b,c,x[k+6],9,3225465664),c=GG(c,d,a,b,x[k+11],14,643717713),b=GG(b,c,d,a,x[k+0],20,3921069994),a=GG(a,b,c,d,x[k+5],5,3593408605),d=GG(d,a,b,c,x[k+10],9,38016083),c=GG(c,d,a,b,x[k+15],14,3634488961),b=GG(b,c,d,a,x[k+4],20,3889429448),a=GG(a,b,c,d,x[k+9],5,568446438),d=GG(d,a,b,c,x[k+14],9,3275163606),c=GG(c,d,a,b,x[k+3],14,4107603335),b=GG(b,c,d,a,x[k+8],20,1163531501),a=GG(a,b,c,d,x[k+13],5,2850285829),d=GG(d,a,b,c,x[k+2],9,4243563512),c=GG(c,d,a,b,x[k+7],14,1735328473),b=GG(b,c,d,a,x[k+12],20,2368359562),a=HH(a,b,c,d,x[k+5],4,4294588738),d=HH(d,a,b,c,x[k+8],11,2272392833),c=HH(c,d,a,b,x[k+11],16,1839030562),b=HH(b,c,d,a,x[k+14],23,4259657740),a=HH(a,b,c,d,x[k+1],4,2763975236),d=HH(d,a,b,c,x[k+4],11,1272893353),c=HH(c,d,a,b,x[k+7],16,4139469664),b=HH(b,c,d,a,x[k+10],23,3200236656),a=HH(a,b,c,d,x[k+13],4,681279174),d=HH(d,a,b,c,x[k+0],11,3936430074),c=HH(c,d,a,b,x[k+3],16,3572445317),b=HH(b,c,d,a,x[k+6],23,76029189),a=HH(a,b,c,d,x[k+9],4,3654602809),d=HH(d,a,b,c,x[k+12],11,3873151461),c=HH(c,d,a,b,x[k+15],16,530742520),b=HH(b,c,d,a,x[k+2],23,3299628645),a=II(a,b,c,d,x[k+0],6,4096336452),d=II(d,a,b,c,x[k+7],10,1126891415),c=II(c,d,a,b,x[k+14],15,2878612391),b=II(b,c,d,a,x[k+5],21,4237533241),a=II(a,b,c,d,x[k+12],6,1700485571),d=II(d,a,b,c,x[k+3],10,2399980690),c=II(c,d,a,b,x[k+10],15,4293915773),b=II(b,c,d,a,x[k+1],21,2240044497),a=II(a,b,c,d,x[k+8],6,1873313359),d=II(d,a,b,c,x[k+15],10,4264355552),c=II(c,d,a,b,x[k+6],15,2734768916),b=II(b,c,d,a,x[k+13],21,1309151649),a=II(a,b,c,d,x[k+4],6,4149444226),d=II(d,a,b,c,x[k+11],10,3174756917),c=II(c,d,a,b,x[k+2],15,718787259),b=II(b,c,d,a,x[k+9],21,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);return(WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d)).toUpperCase()},uiMessage:function(sTitle,sText,iTimeout){sTitle=sTitle||"Message",sText=sText||"",sText.indexOf("comps not available for the specified property identifier")>=0&&(sText="Looks like we could not find a home evaluation for this property."),iTimeout=iTimeout||0;var oDialog=$("#iq_message_dialog");if(0===oDialog.length){var dialogHTML=[],bsVersion=$.fn.tooltip.Constructor.VERSION;"5.0.2"==bsVersion?(dialogHTML.push('<div class="modal fade" id="iq_message_dialog" tabindex="-1" aria-labelledby="iq_message_dialog_title" style="z-index: 12010;">'),dialogHTML.push('    <div class="modal-dialog" style="position: relative;">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <h5 class="modal-title" id="iq_message_dialog_title">'+sTitle+"</h5>"),dialogHTML.push('                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body">'+sText+"</div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-default" data-bs-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")):"4.1.3"==bsVersion?(dialogHTML.push('<div class="modal fade" id="iq_message_dialog" tabindex="-1" role="dialog" aria-labelledby="iq_message_dialog_title" style="z-index: 12010;">'),dialogHTML.push('    <div class="modal-dialog" role="document" style="position: relative;">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <h5 class="modal-title" id="iq_message_dialog_title">'+sTitle+"</h5>"),dialogHTML.push('                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body">'+sText+"</div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")):(dialogHTML.push('<div class="modal fade" id="iq_message_dialog" tabindex="-1" role="dialog" aria-labelledby="iq_message_dialog_title" style="z-index: 12010;">'),dialogHTML.push('    <div class="modal-dialog" role="document" style="position: relative;">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>'),dialogHTML.push('                <h4 class="modal-title" id="iq_message_dialog_title">'+sTitle+'<span class="sr-only">Modal Title</span></h4>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body">'+sText+"</div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")),$("body").append(dialogHTML.join("")),oDialog=$("#iq_message_dialog")}$(oDialog).modal("show"),$(oDialog).on("hidden.bs.modal",function(){setTimeout(function(){$(oDialog).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)}),0!==iTimeout&&setTimeout(function(){$("#iq_message_dialog").modal("close")},iTimeout)},uiProcessing:function(sAction,sText,bModal){if(void 0===sAction)return!0;var sText=sText||"Processing",bModal=bModal||!0,oDialog=$("#iq_loading_dialog");if("open"===sAction.toLowerCase()||"show"===sAction.toLowerCase()){if(0!==oDialog.length)return oDialog.find(".modal-body span").html(sText),!0;var dialogHTML=[];"4.1.3"==$.fn.tooltip.Constructor.VERSION?(dialogHTML.push('<div class="modal fade" id="iq_loading_dialog" tabindex="-1" role="dialog" aria-labelledby="iq_message_dialog_title" style="z-index: 12010;">'),dialogHTML.push('    <div class="modal-dialog" role="document" style="position: relative;">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <h5 class="modal-title" id="iq_processing_dialog_title">Processing</h5>'),dialogHTML.push('                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body text-center" style="margin:25px 0;"><i class="fa fa-fw fa-refresh fa-spin" style="font-size:25px;"></i> <h3 style="display:inline-block;">'+sText+"</h3></div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")):(dialogHTML.push('<div class="modal fade" id="iq_loading_dialog" tabindex="-1" role="dialog" aria-labelledby="iq_message_dialog_title" style="z-index: 12010;">'),dialogHTML.push('    <div class="modal-dialog" role="document" style="position: relative;">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>'),dialogHTML.push('                <h4 class="modal-title" id="iq_processing_dialog_title">Processing</h4>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body text-center"><i class="fa fa-fw fa-refresh fa-spin" style="font-size:25px;"></i> <span>'+sText+"</span></div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")),$("body").append(dialogHTML.join("")),oDialog=$("#iq_loading_dialog"),$(oDialog).modal({backdrop:bModal,show:!0}),$(oDialog).on("hidden.bs.modal",function(){setTimeout(function(){$(oDialog).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)})}"close"!==sAction.toLowerCase()&&"hide"!==sAction.toLowerCase()||$(oDialog).modal("hide")},uiContentProcessing:function(obj){$(obj).html('<div class="col-md-12 text-center" style="padding:5px;"><i class="fa fa-fw fa-refresh fa-spin"></i> Processing</div>')},parseError:function(sError){var retError=sError;if(sError.indexOf("ColdFusion")>0){var iStart=sError.indexOf("<html>"),iEnd=sError.length;retError=sError.substring(iStart,iEnd)}return retError},checkRegex:function(sRule,sValue){var bPassed=!0;switch(sRule){case"alphanumeric":var sRegExp=/[^a-z\d]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"space":var sRegExp=/ /;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericspace":var sRegExp=/[^a-z\d ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericspaceperiod":var sRegExp=/[^a-z\d. ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericspacehyphen":var sRegExp=/[^a-z\d- ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericspaceapostrophe":var sRegExp=/[^a-z\d' ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericyhyphen":var sRegExp=/[^a-z\d-]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericunderscore":var sRegExp=/[^a-z\d_]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericcomma":var sRegExp=/[^a-z\d,]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericcommaspace":var sRegExp=/[^a-z\d, ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphanumericspacepunctuation":var sRegExp=/[^a-z\d,-;’_:.!@®<>#|&?\' ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"metatags":var sRegExp=/[^a-z\d,-;_:.!@&?\' ]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"videoprofilelink":var sRegExp=/[^a-z\d%?&./:_?=\\+-]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"numeric":var sRegExp=/[^\d]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"alphaspace":var sRegExp=/[^a-zA-Z\s]/;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"numericdecimal":var sRegExp=/[^\d.]/i;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"phonenumber":var sRegExp=/[^\d\-()\. ]/i;!0===sRegExp.test(sValue)?bPassed=!1:(sValue=sValue.replace(/[^0-9]/g,""),10!==sValue.length&&(bPassed=!1));break;case"email":var sRegExp=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;!1===sRegExp.test(sValue)&&(bPassed=!1);break;case"url":var sRegExp=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;!1===sRegExp.test(sValue)&&(bPassed=!1);var sFirst=sValue.charAt(0);"/"!==sFirst&&"~"!==sFirst||(bPassed=!0);break;case"youtube":var sRegExp=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;!1===sRegExp.test(sValue)&&(bPassed=!1);var sFirst=sValue.charAt(0);"/"!==sFirst&&"~"!==sFirst||(bPassed=!0);break;case"facebook":var sRegExp=/^(https?:\/\/){0,1}(www\.){0,1}facebook\.com/;!1===sRegExp.test(sValue)&&(bPassed=!1);break;case"trailingbackslashreq":"\\"!==$.iqUtils.right(sValue,1)&&(bPassed=!1);break;case"trailingbackslashorfrontslashreq":"\\"!==$.iqUtils.right(sValue,1)&&"/"!==$.iqUtils.right(sValue,1)&&(bPassed=!1);break;case"trailingbackslashnotreq":"\\"===$.iqUtils.right(sValue,1)&&(bPassed=!1);break;case"trailingfrontslashreq":"/"!==$.iqUtils.right(sValue,1)&&(bPassed=!1);break;case"trailingfrontslashnotreq":"/"===$.iqUtils.right(sValue,1)&&(bPassed=!1);break;case"httprequired":"http://"!==$.iqUtils.left(sValue,7)&&(bPassed=!1);break;case"httpnotrequired":"http://"===$.iqUtils.left(sValue,7)&&(bPassed=!1);break;case"leadingfrontslashreq":"/"!==$.iqUtils.left(sValue,1)&&(bPassed=!1);break;case"leadingfrontslashnotreq":"/"===$.iqUtils.left(sValue,1)&&(bPassed=!1);break;case"measurementid":var sRegExp=/(UA|G)-[a-zA-Z0-9-]+(\s|;|:|,)/;!0===sRegExp.test(sValue)&&(bPassed=!1);break;case"measurementidformat":var sRegExp=/^(G|UA)-[a-zA-Z0-9-]+$/;(!0!==sRegExp.test(sValue)||sValue.length>20)&&(bPassed=!1);break;case"fullname":(sValue.split(" ").length<=1||sValue.length<=3)&&(bPassed=!1);break;case"datemmddyyyy":var sRegExp=/^\d{1,2}(\/)\d{1,2}(\/)\d{2,4}$/;if(!1===sRegExp.test(sValue))bPassed=!1;else{var arrayDate=sValue.split("/");1===arrayDate[0].length&&(arrayDate[0]="0"+arrayDate[0]),1===arrayDate[1].length&&(arrayDate[1]="0"+arrayDate[1]),2===arrayDate[2].length&&(arrayDate[2]="20"+arrayDate[2]);var arrayLookup={"01":31,"03":31,"04":30,"05":31,"06":30,"07":31,"08":31,"09":30,10:31,11:30,12:31},intDay=parseInt(arrayDate[1],10);if(2===parseInt(arrayDate[0],10)){var intYear=parseInt(arrayDate[2]);bPassed=(intYear%4==0&&intDay<=29||intYear%4!=0&&intDay<=28)&&0!=intDay}else null!==arrayLookup[arrayDate[0]]&&(bPassed=intDay<=arrayLookup[arrayDate[0]]&&0!==intDay)}}return bPassed},JsonQueryToRS:function(json){for(var aRS=[],iRow=0;iRow<json.DATA.length;iRow++){for(var oRow={},iCol=0;iCol<json.COLUMNS.length;iCol++)oRow[json.COLUMNS[iCol].toLowerCase()]=json.DATA[iRow][iCol];aRS.push(oRow)}return aRS},scaleVideoContainer:function(){var height=$(window).height()+5,unitHeight=parseInt(height)+"px";$(".homepage-hero-module").css("height",unitHeight)},initBannerVideoSize:function(element){$(element).each(function(){$(this).data("height",$(this).height()),$(this).data("width",$(this).width())}),$.iqUtils.scaleBannerVideoSize(element)},scaleBannerVideoSize:function(element){var videoWidth,videoHeight,windowWidth=$(window).width(),windowHeight=$(window).height()+5;$(element).each(function(){var videoAspectRatio=$(this).data("height")/$(this).data("width");$(this).width(windowWidth),windowWidth<1e3&&(videoHeight=windowHeight,videoWidth=videoHeight/videoAspectRatio,$(this).css({"margin-top":0,"margin-left":-(videoWidth-windowWidth)/2+"px"}),$(this).width(videoWidth).height(videoHeight)),$(".homepage-hero-module .video-container video").addClass("fadeIn animated")})},createUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})},iOSversion:function(){var match=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return match!==undefined&&null!==match&&[parseInt(match[1],10),parseInt(match[2],10),parseInt(match[3]||0,10)]},abbrNum:function(number,decPlaces){decPlaces=Math.pow(10,decPlaces);for(var abbrev=["k","m","b","t"],i=abbrev.length-1;i>=0;i--){var size=Math.pow(10,3*(i+1));if(size<=number){var number=Math.round(number*decPlaces/size)/decPlaces;1e3==number&&i<abbrev.length-1&&(number=1,i++),number+=abbrev[i];break}}return number},getFile:function(file,name){if(""===file)return console.log("path was not set!"),!1;window.location="/components/files.cfc?method=getfile&file="+file+"&name="+name}},$.fn.extend({iqVisibleCallback:function(options){function update(){var counter=0;elements.each(function(){var $this=$(this);$.abovethetop(this,settings)||$.leftofbegin(this,settings)||$.belowthefold(this,settings)||$.rightoffold(this,settings)||($this.trigger("visible"),counter=0)})}var elements=this,settings={threshold:0,callback:null,bindto:$window};return options&&$.extend(settings,options),settings.bindto.bind("scroll",function(){return update()}),this.each(function(){var self=this,$self=$(self);self.loaded=!1,$self.one("visible",function(){if(!self.loaded){self.loaded=!0;var temp=$.grep(elements,function(element){return!element.loaded});elements=$(temp),null!==settings.callback&&"function"==typeof settings.callback&&settings.callback.call(self,$self)}})}),settings.bindto.bind("resize",function(){update()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&settings.bindto.bind("pageshow",function(event){event.originalEvent&&event.originalEvent.persisted&&elements.each(function(){$(this).trigger("visible")})}),$(document).ready(function(){update()}),this},iqFieldType:function(){var sFieldType="undefined";return $(this).is("textarea")?"textarea":$(this).is("button")?"button":($(this).is("select")?sFieldType=$(this).attr("multiple")?"select-multiple":"select":""!==$(this).attr("type")&&null!==$(this).attr("type")&&"undefined"!==$(this).attr("type")&&void 0!==$(this).attr("type")&&(sFieldType=$(this).attr("type").toLowerCase()),sFieldType)},iqFieldValue:function(sValue){if(void 0===sValue){var aValues=[];return this.each(function(){switch($(this).iqFieldType()){case"select-multiple":$(":selected",this).each(function(){aValues.push($(this).val())});break;case"checkbox":case"radio":var sSelector='input[name="'+$(this).attr("name")+'"]',oParent=$(this).parents("form");$(oParent).find(sSelector+":checked").each(function(){-1===$.inArray($(this).val(),aValues)&&aValues.push($(this).val())});break;default:if($(this).attr("tinymce")){var mceCheckObj=tinyMCE.get($(this).attr("id"));if(null!==mceCheckObj){var mceContent=mceCheckObj.getContent();aValues.push(mceContent)}}else aValues.push($(this).val())}}),aValues.join(",")}return this.each(function(){switch($(this).iqFieldType()){case"select-multiple":var aValues=sValue.split(",");$("option:selected",this).prop("selected",!1);for(var i=0;i<aValues.length;i++)sCurrValue=aValues[i],$("option",this).each(function(e,i){$(this).val().toString()===sCurrValue.toString()&&$(this).prop("selected",!0)});break;case"checkbox":case"radio":var sSelector='input[name="'+$(this).attr("name")+'"]',oParent=$(this).parents("form"),aValues=sValue.split(",");$(oParent).find(sSelector+":checked").prop("checked",!1);for(var i=0;i<aValues.length;i++){var sCurrValue=aValues[i];$(oParent).find(sSelector).each(function(e,i){$(this).val().toString()===sCurrValue.toString()&&$(this).prop("checked",!0)})}break;default:$(this).val(sValue)}}),!0},iqForm_Rules:function(){var elements=$(this).find(":input");$.each(elements,function(index,value){var oField=$(value),sFieldID=$(oField).attr("id"),oFieldData=$(oField).data(),oParent=$(oField).parent();$.each(oFieldData,function(rule,value){var oMessageElem=$(oParent).find("#"+sFieldID+"_message");if("required"===(rule=rule.toLowerCase())&&!0===value)switch($(oField).attr("type")){default:$(oField).addClass("iq-form-field-required"),0===oMessageElem.length&&$(oParent).append('<div style="margin-top:5px; display:none;" id="'+sFieldID+'_message" class="text-danger"></div>');break;case"radio":case"checkbox":oMessageElem=$(oParent).parent().parent().find("#"+sFieldID+"_message"),$(oParent).parent().parent().hasClass("iq-form-field-required")||$(oParent).parent().parent().addClass("iq-form-field-required"),0===oMessageElem.length&&$(oParent).parent().parent().append('<div style="margin-top:5px; display:none;" id="'+sFieldID+'_message" class="text-danger"></div>')}else"datatype"===rule&&""!==value&&0===oMessageElem.length&&$(oParent).append('<div style="margin-top:5px; display:none;" id="'+sFieldID+'_message" class="text-danger"></div>')})})},iqForm_Check:function(){var oForm=this,bFormError=!1,oScrollToField=null;$(oForm).find(".has-error").removeClass("has-error has-feedback");var elements=$(this).find(":input");if($.each(elements,function(index,value){if($(this).is(":visible")){
var oField=$(value),sFieldID=$(oField).attr("id"),sFieldType=$(oField).iqFieldType(),oFieldData=$(oField).data(),oMessageElem=$(oField).parent().find("#"+sFieldID+"_message");switch($(oField).attr("type")){default:$(oMessageElem).hide();break;case"radio":case"checkbox":oMessageElem=$(oField).parent().parent().parent().find("#"+sFieldID+"_message"),$(oMessageElem).hide()}$.each(oFieldData,function(rule,rulevalue){rule=rule.toLowerCase(),bFieldError=!1;var oCheck=$(oField).iqField_Check(rule,rulevalue);if(oCheck.passed||(sErrorMessage=oCheck.message,bFormError=!0,bFieldError=!0,oField.offset&&null===oScrollToField&&(oScrollToField=oField)),bFieldError){switch($(oField).attr("type")){default:$(oField).parent().addClass("has-error"),$(oMessageElem).html(sErrorMessage).show();break;case"radio":case"checkbox":oMessageElem=$(oField).parent().parent().parent().find("#"+sFieldID+"_message"),$(oMessageElem).html(sErrorMessage).show()}var onerror=$(oField).data("onerror");onerror&&eval(onerror)}})}}),bFormError){if(null!==oScrollToField&&oScrollToField.offset().top<$(window).scrollTop())try{$("html, body").animate({scrollTop:$(oScrollToField).offset().top},1e3)}catch(e){}return!1}return!0},iqField_Check:function(rule,rulevalue){rule=rule.toLowerCase();var oField=this,retVal=($("#"+$(oField).attr("id")+"_message"),{passed:!0}),sFieldValue=$(oField).iqFieldValue(),labels={required:"The field is required.",compare:"The fields do not match.",url:"The field is not a valid URL.",youtube:"The field is not a valid Youtube URL.",facebook:"The field is not a valid Facebook URL.",alphanumeric:"The field can only contain numbers and letters.",alphanumericcomma:"The field can only contain numbers, letters and commas.",alphanumericspace:"The field can only contain numbers, letters and spaces.",alphanumericspacehyphen:"The field can only contain numbers, letters, spaces and hyphens.",alphanumerichyphen:"The field can only contain numbers, letters and hyphens.",alphanumericspaceapostrophe:"The field can only contain numbers, letters, spaces and apostrophes.",alphanumericspaceperiod:"The field can only contain numbers, letters, periods and spaces.",alphanumericunderscore:"The field can only contain numbers, letters and underscores.",alphanumericspacepunctuation:"The field can only contain numbers, letters, spaces and punctuation(! , . ? ; & : | - #) and ®",metatags:"Metatags can only contain numbers, letters, spaces and punctuation(! , . ? ; & : _ - )",videoprofilelink:"The field can only contain numbers, letters, forward slashes, periods, question marks, dashs, underscores, pluses and equals",datemmddyyyy:"The field is not a valid date. Please use mm/dd/yyyy format.",email:"The field is not a valid email address.",numeric:"The field can only contain numbers.",numericdecimal:"The field can only contain numbers and decimals.",numericgreaterthanorequal:"The field must be less than or equal to the following field and may only contain numbers.",phonenumber:"The field must be a valid number and contain 10 digits. (Area Code + Number)",trailingbackslashreq:"The field requires a trailing backslash.",trailingbackslashorfrontslashreq:"The field requires a trailing backslash or frontslash.",trailingbackslashnotreq:"The field does not require a trailing backslash.",trailingfrontslashreq:"The field requires a trailing frontslash.",trailingfrontslashnotreq:"The field does not require a trailing frontslash.",httprequired:"The field must start with http://",httpnotrequired:"The field must not begin with http://.",leadingfrontslashreq:"The field requires a leading frontslash.",leadingfrontslashnotreq:"The field does not require a leading frontslash.",fullname:"Please enter your first name and last name separated by a space.",alphanumericcommaspace:"The field can only contain numbers, letters, spaces and commas",measurementidformat:"Invalid Tracking ID",measurementid:"The field can only contain single Tracking ID"};switch(rule){case"required":!0===rulevalue&&""===sFieldValue&&(retVal={passed:!1,message:labels.required});break;case"compare":var oElem2=$("#"+rulevalue),sFieldValue2=$(oElem2).iqFieldValue();sFieldValue!==sFieldValue2&&(retVal={passed:!1,message:labels.compare});break;case"numericgreaterthanorequal":var oElem2=$("#"+rulevalue),sFieldValue2=$(oElem2).iqFieldValue(),bCheck=$.iqUtils.checkRegex("numeric",sFieldValue);bCheck||(retVal={passed:!1,message:labels.numeric});var bCheck=$.iqUtils.checkRegex("numeric",sFieldValue2);bCheck||(retVal={passed:!1,message:labels.numeric}),sFieldValue>sFieldValue2&&(retVal={passed:!1,message:labels.numericgreaterthanorequal});break;case"datatype":case"measurementidformat":if(""!==sFieldValue){var bCheck=$.iqUtils.checkRegex(rulevalue.toLowerCase(),sFieldValue);bCheck||(retVal={passed:!1,message:labels[rulevalue.toLowerCase()]})}break;case"measurementid":if(""!==sFieldValue){var bCheck=$.iqUtils.checkRegex(rulevalue.toLowerCase(),sFieldValue);bCheck||(alert("rule",rulevalue),retVal={passed:!1,message:labels[rulevalue.toLowerCase()]})}}return retVal},iqSerializeFormToStruct:function(options){var defaults={includeblanks:!0,ignorefields:[0]},oSettings=$.extend(defaults,options),oFields={},elements=$(this).find(":input");return $.each(elements,function(index,value){var oField=$(value),sFieldID=$(oField).attr("id"),sFieldName=$(oField).attr("name"),sFieldValue=$(oField).iqFieldValue(),sFieldType=$(oField).attr("type");void 0!==sFieldName&&(!oSettings.includeblanks&&""===sFieldValue||-1!==$.inArray(sFieldID,oSettings.ignorefields)||(oFields[sFieldName]?"radio"!==sFieldType&"checkbox"!==sFieldType&&(oFields[sFieldName]+=","+sFieldValue):oFields[sFieldName]=sFieldValue))}),oFields},iqToWindowHeight:function(aToSubtract){"string"==typeof aToSubtract?aToSubtract=[aToSubtract]:void 0===aToSubtract&&(aToSubtract=[]);var iToSubtract=0;$.each(aToSubtract,function(i){iToSubtract+=$(aToSubtract[i]).outerHeight()});var iHeight=$(window).outerHeight()-iToSubtract+"px";$(this).outerHeight(iHeight)},iqTinyMCE:function(options){var i,t=tinyMCE.editors;for(i in t)t.hasOwnProperty(i)&&t[i].remove();var defaults={width:"100%",height:"800"},oSettings=$.extend(defaults,options);oTextArea=this,$(oTextArea).attr("tinymce",!0),tinymce.init({mode:"specific_textareas",valid_elements:"*[*]",width:oSettings.width,height:oSettings.height,forced_root_block:"",menubar:!1,relative_urls:!1,browser_spellcheck:!0,theme:"modern",style_formats:[{title:"Fonts",items:[{title:"Open Sans",inline:"span",styles:{"font-family":"Open Sans"}},{title:"Arial",inline:"span",styles:{"font-family":"arial"}},{title:"Book Antiqua",inline:"span",styles:{"font-family":"book antiqua"}},{title:"Comic Sans MS",inline:"span",styles:{"font-family":"comic sans ms,sans-serif"}},{title:"Courier New",inline:"span",styles:{"font-family":"courier new,courier"}},{title:"Georgia",inline:"span",styles:{"font-family":"georgia,palatino"}},{title:"Helvetica",inline:"span",styles:{"font-family":"helvetica"}},{title:"Impact",inline:"span",styles:{"font-family":"impact,chicago"}},{title:"Symbol",inline:"span",styles:{"font-family":"symbol"}},{title:"Tahoma",inline:"span",styles:{"font-family":"tahoma"}},{title:"Terminal",inline:"span",styles:{"font-family":"terminal,monaco"}},{title:"Times New Roman",inline:"span",styles:{"font-family":"times new roman,times"}},{title:"Verdana",inline:"span",styles:{"font-family":"Verdana"}}]},{title:"Font Sizes",items:[{title:"10px",inline:"span",styles:{fontSize:"10px"}},{title:"12px",inline:"span",styles:{fontSize:"12px"}},{title:"14px",inline:"span",styles:{fontSize:"14px"}},{title:"16px",inline:"span",styles:{fontSize:"16px"}},{title:"18px",inline:"span",styles:{fontSize:"18px"}},{title:"20px",inline:"span",styles:{fontSize:"20px"}},{title:"22px",inline:"span",styles:{fontSize:"22px"}},{title:"24px",inline:"span",styles:{fontSize:"24px"}},{title:"26px",inline:"span",styles:{fontSize:"26px"}},{title:"28px",inline:"span",styles:{fontSize:"28px"}},{title:"30px",inline:"span",styles:{fontSize:"30px"}}]}],toolbar1:"code | undo redo | styleselect | forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent  | table | link images outsideimages",plugins:["advlist autolink lists link charmap print preview hr anchor pagebreak images","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template textcolor"],editor_selector:$(oTextArea).attr("class")})},iqRecenterDialog:function(sSelector){this.each(function(){var oDialog=this,iPosX=$(oDialog).position().left-document.scrollLeft,iPosY=$(oDialog).position().top-document.scrollTop;$(oDialog).dialog("option","position",[iPosX,iPosY])})},iqFieldFormat:function(pOptions){if(void 0===pOptions)var pOptions={};var defaults={min:0,max:0,displayMin:"{{val}}",displayMax:"{{val}}",displaySingle:"{{val}}",displayMultiple:"{{val}}",displayDefault:"{{val}}",format:"numeric"};this.each(function(){function _format(pVal){switch(options.format){case"numeric":pVal+="";for(var rgx=/\d+\.$/;rgx.test(pVal);)pVal=pVal.replace(rgx,"1,2");break;case"numericdecimal":pVal+="";for(var rgx=/[^\d.]/i;rgx.test(pVal);)pVal=pVal.replace(rgx,"$1,$2");break;case"numericdecimalcomma":pVal+="";for(var rgx=/[^\d.]/i;rgx.test(pVal);)pVal=pVal.replace(rgx,"$1,$2");pVal=pVal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");break;case"numericdecimalcommadollar":pVal+="";for(var rgx=/[^\d.]/i;rgx.test(pVal);)pVal=pVal.replace(rgx,"$1,$2");pVal="$"+pVal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return pVal}var elmValue=$(this),elmDisplay=$(elmValue).clone(),elmParent=elmValue.parent(),sID=elmValue.attr("id"),sName=elmValue.attr("name"),options=$.extend({},defaults,pOptions);elmDisplay.appendTo(elmParent),elmDisplay.attr("id",sID+"-display"),elmDisplay.attr("name",sName+"-display"),elmValue.attr("type","hidden");var regFormats={numeric:/([^0-9])/g,numericdecimal:/([^.0-9])/g,numericdecimalcomma:/([^.0-9])/g,numericdecimalcommadollar:/([^.0-9])/g,any:""},regFormat=regFormats[options.format];elmDisplay.bind("focus",function(){"false"!==$(this).attr("data-tooltip")&&(elmDisplay.val(""),$(elmDisplay).tooltip({title:"Range "+_format(options.min)+" - "+_format(options.max),trigger:"manual"}).tooltip("show"),setTimeout(function(){$(elmDisplay).tooltip("destroy")},3e3))}).bind("blur",function(){""===elmDisplay.val()?elmDisplay.val(elmParent.data("fieldformat-label")):elmValue.val(elmDisplay.val().replace(regFormat,"")).trigger("change")}).bind("keypress",function(event){var key=String.fromCharCode(event.charCode?event.charCode:event.which);return new RegExp(regFormat).test(key)?(event.preventDefault(),!1):elmDisplay.val()+key>options.max?(event.preventDefault(),$(elmDisplay).tooltip({title:"Max value "+_format(options.max),trigger:"manual"}).tooltip("show"),setTimeout(function(){$(elmDisplay).tooltip("destroy")},3e3),!1):elmDisplay.val()+key<options.min?(event.preventDefault(),$(elmDisplay).tooltip({title:"Min value "+_format(options.min),trigger:"manual"}).tooltip("show"),setTimeout(function(){$(elmDisplay).tooltip("destroy")},3e3),!1):void 0}).bind("cut copy paste",function(event){event.preventDefault()}),elmValue.bind("change",function(){var tVal=_format(elmValue.val());switch(options.format){case"numeric":if(tVal=parseInt(tVal),options.min=parseInt(options.min),options.max=parseInt(options.max),tVal===options.min)var tDisplay=options.displayMin.replace("{{val}}",tVal);else if(tVal===options.max)var tDisplay=options.displayMax.replace("{{val}}",tVal);else if(1===tVal)var tDisplay=options.displaySingle.replace("{{val}}",tVal);else var tDisplay=options.displayMultiple.replace("{{val}}",tVal);break;case"any":case"numericdecimal":case"numericdecimalcomma":case"numericdecimalcommadollar":if(tVal==options.min)var tDisplay=options.displayMin.replace("{{val}}",$(this).attr("data-displaymin"));else if(tVal===options.max)var tDisplay=options.displayMax.replace("{{val}}",tVal);else if(1===tVal)var tDisplay=options.displaySingle.replace("{{val}}",tVal);else var tDisplay=options.displayMultiple.replace("{{val}}",tVal);break;default:var tDisplay=options.displayDefault.replace("{{val}}",tVal)}elmDisplay.val(tDisplay),elmParent.data("fieldformat-label",tDisplay)}),elmValue.trigger("change")})},iqPlusMinus:function(pOptions){if(void 0===pOptions)var pOptions={};var defaults={min:0,max:0,values:[],type:"numeric"};this.each(function(){var elmValue=$(this),elmParent=elmValue.parent(),options=$.extend({},defaults,pOptions);$.each(options,function(index,value){var tAttr=elmValue.attr("plusminus-"+index);void 0!==tAttr&&("object"==typeof options[index]&&(value=tAttr.substring(1).substring(0,tAttr.length-2).split("','")),options[index]=value)});var regFormats={numeric:/([^0-9])/g};options.type;elmParent.data("plusminus-index",options.values.indexOf(elmValue.val()));var html=['<div class="iq-plusminus">','<button type="button" class="btn btn-xs" plusminus-type="plus" tabindex="-1"><i class="fa fa-plus"></i><span class="sr-only">Add</span></button>','<button type="button" class="btn btn-xs" plusminus-type="minus" tabindex="-1"><i class="fa fa-minus"></i><span class="sr-only">Remove</span></button>',"</div>"];elmParent.append(html.join("")),elmParent.find('button[plusminus-type="plus"]').click(function(elm){if(elm.preventDefault(),options.values.length>0){var tPos=elmParent.data("plusminus-index");if(tPos+1>options.values.length-1)return!1;tVal=options.values[tPos+1],elmParent.data("plusminus-index",tPos+1)}else{var tVal=parseInt(elmValue.val());if(isNaN(tVal))tVal=options.min;else{if(!(tVal<options.max))return!1;tVal++}}elmValue.val(tVal).trigger("change")}),elmParent.find('button[plusminus-type="minus"]').click(function(elm){if(elm.preventDefault(),options.values.length>0){var tPos=elmParent.data("plusminus-index");if(tPos-1<0)return!1;tVal=options.values[tPos-1],elmParent.data("plusminus-index",tPos-1)}else{var tVal=parseInt(elmValue.val());if(isNaN(tVal))tVal=options.min;else{if(!(tVal>options.min))return!1;tVal--}}elmValue.val(tVal).trigger("change")})})},iqTextDropdown:function(pOptions){if(void 0===pOptions)var pOptions={};var defaults={values:[]};this.each(function(){var elmValue=$(this),elmParent=elmValue.parent(),options=$.extend({},defaults,pOptions);$.each(options,function(index,value){var tAttr=elmValue.attr("textdropdown-"+index);void 0!==tAttr&&("object"==typeof options[index]&&(value=tAttr.substring(1).substring(0,tAttr.length-2).split("','")),options[index]=value)});for(var regFormats={numeric:/([^0-9])/g},items=(options.type,[]),i=0;i<options.values.length;i++)aVal=options.values[i].split("|"),tVal=aVal[0],tLabel=aVal[1]||aVal[0],"-"===tVal?items.push('<li class="divider"></li>'):items.push('<li data-li-number="'+i+'" data-fieldid="'+elmValue.attr("id")+'" data-fieldvalue="'+tVal+'"><a onclick="$(\'#'+elmValue.attr("id")+"').val('"+tVal+"'); $('#"+elmValue.attr("id")+"').trigger('change').trigger('click');\" href=\"javascript:void(0);\">"+tLabel+"</a></li>");var html=['<div class="btn-group iq-textdropdown">','<button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" tabindex="-1"><i class="fa fa-chevron-down"></i><span class="sr-only">Drop-Down List of '+tLabel+" Values</span></button>",'<ul class="dropdown-menu pull-right">',items.join(""),"</ul>","</div>"];elmParent.append(html.join(""))})},iqSelectDropdown:function(){this.each(function(){var elmValue=$(this),elmParent=elmValue.parent(),items=[];elmValue.find("option").each(function(){"-"===this.value?items.push('<li class="divider"></li>'):items.push("<li><a onclick=\"$('#"+elmValue.attr("id")+"').val('"+this.value+"'); $('#"+elmValue.attr("id")+"-display').val('"+this.text+'\'); " href="javascript:void(0);">'+this.text+"</a></li>")});var html=['<input type="text" class="form-control" id="'+elmValue.attr("id")+'-display" name="'+elmValue.attr("name")+'-display" value="'+elmValue.find("option:selected").text()+' " aria-label="Enter '+elmValue.attr("name")+'" label="Enter '+elmValue.attr("name")+'">','<div class="btn-group iq-selectdropdown">','<button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" tabindex="-1"><i class="fa fa-chevron-down"></i><span class="sr-only">Drop-Down List of '+elmValue.attr("name")+" Values</span></button>",'<ul class="dropdown-menu pull-right">',items.join(""),"</ul>","</div>"];elmParent.append(html.join("")),$("#"+elmValue.attr("id")+"-display").bind("keypress cut copy paste",function(event){return event.preventDefault(),!1}),elmValue.hide()})},iqHiddenEmail:function(){$(this).each(function(index,element){void 0!==$(this).data("email_name")&&$(this).append($(this).data("email_name")+"@"+$(this).data("email_domain"))})},bsModal:function(options){var oModal=this,id=this.selector.replace("#","").replace(".","");opt=options||{},void 0===opt.title&&(opt.title=""),void 0===opt.body&&(opt.body=""),void 0===opt.maxwidth&&(opt.maxwidth=""),void 0===opt.backdrop&&(opt.backdrop=!0),void 0===opt.fade&&(opt.fade=!0);var oDialog=$(oModal),bsVersion=$.fn.tooltip.Constructor.VERSION;if(opt.body.indexOf("comps not available for the specified property identifier")>=0&&(opt.body="Looks like we could not find a home evaluation for this property."),0===oDialog.length){var dialogHTML=[];"5.0.2"==bsVersion?(dialogHTML.push('<div class="modal'+(opt.fade?" fade":"")+'" id="'+id+'" tabindex="-1" aria-labelledby="'+id+'_label">'),dialogHTML.push('    <div class="modal-dialog modal-xl">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <h5 class="modal-title" id="'+id+'_label">'+opt.title+"</h5>"),dialogHTML.push('                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body">'+opt.body+"</div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")):"4.1.3"==bsVersion?(dialogHTML.push('<div class="modal'+(opt.fade?" fade":"")+'" id="'+id+'" tabindex="-1" role="dialog" aria-labelledby="'+id+'_label">'),dialogHTML.push('    <div class="modal-dialog modal-lg" role="document">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <h5 class="modal-title" id="'+id+'_label">'+opt.title+"</h5>"),dialogHTML.push('                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body">'+opt.body+"</div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")):(dialogHTML.push('<div class="modal'+(opt.fade?" fade":"")+'" id="'+id+'" tabindex="-1" role="dialog" aria-labelledby="'+id+'_title">'),dialogHTML.push('    <div class="container" role="document">'),dialogHTML.push('        <div class="modal-content">'),dialogHTML.push('            <div class="modal-header">'),dialogHTML.push('                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>'),dialogHTML.push('                <h4 class="modal-title" id="'+id+'_title">'+opt.title+'<span class="sr-only">Modal Title</span></h4>'),dialogHTML.push("            </div>"),dialogHTML.push('            <div class="modal-body">'+opt.body+"</div>"),dialogHTML.push('            <div class="modal-footer">'),dialogHTML.push('                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'),dialogHTML.push("            </div>"),dialogHTML.push("        </div>"),dialogHTML.push("    </div>"),dialogHTML.push("</div>")),$("body").append(dialogHTML.join("")),oModal=$("#"+id)}if("5.0.2"==bsVersion){var myModalElm=document.getElementById(id);new bootstrap.Modal(myModalElm).show(),myModalElm.addEventListener("hidden.bs.modal",function(){setTimeout(function(){$(oModal).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)})}else $(oModal).modal(opt),""!==opt.maxwidth&&$(oModal).find(".container").css({"max-width":opt.maxwidth}),$(oModal).on("hidden.bs.modal",function(){setTimeout(function(){$(oModal).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)})},bsFullScreenModal:function(options){var oModal=this,id=this.selector.replace("#","").replace(".","");if(opt=options||{},void 0===opt.title&&(opt.title=""),void 0===opt.body&&(opt.body=""),void 0===opt.scrollable&&(opt.scrollable=!0),0===$(oModal).length){var dialogHTML=[];dialogHTML.push('<div class="modal fade" id="'+id+'" tabindex="-1" role="dialog" aria-labelledby="'+id+'_title" style="z-index: 12010;">'),dialogHTML.push('<div class="container-fluid" role="document" style="position: relative; padding-left:0; padding-right:0;">'),dialogHTML.push('<div class="modal-content">'),dialogHTML.push('<button type="button" class="close" data-dismiss="modal" aria-label="Close" style="position:fixed; right:20px; top:20px;z-index: +7;border: 1px solid;padding: 2px; background-color: rgba(255,255,255, .75); text-shadow:none;opacity: .5;filter: alpha(opacity=.5);"><i class="fa fa-fw fa-times"></i></button>'),dialogHTML.push('<div class="modal-body" style="padding:0;">'+opt.body+"</div>"),dialogHTML.push("</div>"),dialogHTML.push("</div>"),dialogHTML.push("</div>"),$("body").append(dialogHTML.join("")),oModal=$("#"+id)}$(oModal).modal(opt),opt.scrollable||$(oModal).css({overflow:"hidden"}),$(oModal).on("hidden.bs.modal",function(){setTimeout(function(){$(oModal).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)})},bsYesNo:function(options){var oModal=this,id=this.selector.replace("#","").replace(".",""),opt=options||{};opt.title||(opt.title="Confirm"),opt.question||(opt.question="Are you sure?");var oDialog=$(oModal);if(opt.title.indexOf("comps not available for the specified property identifier")>=0&&(opt.title="Looks like we could not find a home evaluation for this property."),0===oDialog.length){var dialogHTML=[];dialogHTML.push('<div class="modal fade" id="'+id+'" tabindex="-1" role="dialog" aria-labelledby="'+id+'_title" style="z-index: 12010;">'),dialogHTML.push('<div class="modal-dialog" role="document" style="position: relative;">'),dialogHTML.push('<div class="modal-content">'),dialogHTML.push('<div class="modal-header">'),dialogHTML.push('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>'),dialogHTML.push('<h4 class="modal-title" id="'+id+'_title">'+opt.title+'<span class="sr-only">Modal Title</span></h4>'),dialogHTML.push("</div>"),dialogHTML.push('<div class="modal-body">'+opt.question+"</div>"),dialogHTML.push('<div class="modal-footer" style="padding:5px;">'),dialogHTML.push('<button class="btn btn-success" id="'+id+'-yes-button" style="margin:10px;">Yes</button> <button class="btn btn-danger" id="'+id+'-no-button" style="margin:10px;">No</button>'),dialogHTML.push("</div>"),dialogHTML.push("</div>"),dialogHTML.push("</div>"),dialogHTML.push("</div>"),$("body").append(dialogHTML.join("")),oModal=$("#"+id),$("#"+id+"-yes-button").on("click",function(){options.onYes.apply(this),$(oModal).modal("hide")}),$("#"+id+"-no-button").on("click",function(){options.onNo.apply(this),$(oModal).modal("hide")})}$(oModal).modal(opt),$(oModal).on("hidden.bs.modal",function(){setTimeout(function(){$(oModal).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)})},preventBodyScroll:function(){$(this).each(function(index,element){$(element).bind("mousewheel DOMMouseScroll",function(e){var e0=e.originalEvent,delta=e0.wheelDelta||-e0.detail;this.scrollTop+=30*(delta<0?1:-1),e.preventDefault()})})}}),$.belowthefold=function(element,settings){return(settings.container===undefined||settings.container===window?(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop():$(settings.container).offset().top+$(settings.container).height())<=$(element).offset().top-settings.threshold},$.rightoffold=function(element,settings){return(settings.container===undefined||settings.container===window?$window.width()+$window.scrollLeft():$(settings.container).offset().left+$(settings.container).width())<=$(element).offset().left-settings.threshold},$.abovethetop=function(element,settings){return(settings.container===undefined||settings.container===window?$window.scrollTop():$(settings.container).offset().top)>=$(element).offset().top+settings.threshold+$(element).height()},$.leftofbegin=function(element,settings){return(settings.container===undefined||settings.container===window?$window.scrollLeft():$(settings.container).offset().left)>=$(element).offset().left+settings.threshold+$(element).width()},$.inviewport=function(element,settings){return!($.rightoffold(element,settings)||$.leftofbegin(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0})}});var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(o){if(null===o)return"null";var type=typeof o;if("undefined"===type)return undefined;if("number"===type||"boolean"===type)return""+o;if("string"===type)return $.quoteString(o);if("object"===type){if("function"==typeof o.toJSON)return $.toJSON(o.toJSON());if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();return month<10&&(month="0"+month),day<10&&(day="0"+day),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),milli<100&&(milli="0"+milli),milli<10&&(milli="0"+milli),'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){for(var ret=[],i=0;i<o.length;i++)ret.push($.toJSON(o[i])||"null");return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){if("number"===(type=typeof k))name='"'+k+'"';else{if("string"!==type)continue;name=$.quoteString(k)}type=typeof o[k],"function"!==type&&"undefined"!==type&&(val=$.toJSON(o[k]),pairs.push(name+":"+val))}return"{"+pairs.join(",")+"}"}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(string){return string.match(escapeable)?'"'+string.replace(escapeable,function(a){var c=meta[a];return"string"==typeof c?c:(c=a.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+string+'"'},$.iqEditPopout=function(action,contents,onClose){if("open"===action.toLowerCase()||"show"===action.toLowerCase()){var modalCount=$(".edit-modal").length+1,modalHTML='<div class="modal right fade edit-modal" id="editModal_'+modalCount+'" role="dialog" aria-labelledby="editModal_'+modalCount+'"><div class="modal-dialog" role="document"><div class="modal-content" id="editModal_content_'+modalCount+'" style="position:relative;"><div onclick="$.iqEditPopout(\'close\'); $.iqUtils.history.push(\'/\')" style="cursor:pointer; position:absolute; top:0; left:0; padding:14px; "></i><i class="fa fa-times"></i></div>'+contents+"</div></div></div>";$("body").append(modalHTML);$("#editModal_"+modalCount).modal({keyboard:!1,show:!0,backdrop:!1}),$("#editModal_"+modalCount).on("hidden.bs.modal",function(e){$("#editModal_"+modalCount).remove(),"function"==typeof onClose&&onClose()})}else{var modalCount=$(".edit-modal").length;$("#editModal_"+modalCount).modal("hide")}},$.isJSON=function(str){try{JSON.parse(str)}catch(e){return!1}return!0}}(jQuery,window,document);
//# sourceMappingURL=utils.min.js.map
;
/* file: ../assets/js/min/vendor.min.js */
!function($){"use strict";$(document).ready(function(){1===$("#iq_vendor_map").length&&$.iqVendor.map()}),$.iqVendor={map:function(){$("#iq_vendor_map").iqGoogleMaps({Lat:$("#iq_vendor_map").data("lat"),Lon:$("#iq_vendor_map").data("lon"),ZoomLevel:18,mapTypeId:"roadmap"})},email_dialog:function(sTo,sPublicID){$("body").append('<div id="email_form_dialog"><div id="email_form_body" style="padding:20px;"></div></div>'),$("#email_form_dialog").dialog({closeOnEscape:!1,title:"Email",width:500,resizable:!0,autoOpen:!1,bgiframe:!0,modal:!0,beforeClose:function(){$(this).remove()},zIndex:900}),$.ajax({url:"/components/vendor_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"Email"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#email_form_body").html(jsonRet.LAYOUT),$("#email_form").iqForm_Rules(jsonRet.FORMRULES),$("#email_form-to").iqFieldValue(sTo),$("#email_form-publicid").iqFieldValue(sPublicID),$("#email_form_dialog").dialog("open")):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})},email_save:function(){if(!0===$("#email_form").iqForm_Check())return $.iqUtils.uiProcessing("open"),setTimeout(function(){var oDataDefaults={ReturnFormat:"json",Method:"doSendEmail"},oDataFields=$("#email_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);$.ajax({url:"/components/vendors.cfc",type:"POST",dataType:"json",async:!1,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#email_form_dialog").dialog("close"),$("#email_form_dialog").remove(),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})},500),!1}}}(jQuery);
//# sourceMappingURL=vendor.min.js.map
;
/* file: ../assets/js/min/vendorportal.min.js */
!function($){"use strict";$(document).ready(function(){$("#vendorportal_maintain_form").length<0&&$("#vendorportal_maintain_form").iqForm_Rules(),$("#iq_vendorportal_search").datepicker({inputs:$('#iq_vendorportal_search input[name="updatedatetime"]'),clearBtn:!0,autoclose:!0,orientation:"bottom"})}),$.iqVendorPortal={customurl:"",login_save:function(){$.iqUtils.uiProcessing("open"),$.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",Method:"doLogin",userid:$("#iq_vendorportal_login_form-userid").iqFieldValue(),password:$("#iq_vendorportal_login_form-password").iqFieldValue()},success:function(jsonRet){switch(jsonRet.STATUS){case 0:$.iqUtils.cookie("vendor_isauthenticated","T",365),$.iqUtils.cookie("vendor_companyname",jsonRet.COMPANYNAME,365),$.iqUtils.cookie("vendor_email",jsonRet.EMAIL,365),$.iqUtils.cookie("vendor_vendorid",jsonRet.VENDORID,365),$.iqUtils.cookie("vendor_vendorsource",jsonRet.VENDORSOURCE,365),"T"===$("#iq_vendorportal_login_form-savelogin").iqFieldValue()?($.iqUtils.cookie("vendor_userid",jsonRet.USERID,365),$.iqUtils.cookie("vendor_password",jsonRet.PASSWORD,365),$.iqUtils.cookie("vendor_savelogin","T",365)):($.iqUtils.cookie("vendor_userid",jsonRet.USERID),$.iqUtils.cookie("vendor_password",jsonRet.PASSWORD),$.iqUtils.cookie("vendor_savelogin","F",-365)),"T"===$("#iq_vendorportal_login_form-autologin").iqFieldValue()?$.iqUtils.cookie("vendor_autologin","T",365):$.iqUtils.cookie("vendor_autologin","F",-365),$("#vendorportal_login_form_dialog").dialog("close"),$("#vendorportal_login_form_dialog").remove(),setTimeout(function(){window.location=window.location},100);break;case 1:case 2:$.iqUtils.uiProcessing("close"),$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}})},profile_save:function(){$.iqUtils.uiProcessing("open");var oDataDefaults={ReturnFormat:"json",Method:"ProcessVendor"},oDataFields=$("#vendorportal_maintain_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);return $.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:var action=$("#vendorportal_maintain_form-Action").iqFieldValue();if(1===$("#vendorportal_maintain_dialog").length&&$("#vendorportal_maintain_dialog").remove(),"Create"===action){$("#iq_vendorportal_dialog").bsModal({backdrop:!0,title:"Vendor Portal",body:'<div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><p>Your account has been created but set to inactive. <br><br>An email has been sent to the email address you provided. Please follow the directions in the email to activate your account.</p></div></div>'}),$("#iq_vendorportal_dialog .modal-content").css({"max-width":"600px",margin:"0 auto"}),$("#iq_vendorportal_dialog .modal-content").css({"margin-top":"100px"})}else $.iqUtils.uiMessage("",jsonRet.MESSAGE);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE);break;case 2:$.iqUtils.uiMessage("","An account with this email already exists. An email with credentials has been sent to the email address provided.")}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},logout:function(){return $.iqUtils.cookie("vendor_isauthenticated","F"),$.iqUtils.cookie("vendor_autologin","F"),self.location="/vendorportal",!0},changestatus:function(orderid,status,ok,note){if(""===orderid)return $.iqUtils.uiMessage("Alert","Please select at least 1 order"),!1;void 0===note&&(note="");var bOk=ok||!1;if("I"===status.toUpperCase()){if(!bOk)return $("#orders_yesno").bsYesNo({question:"Are you sure you want to flag the selected orders as In-Process?",onYes:function(){$.iqVendorPortal.changestatus(orderid,status,!0)},onNo:function(){return!1}}),!1;$.iqUtils.uiProcessing("open")}else if(!bOk){var oDialog=$("#vendorportal_note");if(0===oDialog.length){var dialogHTML=[];dialogHTML.push('<div class="modal fade" id="vendorportal_note" tabindex="-1" role="dialog" aria-labelledby="vendorportal_note_title" style="z-index: 12010;">'),dialogHTML.push('<div class="modal-dialog" role="document" style="position: relative;">'),dialogHTML.push('<div class="modal-content">'),dialogHTML.push('<div class="modal-header">'),dialogHTML.push('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),dialogHTML.push('<h4 class="modal-title" id="vendorportal_note_title">Vendor Note</h4>'),dialogHTML.push("</div>"),dialogHTML.push('<div class="modal-body"><textarea name="note" id="vendorportal_note-note" style="width:100%;"></textarea></div>'),dialogHTML.push('<div class="modal-footer" style="padding:5px;">'),dialogHTML.push('<button class="btn btn-danger" id="vendorportal_note-button" style="margin:10px;">Ok</button> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>'),dialogHTML.push("</div>"),dialogHTML.push("</div>"),dialogHTML.push("</div>"),dialogHTML.push("</div>"),$("body").append(dialogHTML.join("")),oDialog=$("#vendorportal_note"),$("#vendorportal_note-button").on("click",function(){$.iqVendorPortal.changestatus(orderid,status,!0,$("#vendorportal_note-note").val()),$(oDialog).modal("hide")})}return $(oDialog).modal(),$(oDialog).on("hidden.bs.modal",function(){setTimeout(function(){$(oDialog).remove(),$(".modal").each(function(index,element){if($(element).is(":visible"))return $("body").addClass("modal-open"),!1})},200)}),!1}var oData={ReturnFormat:"json",Method:"changestatus",orderid:orderid,status:status,note:note};return $.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:$(".alert").html(jsonRet.MESSAGE).show("slow"),setTimeout(function(){self.location=self.location},1e3);break;case 1:$.iqUtils.uiMessage("",jsonRet.DETAIL)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},csv:function(){$.iqUtils.uiProcessing("open");var oData={ReturnFormat:"json",Method:"csv",updatedatetime:$("#iq_vendorportal_search-updatedatetime_start").iqFieldValue()+","+$("#iq_vendorportal_search-updatedatetime_end").iqFieldValue()};return $.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:oData,success:function(jsonRet){switch($.iqUtils.uiProcessing("close"),jsonRet.STATUS){case 0:window.open(jsonRet.CSV);break;case 1:$.iqUtils.uiMessage("",jsonRet.MESSAGE)}},error:function(httpRet){$.iqUtils.uiProcessing("close"),void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$.iqUtils.uiMessage("",httpRet.MESSAGE):$.iqUtils.uiMessage("",httpRet.responseText)}}),!1},get_people:function(vendorid,contactid){$.iqUtils.uiContentProcessing("#iq_vendors_notes_processing"),$.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:{vendorid:vendorid,contactid:contactid,layout:"details",method:"get_people"},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_vendors_people_grid").html(jsonRet.LAYOUT):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},process_note:function(vendorid,contactid,publicid){if($("#iq_vendors_form").iqForm_Rules(),$("#iq_vendors_form").iqForm_Check(),!1!==$("#iq_vendors_form").iqForm_Check()){var note=$("[data-note]").iqFieldValue();$.iqUtils.uiContentProcessing("#iq_vendors_notes_processing"),$.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:{vendorid:vendorid,contactid:contactid,publicid:publicid,note:note,method:"process_note"},success:function(jsonRet){0===jsonRet.STATUS?($.iqVendorPortal.get_people(vendorid,contactid),$("[data-email]").each(function(){if("t"===$(this).iqFieldValue().toLowerCase()){var publicid=$(this).attr("data-publicid"),emailaddress=$(this).attr("data-email"),from=$(this).attr("data-from"),name=$(this).attr("data-name");$.ajax({url:"/components/email_layout.cfc",type:"POST",dataType:"json",async:!0,data:{publicid:publicid,toaddress:emailaddress,body:name+",<br><br>"+note,method:"email_responsive_layout"},success:function(jsonRet){0===jsonRet.STATUS?$.ajax({url:"/components/mail.cfc",type:"POST",dataType:"json",async:!0,data:{publicid:publicid,to:emailaddress,from:from,subject:"Vendor Note",bodydata:jsonRet.LAYOUT,method:"sendmail"},success:function(jsonRet){0===jsonRet.STATUS||$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}}):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})}},process_statuscode:function(vendorid,contactid,statuscode){$("#iq_save_statuscode").fadeIn(100),$.ajax({url:"/components/vendorportal.cfc",type:"POST",dataType:"json",async:!0,data:{vendorid:vendorid,contactid:contactid,statuscode:statuscode,method:"process_statuscode"},success:function(jsonRet){0===jsonRet.STATUS?$("#iq_save_statuscode").fadeOut(1e3):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))}})},getTransactionVendorDocs:function(transactionid,vendorid){$("#iq_transactiondocuments_dialog").bsModal({backdrop:!0,title:"Transaction Documents",maxwidth:"600",body:$.iqEditor.BuildLoadingDialogHtml("Loading")}),$.ajax({url:"/components/vendorportal_layout.cfc",type:"POST",dataType:"json",async:!0,data:{ReturnFormat:"json",transactionid:transactionid,vendorid:vendorid,Method:"TransactionVendorDocs"},success:function(jsonRet){0===jsonRet.STATUS?($("#iq_transactiondocuments_dialog .modal-body").html(jsonRet.LAYOUT),$("#iq_transactiondocuments_dialog .modal-footer").css({display:"none"}),$("#iq_transactiondocuments_dialog .modal-body").css({padding:"0"})):$.iqUtils.uiMessage("",jsonRet.MESSAGE+"<br>"+jsonRet.DETAIL+"<br>"+encodeURI(jsonRet.CONTENT))},error:function(httpRet){void 0!==httpRet.MESSAGE&&void 0!==httpRet.DETAIL?$("#iq_transactiondocuments_dialog .modal-bod").html(httpRet.CONTENT):$("#iq_transactiondocuments_dialog .modal-bod").html(httpRet.responseText)}})}}}(jQuery);
//# sourceMappingURL=vendorportal.min.js.map
;
/* file: ../assets/js/min/vendors.min.js */
!function($){"use strict";$.iqVendors={email_dialog:function(sTo,sPublicID){$("body").append('<div id="email_form_dialog"><div id="email_form_body" style="padding:20px;"></div></div>'),$("#email_form_dialog").dialog({closeOnEscape:!1,title:"Email",width:500,resizable:!0,autoOpen:!1,bgiframe:!0,modal:!0,beforeClose:function(){$(this).remove()},zIndex:900}),$.ajax({url:"/components/vendors_layout.cfc",type:"POST",dataType:"json",async:!1,data:{ReturnFormat:"json",Method:"Email"},success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#email_form_body").html(jsonRet.LAYOUT),$("#email_form").iqForm_Rules(jsonRet.FORMRULES),$("#email_form-to").iqFieldValue(sTo),$("#email_form-publicid").iqFieldValue(sPublicID),$("#email_form_dialog").dialog("open")):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})},email_save:function(){if(!0===$("#email_form").iqForm_Check())return $.iqUtils.uiProcessing("open"),setTimeout(function(){var oDataDefaults={ReturnFormat:"json",Method:"doSendEmail"},oDataFields=$("#email_form").iqSerializeFormToStruct(),oData=$.extend(oDataDefaults,oDataFields);$.ajax({url:"/components/vendors.cfc",type:"POST",dataType:"json",async:!1,data:oData,success:function(jsonRet){$.iqUtils.uiProcessing("close"),0===jsonRet.STATUS?($("#email_form_dialog").dialog("close"),$("#email_form_dialog").remove(),$.iqUtils.uiMessage("",jsonRet.MESSAGE,3e3)):$.iqUtils.uiMessage("",jsonRet.MESSAGE,5e3)}})},500),!1}}}(jQuery);
//# sourceMappingURL=vendors.min.js.map
